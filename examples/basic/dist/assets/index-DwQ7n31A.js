var OQ=Object.defineProperty;var kQ=(t,e,A)=>e in t?OQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A;var vr=(t,e,A)=>kQ(t,typeof e!="symbol"?e+"":e,A);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();function tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E_={exports:{}},Ac={},Q_={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),RQ=Symbol.for("react.portal"),LQ=Symbol.for("react.fragment"),PQ=Symbol.for("react.strict_mode"),HQ=Symbol.for("react.profiler"),NQ=Symbol.for("react.provider"),DQ=Symbol.for("react.context"),MQ=Symbol.for("react.forward_ref"),$Q=Symbol.for("react.suspense"),jQ=Symbol.for("react.memo"),KQ=Symbol.for("react.lazy"),Cg=Symbol.iterator;function GQ(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F_=Object.assign,I_={};function sa(t,e,A){this.props=t,this.context=e,this.refs=I_,this.updater=A||U_}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S_(){}S_.prototype=sa.prototype;function xp(t,e,A){this.props=t,this.context=e,this.refs=I_,this.updater=A||U_}var Tp=xp.prototype=new S_;Tp.constructor=xp;F_(Tp,sa.prototype);Tp.isPureReactComponent=!0;var bg=Array.isArray,x_=Object.prototype.hasOwnProperty,Op={current:null},T_={key:!0,ref:!0,__self:!0,__source:!0};function O_(t,e,A){var r,n={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)x_.call(e,r)&&!T_.hasOwnProperty(r)&&(n[r]=e[r]);var i=arguments.length-2;if(i===1)n.children=A;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];n.children=o}if(t&&t.defaultProps)for(r in i=t.defaultProps,i)n[r]===void 0&&(n[r]=i[r]);return{$$typeof:eo,type:t,key:s,ref:a,props:n,_owner:Op.current}}function VQ(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function zQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(A){return e[A]})}var Eg=/\/+/g;function Ad(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zQ(""+t.key):e.toString(36)}function Cl(t,e,A,r,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eo:case RQ:a=!0}}if(a)return a=t,n=n(a),t=r===""?"."+Ad(a,0):r,bg(n)?(A="",t!=null&&(A=t.replace(Eg,"$&/")+"/"),Cl(n,e,A,"",function(l){return l})):n!=null&&(kp(n)&&(n=VQ(n,A+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Eg,"$&/")+"/")+t)),e.push(n)),1;if(a=0,r=r===""?".":r+":",bg(t))for(var i=0;i<t.length;i++){s=t[i];var o=r+Ad(s,i);a+=Cl(s,e,A,o,n)}else if(o=GQ(t),typeof o=="function")for(t=o.call(t),i=0;!(s=t.next()).done;)s=s.value,o=r+Ad(s,i++),a+=Cl(s,e,A,o,n);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wo(t,e,A){if(t==null)return t;var r=[],n=0;return Cl(t,r,"","",function(s){return e.call(A,s,n++)}),r}function WQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(A){(t._status===0||t._status===-1)&&(t._status=1,t._result=A)},function(A){(t._status===0||t._status===-1)&&(t._status=2,t._result=A)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},bl={transition:null},JQ={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:bl,ReactCurrentOwner:Op};function k_(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:wo,forEach:function(t,e,A){wo(t,function(){e.apply(this,arguments)},A)},count:function(t){var e=0;return wo(t,function(){e++}),e},toArray:function(t){return wo(t,function(e){return e})||[]},only:function(t){if(!kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=sa;le.Fragment=LQ;le.Profiler=HQ;le.PureComponent=xp;le.StrictMode=PQ;le.Suspense=$Q;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JQ;le.act=k_;le.cloneElement=function(t,e,A){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=F_({},t.props),n=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Op.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(o in e)x_.call(e,o)&&!T_.hasOwnProperty(o)&&(r[o]=e[o]===void 0&&i!==void 0?i[o]:e[o])}var o=arguments.length-2;if(o===1)r.children=A;else if(1<o){i=Array(o);for(var l=0;l<o;l++)i[l]=arguments[l+2];r.children=i}return{$$typeof:eo,type:t.type,key:n,ref:s,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:DQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NQ,_context:t},t.Consumer=t};le.createElement=O_;le.createFactory=function(t){var e=O_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:MQ,render:t}};le.isValidElement=kp;le.lazy=function(t){return{$$typeof:KQ,_payload:{_status:-1,_result:t},_init:WQ}};le.memo=function(t,e){return{$$typeof:jQ,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};le.unstable_act=k_;le.useCallback=function(t,e){return Ft.current.useCallback(t,e)};le.useContext=function(t){return Ft.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};le.useEffect=function(t,e){return Ft.current.useEffect(t,e)};le.useId=function(){return Ft.current.useId()};le.useImperativeHandle=function(t,e,A){return Ft.current.useImperativeHandle(t,e,A)};le.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Ft.current.useMemo(t,e)};le.useReducer=function(t,e,A){return Ft.current.useReducer(t,e,A)};le.useRef=function(t){return Ft.current.useRef(t)};le.useState=function(t){return Ft.current.useState(t)};le.useSyncExternalStore=function(t,e,A){return Ft.current.useSyncExternalStore(t,e,A)};le.useTransition=function(){return Ft.current.useTransition()};le.version="18.3.1";Q_.exports=le;var fe=Q_.exports;const rd=tc(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZQ=fe,XQ=Symbol.for("react.element"),YQ=Symbol.for("react.fragment"),qQ=Object.prototype.hasOwnProperty,eU=ZQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tU={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,A){var r,n={},s=null,a=null;A!==void 0&&(s=""+A),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)qQ.call(e,r)&&!tU.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:XQ,type:t,key:s,ref:a,props:n,_owner:eU.current}}Ac.Fragment=YQ;Ac.jsx=R_;Ac.jsxs=R_;E_.exports=Ac;var Q=E_.exports,L_={exports:{}},tA={},P_={exports:{}},H_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,S){var U=F.length;F.push(S);e:for(;0<U;){var R=U-1>>>1,T=F[R];if(0<n(T,S))F[R]=S,F[U]=T,U=R;else break e}}function A(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var S=F[0],U=F.pop();if(U!==S){F[0]=U;e:for(var R=0,T=F.length,G=T>>>1;R<G;){var j=2*(R+1)-1,X=F[j],de=j+1,He=F[de];if(0>n(X,U))de<T&&0>n(He,X)?(F[R]=He,F[de]=U,R=de):(F[R]=X,F[j]=U,R=j);else if(de<T&&0>n(He,U))F[R]=He,F[de]=U,R=de;else break e}}return S}function n(F,S){var U=F.sortIndex-S.sortIndex;return U!==0?U:F.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();t.unstable_now=function(){return a.now()-i}}var o=[],l=[],u=1,c=null,d=3,h=!1,f=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var S=A(l);S!==null;){if(S.callback===null)r(l);else if(S.startTime<=F)r(l),S.sortIndex=S.expirationTime,e(o,S);else break;S=A(l)}}function B(F){if(w=!1,g(F),!f)if(A(o)!==null)f=!0,D(_);else{var S=A(l);S!==null&&H(B,S.startTime-F)}}function _(F,S){f=!1,w&&(w=!1,p(E),E=-1),h=!0;var U=d;try{for(g(S),c=A(o);c!==null&&(!(c.expirationTime>S)||F&&!$());){var R=c.callback;if(typeof R=="function"){c.callback=null,d=c.priorityLevel;var T=R(c.expirationTime<=S);S=t.unstable_now(),typeof T=="function"?c.callback=T:c===A(o)&&r(o),g(S)}else r(o);c=A(o)}if(c!==null)var G=!0;else{var j=A(l);j!==null&&H(B,j.startTime-S),G=!1}return G}finally{c=null,d=U,h=!1}}var v=!1,C=null,E=-1,I=5,L=-1;function $(){return!(t.unstable_now()-L<I)}function se(){if(C!==null){var F=t.unstable_now();L=F;var S=!0;try{S=C(!0,F)}finally{S?z():(v=!1,C=null)}}else v=!1}var z;if(typeof m=="function")z=function(){m(se)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,k=O.port2;O.port1.onmessage=se,z=function(){k.postMessage(null)}}else z=function(){y(se,0)};function D(F){C=F,v||(v=!0,z())}function H(F,S){E=y(function(){F(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,D(_))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return A(o)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var S=3;break;default:S=d}var U=d;d=S;try{return F()}finally{d=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,S){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=d;d=F;try{return S()}finally{d=U}},t.unstable_scheduleCallback=function(F,S,U){var R=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?R+U:R):U=R,F){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=U+T,F={id:u++,callback:S,priorityLevel:F,startTime:U,expirationTime:T,sortIndex:-1},U>R?(F.sortIndex=U,e(l,F),A(o)===null&&F===A(l)&&(w?(p(E),E=-1):w=!0,H(B,U-R))):(F.sortIndex=T,e(o,F),f||h||(f=!0,D(_))),F},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(F){var S=d;return function(){var U=d;d=S;try{return F.apply(this,arguments)}finally{d=U}}}})(H_);P_.exports=H_;var AU=P_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU=fe,Yt=AU;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,A=1;A<arguments.length;A++)e+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N_=new Set,Qi={};function Wn(t,e){js(t,e),js(t+"Capture",e)}function js(t,e){for(Qi[t]=e,t=0;t<e.length;t++)N_.add(e[t])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,nU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qg={},Ug={};function sU(t){return Of.call(Ug,t)?!0:Of.call(Qg,t)?!1:nU.test(t)?Ug[t]=!0:(Qg[t]=!0,!1)}function aU(t,e,A,r){if(A!==null&&A.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:A!==null?!A.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iU(t,e,A,r){if(e===null||typeof e>"u"||aU(t,e,A,r))return!0;if(r)return!1;if(A!==null)switch(A.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,A,r,n,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=A,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rp,Lp);ct[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rp,Lp);ct[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rp,Lp);ct[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pp(t,e,A,r){var n=ct.hasOwnProperty(e)?ct[e]:null;(n!==null?n.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iU(e,A,n,r)&&(A=null),r||n===null?sU(e)&&(A===null?t.removeAttribute(e):t.setAttribute(e,""+A)):n.mustUseProperty?t[n.propertyName]=A===null?n.type===3?!1:"":A:(e=n.attributeName,r=n.attributeNamespace,A===null?t.removeAttribute(e):(n=n.type,A=n===3||n===4&&A===!0?"":""+A,r?t.setAttributeNS(r,e,A):t.setAttribute(e,A))))}var Br=rU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yo=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),Dp=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),$_=Symbol.for("react.offscreen"),Fg=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,nd;function ka(t){if(nd===void 0)try{throw Error()}catch(A){var e=A.stack.trim().match(/\n( *(at )?)/);nd=e&&e[1]||""}return`
`+nd+t}var sd=!1;function ad(t,e){if(!t||sd)return"";sd=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,i=s.length-1;1<=a&&0<=i&&n[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(n[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||n[a]!==s[i]){var o=`
`+n[a].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=a&&0<=i);break}}}finally{sd=!1,Error.prepareStackTrace=A}return(t=t?t.displayName||t.name:"")?ka(t):""}function oU(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function Pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case Bs:return"Portal";case kf:return"Profiler";case Hp:return"StrictMode";case Rf:return"Suspense";case Lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M_:return(t.displayName||"Context")+".Consumer";case D_:return(t._context.displayName||"Context")+".Provider";case Np:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dp:return e=t.displayName||null,e!==null?e:Pf(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return Pf(t(e))}catch{}}return null}function lU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(e);case 8:return e===Hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uU(t){var e=j_(t)?"checked":"value",A=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var n=A.get,s=A.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:A.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=uU(t))}function K_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var A=e.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==A?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hf(t,e){var A=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??t._wrapperState.initialChecked})}function Ig(t,e){var A=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;A=sn(e.value!=null?e.value:A),t._wrapperState={initialChecked:r,initialValue:A,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G_(t,e){e=e.checked,e!=null&&Pp(t,"checked",e,!1)}function Nf(t,e){G_(t,e);var A=sn(e.value),r=e.type;if(A!=null)r==="number"?(A===0&&t.value===""||t.value!=A)&&(t.value=""+A):t.value!==""+A&&(t.value=""+A);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,A):e.hasOwnProperty("defaultValue")&&Df(t,e.type,sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,A){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,A||e===t.value||(t.value=e),t.defaultValue=e}A=t.name,A!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,A!==""&&(t.name=A)}function Df(t,e,A){(e!=="number"||Jl(t.ownerDocument)!==t)&&(A==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+A&&(t.defaultValue=""+A))}var Ra=Array.isArray;function Ls(t,e,A,r){if(t=t.options,e){e={};for(var n=0;n<A.length;n++)e["$"+A[n]]=!0;for(A=0;A<t.length;A++)n=e.hasOwnProperty("$"+t[A].value),t[A].selected!==n&&(t[A].selected=n),n&&r&&(t[A].defaultSelected=!0)}else{for(A=""+sn(A),e=null,n=0;n<t.length;n++){if(t[n].value===A){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xg(t,e){var A=e.value;if(A==null){if(A=e.children,e=e.defaultValue,A!=null){if(e!=null)throw Error(P(92));if(Ra(A)){if(1<A.length)throw Error(P(93));A=A[0]}e=A}e==null&&(e=""),A=e}t._wrapperState={initialValue:sn(A)}}function V_(t,e){var A=sn(e.value),r=sn(e.defaultValue);A!=null&&(A=""+A,A!==t.value&&(t.value=A),e.defaultValue==null&&t.defaultValue!==A&&(t.defaultValue=A)),r!=null&&(t.defaultValue=""+r)}function Tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _o,W_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,A,r,n){MSApp.execUnsafeLocalFunction(function(){return t(e,A,r,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_o.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ui(t,e){if(e){var A=t.firstChild;if(A&&A===t.lastChild&&A.nodeType===3){A.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cU=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){cU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function J_(t,e,A){return e==null||typeof e=="boolean"||e===""?"":A||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function Z_(t,e){t=t.style;for(var A in e)if(e.hasOwnProperty(A)){var r=A.indexOf("--")===0,n=J_(A,e[A],r);A==="float"&&(A="cssFloat"),r?t.setProperty(A,n):t[A]=n}}var dU=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(dU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Kf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function Mp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vf=null,Ps=null,Hs=null;function Og(t){if(t=ro(t)){if(typeof Vf!="function")throw Error(P(280));var e=t.stateNode;e&&(e=ic(e),Vf(t.stateNode,t.type,e))}}function X_(t){Ps?Hs?Hs.push(t):Hs=[t]:Ps=t}function Y_(){if(Ps){var t=Ps,e=Hs;if(Hs=Ps=null,Og(t),e)for(t=0;t<e.length;t++)Og(e[t])}}function q_(t,e){return t(e)}function ev(){}var id=!1;function tv(t,e,A){if(id)return t(e,A);id=!0;try{return q_(t,e,A)}finally{id=!1,(Ps!==null||Hs!==null)&&(ev(),Y_())}}function Fi(t,e){var A=t.stateNode;if(A===null)return null;var r=ic(A);if(r===null)return null;A=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(A&&typeof A!="function")throw Error(P(231,e,typeof A));return A}var zf=!1;if(hr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){zf=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{zf=!1}function fU(t,e,A,r,n,s,a,i,o){var l=Array.prototype.slice.call(arguments,3);try{e.apply(A,l)}catch(u){this.onError(u)}}var ni=!1,Zl=null,Xl=!1,Wf=null,hU={onError:function(t){ni=!0,Zl=t}};function pU(t,e,A,r,n,s,a,i,o){ni=!1,Zl=null,fU.apply(hU,arguments)}function mU(t,e,A,r,n,s,a,i,o){if(pU.apply(this,arguments),ni){if(ni){var l=Zl;ni=!1,Zl=null}else throw Error(P(198));Xl||(Xl=!0,Wf=l)}}function Jn(t){var e=t,A=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(A=e.return),t=e.return;while(t)}return e.tag===3?A:null}function Av(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kg(t){if(Jn(t)!==t)throw Error(P(188))}function gU(t){var e=t.alternate;if(!e){if(e=Jn(t),e===null)throw Error(P(188));return e!==t?null:t}for(var A=t,r=e;;){var n=A.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){A=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===A)return kg(n),t;if(s===r)return kg(n),e;s=s.sibling}throw Error(P(188))}if(A.return!==r.return)A=n,r=s;else{for(var a=!1,i=n.child;i;){if(i===A){a=!0,A=n,r=s;break}if(i===r){a=!0,r=n,A=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===A){a=!0,A=s,r=n;break}if(i===r){a=!0,r=s,A=n;break}i=i.sibling}if(!a)throw Error(P(189))}}if(A.alternate!==r)throw Error(P(190))}if(A.tag!==3)throw Error(P(188));return A.stateNode.current===A?t:e}function rv(t){return t=gU(t),t!==null?nv(t):null}function nv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nv(t);if(e!==null)return e;t=t.sibling}return null}var sv=Yt.unstable_scheduleCallback,Rg=Yt.unstable_cancelCallback,wU=Yt.unstable_shouldYield,yU=Yt.unstable_requestPaint,Pe=Yt.unstable_now,BU=Yt.unstable_getCurrentPriorityLevel,$p=Yt.unstable_ImmediatePriority,av=Yt.unstable_UserBlockingPriority,Yl=Yt.unstable_NormalPriority,_U=Yt.unstable_LowPriority,iv=Yt.unstable_IdlePriority,rc=null,JA=null;function vU(t){if(JA&&typeof JA.onCommitFiberRoot=="function")try{JA.onCommitFiberRoot(rc,t,void 0,(t.current.flags&128)===128)}catch{}}var SA=Math.clz32?Math.clz32:EU,CU=Math.log,bU=Math.LN2;function EU(t){return t>>>=0,t===0?32:31-(CU(t)/bU|0)|0}var vo=64,Co=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var A=t.pendingLanes;if(A===0)return 0;var r=0,n=t.suspendedLanes,s=t.pingedLanes,a=A&268435455;if(a!==0){var i=a&~n;i!==0?r=La(i):(s&=a,s!==0&&(r=La(s)))}else a=A&~n,a!==0?r=La(a):s!==0&&(r=La(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&n)&&(n=r&-r,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(r&4&&(r|=A&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)A=31-SA(e),n=1<<A,r|=t[A],e&=~n;return r}function QU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UU(t,e){for(var A=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-SA(s),i=1<<a,o=n[a];o===-1?(!(i&A)||i&r)&&(n[a]=QU(i,e)):o<=e&&(t.expiredLanes|=i),s&=~i}}function Jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ov(){var t=vo;return vo<<=1,!(vo&4194240)&&(vo=64),t}function od(t){for(var e=[],A=0;31>A;A++)e.push(t);return e}function to(t,e,A){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-SA(e),t[e]=A}function FU(t,e){var A=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<A;){var n=31-SA(A),s=1<<n;e[n]=0,r[n]=-1,t[n]=-1,A&=~s}}function jp(t,e){var A=t.entangledLanes|=e;for(t=t.entanglements;A;){var r=31-SA(A),n=1<<r;n&e|t[r]&e&&(t[r]|=e),A&=~n}}var Ce=0;function lv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uv,Kp,cv,dv,fv,Zf=!1,bo=[],zr=null,Wr=null,Jr=null,Ii=new Map,Si=new Map,Pr=[],IU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lg(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Si.delete(e.pointerId)}}function _a(t,e,A,r,n,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:A,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},e!==null&&(e=ro(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function SU(t,e,A,r,n){switch(e){case"focusin":return zr=_a(zr,t,e,A,r,n),!0;case"dragenter":return Wr=_a(Wr,t,e,A,r,n),!0;case"mouseover":return Jr=_a(Jr,t,e,A,r,n),!0;case"pointerover":var s=n.pointerId;return Ii.set(s,_a(Ii.get(s)||null,t,e,A,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Si.set(s,_a(Si.get(s)||null,t,e,A,r,n)),!0}return!1}function hv(t){var e=En(t.target);if(e!==null){var A=Jn(e);if(A!==null){if(e=A.tag,e===13){if(e=Av(A),e!==null){t.blockedOn=e,fv(t.priority,function(){cv(A)});return}}else if(e===3&&A.stateNode.current.memoizedState.isDehydrated){t.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}t.blockedOn=null}function El(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var A=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(A===null){A=t.nativeEvent;var r=new A.constructor(A.type,A);Gf=r,A.target.dispatchEvent(r),Gf=null}else return e=ro(A),e!==null&&Kp(e),t.blockedOn=A,!1;e.shift()}return!0}function Pg(t,e,A){El(t)&&A.delete(e)}function xU(){Zf=!1,zr!==null&&El(zr)&&(zr=null),Wr!==null&&El(Wr)&&(Wr=null),Jr!==null&&El(Jr)&&(Jr=null),Ii.forEach(Pg),Si.forEach(Pg)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,Zf||(Zf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,xU)))}function xi(t){function e(n){return va(n,t)}if(0<bo.length){va(bo[0],t);for(var A=1;A<bo.length;A++){var r=bo[A];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&va(zr,t),Wr!==null&&va(Wr,t),Jr!==null&&va(Jr,t),Ii.forEach(e),Si.forEach(e),A=0;A<Pr.length;A++)r=Pr[A],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(A=Pr[0],A.blockedOn===null);)hv(A),A.blockedOn===null&&Pr.shift()}var Ns=Br.ReactCurrentBatchConfig,eu=!0;function TU(t,e,A,r){var n=Ce,s=Ns.transition;Ns.transition=null;try{Ce=1,Gp(t,e,A,r)}finally{Ce=n,Ns.transition=s}}function OU(t,e,A,r){var n=Ce,s=Ns.transition;Ns.transition=null;try{Ce=4,Gp(t,e,A,r)}finally{Ce=n,Ns.transition=s}}function Gp(t,e,A,r){if(eu){var n=Xf(t,e,A,r);if(n===null)wd(t,e,r,tu,A),Lg(t,r);else if(SU(n,t,e,A,r))r.stopPropagation();else if(Lg(t,r),e&4&&-1<IU.indexOf(t)){for(;n!==null;){var s=ro(n);if(s!==null&&uv(s),s=Xf(t,e,A,r),s===null&&wd(t,e,r,tu,A),s===n)break;n=s}n!==null&&r.stopPropagation()}else wd(t,e,r,null,A)}}var tu=null;function Xf(t,e,A,r){if(tu=null,t=Mp(r),t=En(t),t!==null)if(e=Jn(t),e===null)t=null;else if(A=e.tag,A===13){if(t=Av(e),t!==null)return t;t=null}else if(A===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tu=t,null}function pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BU()){case $p:return 1;case av:return 4;case Yl:case _U:return 16;case iv:return 536870912;default:return 16}default:return 16}}var Nr=null,Vp=null,Ql=null;function mv(){if(Ql)return Ql;var t,e=Vp,A=e.length,r,n="value"in Nr?Nr.value:Nr.textContent,s=n.length;for(t=0;t<A&&e[t]===n[t];t++);var a=A-t;for(r=1;r<=a&&e[A-r]===n[s-r];r++);return Ql=n.slice(t,1<r?1-r:void 0)}function Ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eo(){return!0}function Hg(){return!1}function AA(t){function e(A,r,n,s,a){this._reactName=A,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(A=t[i],this[i]=A?A(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eo:Hg,this.isPropagationStopped=Hg,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),e}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zp=AA(aa),Ao=Oe({},aa,{view:0,detail:0}),kU=AA(Ao),ld,ud,Ca,nc=Oe({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(ld=t.screenX-Ca.screenX,ud=t.screenY-Ca.screenY):ud=ld=0,Ca=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),Ng=AA(nc),RU=Oe({},nc,{dataTransfer:0}),LU=AA(RU),PU=Oe({},Ao,{relatedTarget:0}),cd=AA(PU),HU=Oe({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),NU=AA(HU),DU=Oe({},aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MU=AA(DU),$U=Oe({},aa,{data:0}),Dg=AA($U),jU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GU[t])?!!e[t]:!1}function Wp(){return VU}var zU=Oe({},Ao,{key:function(t){if(t.key){var e=jU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WU=AA(zU),JU=Oe({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mg=AA(JU),ZU=Oe({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),XU=AA(ZU),YU=Oe({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),qU=AA(YU),eF=Oe({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tF=AA(eF),AF=[9,13,27,32],Jp=hr&&"CompositionEvent"in window,si=null;hr&&"documentMode"in document&&(si=document.documentMode);var rF=hr&&"TextEvent"in window&&!si,gv=hr&&(!Jp||si&&8<si&&11>=si),$g=" ",jg=!1;function wv(t,e){switch(t){case"keyup":return AF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function nF(t,e){switch(t){case"compositionend":return yv(e);case"keypress":return e.which!==32?null:(jg=!0,$g);case"textInput":return t=e.data,t===$g&&jg?null:t;default:return null}}function sF(t,e){if(vs)return t==="compositionend"||!Jp&&wv(t,e)?(t=mv(),Ql=Vp=Nr=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gv&&e.locale!=="ko"?null:e.data;default:return null}}var aF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aF[t.type]:e==="textarea"}function Bv(t,e,A,r){X_(r),e=Au(e,"onChange"),0<e.length&&(A=new zp("onChange","change",null,A,r),t.push({event:A,listeners:e}))}var ai=null,Ti=null;function iF(t){xv(t,0)}function sc(t){var e=Es(t);if(K_(e))return t}function oF(t,e){if(t==="change")return e}var _v=!1;if(hr){var dd;if(hr){var fd="oninput"in document;if(!fd){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),fd=typeof Gg.oninput=="function"}dd=fd}else dd=!1;_v=dd&&(!document.documentMode||9<document.documentMode)}function Vg(){ai&&(ai.detachEvent("onpropertychange",vv),Ti=ai=null)}function vv(t){if(t.propertyName==="value"&&sc(Ti)){var e=[];Bv(e,Ti,t,Mp(t)),tv(iF,e)}}function lF(t,e,A){t==="focusin"?(Vg(),ai=e,Ti=A,ai.attachEvent("onpropertychange",vv)):t==="focusout"&&Vg()}function uF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(Ti)}function cF(t,e){if(t==="click")return sc(e)}function dF(t,e){if(t==="input"||t==="change")return sc(e)}function fF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OA=typeof Object.is=="function"?Object.is:fF;function Oi(t,e){if(OA(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var A=Object.keys(t),r=Object.keys(e);if(A.length!==r.length)return!1;for(r=0;r<A.length;r++){var n=A[r];if(!Of.call(e,n)||!OA(t[n],e[n]))return!1}return!0}function zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,e){var A=zg(t);t=0;for(var r;A;){if(A.nodeType===3){if(r=t+A.textContent.length,t<=e&&r>=e)return{node:A,offset:e-t};t=r}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=zg(A)}}function Cv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bv(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var A=typeof e.contentWindow.location.href=="string"}catch{A=!1}if(A)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hF(t){var e=bv(),A=t.focusedElem,r=t.selectionRange;if(e!==A&&A&&A.ownerDocument&&Cv(A.ownerDocument.documentElement,A)){if(r!==null&&Zp(A)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in A)A.selectionStart=e,A.selectionEnd=Math.min(t,A.value.length);else if(t=(e=A.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=A.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!t.extend&&s>r&&(n=r,r=s,s=n),n=Wg(A,s);var a=Wg(A,r);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=A;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<e.length;A++)t=e[A],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pF=hr&&"documentMode"in document&&11>=document.documentMode,Cs=null,Yf=null,ii=null,qf=!1;function Jg(t,e,A){var r=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;qf||Cs==null||Cs!==Jl(r)||(r=Cs,"selectionStart"in r&&Zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ii&&Oi(ii,r)||(ii=r,r=Au(Yf,"onSelect"),0<r.length&&(e=new zp("onSelect","select",null,e,A),t.push({event:e,listeners:r}),e.target=Cs)))}function Qo(t,e){var A={};return A[t.toLowerCase()]=e.toLowerCase(),A["Webkit"+t]="webkit"+e,A["Moz"+t]="moz"+e,A}var bs={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},hd={},Ev={};hr&&(Ev=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function ac(t){if(hd[t])return hd[t];if(!bs[t])return t;var e=bs[t],A;for(A in e)if(e.hasOwnProperty(A)&&A in Ev)return hd[t]=e[A];return t}var Qv=ac("animationend"),Uv=ac("animationiteration"),Fv=ac("animationstart"),Iv=ac("transitionend"),Sv=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(t,e){Sv.set(t,e),Wn(e,[t])}for(var pd=0;pd<Zg.length;pd++){var md=Zg[pd],mF=md.toLowerCase(),gF=md[0].toUpperCase()+md.slice(1);hn(mF,"on"+gF)}hn(Qv,"onAnimationEnd");hn(Uv,"onAnimationIteration");hn(Fv,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(Iv,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Xg(t,e,A){var r=t.type||"unknown-event";t.currentTarget=A,mU(r,e,void 0,t),t.currentTarget=null}function xv(t,e){e=(e&4)!==0;for(var A=0;A<t.length;A++){var r=t[A],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var i=r[a],o=i.instance,l=i.currentTarget;if(i=i.listener,o!==s&&n.isPropagationStopped())break e;Xg(n,i,l),s=o}else for(a=0;a<r.length;a++){if(i=r[a],o=i.instance,l=i.currentTarget,i=i.listener,o!==s&&n.isPropagationStopped())break e;Xg(n,i,l),s=o}}}if(Xl)throw t=Wf,Xl=!1,Wf=null,t}function Ue(t,e){var A=e[nh];A===void 0&&(A=e[nh]=new Set);var r=t+"__bubble";A.has(r)||(Tv(e,t,2,!1),A.add(r))}function gd(t,e,A){var r=0;e&&(r|=4),Tv(A,t,r,e)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function ki(t){if(!t[Uo]){t[Uo]=!0,N_.forEach(function(A){A!=="selectionchange"&&(wF.has(A)||gd(A,!1,t),gd(A,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uo]||(e[Uo]=!0,gd("selectionchange",!1,e))}}function Tv(t,e,A,r){switch(pv(e)){case 1:var n=TU;break;case 4:n=OU;break;default:n=Gp}A=n.bind(null,e,A,t),n=void 0,!zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(e,A,{capture:!0,passive:n}):t.addEventListener(e,A,!0):n!==void 0?t.addEventListener(e,A,{passive:n}):t.addEventListener(e,A,!1)}function wd(t,e,A,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===n||i.nodeType===8&&i.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var o=a.tag;if((o===3||o===4)&&(o=a.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;a=a.return}for(;i!==null;){if(a=En(i),a===null)return;if(o=a.tag,o===5||o===6){r=s=a;continue e}i=i.parentNode}}r=r.return}tv(function(){var l=s,u=Mp(A),c=[];e:{var d=Sv.get(t);if(d!==void 0){var h=zp,f=t;switch(t){case"keypress":if(Ul(A)===0)break e;case"keydown":case"keyup":h=WU;break;case"focusin":f="focus",h=cd;break;case"focusout":f="blur",h=cd;break;case"beforeblur":case"afterblur":h=cd;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ng;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=LU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=XU;break;case Qv:case Uv:case Fv:h=NU;break;case Iv:h=qU;break;case"scroll":h=kU;break;case"wheel":h=tF;break;case"copy":case"cut":case"paste":h=MU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Mg}var w=(e&4)!==0,y=!w&&t==="scroll",p=w?d!==null?d+"Capture":null:d;w=[];for(var m=l,g;m!==null;){g=m;var B=g.stateNode;if(g.tag===5&&B!==null&&(g=B,p!==null&&(B=Fi(m,p),B!=null&&w.push(Ri(m,B,g)))),y)break;m=m.return}0<w.length&&(d=new h(d,f,null,A,u),c.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&A!==Gf&&(f=A.relatedTarget||A.fromElement)&&(En(f)||f[pr]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=A.relatedTarget||A.toElement,h=l,f=f?En(f):null,f!==null&&(y=Jn(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=l),h!==f)){if(w=Ng,B="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=Mg,B="onPointerLeave",p="onPointerEnter",m="pointer"),y=h==null?d:Es(h),g=f==null?d:Es(f),d=new w(B,m+"leave",h,A,u),d.target=y,d.relatedTarget=g,B=null,En(u)===l&&(w=new w(p,m+"enter",f,A,u),w.target=g,w.relatedTarget=y,B=w),y=B,h&&f)t:{for(w=h,p=f,m=0,g=w;g;g=es(g))m++;for(g=0,B=p;B;B=es(B))g++;for(;0<m-g;)w=es(w),m--;for(;0<g-m;)p=es(p),g--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=es(w),p=es(p)}w=null}else w=null;h!==null&&Yg(c,d,h,w,!1),f!==null&&y!==null&&Yg(c,y,f,w,!0)}}e:{if(d=l?Es(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=oF;else if(Kg(d))if(_v)_=dF;else{_=uF;var v=lF}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=cF);if(_&&(_=_(t,l))){Bv(c,_,A,u);break e}v&&v(t,d,l),t==="focusout"&&(v=d._wrapperState)&&v.controlled&&d.type==="number"&&Df(d,"number",d.value)}switch(v=l?Es(l):window,t){case"focusin":(Kg(v)||v.contentEditable==="true")&&(Cs=v,Yf=l,ii=null);break;case"focusout":ii=Yf=Cs=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,Jg(c,A,u);break;case"selectionchange":if(pF)break;case"keydown":case"keyup":Jg(c,A,u)}var C;if(Jp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else vs?wv(t,A)&&(E="onCompositionEnd"):t==="keydown"&&A.keyCode===229&&(E="onCompositionStart");E&&(gv&&A.locale!=="ko"&&(vs||E!=="onCompositionStart"?E==="onCompositionEnd"&&vs&&(C=mv()):(Nr=u,Vp="value"in Nr?Nr.value:Nr.textContent,vs=!0)),v=Au(l,E),0<v.length&&(E=new Dg(E,t,null,A,u),c.push({event:E,listeners:v}),C?E.data=C:(C=yv(A),C!==null&&(E.data=C)))),(C=rF?nF(t,A):sF(t,A))&&(l=Au(l,"onBeforeInput"),0<l.length&&(u=new Dg("onBeforeInput","beforeinput",null,A,u),c.push({event:u,listeners:l}),u.data=C))}xv(c,e)})}function Ri(t,e,A){return{instance:t,listener:e,currentTarget:A}}function Au(t,e){for(var A=e+"Capture",r=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Fi(t,A),s!=null&&r.unshift(Ri(t,s,n)),s=Fi(t,e),s!=null&&r.push(Ri(t,s,n))),t=t.return}return r}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yg(t,e,A,r,n){for(var s=e._reactName,a=[];A!==null&&A!==r;){var i=A,o=i.alternate,l=i.stateNode;if(o!==null&&o===r)break;i.tag===5&&l!==null&&(i=l,n?(o=Fi(A,s),o!=null&&a.unshift(Ri(A,o,i))):n||(o=Fi(A,s),o!=null&&a.push(Ri(A,o,i)))),A=A.return}a.length!==0&&t.push({event:e,listeners:a})}var yF=/\r\n?/g,BF=/\u0000|\uFFFD/g;function qg(t){return(typeof t=="string"?t:""+t).replace(yF,`
`).replace(BF,"")}function Fo(t,e,A){if(e=qg(e),qg(t)!==e&&A)throw Error(P(425))}function ru(){}var eh=null,th=null;function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,_F=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,vF=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(t){return ew.resolve(null).then(t).catch(CF)}:rh;function CF(t){setTimeout(function(){throw t})}function yd(t,e){var A=e,r=0;do{var n=A.nextSibling;if(t.removeChild(A),n&&n.nodeType===8)if(A=n.data,A==="/$"){if(r===0){t.removeChild(n),xi(e);return}r--}else A!=="$"&&A!=="$?"&&A!=="$!"||r++;A=n}while(A);xi(e)}function Zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="$"||A==="$!"||A==="$?"){if(e===0)return t;e--}else A==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),GA="__reactFiber$"+ia,Li="__reactProps$"+ia,pr="__reactContainer$"+ia,nh="__reactEvents$"+ia,bF="__reactListeners$"+ia,EF="__reactHandles$"+ia;function En(t){var e=t[GA];if(e)return e;for(var A=t.parentNode;A;){if(e=A[pr]||A[GA]){if(A=e.alternate,e.child!==null||A!==null&&A.child!==null)for(t=tw(t);t!==null;){if(A=t[GA])return A;t=tw(t)}return e}t=A,A=t.parentNode}return null}function ro(t){return t=t[GA]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function ic(t){return t[Li]||null}var sh=[],Qs=-1;function pn(t){return{current:t}}function Fe(t){0>Qs||(t.current=sh[Qs],sh[Qs]=null,Qs--)}function Qe(t,e){Qs++,sh[Qs]=t.current,t.current=e}var an={},yt=pn(an),Ht=pn(!1),Hn=an;function Ks(t,e){var A=t.type.contextTypes;if(!A)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in A)n[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Nt(t){return t=t.childContextTypes,t!=null}function nu(){Fe(Ht),Fe(yt)}function Aw(t,e,A){if(yt.current!==an)throw Error(P(168));Qe(yt,e),Qe(Ht,A)}function Ov(t,e,A){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return A;r=r.getChildContext();for(var n in r)if(!(n in e))throw Error(P(108,lU(t)||"Unknown",n));return Oe({},A,r)}function su(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Hn=yt.current,Qe(yt,t),Qe(Ht,Ht.current),!0}function rw(t,e,A){var r=t.stateNode;if(!r)throw Error(P(169));A?(t=Ov(t,e,Hn),r.__reactInternalMemoizedMergedChildContext=t,Fe(Ht),Fe(yt),Qe(yt,t)):Fe(Ht),Qe(Ht,A)}var ir=null,oc=!1,Bd=!1;function kv(t){ir===null?ir=[t]:ir.push(t)}function QF(t){oc=!0,kv(t)}function mn(){if(!Bd&&ir!==null){Bd=!0;var t=0,e=Ce;try{var A=ir;for(Ce=1;t<A.length;t++){var r=A[t];do r=r(!0);while(r!==null)}ir=null,oc=!1}catch(n){throw ir!==null&&(ir=ir.slice(t+1)),sv($p,mn),n}finally{Ce=e,Bd=!1}}return null}var Us=[],Fs=0,au=null,iu=0,aA=[],iA=0,Nn=null,or=1,lr="";function Bn(t,e){Us[Fs++]=iu,Us[Fs++]=au,au=t,iu=e}function Rv(t,e,A){aA[iA++]=or,aA[iA++]=lr,aA[iA++]=Nn,Nn=t;var r=or;t=lr;var n=32-SA(r)-1;r&=~(1<<n),A+=1;var s=32-SA(e)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,or=1<<32-SA(e)+n|A<<n|r,lr=s+t}else or=1<<s|A<<n|r,lr=t}function Xp(t){t.return!==null&&(Bn(t,1),Rv(t,1,0))}function Yp(t){for(;t===au;)au=Us[--Fs],Us[Fs]=null,iu=Us[--Fs],Us[Fs]=null;for(;t===Nn;)Nn=aA[--iA],aA[iA]=null,lr=aA[--iA],aA[iA]=null,or=aA[--iA],aA[iA]=null}var Xt=null,Jt=null,Se=!1,IA=null;function Lv(t,e){var A=lA(5,null,null,0);A.elementType="DELETED",A.stateNode=e,A.return=t,e=t.deletions,e===null?(t.deletions=[A],t.flags|=16):e.push(A)}function nw(t,e){switch(t.tag){case 5:var A=t.type;return e=e.nodeType!==1||A.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Jt=Zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(A=Nn!==null?{id:or,overflow:lr}:null,t.memoizedState={dehydrated:e,treeContext:A,retryLane:1073741824},A=lA(18,null,null,0),A.stateNode=e,A.return=t,t.child=A,Xt=t,Jt=null,!0):!1;default:return!1}}function ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(Se){var e=Jt;if(e){var A=e;if(!nw(t,e)){if(ah(t))throw Error(P(418));e=Zr(A.nextSibling);var r=Xt;e&&nw(t,e)?Lv(r,A):(t.flags=t.flags&-4097|2,Se=!1,Xt=t)}}else{if(ah(t))throw Error(P(418));t.flags=t.flags&-4097|2,Se=!1,Xt=t}}}function sw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Io(t){if(t!==Xt)return!1;if(!Se)return sw(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ah(t.type,t.memoizedProps)),e&&(e=Jt)){if(ah(t))throw Pv(),Error(P(418));for(;e;)Lv(t,e),e=Zr(e.nextSibling)}if(sw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="/$"){if(e===0){Jt=Zr(t.nextSibling);break e}e--}else A!=="$"&&A!=="$!"&&A!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Xt?Zr(t.stateNode.nextSibling):null;return!0}function Pv(){for(var t=Jt;t;)t=Zr(t.nextSibling)}function Gs(){Jt=Xt=null,Se=!1}function qp(t){IA===null?IA=[t]:IA.push(t)}var UF=Br.ReactCurrentBatchConfig;function ba(t,e,A){if(t=A.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(P(309));var r=A.stateNode}if(!r)throw Error(P(147,t));var n=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var i=n.refs;a===null?delete i[s]:i[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(P(284));if(!A._owner)throw Error(P(290,t))}return t}function So(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function aw(t){var e=t._init;return e(t._payload)}function Hv(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function A(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function n(p,m){return p=en(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function i(p,m,g,B){return m===null||m.tag!==6?(m=Ud(g,p.mode,B),m.return=p,m):(m=n(m,g),m.return=p,m)}function o(p,m,g,B){var _=g.type;return _===_s?u(p,m,g.props.children,B,g.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xr&&aw(_)===m.type)?(B=n(m,g.props),B.ref=ba(p,m,g),B.return=p,B):(B=kl(g.type,g.key,g.props,null,p.mode,B),B.ref=ba(p,m,g),B.return=p,B)}function l(p,m,g,B){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Fd(g,p.mode,B),m.return=p,m):(m=n(m,g.children||[]),m.return=p,m)}function u(p,m,g,B,_){return m===null||m.tag!==7?(m=kn(g,p.mode,B,_),m.return=p,m):(m=n(m,g),m.return=p,m)}function c(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ud(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case yo:return g=kl(m.type,m.key,m.props,null,p.mode,g),g.ref=ba(p,null,m),g.return=p,g;case Bs:return m=Fd(m,p.mode,g),m.return=p,m;case xr:var B=m._init;return c(p,B(m._payload),g)}if(Ra(m)||ya(m))return m=kn(m,p.mode,g,null),m.return=p,m;So(p,m)}return null}function d(p,m,g,B){var _=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return _!==null?null:i(p,m,""+g,B);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case yo:return g.key===_?o(p,m,g,B):null;case Bs:return g.key===_?l(p,m,g,B):null;case xr:return _=g._init,d(p,m,_(g._payload),B)}if(Ra(g)||ya(g))return _!==null?null:u(p,m,g,B,null);So(p,g)}return null}function h(p,m,g,B,_){if(typeof B=="string"&&B!==""||typeof B=="number")return p=p.get(g)||null,i(m,p,""+B,_);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case yo:return p=p.get(B.key===null?g:B.key)||null,o(m,p,B,_);case Bs:return p=p.get(B.key===null?g:B.key)||null,l(m,p,B,_);case xr:var v=B._init;return h(p,m,g,v(B._payload),_)}if(Ra(B)||ya(B))return p=p.get(g)||null,u(m,p,B,_,null);So(m,B)}return null}function f(p,m,g,B){for(var _=null,v=null,C=m,E=m=0,I=null;C!==null&&E<g.length;E++){C.index>E?(I=C,C=null):I=C.sibling;var L=d(p,C,g[E],B);if(L===null){C===null&&(C=I);break}t&&C&&L.alternate===null&&e(p,C),m=s(L,m,E),v===null?_=L:v.sibling=L,v=L,C=I}if(E===g.length)return A(p,C),Se&&Bn(p,E),_;if(C===null){for(;E<g.length;E++)C=c(p,g[E],B),C!==null&&(m=s(C,m,E),v===null?_=C:v.sibling=C,v=C);return Se&&Bn(p,E),_}for(C=r(p,C);E<g.length;E++)I=h(C,p,E,g[E],B),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?E:I.key),m=s(I,m,E),v===null?_=I:v.sibling=I,v=I);return t&&C.forEach(function($){return e(p,$)}),Se&&Bn(p,E),_}function w(p,m,g,B){var _=ya(g);if(typeof _!="function")throw Error(P(150));if(g=_.call(g),g==null)throw Error(P(151));for(var v=_=null,C=m,E=m=0,I=null,L=g.next();C!==null&&!L.done;E++,L=g.next()){C.index>E?(I=C,C=null):I=C.sibling;var $=d(p,C,L.value,B);if($===null){C===null&&(C=I);break}t&&C&&$.alternate===null&&e(p,C),m=s($,m,E),v===null?_=$:v.sibling=$,v=$,C=I}if(L.done)return A(p,C),Se&&Bn(p,E),_;if(C===null){for(;!L.done;E++,L=g.next())L=c(p,L.value,B),L!==null&&(m=s(L,m,E),v===null?_=L:v.sibling=L,v=L);return Se&&Bn(p,E),_}for(C=r(p,C);!L.done;E++,L=g.next())L=h(C,p,E,L.value,B),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?E:L.key),m=s(L,m,E),v===null?_=L:v.sibling=L,v=L);return t&&C.forEach(function(se){return e(p,se)}),Se&&Bn(p,E),_}function y(p,m,g,B){if(typeof g=="object"&&g!==null&&g.type===_s&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case yo:e:{for(var _=g.key,v=m;v!==null;){if(v.key===_){if(_=g.type,_===_s){if(v.tag===7){A(p,v.sibling),m=n(v,g.props.children),m.return=p,p=m;break e}}else if(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xr&&aw(_)===v.type){A(p,v.sibling),m=n(v,g.props),m.ref=ba(p,v,g),m.return=p,p=m;break e}A(p,v);break}else e(p,v);v=v.sibling}g.type===_s?(m=kn(g.props.children,p.mode,B,g.key),m.return=p,p=m):(B=kl(g.type,g.key,g.props,null,p.mode,B),B.ref=ba(p,m,g),B.return=p,p=B)}return a(p);case Bs:e:{for(v=g.key;m!==null;){if(m.key===v)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){A(p,m.sibling),m=n(m,g.children||[]),m.return=p,p=m;break e}else{A(p,m);break}else e(p,m);m=m.sibling}m=Fd(g,p.mode,B),m.return=p,p=m}return a(p);case xr:return v=g._init,y(p,m,v(g._payload),B)}if(Ra(g))return f(p,m,g,B);if(ya(g))return w(p,m,g,B);So(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(A(p,m.sibling),m=n(m,g),m.return=p,p=m):(A(p,m),m=Ud(g,p.mode,B),m.return=p,p=m),a(p)):A(p,m)}return y}var Vs=Hv(!0),Nv=Hv(!1),ou=pn(null),lu=null,Is=null,em=null;function tm(){em=Is=lu=null}function Am(t){var e=ou.current;Fe(ou),t._currentValue=e}function oh(t,e,A){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===A)break;t=t.return}}function Ds(t,e){lu=t,em=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function fA(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(lu===null)throw Error(P(308));Is=t,lu.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Qn=null;function rm(t){Qn===null?Qn=[t]:Qn.push(t)}function Dv(t,e,A,r){var n=e.interleaved;return n===null?(A.next=A,rm(e)):(A.next=n.next,n.next=A),e.interleaved=A,mr(t,r)}function mr(t,e){t.lanes|=e;var A=t.alternate;for(A!==null&&(A.lanes|=e),A=t,t=t.return;t!==null;)t.childLanes|=e,A=t.alternate,A!==null&&(A.childLanes|=e),A=t,t=t.return;return A.tag===3?A.stateNode:null}var Tr=!1;function nm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xr(t,e,A){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var n=r.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),r.pending=e,mr(t,A)}return n=r.interleaved,n===null?(e.next=e,rm(r)):(e.next=n.next,n.next=e),r.interleaved=e,mr(t,A)}function Fl(t,e,A){if(e=e.updateQueue,e!==null&&(e=e.shared,(A&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,A|=r,e.lanes=A,jp(t,A)}}function iw(t,e){var A=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,A===r)){var n=null,s=null;if(A=A.firstBaseUpdate,A!==null){do{var a={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};s===null?n=s=a:s=s.next=a,A=A.next}while(A!==null);s===null?n=s=e:s=s.next=e}else n=s=e;A={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=A;return}t=A.lastBaseUpdate,t===null?A.firstBaseUpdate=e:t.next=e,A.lastBaseUpdate=e}function uu(t,e,A,r){var n=t.updateQueue;Tr=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,i=n.shared.pending;if(i!==null){n.shared.pending=null;var o=i,l=o.next;o.next=null,a===null?s=l:a.next=l,a=o;var u=t.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==a&&(i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=o))}if(s!==null){var c=n.baseState;a=0,u=l=o=null,i=s;do{var d=i.lane,h=i.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=t,w=i;switch(d=e,h=A,w.tag){case 1:if(f=w.payload,typeof f=="function"){c=f.call(h,c,d);break e}c=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=w.payload,d=typeof f=="function"?f.call(h,c,d):f,d==null)break e;c=Oe({},c,d);break e;case 2:Tr=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,d=n.effects,d===null?n.effects=[i]:d.push(i))}else h={eventTime:h,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(l=u=h,o=c):u=u.next=h,a|=d;if(i=i.next,i===null){if(i=n.shared.pending,i===null)break;d=i,i=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(u===null&&(o=c),n.baseState=o,n.firstBaseUpdate=l,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);Mn|=a,t.lanes=a,t.memoizedState=c}}function ow(t,e,A){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(n!==null){if(r.callback=null,r=A,typeof n!="function")throw Error(P(191,n));n.call(r)}}}var no={},ZA=pn(no),Pi=pn(no),Hi=pn(no);function Un(t){if(t===no)throw Error(P(174));return t}function sm(t,e){switch(Qe(Hi,e),Qe(Pi,t),Qe(ZA,no),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$f(e,t)}Fe(ZA),Qe(ZA,e)}function zs(){Fe(ZA),Fe(Pi),Fe(Hi)}function $v(t){Un(Hi.current);var e=Un(ZA.current),A=$f(e,t.type);e!==A&&(Qe(Pi,t),Qe(ZA,A))}function am(t){Pi.current===t&&(Fe(ZA),Fe(Pi))}var xe=pn(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var A=e.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function im(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var Il=Br.ReactCurrentDispatcher,vd=Br.ReactCurrentBatchConfig,Dn=0,Te=null,ze=null,et=null,du=!1,oi=!1,Ni=0,FF=0;function ft(){throw Error(P(321))}function om(t,e){if(e===null)return!1;for(var A=0;A<e.length&&A<t.length;A++)if(!OA(t[A],e[A]))return!1;return!0}function lm(t,e,A,r,n,s){if(Dn=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?TF:OF,t=A(r,n),oi){s=0;do{if(oi=!1,Ni=0,25<=s)throw Error(P(301));s+=1,et=ze=null,e.updateQueue=null,Il.current=kF,t=A(r,n)}while(oi)}if(Il.current=fu,e=ze!==null&&ze.next!==null,Dn=0,et=ze=Te=null,du=!1,e)throw Error(P(300));return t}function um(){var t=Ni!==0;return Ni=0,t}function jA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Te.memoizedState=et=t:et=et.next=t,et}function hA(){if(ze===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=et===null?Te.memoizedState:et.next;if(e!==null)et=e,ze=t;else{if(t===null)throw Error(P(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},et===null?Te.memoizedState=et=t:et=et.next=t}return et}function Di(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=hA(),A=e.queue;if(A===null)throw Error(P(311));A.lastRenderedReducer=t;var r=ze,n=r.baseQueue,s=A.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,A.pending=null}if(n!==null){s=n.next,r=r.baseState;var i=a=null,o=null,l=s;do{var u=l.lane;if((Dn&u)===u)o!==null&&(o=o.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var c={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};o===null?(i=o=c,a=r):o=o.next=c,Te.lanes|=u,Mn|=u}l=l.next}while(l!==null&&l!==s);o===null?a=r:o.next=i,OA(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=o,A.lastRenderedState=r}if(t=A.interleaved,t!==null){n=t;do s=n.lane,Te.lanes|=s,Mn|=s,n=n.next;while(n!==t)}else n===null&&(A.lanes=0);return[e.memoizedState,A.dispatch]}function bd(t){var e=hA(),A=e.queue;if(A===null)throw Error(P(311));A.lastRenderedReducer=t;var r=A.dispatch,n=A.pending,s=e.memoizedState;if(n!==null){A.pending=null;var a=n=n.next;do s=t(s,a.action),a=a.next;while(a!==n);OA(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),A.lastRenderedState=s}return[s,r]}function jv(){}function Kv(t,e){var A=Te,r=hA(),n=e(),s=!OA(r.memoizedState,n);if(s&&(r.memoizedState=n,Lt=!0),r=r.queue,cm(zv.bind(null,A,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(A.flags|=2048,Mi(9,Vv.bind(null,A,r,n,e),void 0,null),At===null)throw Error(P(349));Dn&30||Gv(A,e,n)}return n}function Gv(t,e,A){t.flags|=16384,t={getSnapshot:e,value:A},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(A=e.stores,A===null?e.stores=[t]:A.push(t))}function Vv(t,e,A,r){e.value=A,e.getSnapshot=r,Wv(e)&&Jv(t)}function zv(t,e,A){return A(function(){Wv(e)&&Jv(t)})}function Wv(t){var e=t.getSnapshot;t=t.value;try{var A=e();return!OA(t,A)}catch{return!0}}function Jv(t){var e=mr(t,1);e!==null&&xA(e,t,1,-1)}function lw(t){var e=jA();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:t},e.queue=t,t=t.dispatch=xF.bind(null,Te,t),[e.memoizedState,t]}function Mi(t,e,A,r){return t={tag:t,create:e,destroy:A,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(A=e.lastEffect,A===null?e.lastEffect=t.next=t:(r=A.next,A.next=t,t.next=r,e.lastEffect=t)),t}function Zv(){return hA().memoizedState}function Sl(t,e,A,r){var n=jA();Te.flags|=t,n.memoizedState=Mi(1|e,A,void 0,r===void 0?null:r)}function lc(t,e,A,r){var n=hA();r=r===void 0?null:r;var s=void 0;if(ze!==null){var a=ze.memoizedState;if(s=a.destroy,r!==null&&om(r,a.deps)){n.memoizedState=Mi(e,A,s,r);return}}Te.flags|=t,n.memoizedState=Mi(1|e,A,s,r)}function uw(t,e){return Sl(8390656,8,t,e)}function cm(t,e){return lc(2048,8,t,e)}function Xv(t,e){return lc(4,2,t,e)}function Yv(t,e){return lc(4,4,t,e)}function qv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function e0(t,e,A){return A=A!=null?A.concat([t]):null,lc(4,4,qv.bind(null,e,t),A)}function dm(){}function t0(t,e){var A=hA();e=e===void 0?null:e;var r=A.memoizedState;return r!==null&&e!==null&&om(e,r[1])?r[0]:(A.memoizedState=[t,e],t)}function A0(t,e){var A=hA();e=e===void 0?null:e;var r=A.memoizedState;return r!==null&&e!==null&&om(e,r[1])?r[0]:(t=t(),A.memoizedState=[t,e],t)}function r0(t,e,A){return Dn&21?(OA(A,e)||(A=ov(),Te.lanes|=A,Mn|=A,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=A)}function IF(t,e){var A=Ce;Ce=A!==0&&4>A?A:4,t(!0);var r=vd.transition;vd.transition={};try{t(!1),e()}finally{Ce=A,vd.transition=r}}function n0(){return hA().memoizedState}function SF(t,e,A){var r=qr(t);if(A={lane:r,action:A,hasEagerState:!1,eagerState:null,next:null},s0(t))a0(e,A);else if(A=Dv(t,e,A,r),A!==null){var n=Qt();xA(A,t,r,n),i0(A,e,r)}}function xF(t,e,A){var r=qr(t),n={lane:r,action:A,hasEagerState:!1,eagerState:null,next:null};if(s0(t))a0(e,n);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,i=s(a,A);if(n.hasEagerState=!0,n.eagerState=i,OA(i,a)){var o=e.interleaved;o===null?(n.next=n,rm(e)):(n.next=o.next,o.next=n),e.interleaved=n;return}}catch{}finally{}A=Dv(t,e,n,r),A!==null&&(n=Qt(),xA(A,t,r,n),i0(A,e,r))}}function s0(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function a0(t,e){oi=du=!0;var A=t.pending;A===null?e.next=e:(e.next=A.next,A.next=e),t.pending=e}function i0(t,e,A){if(A&4194240){var r=e.lanes;r&=t.pendingLanes,A|=r,e.lanes=A,jp(t,A)}}var fu={readContext:fA,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},TF={readContext:fA,useCallback:function(t,e){return jA().memoizedState=[t,e===void 0?null:e],t},useContext:fA,useEffect:uw,useImperativeHandle:function(t,e,A){return A=A!=null?A.concat([t]):null,Sl(4194308,4,qv.bind(null,e,t),A)},useLayoutEffect:function(t,e){return Sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sl(4,2,t,e)},useMemo:function(t,e){var A=jA();return e=e===void 0?null:e,t=t(),A.memoizedState=[t,e],t},useReducer:function(t,e,A){var r=jA();return e=A!==void 0?A(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SF.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=jA();return t={current:t},e.memoizedState=t},useState:lw,useDebugValue:dm,useDeferredValue:function(t){return jA().memoizedState=t},useTransition:function(){var t=lw(!1),e=t[0];return t=IF.bind(null,t[1]),jA().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,A){var r=Te,n=jA();if(Se){if(A===void 0)throw Error(P(407));A=A()}else{if(A=e(),At===null)throw Error(P(349));Dn&30||Gv(r,e,A)}n.memoizedState=A;var s={value:A,getSnapshot:e};return n.queue=s,uw(zv.bind(null,r,s,t),[t]),r.flags|=2048,Mi(9,Vv.bind(null,r,s,A,e),void 0,null),A},useId:function(){var t=jA(),e=At.identifierPrefix;if(Se){var A=lr,r=or;A=(r&~(1<<32-SA(r)-1)).toString(32)+A,e=":"+e+"R"+A,A=Ni++,0<A&&(e+="H"+A.toString(32)),e+=":"}else A=FF++,e=":"+e+"r"+A.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OF={readContext:fA,useCallback:t0,useContext:fA,useEffect:cm,useImperativeHandle:e0,useInsertionEffect:Xv,useLayoutEffect:Yv,useMemo:A0,useReducer:Cd,useRef:Zv,useState:function(){return Cd(Di)},useDebugValue:dm,useDeferredValue:function(t){var e=hA();return r0(e,ze.memoizedState,t)},useTransition:function(){var t=Cd(Di)[0],e=hA().memoizedState;return[t,e]},useMutableSource:jv,useSyncExternalStore:Kv,useId:n0,unstable_isNewReconciler:!1},kF={readContext:fA,useCallback:t0,useContext:fA,useEffect:cm,useImperativeHandle:e0,useInsertionEffect:Xv,useLayoutEffect:Yv,useMemo:A0,useReducer:bd,useRef:Zv,useState:function(){return bd(Di)},useDebugValue:dm,useDeferredValue:function(t){var e=hA();return ze===null?e.memoizedState=t:r0(e,ze.memoizedState,t)},useTransition:function(){var t=bd(Di)[0],e=hA().memoizedState;return[t,e]},useMutableSource:jv,useSyncExternalStore:Kv,useId:n0,unstable_isNewReconciler:!1};function QA(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var A in t)e[A]===void 0&&(e[A]=t[A]);return e}return e}function lh(t,e,A,r){e=t.memoizedState,A=A(r,e),A=A==null?e:Oe({},e,A),t.memoizedState=A,t.lanes===0&&(t.updateQueue.baseState=A)}var uc={isMounted:function(t){return(t=t._reactInternals)?Jn(t)===t:!1},enqueueSetState:function(t,e,A){t=t._reactInternals;var r=Qt(),n=qr(t),s=cr(r,n);s.payload=e,A!=null&&(s.callback=A),e=Xr(t,s,n),e!==null&&(xA(e,t,n,r),Fl(e,t,n))},enqueueReplaceState:function(t,e,A){t=t._reactInternals;var r=Qt(),n=qr(t),s=cr(r,n);s.tag=1,s.payload=e,A!=null&&(s.callback=A),e=Xr(t,s,n),e!==null&&(xA(e,t,n,r),Fl(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var A=Qt(),r=qr(t),n=cr(A,r);n.tag=2,e!=null&&(n.callback=e),e=Xr(t,n,r),e!==null&&(xA(e,t,r,A),Fl(e,t,r))}};function cw(t,e,A,r,n,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Oi(A,r)||!Oi(n,s):!0}function o0(t,e,A){var r=!1,n=an,s=e.contextType;return typeof s=="object"&&s!==null?s=fA(s):(n=Nt(e)?Hn:yt.current,r=e.contextTypes,s=(r=r!=null)?Ks(t,n):an),e=new e(A,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function dw(t,e,A,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(A,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(A,r),e.state!==t&&uc.enqueueReplaceState(e,e.state,null)}function uh(t,e,A,r){var n=t.stateNode;n.props=A,n.state=t.memoizedState,n.refs={},nm(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=fA(s):(s=Nt(e)?Hn:yt.current,n.context=Ks(t,s)),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lh(t,e,s,A),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&uc.enqueueReplaceState(n,n.state,null),uu(t,A,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ws(t,e){try{var A="",r=e;do A+=oU(r),r=r.return;while(r);var n=A}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n,digest:null}}function Ed(t,e,A){return{value:t,source:null,stack:A??null,digest:e??null}}function ch(t,e){try{console.error(e.value)}catch(A){setTimeout(function(){throw A})}}var RF=typeof WeakMap=="function"?WeakMap:Map;function l0(t,e,A){A=cr(-1,A),A.tag=3,A.payload={element:null};var r=e.value;return A.callback=function(){pu||(pu=!0,_h=r),ch(t,e)},A}function u0(t,e,A){A=cr(-1,A),A.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;A.payload=function(){return r(n)},A.callback=function(){ch(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(A.callback=function(){ch(t,e),typeof r!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),A}function fw(t,e,A){var r=t.pingCache;if(r===null){r=t.pingCache=new RF;var n=new Set;r.set(e,n)}else n=r.get(e),n===void 0&&(n=new Set,r.set(e,n));n.has(A)||(n.add(A),t=JF.bind(null,t,e,A),e.then(t,t))}function hw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pw(t,e,A,r,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(e=cr(-1,1),e.tag=2,Xr(A,e,1))),A.lanes|=1),t)}var LF=Br.ReactCurrentOwner,Lt=!1;function bt(t,e,A,r){e.child=t===null?Nv(e,null,A,r):Vs(e,t.child,A,r)}function mw(t,e,A,r,n){A=A.render;var s=e.ref;return Ds(e,n),r=lm(t,e,A,r,s,n),A=um(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,gr(t,e,n)):(Se&&A&&Xp(e),e.flags|=1,bt(t,e,r,n),e.child)}function gw(t,e,A,r,n){if(t===null){var s=A.type;return typeof s=="function"&&!Bm(s)&&s.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(e.tag=15,e.type=s,c0(t,e,s,r,n)):(t=kl(A.type,null,r,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&n)){var a=s.memoizedProps;if(A=A.compare,A=A!==null?A:Oi,A(a,r)&&t.ref===e.ref)return gr(t,e,n)}return e.flags|=1,t=en(s,r),t.ref=e.ref,t.return=e,e.child=t}function c0(t,e,A,r,n){if(t!==null){var s=t.memoizedProps;if(Oi(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&n)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,gr(t,e,n)}return dh(t,e,A,r,n)}function d0(t,e,A){var r=e.pendingProps,n=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(xs,Wt),Wt|=A;else{if(!(A&1073741824))return t=s!==null?s.baseLanes|A:A,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(xs,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:A,Qe(xs,Wt),Wt|=r}else s!==null?(r=s.baseLanes|A,e.memoizedState=null):r=A,Qe(xs,Wt),Wt|=r;return bt(t,e,n,A),e.child}function f0(t,e){var A=e.ref;(t===null&&A!==null||t!==null&&t.ref!==A)&&(e.flags|=512,e.flags|=2097152)}function dh(t,e,A,r,n){var s=Nt(A)?Hn:yt.current;return s=Ks(e,s),Ds(e,n),A=lm(t,e,A,r,s,n),r=um(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,gr(t,e,n)):(Se&&r&&Xp(e),e.flags|=1,bt(t,e,A,n),e.child)}function ww(t,e,A,r,n){if(Nt(A)){var s=!0;su(e)}else s=!1;if(Ds(e,n),e.stateNode===null)xl(t,e),o0(e,A,r),uh(e,A,r,n),r=!0;else if(t===null){var a=e.stateNode,i=e.memoizedProps;a.props=i;var o=a.context,l=A.contextType;typeof l=="object"&&l!==null?l=fA(l):(l=Nt(A)?Hn:yt.current,l=Ks(e,l));var u=A.getDerivedStateFromProps,c=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||o!==l)&&dw(e,a,r,l),Tr=!1;var d=e.memoizedState;a.state=d,uu(e,r,a,n),o=e.memoizedState,i!==r||d!==o||Ht.current||Tr?(typeof u=="function"&&(lh(e,A,u,r),o=e.memoizedState),(i=Tr||cw(e,A,i,r,d,o,l))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=o),a.props=r,a.state=o,a.context=l,r=i):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Mv(t,e),i=e.memoizedProps,l=e.type===e.elementType?i:QA(e.type,i),a.props=l,c=e.pendingProps,d=a.context,o=A.contextType,typeof o=="object"&&o!==null?o=fA(o):(o=Nt(A)?Hn:yt.current,o=Ks(e,o));var h=A.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==c||d!==o)&&dw(e,a,r,o),Tr=!1,d=e.memoizedState,a.state=d,uu(e,r,a,n);var f=e.memoizedState;i!==c||d!==f||Ht.current||Tr?(typeof h=="function"&&(lh(e,A,h,r),f=e.memoizedState),(l=Tr||cw(e,A,l,r,d,f,o)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,o)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=o,r=l):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return fh(t,e,A,r,s,n)}function fh(t,e,A,r,n,s){f0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return n&&rw(e,A,!1),gr(t,e,s);r=e.stateNode,LF.current=e;var i=a&&typeof A.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Vs(e,t.child,null,s),e.child=Vs(e,null,i,s)):bt(t,e,i,s),e.memoizedState=r.state,n&&rw(e,A,!0),e.child}function h0(t){var e=t.stateNode;e.pendingContext?Aw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Aw(t,e.context,!1),sm(t,e.containerInfo)}function yw(t,e,A,r,n){return Gs(),qp(n),e.flags|=256,bt(t,e,A,r),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function ph(t){return{baseLanes:t,cachePool:null,transitions:null}}function p0(t,e,A){var r=e.pendingProps,n=xe.current,s=!1,a=(e.flags&128)!==0,i;if((i=a)||(i=t!==null&&t.memoizedState===null?!1:(n&2)!==0),i?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Qe(xe,n&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=fc(a,r,0,null),t=kn(t,r,A,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ph(A),e.memoizedState=hh,t):fm(e,a));if(n=t.memoizedState,n!==null&&(i=n.dehydrated,i!==null))return PF(t,e,a,r,i,n,A);if(s){s=r.fallback,a=e.mode,n=t.child,i=n.sibling;var o={mode:"hidden",children:r.children};return!(a&1)&&e.child!==n?(r=e.child,r.childLanes=0,r.pendingProps=o,e.deletions=null):(r=en(n,o),r.subtreeFlags=n.subtreeFlags&14680064),i!==null?s=en(i,s):(s=kn(s,a,A,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?ph(A):{baseLanes:a.baseLanes|A,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~A,e.memoizedState=hh,r}return s=t.child,t=s.sibling,r=en(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=A),r.return=e,r.sibling=null,t!==null&&(A=e.deletions,A===null?(e.deletions=[t],e.flags|=16):A.push(t)),e.child=r,e.memoizedState=null,r}function fm(t,e){return e=fc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xo(t,e,A,r){return r!==null&&qp(r),Vs(e,t.child,null,A),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PF(t,e,A,r,n,s,a){if(A)return e.flags&256?(e.flags&=-257,r=Ed(Error(P(422))),xo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,n=e.mode,r=fc({mode:"visible",children:r.children},n,0,null),s=kn(s,n,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vs(e,t.child,null,a),e.child.memoizedState=ph(a),e.memoizedState=hh,s);if(!(e.mode&1))return xo(t,e,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error(P(419)),r=Ed(s,r,void 0),xo(t,e,a,r)}if(i=(a&t.childLanes)!==0,Lt||i){if(r=At,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,mr(t,n),xA(r,t,n,-1))}return ym(),r=Ed(Error(P(421))),xo(t,e,a,r)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=ZF.bind(null,t),n._reactRetry=e,null):(t=s.treeContext,Jt=Zr(n.nextSibling),Xt=e,Se=!0,IA=null,t!==null&&(aA[iA++]=or,aA[iA++]=lr,aA[iA++]=Nn,or=t.id,lr=t.overflow,Nn=e),e=fm(e,r.children),e.flags|=4096,e)}function Bw(t,e,A){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oh(t.return,e,A)}function Qd(t,e,A,r,n){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:A,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=A,s.tailMode=n)}function m0(t,e,A){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(bt(t,e,r.children,A),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bw(t,A,e);else if(t.tag===19)Bw(t,A,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(xe,r),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(A=e.child,n=null;A!==null;)t=A.alternate,t!==null&&cu(t)===null&&(n=A),A=A.sibling;A=n,A===null?(n=e.child,e.child=null):(n=A.sibling,A.sibling=null),Qd(e,!1,n,A,s);break;case"backwards":for(A=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&cu(t)===null){e.child=n;break}t=n.sibling,n.sibling=A,A=n,n=t}Qd(e,!0,A,null,s);break;case"together":Qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,A){if(t!==null&&(e.dependencies=t.dependencies),Mn|=e.lanes,!(A&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,A=en(t,t.pendingProps),e.child=A,A.return=e;t.sibling!==null;)t=t.sibling,A=A.sibling=en(t,t.pendingProps),A.return=e;A.sibling=null}return e.child}function HF(t,e,A){switch(e.tag){case 3:h0(e),Gs();break;case 5:$v(e);break;case 1:Nt(e.type)&&su(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;Qe(ou,r._currentValue),r._currentValue=n;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(xe,xe.current&1),e.flags|=128,null):A&e.child.childLanes?p0(t,e,A):(Qe(xe,xe.current&1),t=gr(t,e,A),t!==null?t.sibling:null);Qe(xe,xe.current&1);break;case 19:if(r=(A&e.childLanes)!==0,t.flags&128){if(r)return m0(t,e,A);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Qe(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,d0(t,e,A)}return gr(t,e,A)}var g0,mh,w0,y0;g0=function(t,e){for(var A=e.child;A!==null;){if(A.tag===5||A.tag===6)t.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break;for(;A.sibling===null;){if(A.return===null||A.return===e)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};mh=function(){};w0=function(t,e,A,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,Un(ZA.current);var s=null;switch(A){case"input":n=Hf(t,n),r=Hf(t,r),s=[];break;case"select":n=Oe({},n,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":n=Mf(t,n),r=Mf(t,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ru)}jf(A,r);var a;A=null;for(l in n)if(!r.hasOwnProperty(l)&&n.hasOwnProperty(l)&&n[l]!=null)if(l==="style"){var i=n[l];for(a in i)i.hasOwnProperty(a)&&(A||(A={}),A[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qi.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var o=r[l];if(i=n!=null?n[l]:void 0,r.hasOwnProperty(l)&&o!==i&&(o!=null||i!=null))if(l==="style")if(i){for(a in i)!i.hasOwnProperty(a)||o&&o.hasOwnProperty(a)||(A||(A={}),A[a]="");for(a in o)o.hasOwnProperty(a)&&i[a]!==o[a]&&(A||(A={}),A[a]=o[a])}else A||(s||(s=[]),s.push(l,A)),A=o;else l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(s=s||[]).push(l,o)):l==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(l,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(l)?(o!=null&&l==="onScroll"&&Ue("scroll",t),s||i===o||(s=[])):(s=s||[]).push(l,o))}A&&(s=s||[]).push("style",A);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};y0=function(t,e,A,r){A!==r&&(e.flags|=4)};function Ea(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var A=null;e!==null;)e.alternate!==null&&(A=e),e=e.sibling;A===null?t.tail=null:A.sibling=null;break;case"collapsed":A=t.tail;for(var r=null;A!==null;)A.alternate!==null&&(r=A),A=A.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,A=0,r=0;if(e)for(var n=t.child;n!==null;)A|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)A|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=A,e}function NF(t,e,A){var r=e.pendingProps;switch(Yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Nt(e.type)&&nu(),ht(e),null;case 3:return r=e.stateNode,zs(),Fe(Ht),Fe(yt),im(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Io(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,IA!==null&&(bh(IA),IA=null))),mh(t,e),ht(e),null;case 5:am(e);var n=Un(Hi.current);if(A=e.type,t!==null&&e.stateNode!=null)w0(t,e,A,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return ht(e),null}if(t=Un(ZA.current),Io(e)){r=e.stateNode,A=e.type;var s=e.memoizedProps;switch(r[GA]=e,r[Li]=s,t=(e.mode&1)!==0,A){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(n=0;n<Pa.length;n++)Ue(Pa[n],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ig(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":xg(r,s),Ue("invalid",r)}jf(A,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,i,t),n=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,i,t),n=["children",""+i]):Qi.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ue("scroll",r)}switch(A){case"input":Bo(r),Sg(r,s,!0);break;case"textarea":Bo(r),Tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ru)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z_(A)),t==="http://www.w3.org/1999/xhtml"?A==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(A,{is:r.is}):(t=a.createElement(A),A==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,A),t[GA]=e,t[Li]=r,g0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Kf(A,r),A){case"dialog":Ue("cancel",t),Ue("close",t),n=r;break;case"iframe":case"object":case"embed":Ue("load",t),n=r;break;case"video":case"audio":for(n=0;n<Pa.length;n++)Ue(Pa[n],t);n=r;break;case"source":Ue("error",t),n=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),n=r;break;case"details":Ue("toggle",t),n=r;break;case"input":Ig(t,r),n=Hf(t,r),Ue("invalid",t);break;case"option":n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=Oe({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":xg(t,r),n=Mf(t,r),Ue("invalid",t);break;default:n=r}jf(A,n),i=n;for(s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="style"?Z_(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&W_(t,o)):s==="children"?typeof o=="string"?(A!=="textarea"||o!=="")&&Ui(t,o):typeof o=="number"&&Ui(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qi.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Ue("scroll",t):o!=null&&Pp(t,s,o,a))}switch(A){case"input":Bo(t),Sg(t,r,!1);break;case"textarea":Bo(t),Tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ls(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=ru)}switch(A){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)y0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(A=Un(Hi.current),Un(ZA.current),Io(e)){if(r=e.stateNode,A=e.memoizedProps,r[GA]=e,(s=r.nodeValue!==A)&&(t=Xt,t!==null))switch(t.tag){case 3:Fo(r.nodeValue,A,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fo(r.nodeValue,A,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(A.nodeType===9?A:A.ownerDocument).createTextNode(r),r[GA]=e,e.stateNode=r}return ht(e),null;case 13:if(Fe(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Jt!==null&&e.mode&1&&!(e.flags&128))Pv(),Gs(),e.flags|=98560,s=!1;else if(s=Io(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(P(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[GA]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else IA!==null&&(bh(IA),IA=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=A,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Ze===0&&(Ze=3):ym())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return zs(),mh(t,e),t===null&&ki(e.stateNode.containerInfo),ht(e),null;case 10:return Am(e.type._context),ht(e),null;case 17:return Nt(e.type)&&nu(),ht(e),null;case 19:if(Fe(xe),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Ea(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cu(t),a!==null){for(e.flags|=128,Ea(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=A,A=e.child;A!==null;)s=A,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),A=A.sibling;return Qe(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Pe()>Js&&(e.flags|=128,r=!0,Ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=cu(a),t!==null){if(e.flags|=128,r=!0,A=t.updateQueue,A!==null&&(e.updateQueue=A,e.flags|=4),Ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Se)return ht(e),null}else 2*Pe()-s.renderingStartTime>Js&&A!==1073741824&&(e.flags|=128,r=!0,Ea(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(A=s.last,A!==null?A.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pe(),e.sibling=null,A=xe.current,Qe(xe,r?A&1|2:A&1),e):(ht(e),null);case 22:case 23:return wm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function DF(t,e){switch(Yp(e),e.tag){case 1:return Nt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),Fe(Ht),Fe(yt),im(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return am(e),null;case 13:if(Fe(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(xe),null;case 4:return zs(),null;case 10:return Am(e.type._context),null;case 22:case 23:return wm(),null;case 24:return null;default:return null}}var To=!1,gt=!1,MF=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ss(t,e){var A=t.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(r){ke(t,e,r)}else A.current=null}function gh(t,e,A){try{A()}catch(r){ke(t,e,r)}}var _w=!1;function $F(t,e){if(eh=eu,t=bv(),Zp(t)){if("selectionStart"in t)var A={start:t.selectionStart,end:t.selectionEnd};else e:{A=(A=t.ownerDocument)&&A.defaultView||window;var r=A.getSelection&&A.getSelection();if(r&&r.rangeCount!==0){A=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{A.nodeType,s.nodeType}catch{A=null;break e}var a=0,i=-1,o=-1,l=0,u=0,c=t,d=null;t:for(;;){for(var h;c!==A||n!==0&&c.nodeType!==3||(i=a+n),c!==s||r!==0&&c.nodeType!==3||(o=a+r),c.nodeType===3&&(a+=c.nodeValue.length),(h=c.firstChild)!==null;)d=c,c=h;for(;;){if(c===t)break t;if(d===A&&++l===n&&(i=a),d===s&&++u===r&&(o=a),(h=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=h}A=i===-1||o===-1?null:{start:i,end:o}}else A=null}A=A||{start:0,end:0}}else A=null;for(th={focusedElem:t,selectionRange:A},eu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var w=f.memoizedProps,y=f.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:QA(e.type,w),y);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(B){ke(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return f=_w,_w=!1,f}function li(t,e,A){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var s=n.destroy;n.destroy=void 0,s!==void 0&&gh(e,A,s)}n=n.next}while(n!==r)}}function cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var A=e=e.next;do{if((A.tag&t)===t){var r=A.create;A.destroy=r()}A=A.next}while(A!==e)}}function wh(t){var e=t.ref;if(e!==null){var A=t.stateNode;switch(t.tag){case 5:t=A;break;default:t=A}typeof e=="function"?e(t):e.current=t}}function B0(t){var e=t.alternate;e!==null&&(t.alternate=null,B0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[GA],delete e[Li],delete e[nh],delete e[bF],delete e[EF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _0(t){return t.tag===5||t.tag===3||t.tag===4}function vw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yh(t,e,A){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?A.nodeType===8?A.parentNode.insertBefore(t,e):A.insertBefore(t,e):(A.nodeType===8?(e=A.parentNode,e.insertBefore(t,A)):(e=A,e.appendChild(t)),A=A._reactRootContainer,A!=null||e.onclick!==null||(e.onclick=ru));else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,A),t=t.sibling;t!==null;)yh(t,e,A),t=t.sibling}function Bh(t,e,A){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?A.insertBefore(t,e):A.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,A),t=t.sibling;t!==null;)Bh(t,e,A),t=t.sibling}var st=null,FA=!1;function Cr(t,e,A){for(A=A.child;A!==null;)v0(t,e,A),A=A.sibling}function v0(t,e,A){if(JA&&typeof JA.onCommitFiberUnmount=="function")try{JA.onCommitFiberUnmount(rc,A)}catch{}switch(A.tag){case 5:gt||Ss(A,e);case 6:var r=st,n=FA;st=null,Cr(t,e,A),st=r,FA=n,st!==null&&(FA?(t=st,A=A.stateNode,t.nodeType===8?t.parentNode.removeChild(A):t.removeChild(A)):st.removeChild(A.stateNode));break;case 18:st!==null&&(FA?(t=st,A=A.stateNode,t.nodeType===8?yd(t.parentNode,A):t.nodeType===1&&yd(t,A),xi(t)):yd(st,A.stateNode));break;case 4:r=st,n=FA,st=A.stateNode.containerInfo,FA=!0,Cr(t,e,A),st=r,FA=n;break;case 0:case 11:case 14:case 15:if(!gt&&(r=A.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&gh(A,e,a),n=n.next}while(n!==r)}Cr(t,e,A);break;case 1:if(!gt&&(Ss(A,e),r=A.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=A.memoizedProps,r.state=A.memoizedState,r.componentWillUnmount()}catch(i){ke(A,e,i)}Cr(t,e,A);break;case 21:Cr(t,e,A);break;case 22:A.mode&1?(gt=(r=gt)||A.memoizedState!==null,Cr(t,e,A),gt=r):Cr(t,e,A);break;default:Cr(t,e,A)}}function Cw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var A=t.stateNode;A===null&&(A=t.stateNode=new MF),e.forEach(function(r){var n=XF.bind(null,t,r);A.has(r)||(A.add(r),r.then(n,n))})}}function yA(t,e){var A=e.deletions;if(A!==null)for(var r=0;r<A.length;r++){var n=A[r];try{var s=t,a=e,i=a;e:for(;i!==null;){switch(i.tag){case 5:st=i.stateNode,FA=!1;break e;case 3:st=i.stateNode.containerInfo,FA=!0;break e;case 4:st=i.stateNode.containerInfo,FA=!0;break e}i=i.return}if(st===null)throw Error(P(160));v0(s,a,n),st=null,FA=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(l){ke(n,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C0(e,t),e=e.sibling}function C0(t,e){var A=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yA(e,t),HA(t),r&4){try{li(3,t,t.return),cc(3,t)}catch(w){ke(t,t.return,w)}try{li(5,t,t.return)}catch(w){ke(t,t.return,w)}}break;case 1:yA(e,t),HA(t),r&512&&A!==null&&Ss(A,A.return);break;case 5:if(yA(e,t),HA(t),r&512&&A!==null&&Ss(A,A.return),t.flags&32){var n=t.stateNode;try{Ui(n,"")}catch(w){ke(t,t.return,w)}}if(r&4&&(n=t.stateNode,n!=null)){var s=t.memoizedProps,a=A!==null?A.memoizedProps:s,i=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&G_(n,s),Kf(i,a);var l=Kf(i,s);for(a=0;a<o.length;a+=2){var u=o[a],c=o[a+1];u==="style"?Z_(n,c):u==="dangerouslySetInnerHTML"?W_(n,c):u==="children"?Ui(n,c):Pp(n,u,c,l)}switch(i){case"input":Nf(n,s);break;case"textarea":V_(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ls(n,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ls(n,!!s.multiple,s.defaultValue,!0):Ls(n,!!s.multiple,s.multiple?[]:"",!1))}n[Li]=s}catch(w){ke(t,t.return,w)}}break;case 6:if(yA(e,t),HA(t),r&4){if(t.stateNode===null)throw Error(P(162));n=t.stateNode,s=t.memoizedProps;try{n.nodeValue=s}catch(w){ke(t,t.return,w)}}break;case 3:if(yA(e,t),HA(t),r&4&&A!==null&&A.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(w){ke(t,t.return,w)}break;case 4:yA(e,t),HA(t);break;case 13:yA(e,t),HA(t),n=t.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(mm=Pe())),r&4&&Cw(t);break;case 22:if(u=A!==null&&A.memoizedState!==null,t.mode&1?(gt=(l=gt)||u,yA(e,t),gt=l):yA(e,t),HA(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(J=t,u=t.child;u!==null;){for(c=J=u;J!==null;){switch(d=J,h=d.child,d.tag){case 0:case 11:case 14:case 15:li(4,d,d.return);break;case 1:Ss(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){r=d,A=d.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(w){ke(r,A,w)}}break;case 5:Ss(d,d.return);break;case 22:if(d.memoizedState!==null){Ew(c);continue}}h!==null?(h.return=d,J=h):Ew(c)}u=u.sibling}e:for(u=null,c=t;;){if(c.tag===5){if(u===null){u=c;try{n=c.stateNode,l?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=c.stateNode,o=c.memoizedProps.style,a=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=J_("display",a))}catch(w){ke(t,t.return,w)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(w){ke(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:yA(e,t),HA(t),r&4&&Cw(t);break;case 21:break;default:yA(e,t),HA(t)}}function HA(t){var e=t.flags;if(e&2){try{e:{for(var A=t.return;A!==null;){if(_0(A)){var r=A;break e}A=A.return}throw Error(P(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Ui(n,""),r.flags&=-33);var s=vw(t);Bh(t,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,i=vw(t);yh(t,i,a);break;default:throw Error(P(161))}}catch(o){ke(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jF(t,e,A){J=t,b0(t)}function b0(t,e,A){for(var r=(t.mode&1)!==0;J!==null;){var n=J,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||To;if(!a){var i=n.alternate,o=i!==null&&i.memoizedState!==null||gt;i=To;var l=gt;if(To=a,(gt=o)&&!l)for(J=n;J!==null;)a=J,o=a.child,a.tag===22&&a.memoizedState!==null?Qw(n):o!==null?(o.return=a,J=o):Qw(n);for(;s!==null;)J=s,b0(s),s=s.sibling;J=n,To=i,gt=l}bw(t)}else n.subtreeFlags&8772&&s!==null?(s.return=n,J=s):bw(t)}}function bw(t){for(;J!==null;){var e=J;if(e.flags&8772){var A=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(A===null)r.componentDidMount();else{var n=e.elementType===e.type?A.memoizedProps:QA(e.type,A.memoizedProps);r.componentDidUpdate(n,A.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ow(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(A=null,e.child!==null)switch(e.child.tag){case 5:A=e.child.stateNode;break;case 1:A=e.child.stateNode}ow(e,a,A)}break;case 5:var i=e.stateNode;if(A===null&&e.flags&4){A=i;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&A.focus();break;case"img":o.src&&(A.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&xi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}gt||e.flags&512&&wh(e)}catch(d){ke(e,e.return,d)}}if(e===t){J=null;break}if(A=e.sibling,A!==null){A.return=e.return,J=A;break}J=e.return}}function Ew(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var A=e.sibling;if(A!==null){A.return=e.return,J=A;break}J=e.return}}function Qw(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var A=e.return;try{cc(4,e)}catch(o){ke(e,A,o)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var n=e.return;try{r.componentDidMount()}catch(o){ke(e,n,o)}}var s=e.return;try{wh(e)}catch(o){ke(e,s,o)}break;case 5:var a=e.return;try{wh(e)}catch(o){ke(e,a,o)}}}catch(o){ke(e,e.return,o)}if(e===t){J=null;break}var i=e.sibling;if(i!==null){i.return=e.return,J=i;break}J=e.return}}var KF=Math.ceil,hu=Br.ReactCurrentDispatcher,hm=Br.ReactCurrentOwner,dA=Br.ReactCurrentBatchConfig,he=0,At=null,$e=null,ut=0,Wt=0,xs=pn(0),Ze=0,$i=null,Mn=0,dc=0,pm=0,ui=null,kt=null,mm=0,Js=1/0,ar=null,pu=!1,_h=null,Yr=null,Oo=!1,Dr=null,mu=0,ci=0,vh=null,Tl=-1,Ol=0;function Qt(){return he&6?Pe():Tl!==-1?Tl:Tl=Pe()}function qr(t){return t.mode&1?he&2&&ut!==0?ut&-ut:UF.transition!==null?(Ol===0&&(Ol=ov()),Ol):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:pv(t.type)),t):1}function xA(t,e,A,r){if(50<ci)throw ci=0,vh=null,Error(P(185));to(t,A,r),(!(he&2)||t!==At)&&(t===At&&(!(he&2)&&(dc|=A),Ze===4&&Hr(t,ut)),Dt(t,r),A===1&&he===0&&!(e.mode&1)&&(Js=Pe()+500,oc&&mn()))}function Dt(t,e){var A=t.callbackNode;UU(t,e);var r=ql(t,t===At?ut:0);if(r===0)A!==null&&Rg(A),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(A!=null&&Rg(A),e===1)t.tag===0?QF(Uw.bind(null,t)):kv(Uw.bind(null,t)),vF(function(){!(he&6)&&mn()}),A=null;else{switch(lv(r)){case 1:A=$p;break;case 4:A=av;break;case 16:A=Yl;break;case 536870912:A=iv;break;default:A=Yl}A=T0(A,E0.bind(null,t))}t.callbackPriority=e,t.callbackNode=A}}function E0(t,e){if(Tl=-1,Ol=0,he&6)throw Error(P(327));var A=t.callbackNode;if(Ms()&&t.callbackNode!==A)return null;var r=ql(t,t===At?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gu(t,r);else{e=r;var n=he;he|=2;var s=U0();(At!==t||ut!==e)&&(ar=null,Js=Pe()+500,On(t,e));do try{zF();break}catch(i){Q0(t,i)}while(!0);tm(),hu.current=s,he=n,$e!==null?e=0:(At=null,ut=0,e=Ze)}if(e!==0){if(e===2&&(n=Jf(t),n!==0&&(r=n,e=Ch(t,n))),e===1)throw A=$i,On(t,0),Hr(t,r),Dt(t,Pe()),A;if(e===6)Hr(t,r);else{if(n=t.current.alternate,!(r&30)&&!GF(n)&&(e=gu(t,r),e===2&&(s=Jf(t),s!==0&&(r=s,e=Ch(t,s))),e===1))throw A=$i,On(t,0),Hr(t,r),Dt(t,Pe()),A;switch(t.finishedWork=n,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:_n(t,kt,ar);break;case 3:if(Hr(t,r),(r&130023424)===r&&(e=mm+500-Pe(),10<e)){if(ql(t,0)!==0)break;if(n=t.suspendedLanes,(n&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=rh(_n.bind(null,t,kt,ar),e);break}_n(t,kt,ar);break;case 4:if(Hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,n=-1;0<r;){var a=31-SA(r);s=1<<a,a=e[a],a>n&&(n=a),r&=~s}if(r=n,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KF(r/1960))-r,10<r){t.timeoutHandle=rh(_n.bind(null,t,kt,ar),r);break}_n(t,kt,ar);break;case 5:_n(t,kt,ar);break;default:throw Error(P(329))}}}return Dt(t,Pe()),t.callbackNode===A?E0.bind(null,t):null}function Ch(t,e){var A=ui;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=gu(t,e),t!==2&&(e=kt,kt=A,e!==null&&bh(e)),t}function bh(t){kt===null?kt=t:kt.push.apply(kt,t)}function GF(t){for(var e=t;;){if(e.flags&16384){var A=e.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var r=0;r<A.length;r++){var n=A[r],s=n.getSnapshot;n=n.value;try{if(!OA(s(),n))return!1}catch{return!1}}}if(A=e.child,e.subtreeFlags&16384&&A!==null)A.return=e,e=A;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~pm,e&=~dc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var A=31-SA(e),r=1<<A;t[A]=-1,e&=~r}}function Uw(t){if(he&6)throw Error(P(327));Ms();var e=ql(t,0);if(!(e&1))return Dt(t,Pe()),null;var A=gu(t,e);if(t.tag!==0&&A===2){var r=Jf(t);r!==0&&(e=r,A=Ch(t,r))}if(A===1)throw A=$i,On(t,0),Hr(t,e),Dt(t,Pe()),A;if(A===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_n(t,kt,ar),Dt(t,Pe()),null}function gm(t,e){var A=he;he|=1;try{return t(e)}finally{he=A,he===0&&(Js=Pe()+500,oc&&mn())}}function $n(t){Dr!==null&&Dr.tag===0&&!(he&6)&&Ms();var e=he;he|=1;var A=dA.transition,r=Ce;try{if(dA.transition=null,Ce=1,t)return t()}finally{Ce=r,dA.transition=A,he=e,!(he&6)&&mn()}}function wm(){Wt=xs.current,Fe(xs)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var A=t.timeoutHandle;if(A!==-1&&(t.timeoutHandle=-1,_F(A)),$e!==null)for(A=$e.return;A!==null;){var r=A;switch(Yp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:zs(),Fe(Ht),Fe(yt),im();break;case 5:am(r);break;case 4:zs();break;case 13:Fe(xe);break;case 19:Fe(xe);break;case 10:Am(r.type._context);break;case 22:case 23:wm()}A=A.return}if(At=t,$e=t=en(t.current,null),ut=Wt=e,Ze=0,$i=null,pm=dc=Mn=0,kt=ui=null,Qn!==null){for(e=0;e<Qn.length;e++)if(A=Qn[e],r=A.interleaved,r!==null){A.interleaved=null;var n=r.next,s=A.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}A.pending=r}Qn=null}return t}function Q0(t,e){do{var A=$e;try{if(tm(),Il.current=fu,du){for(var r=Te.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}du=!1}if(Dn=0,et=ze=Te=null,oi=!1,Ni=0,hm.current=null,A===null||A.return===null){Ze=1,$i=e,$e=null;break}e:{var s=t,a=A.return,i=A,o=e;if(e=ut,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var l=o,u=i,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=hw(a);if(h!==null){h.flags&=-257,pw(h,a,i,s,e),h.mode&1&&fw(s,l,e),e=h,o=l;var f=e.updateQueue;if(f===null){var w=new Set;w.add(o),e.updateQueue=w}else f.add(o);break e}else{if(!(e&1)){fw(s,l,e),ym();break e}o=Error(P(426))}}else if(Se&&i.mode&1){var y=hw(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),pw(y,a,i,s,e),qp(Ws(o,i));break e}}s=o=Ws(o,i),Ze!==4&&(Ze=2),ui===null?ui=[s]:ui.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=l0(s,o,e);iw(s,p);break e;case 1:i=o;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Yr===null||!Yr.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var B=u0(s,i,e);iw(s,B);break e}}s=s.return}while(s!==null)}I0(A)}catch(_){e=_,$e===A&&A!==null&&($e=A=A.return);continue}break}while(!0)}function U0(){var t=hu.current;return hu.current=fu,t===null?fu:t}function ym(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),At===null||!(Mn&268435455)&&!(dc&268435455)||Hr(At,ut)}function gu(t,e){var A=he;he|=2;var r=U0();(At!==t||ut!==e)&&(ar=null,On(t,e));do try{VF();break}catch(n){Q0(t,n)}while(!0);if(tm(),he=A,hu.current=r,$e!==null)throw Error(P(261));return At=null,ut=0,Ze}function VF(){for(;$e!==null;)F0($e)}function zF(){for(;$e!==null&&!wU();)F0($e)}function F0(t){var e=x0(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?I0(t):$e=e,hm.current=null}function I0(t){var e=t;do{var A=e.alternate;if(t=e.return,e.flags&32768){if(A=DF(A,e),A!==null){A.flags&=32767,$e=A;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,$e=null;return}}else if(A=NF(A,e,Wt),A!==null){$e=A;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ze===0&&(Ze=5)}function _n(t,e,A){var r=Ce,n=dA.transition;try{dA.transition=null,Ce=1,WF(t,e,A,r)}finally{dA.transition=n,Ce=r}return null}function WF(t,e,A,r){do Ms();while(Dr!==null);if(he&6)throw Error(P(327));A=t.finishedWork;var n=t.finishedLanes;if(A===null)return null;if(t.finishedWork=null,t.finishedLanes=0,A===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var s=A.lanes|A.childLanes;if(FU(t,s),t===At&&($e=At=null,ut=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Oo||(Oo=!0,T0(Yl,function(){return Ms(),null})),s=(A.flags&15990)!==0,A.subtreeFlags&15990||s){s=dA.transition,dA.transition=null;var a=Ce;Ce=1;var i=he;he|=4,hm.current=null,$F(t,A),C0(A,t),hF(th),eu=!!eh,th=eh=null,t.current=A,jF(A),yU(),he=i,Ce=a,dA.transition=s}else t.current=A;if(Oo&&(Oo=!1,Dr=t,mu=n),s=t.pendingLanes,s===0&&(Yr=null),vU(A.stateNode),Dt(t,Pe()),e!==null)for(r=t.onRecoverableError,A=0;A<e.length;A++)n=e[A],r(n.value,{componentStack:n.stack,digest:n.digest});if(pu)throw pu=!1,t=_h,_h=null,t;return mu&1&&t.tag!==0&&Ms(),s=t.pendingLanes,s&1?t===vh?ci++:(ci=0,vh=t):ci=0,mn(),null}function Ms(){if(Dr!==null){var t=lv(mu),e=dA.transition,A=Ce;try{if(dA.transition=null,Ce=16>t?16:t,Dr===null)var r=!1;else{if(t=Dr,Dr=null,mu=0,he&6)throw Error(P(331));var n=he;for(he|=4,J=t.current;J!==null;){var s=J,a=s.child;if(J.flags&16){var i=s.deletions;if(i!==null){for(var o=0;o<i.length;o++){var l=i[o];for(J=l;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:li(8,u,s)}var c=u.child;if(c!==null)c.return=u,J=c;else for(;J!==null;){u=J;var d=u.sibling,h=u.return;if(B0(u),u===l){J=null;break}if(d!==null){d.return=h,J=d;break}J=h}}}var f=s.alternate;if(f!==null){var w=f.child;if(w!==null){f.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}J=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,J=a;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:li(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,J=p;break e}J=s.return}}var m=t.current;for(J=m;J!==null;){a=J;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,J=g;else e:for(a=m;J!==null;){if(i=J,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:cc(9,i)}}catch(_){ke(i,i.return,_)}if(i===a){J=null;break e}var B=i.sibling;if(B!==null){B.return=i.return,J=B;break e}J=i.return}}if(he=n,mn(),JA&&typeof JA.onPostCommitFiberRoot=="function")try{JA.onPostCommitFiberRoot(rc,t)}catch{}r=!0}return r}finally{Ce=A,dA.transition=e}}return!1}function Fw(t,e,A){e=Ws(A,e),e=l0(t,e,1),t=Xr(t,e,1),e=Qt(),t!==null&&(to(t,1,e),Dt(t,e))}function ke(t,e,A){if(t.tag===3)Fw(t,t,A);else for(;e!==null;){if(e.tag===3){Fw(e,t,A);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yr===null||!Yr.has(r))){t=Ws(A,t),t=u0(e,t,1),e=Xr(e,t,1),t=Qt(),e!==null&&(to(e,1,t),Dt(e,t));break}}e=e.return}}function JF(t,e,A){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&A,At===t&&(ut&A)===A&&(Ze===4||Ze===3&&(ut&130023424)===ut&&500>Pe()-mm?On(t,0):pm|=A),Dt(t,e)}function S0(t,e){e===0&&(t.mode&1?(e=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):e=1);var A=Qt();t=mr(t,e),t!==null&&(to(t,e,A),Dt(t,A))}function ZF(t){var e=t.memoizedState,A=0;e!==null&&(A=e.retryLane),S0(t,A)}function XF(t,e){var A=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;n!==null&&(A=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),S0(t,A)}var x0;x0=function(t,e,A){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Lt=!0;else{if(!(t.lanes&A)&&!(e.flags&128))return Lt=!1,HF(t,e,A);Lt=!!(t.flags&131072)}else Lt=!1,Se&&e.flags&1048576&&Rv(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var n=Ks(e,yt.current);Ds(e,A),n=lm(null,e,r,t,n,A);var s=um();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,su(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,nm(e),n.updater=uc,e.stateNode=n,n._reactInternals=e,uh(e,r,t,A),e=fh(null,e,r,!0,s,A)):(e.tag=0,Se&&s&&Xp(e),bt(null,e,n,A),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,n=r._init,r=n(r._payload),e.type=r,n=e.tag=qF(r),t=QA(r,t),n){case 0:e=dh(null,e,r,t,A);break e;case 1:e=ww(null,e,r,t,A);break e;case 11:e=mw(null,e,r,t,A);break e;case 14:e=gw(null,e,r,QA(r.type,t),A);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:QA(r,n),dh(t,e,r,n,A);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:QA(r,n),ww(t,e,r,n,A);case 3:e:{if(h0(e),t===null)throw Error(P(387));r=e.pendingProps,s=e.memoizedState,n=s.element,Mv(t,e),uu(e,r,null,A);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=Ws(Error(P(423)),e),e=yw(t,e,r,A,n);break e}else if(r!==n){n=Ws(Error(P(424)),e),e=yw(t,e,r,A,n);break e}else for(Jt=Zr(e.stateNode.containerInfo.firstChild),Xt=e,Se=!0,IA=null,A=Nv(e,null,r,A),e.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Gs(),r===n){e=gr(t,e,A);break e}bt(t,e,r,A)}e=e.child}return e;case 5:return $v(e),t===null&&ih(e),r=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,a=n.children,Ah(r,n)?a=null:s!==null&&Ah(r,s)&&(e.flags|=32),f0(t,e),bt(t,e,a,A),e.child;case 6:return t===null&&ih(e),null;case 13:return p0(t,e,A);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vs(e,null,r,A):bt(t,e,r,A),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:QA(r,n),mw(t,e,r,n,A);case 7:return bt(t,e,e.pendingProps,A),e.child;case 8:return bt(t,e,e.pendingProps.children,A),e.child;case 12:return bt(t,e,e.pendingProps.children,A),e.child;case 10:e:{if(r=e.type._context,n=e.pendingProps,s=e.memoizedProps,a=n.value,Qe(ou,r._currentValue),r._currentValue=a,s!==null)if(OA(s.value,a)){if(s.children===n.children&&!Ht.current){e=gr(t,e,A);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var o=i.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=cr(-1,A&-A),o.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?o.next=o:(o.next=u.next,u.next=o),l.pending=o}}s.lanes|=A,o=s.alternate,o!==null&&(o.lanes|=A),oh(s.return,A,e),i.lanes|=A;break}o=o.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(P(341));a.lanes|=A,i=a.alternate,i!==null&&(i.lanes|=A),oh(a,A,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}bt(t,e,n.children,A),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,Ds(e,A),n=fA(n),r=r(n),e.flags|=1,bt(t,e,r,A),e.child;case 14:return r=e.type,n=QA(r,e.pendingProps),n=QA(r.type,n),gw(t,e,r,n,A);case 15:return c0(t,e,e.type,e.pendingProps,A);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:QA(r,n),xl(t,e),e.tag=1,Nt(r)?(t=!0,su(e)):t=!1,Ds(e,A),o0(e,r,n),uh(e,r,n,A),fh(null,e,r,!0,t,A);case 19:return m0(t,e,A);case 22:return d0(t,e,A)}throw Error(P(156,e.tag))};function T0(t,e){return sv(t,e)}function YF(t,e,A,r){this.tag=t,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lA(t,e,A,r){return new YF(t,e,A,r)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qF(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Np)return 11;if(t===Dp)return 14}return 2}function en(t,e){var A=t.alternate;return A===null?(A=lA(t.tag,e,t.key,t.mode),A.elementType=t.elementType,A.type=t.type,A.stateNode=t.stateNode,A.alternate=t,t.alternate=A):(A.pendingProps=e,A.type=t.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=t.flags&14680064,A.childLanes=t.childLanes,A.lanes=t.lanes,A.child=t.child,A.memoizedProps=t.memoizedProps,A.memoizedState=t.memoizedState,A.updateQueue=t.updateQueue,e=t.dependencies,A.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},A.sibling=t.sibling,A.index=t.index,A.ref=t.ref,A}function kl(t,e,A,r,n,s){var a=2;if(r=t,typeof t=="function")Bm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case _s:return kn(A.children,n,s,e);case Hp:a=8,n|=8;break;case kf:return t=lA(12,A,e,n|2),t.elementType=kf,t.lanes=s,t;case Rf:return t=lA(13,A,e,n),t.elementType=Rf,t.lanes=s,t;case Lf:return t=lA(19,A,e,n),t.elementType=Lf,t.lanes=s,t;case $_:return fc(A,n,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D_:a=10;break e;case M_:a=9;break e;case Np:a=11;break e;case Dp:a=14;break e;case xr:a=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=lA(a,A,e,n),e.elementType=t,e.type=r,e.lanes=s,e}function kn(t,e,A,r){return t=lA(7,t,r,e),t.lanes=A,t}function fc(t,e,A,r){return t=lA(22,t,r,e),t.elementType=$_,t.lanes=A,t.stateNode={isHidden:!1},t}function Ud(t,e,A){return t=lA(6,t,null,e),t.lanes=A,t}function Fd(t,e,A){return e=lA(4,t.children!==null?t.children:[],t.key,e),e.lanes=A,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eI(t,e,A,r,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=od(0),this.expirationTimes=od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=od(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function _m(t,e,A,r,n,s,a,i,o){return t=new eI(t,e,A,i,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lA(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},nm(s),t}function tI(t,e,A){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:A}}function O0(t){if(!t)return an;t=t._reactInternals;e:{if(Jn(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var A=t.type;if(Nt(A))return Ov(t,A,e)}return e}function k0(t,e,A,r,n,s,a,i,o){return t=_m(A,r,!0,t,n,s,a,i,o),t.context=O0(null),A=t.current,r=Qt(),n=qr(A),s=cr(r,n),s.callback=e??null,Xr(A,s,n),t.current.lanes=n,to(t,n,r),Dt(t,r),t}function hc(t,e,A,r){var n=e.current,s=Qt(),a=qr(n);return A=O0(A),e.context===null?e.context=A:e.pendingContext=A,e=cr(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xr(n,e,a),t!==null&&(xA(t,n,a,s),Fl(t,n,a)),a}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var A=t.retryLane;t.retryLane=A!==0&&A<e?A:e}}function vm(t,e){Iw(t,e),(t=t.alternate)&&Iw(t,e)}function AI(){return null}var R0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cm(t){this._internalRoot=t}pc.prototype.render=Cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));hc(t,e,null,null)};pc.prototype.unmount=Cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$n(function(){hc(null,t,null,null)}),e[pr]=null}};function pc(t){this._internalRoot=t}pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=dv();t={blockedOn:null,target:t,priority:e};for(var A=0;A<Pr.length&&e!==0&&e<Pr[A].priority;A++);Pr.splice(A,0,t),A===0&&hv(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sw(){}function rI(t,e,A,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var l=wu(a);s.call(l)}}var a=k0(e,r,t,0,null,!1,!1,"",Sw);return t._reactRootContainer=a,t[pr]=a.current,ki(t.nodeType===8?t.parentNode:t),$n(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof r=="function"){var i=r;r=function(){var l=wu(o);i.call(l)}}var o=_m(t,0,!1,null,null,!1,!1,"",Sw);return t._reactRootContainer=o,t[pr]=o.current,ki(t.nodeType===8?t.parentNode:t),$n(function(){hc(e,o,A,r)}),o}function gc(t,e,A,r,n){var s=A._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var i=n;n=function(){var o=wu(a);i.call(o)}}hc(e,a,t,n)}else a=rI(A,e,t,n,r);return wu(a)}uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var A=La(e.pendingLanes);A!==0&&(jp(e,A|1),Dt(e,Pe()),!(he&6)&&(Js=Pe()+500,mn()))}break;case 13:$n(function(){var r=mr(t,1);if(r!==null){var n=Qt();xA(r,t,1,n)}}),vm(t,1)}};Kp=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var A=Qt();xA(e,t,134217728,A)}vm(t,134217728)}};cv=function(t){if(t.tag===13){var e=qr(t),A=mr(t,e);if(A!==null){var r=Qt();xA(A,t,e,r)}vm(t,e)}};dv=function(){return Ce};fv=function(t,e){var A=Ce;try{return Ce=t,e()}finally{Ce=A}};Vf=function(t,e,A){switch(e){case"input":if(Nf(t,A),e=A.name,A.type==="radio"&&e!=null){for(A=t;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<A.length;e++){var r=A[e];if(r!==t&&r.form===t.form){var n=ic(r);if(!n)throw Error(P(90));K_(r),Nf(r,n)}}}break;case"textarea":V_(t,A);break;case"select":e=A.value,e!=null&&Ls(t,!!A.multiple,e,!1)}};q_=gm;ev=$n;var nI={usingClientEntryPoint:!1,Events:[ro,Es,ic,X_,Y_,gm]},Qa={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sI={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rv(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||AI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{rc=ko.inject(sI),JA=ko}catch{}}tA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nI;tA.createPortal=function(t,e){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(P(200));return tI(t,e,null,A)};tA.createRoot=function(t,e){if(!bm(t))throw Error(P(299));var A=!1,r="",n=R0;return e!=null&&(e.unstable_strictMode===!0&&(A=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=_m(t,1,!1,null,null,A,!1,r,n),t[pr]=e.current,ki(t.nodeType===8?t.parentNode:t),new Cm(e)};tA.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=rv(e),t=t===null?null:t.stateNode,t};tA.flushSync=function(t){return $n(t)};tA.hydrate=function(t,e,A){if(!mc(e))throw Error(P(200));return gc(null,t,e,!0,A)};tA.hydrateRoot=function(t,e,A){if(!bm(t))throw Error(P(405));var r=A!=null&&A.hydratedSources||null,n=!1,s="",a=R0;if(A!=null&&(A.unstable_strictMode===!0&&(n=!0),A.identifierPrefix!==void 0&&(s=A.identifierPrefix),A.onRecoverableError!==void 0&&(a=A.onRecoverableError)),e=k0(e,null,t,1,A??null,n,!1,s,a),t[pr]=e.current,ki(t),r)for(t=0;t<r.length;t++)A=r[t],n=A._getVersion,n=n(A._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[A,n]:e.mutableSourceEagerHydrationData.push(A,n);return new pc(e)};tA.render=function(t,e,A){if(!mc(e))throw Error(P(200));return gc(null,t,e,!1,A)};tA.unmountComponentAtNode=function(t){if(!mc(t))throw Error(P(40));return t._reactRootContainer?($n(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};tA.unstable_batchedUpdates=gm;tA.unstable_renderSubtreeIntoContainer=function(t,e,A,r){if(!mc(A))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return gc(t,e,A,!1,r)};tA.version="18.3.1-next-f1338f8080-20240426";function L0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L0)}catch(t){console.error(t)}}L0(),L_.exports=tA;var aI=L_.exports,P0,xw=aI;P0=xw.createRoot,xw.hydrateRoot;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Eh=function(t,e){return Eh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(A[n]=r[n])},Eh(t,e)};function RA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Eh(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Qh=function(){return Qh=Object.assign||function(e){for(var A,r=1,n=arguments.length;r<n;r++){A=arguments[r];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},Qh.apply(this,arguments)};function Ct(t,e,A,r){function n(s){return s instanceof A?s:new A(function(a){a(s)})}return new(A||(A=Promise))(function(s,a){function i(u){try{l(r.next(u))}catch(c){a(c)}}function o(u){try{l(r.throw(u))}catch(c){a(c)}}function l(u){u.done?s(u.value):n(u.value).then(i,o)}l((r=r.apply(t,[])).next())})}function pt(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(l){return function(u){return o([l,u])}}function o(l){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return A.label++,{value:l[1],done:!1};case 5:A.label++,n=l[1],l=[0];continue;case 7:l=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){A=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){A.label=l[1];break}if(l[0]===6&&A.label<s[1]){A.label=s[1],s=l;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(l);break}s[2]&&A.ops.pop(),A.trys.pop();continue}l=e.call(t,A)}catch(u){l=[6,u],n=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ro(t,e,A){if(arguments.length===2)for(var r=0,n=e.length,s;r<n;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var wr=function(){function t(e,A,r,n){this.left=e,this.top=A,this.width=r,this.height=n}return t.prototype.add=function(e,A,r,n){return new t(this.left+e,this.top+A,this.width+r,this.height+n)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var r=Array.from(A).find(function(n){return n.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),wc=function(t,e){return wr.fromClientRect(t,e.getBoundingClientRect())},iI=function(t){var e=t.body,A=t.documentElement;if(!e||!A)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,A.scrollWidth),Math.max(e.offsetWidth,A.offsetWidth),Math.max(e.clientWidth,A.clientWidth)),n=Math.max(Math.max(e.scrollHeight,A.scrollHeight),Math.max(e.offsetHeight,A.offsetHeight),Math.max(e.clientHeight,A.clientHeight));return new wr(0,0,r,n)},yc=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},Le=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var a=t[n];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Tw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lo=0;Lo<Tw.length;Lo++)oI[Tw.charCodeAt(Lo)]=Lo;var Ow="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ha=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Po=0;Po<Ow.length;Po++)Ha[Ow.charCodeAt(Po)]=Po;var lI=function(t){var e=t.length*.75,A=t.length,r,n=0,s,a,i,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<A;r+=4)s=Ha[t.charCodeAt(r)],a=Ha[t.charCodeAt(r+1)],i=Ha[t.charCodeAt(r+2)],o=Ha[t.charCodeAt(r+3)],u[n++]=s<<2|a>>4,u[n++]=(a&15)<<4|i>>2,u[n++]=(i&3)<<6|o&63;return l},uI=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},cI=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},Rn=5,Em=11,Id=2,dI=Em-Rn,H0=65536>>Rn,fI=1<<Rn,Sd=fI-1,hI=1024>>Rn,pI=H0+hI,mI=pI,gI=32,wI=mI+gI,yI=65536>>Em,BI=1<<dI,_I=BI-1,kw=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},vI=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},CI=function(t,e){var A=lI(t),r=Array.isArray(A)?cI(A):new Uint32Array(A),n=Array.isArray(A)?uI(A):new Uint16Array(A),s=24,a=kw(n,s/2,r[4]/2),i=r[5]===2?kw(n,(s+r[4])/2):vI(r,Math.ceil((s+r[4])/4));return new bI(r[0],r[1],r[2],r[3],a,i)},bI=function(){function t(e,A,r,n,s,a){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=a}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>Rn],A=(A<<Id)+(e&Sd),this.data[A];if(e<=65535)return A=this.index[H0+(e-55296>>Rn)],A=(A<<Id)+(e&Sd),this.data[A];if(e<this.highStart)return A=wI-yI+(e>>Em),A=this.index[A],A+=e>>Rn&_I,A=this.index[A],A=(A<<Id)+(e&Sd),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Rw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ho=0;Ho<Rw.length;Ho++)EI[Rw.charCodeAt(Ho)]=Ho;var QI="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Lw=50,UI=1,N0=2,D0=3,FI=4,II=5,Pw=7,M0=8,Hw=9,Mr=10,Uh=11,Nw=12,Fh=13,SI=14,Na=15,Ih=16,No=17,Ua=18,xI=19,Dw=20,Sh=21,Fa=22,xd=23,ts=24,$t=25,Da=26,Ma=27,As=28,TI=29,Cn=30,OI=31,Do=32,Mo=33,xh=34,Th=35,Oh=36,ji=37,kh=38,Rl=39,Ll=40,Td=41,$0=42,kI=43,RI=[9001,65288],j0="!",ce="",$o="",Rh=CI(QI),Ar=[Cn,Oh],Lh=[UI,N0,D0,II],K0=[Mr,M0],Mw=[Ma,Da],LI=Lh.concat(K0),$w=[kh,Rl,Ll,xh,Th],PI=[Na,Fh],HI=function(t,e){e===void 0&&(e="strict");var A=[],r=[],n=[];return t.forEach(function(s,a){var i=Rh.get(s);if(i>Lw?(n.push(!0),i-=Lw):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(a),A.push(Ih);if(i===FI||i===Uh){if(a===0)return r.push(a),A.push(Cn);var o=A[a-1];return LI.indexOf(o)===-1?(r.push(r[a-1]),A.push(o)):(r.push(a),A.push(Cn))}if(r.push(a),i===OI)return A.push(e==="strict"?Sh:ji);if(i===$0||i===TI)return A.push(Cn);if(i===kI)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(ji):A.push(Cn);A.push(i)}),[r,A,n]},Od=function(t,e,A,r){var n=r[A];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=A;s<=r.length;){s++;var a=r[s];if(a===e)return!0;if(a!==Mr)break}if(n===Mr)for(var s=A;s>0;){s--;var i=r[s];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var o=A;o<=r.length;){o++;var a=r[o];if(a===e)return!0;if(a!==Mr)break}if(i!==Mr)break}return!1},jw=function(t,e){for(var A=t;A>=0;){var r=e[A];if(r===Mr)A--;else return r}return 0},NI=function(t,e,A,r,n){if(A[r]===0)return ce;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return ce;var a=s-1,i=s+1,o=e[s],l=a>=0?e[a]:0,u=e[i];if(o===N0&&u===D0)return ce;if(Lh.indexOf(o)!==-1)return j0;if(Lh.indexOf(u)!==-1||K0.indexOf(u)!==-1)return ce;if(jw(s,e)===M0)return $o;if(Rh.get(t[s])===Uh||(o===Do||o===Mo)&&Rh.get(t[i])===Uh||o===Pw||u===Pw||o===Hw||[Mr,Fh,Na].indexOf(o)===-1&&u===Hw||[No,Ua,xI,ts,As].indexOf(u)!==-1||jw(s,e)===Fa||Od(xd,Fa,s,e)||Od([No,Ua],Sh,s,e)||Od(Nw,Nw,s,e))return ce;if(o===Mr)return $o;if(o===xd||u===xd)return ce;if(u===Ih||o===Ih)return $o;if([Fh,Na,Sh].indexOf(u)!==-1||o===SI||l===Oh&&PI.indexOf(o)!==-1||o===As&&u===Oh||u===Dw||Ar.indexOf(u)!==-1&&o===$t||Ar.indexOf(o)!==-1&&u===$t||o===Ma&&[ji,Do,Mo].indexOf(u)!==-1||[ji,Do,Mo].indexOf(o)!==-1&&u===Da||Ar.indexOf(o)!==-1&&Mw.indexOf(u)!==-1||Mw.indexOf(o)!==-1&&Ar.indexOf(u)!==-1||[Ma,Da].indexOf(o)!==-1&&(u===$t||[Fa,Na].indexOf(u)!==-1&&e[i+1]===$t)||[Fa,Na].indexOf(o)!==-1&&u===$t||o===$t&&[$t,As,ts].indexOf(u)!==-1)return ce;if([$t,As,ts,No,Ua].indexOf(u)!==-1)for(var c=s;c>=0;){var d=e[c];if(d===$t)return ce;if([As,ts].indexOf(d)!==-1)c--;else break}if([Ma,Da].indexOf(u)!==-1)for(var c=[No,Ua].indexOf(o)!==-1?a:s;c>=0;){var d=e[c];if(d===$t)return ce;if([As,ts].indexOf(d)!==-1)c--;else break}if(kh===o&&[kh,Rl,xh,Th].indexOf(u)!==-1||[Rl,xh].indexOf(o)!==-1&&[Rl,Ll].indexOf(u)!==-1||[Ll,Th].indexOf(o)!==-1&&u===Ll||$w.indexOf(o)!==-1&&[Dw,Da].indexOf(u)!==-1||$w.indexOf(u)!==-1&&o===Ma||Ar.indexOf(o)!==-1&&Ar.indexOf(u)!==-1||o===ts&&Ar.indexOf(u)!==-1||Ar.concat($t).indexOf(o)!==-1&&u===Fa&&RI.indexOf(t[i])===-1||Ar.concat($t).indexOf(u)!==-1&&o===Ua)return ce;if(o===Td&&u===Td){for(var h=A[s],f=1;h>0&&(h--,e[h]===Td);)f++;if(f%2!==0)return ce}return o===Do&&u===Mo?ce:$o},DI=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=HI(t,e.lineBreak),r=A[0],n=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(i){return[$t,Cn,$0].indexOf(i)!==-1?ji:i}));var a=e.wordBreak==="keep-all"?s.map(function(i,o){return i&&t[o]>=19968&&t[o]<=40959}):void 0;return[r,n,a]},MI=function(){function t(e,A,r,n){this.codePoints=e,this.required=A===j0,this.start=r,this.end=n}return t.prototype.slice=function(){return Le.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),$I=function(t,e){var A=yc(t),r=DI(A,e),n=r[0],s=r[1],a=r[2],i=A.length,o=0,l=0;return{next:function(){if(l>=i)return{done:!0,value:null};for(var u=ce;l<i&&(u=NI(A,s,n,++l,a))===ce;);if(u!==ce||l===i){var c=new MI(A,u,o,l);return o=l,{value:c,done:!1}}return{done:!0,value:null}}}},jI=1,KI=2,so=4,Kw=8,yu=10,Gw=47,di=92,GI=9,VI=32,jo=34,Ia=61,zI=35,WI=36,JI=37,Ko=39,Go=40,Sa=41,ZI=95,Tt=45,XI=33,YI=60,qI=62,eS=64,tS=91,AS=93,rS=61,nS=123,Vo=63,sS=125,Vw=124,aS=126,iS=128,zw=65533,kd=42,Fn=43,oS=44,lS=58,uS=59,Ki=46,cS=0,dS=8,fS=11,hS=14,pS=31,mS=127,NA=-1,G0=48,V0=97,z0=101,gS=102,wS=117,yS=122,W0=65,J0=69,Z0=70,BS=85,_S=90,mt=function(t){return t>=G0&&t<=57},vS=function(t){return t>=55296&&t<=57343},rs=function(t){return mt(t)||t>=W0&&t<=Z0||t>=V0&&t<=gS},CS=function(t){return t>=V0&&t<=yS},bS=function(t){return t>=W0&&t<=_S},ES=function(t){return CS(t)||bS(t)},QS=function(t){return t>=iS},zo=function(t){return t===yu||t===GI||t===VI},Bu=function(t){return ES(t)||QS(t)||t===ZI},Ww=function(t){return Bu(t)||mt(t)||t===Tt},US=function(t){return t>=cS&&t<=dS||t===fS||t>=hS&&t<=pS||t===mS},Or=function(t,e){return t!==di?!1:e!==yu},Wo=function(t,e,A){return t===Tt?Bu(e)||Or(e,A):Bu(t)?!0:!!(t===di&&Or(t,e))},Rd=function(t,e,A){return t===Fn||t===Tt?mt(e)?!0:e===Ki&&mt(A):mt(t===Ki?e:t)},FS=function(t){var e=0,A=1;(t[e]===Fn||t[e]===Tt)&&(t[e]===Tt&&(A=-1),e++);for(var r=[];mt(t[e]);)r.push(t[e++]);var n=r.length?parseInt(Le.apply(void 0,r),10):0;t[e]===Ki&&e++;for(var s=[];mt(t[e]);)s.push(t[e++]);var a=s.length,i=a?parseInt(Le.apply(void 0,s),10):0;(t[e]===J0||t[e]===z0)&&e++;var o=1;(t[e]===Fn||t[e]===Tt)&&(t[e]===Tt&&(o=-1),e++);for(var l=[];mt(t[e]);)l.push(t[e++]);var u=l.length?parseInt(Le.apply(void 0,l),10):0;return A*(n+i*Math.pow(10,-a))*Math.pow(10,o*u)},IS={type:2},SS={type:3},xS={type:4},TS={type:13},OS={type:8},kS={type:21},RS={type:9},LS={type:10},PS={type:11},HS={type:12},NS={type:14},Jo={type:23},DS={type:1},MS={type:25},$S={type:24},jS={type:26},KS={type:27},GS={type:28},VS={type:29},zS={type:31},Ph={type:32},X0=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(yc(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Ph;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case jo:return this.consumeStringToken(jo);case zI:var A=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Ww(A)||Or(r,n)){var s=Wo(A,r,n)?KI:jI,a=this.consumeName();return{type:5,value:a,flags:s}}break;case WI:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),TS;break;case Ko:return this.consumeStringToken(Ko);case Go:return IS;case Sa:return SS;case kd:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),NS;break;case Fn:if(Rd(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case oS:return xS;case Tt:var i=e,o=this.peekCodePoint(0),l=this.peekCodePoint(1);if(Rd(i,o,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Wo(i,o,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===Tt&&l===qI)return this.consumeCodePoint(),this.consumeCodePoint(),$S;break;case Ki:if(Rd(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Gw:if(this.peekCodePoint(0)===kd)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===kd&&(u=this.consumeCodePoint(),u===Gw))return this.consumeToken();if(u===NA)return this.consumeToken()}break;case lS:return jS;case uS:return KS;case YI:if(this.peekCodePoint(0)===XI&&this.peekCodePoint(1)===Tt&&this.peekCodePoint(2)===Tt)return this.consumeCodePoint(),this.consumeCodePoint(),MS;break;case eS:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Wo(c,d,h)){var a=this.consumeName();return{type:7,value:a}}break;case tS:return GS;case di:if(Or(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case AS:return VS;case rS:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),OS;break;case nS:return PS;case sS:return HS;case wS:case BS:var f=this.peekCodePoint(0),w=this.peekCodePoint(1);return f===Fn&&(rs(w)||w===Vo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Vw:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),RS;if(this.peekCodePoint(0)===Vw)return this.consumeCodePoint(),kS;break;case aS:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),LS;break;case NA:return Ph}return zo(e)?(this.consumeWhiteSpace(),zS):mt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Bu(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Le(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();rs(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var r=!1;A===Vo&&e.length<6;)e.push(A),A=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(Le.apply(void 0,e.map(function(o){return o===Vo?G0:o})),16),s=parseInt(Le.apply(void 0,e.map(function(o){return o===Vo?Z0:o})),16);return{type:30,start:n,end:s}}var a=parseInt(Le.apply(void 0,e),16);if(this.peekCodePoint(0)===Tt&&rs(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var i=[];rs(A)&&i.length<6;)i.push(A),A=this.consumeCodePoint();var s=parseInt(Le.apply(void 0,i),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Go?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Go?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===NA)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===Ko||A===jo){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===NA||this.peekCodePoint(0)===Sa)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Jo)}for(;;){var n=this.consumeCodePoint();if(n===NA||n===Sa)return{type:22,value:Le.apply(void 0,e)};if(zo(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===NA||this.peekCodePoint(0)===Sa?(this.consumeCodePoint(),{type:22,value:Le.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Jo);if(n===jo||n===Ko||n===Go||US(n))return this.consumeBadUrlRemnants(),Jo;if(n===di)if(Or(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Jo;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;zo(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Sa||e===NA)return;Or(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,r="";e>0;){var n=Math.min(A,e);r+=Le.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var A="",r=0;do{var n=this._value[r];if(n===NA||n===void 0||n===e)return A+=this.consumeStringSlice(r),{type:0,value:A};if(n===yu)return this._value.splice(0,r),DS;if(n===di){var s=this._value[r+1];s!==NA&&s!==void 0&&(s===yu?(A+=this.consumeStringSlice(r),r=-1,this._value.shift()):Or(n,s)&&(A+=this.consumeStringSlice(r),A+=Le(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=so,r=this.peekCodePoint(0);for((r===Fn||r===Tt)&&e.push(this.consumeCodePoint());mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===Ki&&mt(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Kw;mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===J0||r===z0)&&((n===Fn||n===Tt)&&mt(s)||mt(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Kw;mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[FS(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],r=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Wo(n,s,a)){var i=this.consumeName();return{type:15,number:A,flags:r,unit:i}}return n===JI?(this.consumeCodePoint(),{type:16,number:A,flags:r}):{type:17,number:A,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(rs(e)){for(var A=Le(e);rs(this.peekCodePoint(0))&&A.length<6;)A+=Le(this.consumeCodePoint());zo(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(A,16);return r===0||vS(r)||r>1114111?zw:r}return e===NA?zw:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(Ww(A))e+=Le(A);else if(Or(A,this.peekCodePoint(0)))e+=Le(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),Y0=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new X0;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||JS(r,e))return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Ph:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ao=function(t){return t.type===15},oa=function(t){return t.type===17},be=function(t){return t.type===20},WS=function(t){return t.type===0},Hh=function(t,e){return be(t)&&t.value===e},q0=function(t){return t.type!==31},Zs=function(t){return t.type!==31&&t.type!==4},qA=function(t){var e=[],A=[];return t.forEach(function(r){if(r.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}r.type!==31&&A.push(r)}),A.length&&e.push(A),e},JS=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},on=function(t){return t.type===17||t.type===15},Me=function(t){return t.type===16||on(t)},eC=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},lt={type:17,number:0,flags:so},Qm={type:16,number:50,flags:so},$r={type:16,number:100,flags:so},$a=function(t,e,A){var r=t[0],n=t[1];return[Ee(r,e),Ee(typeof n<"u"?n:r,A)]},Ee=function(t,e){if(t.type===16)return t.number/100*e;if(ao(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},tC="deg",AC="grad",rC="rad",nC="turn",Bc={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case tC:return Math.PI*e.number/180;case AC:return Math.PI/200*e.number;case rC:return e.number;case nC:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},sC=function(t){return t.type===15&&(t.unit===tC||t.unit===AC||t.unit===rC||t.unit===nC)},aC=function(t){var e=t.filter(be).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[lt,lt];case"to top":case"bottom":return uA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[lt,$r];case"to right":case"left":return uA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$r,$r];case"to bottom":case"top":return uA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$r,lt];case"to left":case"right":return uA(270)}return 0},uA=function(t){return Math.PI*t/180},tn={name:"color",parse:function(t,e){if(e.type===18){var A=ZS[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3);return jr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return jr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6);return jr(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return jr(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var i=dr[e.value.toUpperCase()];if(typeof i<"u")return i}return dr.TRANSPARENT}},An=function(t){return(255&t)===0},Ye=function(t){var e=255&t,A=255&t>>8,r=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+r+","+A+","+e/255+")":"rgb("+n+","+r+","+A+")"},jr=function(t,e,A,r){return(t<<24|e<<16|A<<8|Math.round(r*255)<<0)>>>0},Jw=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},Zw=function(t,e){var A=e.filter(Zs);if(A.length===3){var r=A.map(Jw),n=r[0],s=r[1],a=r[2];return jr(n,s,a,1)}if(A.length===4){var i=A.map(Jw),n=i[0],s=i[1],a=i[2],o=i[3];return jr(n,s,a,o)}return 0};function Ld(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var Xw=function(t,e){var A=e.filter(Zs),r=A[0],n=A[1],s=A[2],a=A[3],i=(r.type===17?uA(r.number):Bc.parse(t,r))/(Math.PI*2),o=Me(n)?n.number/100:0,l=Me(s)?s.number/100:0,u=typeof a<"u"&&Me(a)?Ee(a,1):1;if(o===0)return jr(l*255,l*255,l*255,1);var c=l<=.5?l*(o+1):l+o-l*o,d=l*2-c,h=Ld(d,c,i+1/3),f=Ld(d,c,i),w=Ld(d,c,i-1/3);return jr(h*255,f*255,w*255,u)},ZS={hsl:Xw,hsla:Xw,rgb:Zw,rgba:Zw},fi=function(t,e){return tn.parse(t,Y0.create(e).parseComponentValue())},dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},XS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(be(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_c=function(t,e){var A=tn.parse(t,e[0]),r=e[1];return r&&Me(r)?{color:A,stop:r}:{color:A,stop:null}},Yw=function(t,e){var A=t[0],r=t[t.length-1];A.stop===null&&(A.stop=lt),r.stop===null&&(r.stop=$r);for(var n=[],s=0,a=0;a<t.length;a++){var i=t[a].stop;if(i!==null){var o=Ee(i,e);o>s?n.push(o):n.push(s),s=o}else n.push(null)}for(var l=null,a=0;a<n.length;a++){var u=n[a];if(u===null)l===null&&(l=a);else if(l!==null){for(var c=a-l,d=n[l-1],h=(u-d)/(c+1),f=1;f<=c;f++)n[l+f-1]=h*f;l=null}}return t.map(function(w,y){var p=w.color;return{color:p,stop:Math.max(Math.min(1,n[y]/e),0)}})},qS=function(t,e,A){var r=e/2,n=A/2,s=Ee(t[0],e)-r,a=n-Ee(t[1],A);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},ex=function(t,e,A){var r=typeof t=="number"?t:qS(t,e,A),n=Math.abs(e*Math.sin(r))+Math.abs(A*Math.cos(r)),s=e/2,a=A/2,i=n/2,o=Math.sin(r-Math.PI/2)*i,l=Math.cos(r-Math.PI/2)*i;return[n,s-l,s+l,a-o,a+o]},EA=function(t,e){return Math.sqrt(t*t+e*e)},qw=function(t,e,A,r,n){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(a,i){var o=i[0],l=i[1],u=EA(A-o,r-l);return(n?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:i,optimumDistance:u}:a},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},tx=function(t,e,A,r,n){var s=0,a=0;switch(t.size){case 0:t.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(A),Math.abs(A-n)));break;case 2:if(t.shape===0)s=a=Math.min(EA(e,A),EA(e,A-n),EA(e-r,A),EA(e-r,A-n));else if(t.shape===1){var i=Math.min(Math.abs(A),Math.abs(A-n))/Math.min(Math.abs(e),Math.abs(e-r)),o=qw(r,n,e,A,!0),l=o[0],u=o[1];s=EA(l-e,(u-A)/i),a=i*s}break;case 1:t.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(A),Math.abs(A-n)));break;case 3:if(t.shape===0)s=a=Math.max(EA(e,A),EA(e,A-n),EA(e-r,A),EA(e-r,A-n));else if(t.shape===1){var i=Math.max(Math.abs(A),Math.abs(A-n))/Math.max(Math.abs(e),Math.abs(e-r)),c=qw(r,n,e,A,!1),l=c[0],u=c[1];s=EA(l-e,(u-A)/i),a=i*s}break}return Array.isArray(t.size)&&(s=Ee(t.size[0],r),a=t.size.length===2?Ee(t.size[1],n):s),[s,a]},Ax=function(t,e){var A=uA(180),r=[];return qA(e).forEach(function(n,s){if(s===0){var a=n[0];if(a.type===20&&a.value==="to"){A=aC(n);return}else if(sC(a)){A=Bc.parse(t,a);return}}var i=_c(t,n);r.push(i)}),{angle:A,stops:r,type:1}},Zo=function(t,e){var A=uA(180),r=[];return qA(e).forEach(function(n,s){if(s===0){var a=n[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){A=aC(n);return}else if(sC(a)){A=(Bc.parse(t,a)+uA(270))%uA(360);return}}var i=_c(t,n);r.push(i)}),{angle:A,stops:r,type:1}},rx=function(t,e){var A=uA(180),r=[],n=1,s=0,a=3,i=[];return qA(e).forEach(function(o,l){var u=o[0];if(l===0){if(be(u)&&u.value==="linear"){n=1;return}else if(be(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var c=tn.parse(t,u.values[0]);r.push({stop:lt,color:c})}else if(u.name==="to"){var c=tn.parse(t,u.values[0]);r.push({stop:$r,color:c})}else if(u.name==="color-stop"){var d=u.values.filter(Zs);if(d.length===2){var c=tn.parse(t,d[1]),h=d[0];oa(h)&&r.push({stop:{type:16,number:h.number*100,flags:h.flags},color:c})}}}}),n===1?{angle:(A+uA(180))%uA(360),stops:r,type:n}:{size:a,shape:s,stops:r,position:i,type:n}},iC="closest-side",oC="farthest-side",lC="closest-corner",uC="farthest-corner",cC="circle",dC="ellipse",fC="cover",hC="contain",nx=function(t,e){var A=0,r=3,n=[],s=[];return qA(e).forEach(function(a,i){var o=!0;if(i===0){var l=!1;o=a.reduce(function(c,d){if(l)if(be(d))switch(d.value){case"center":return s.push(Qm),c;case"top":case"left":return s.push(lt),c;case"right":case"bottom":return s.push($r),c}else(Me(d)||on(d))&&s.push(d);else if(be(d))switch(d.value){case cC:return A=0,!1;case dC:return A=1,!1;case"at":return l=!0,!1;case iC:return r=0,!1;case fC:case oC:return r=1,!1;case hC:case lC:return r=2,!1;case uC:return r=3,!1}else if(on(d)||Me(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return c},o)}if(o){var u=_c(t,a);n.push(u)}}),{size:r,shape:A,stops:n,position:s,type:2}},Xo=function(t,e){var A=0,r=3,n=[],s=[];return qA(e).forEach(function(a,i){var o=!0;if(i===0?o=a.reduce(function(u,c){if(be(c))switch(c.value){case"center":return s.push(Qm),!1;case"top":case"left":return s.push(lt),!1;case"right":case"bottom":return s.push($r),!1}else if(Me(c)||on(c))return s.push(c),!1;return u},o):i===1&&(o=a.reduce(function(u,c){if(be(c))switch(c.value){case cC:return A=0,!1;case dC:return A=1,!1;case hC:case iC:return r=0,!1;case oC:return r=1,!1;case lC:return r=2,!1;case fC:case uC:return r=3,!1}else if(on(c)||Me(c))return Array.isArray(r)||(r=[]),r.push(c),!1;return u},o)),o){var l=_c(t,a);n.push(l)}}),{size:r,shape:A,stops:n,position:s,type:2}},sx=function(t){return t.type===1},ax=function(t){return t.type===2},Um={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var r=pC[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function ix(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!pC[t.name])}var pC={"linear-gradient":Ax,"-moz-linear-gradient":Zo,"-ms-linear-gradient":Zo,"-o-linear-gradient":Zo,"-webkit-linear-gradient":Zo,"radial-gradient":nx,"-moz-radial-gradient":Xo,"-ms-radial-gradient":Xo,"-o-radial-gradient":Xo,"-webkit-radial-gradient":Xo,"-webkit-gradient":rx},ox={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(r){return Zs(r)&&ix(r)}).map(function(r){return Um.parse(t,r)})}},lx={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(be(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ux={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return qA(e).map(function(A){return A.filter(Me)}).map(eC)}},cx={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return qA(e).map(function(A){return A.filter(be).map(function(r){return r.value}).join(" ")}).map(dx)}},dx=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},$s;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})($s||($s={}));var fx={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return qA(e).map(function(A){return A.filter(hx)})}},hx=function(t){return be(t)||Me(t)},vc=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},px=vc("top"),mx=vc("right"),gx=vc("bottom"),wx=vc("left"),Cc=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return eC(A.filter(Me))}}},yx=Cc("top-left"),Bx=Cc("top-right"),_x=Cc("bottom-right"),vx=Cc("bottom-left"),bc=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Cx=bc("top"),bx=bc("right"),Ex=bc("bottom"),Qx=bc("left"),Ec=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ao(A)?A.number:0}}},Ux=Ec("top"),Fx=Ec("right"),Ix=Ec("bottom"),Sx=Ec("left"),xx={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tx={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Ox={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(be).reduce(function(A,r){return A|kx(r.value)},0)}},kx=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Rx={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Lx={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},_u;(function(t){t.NORMAL="normal",t.STRICT="strict"})(_u||(_u={}));var Px={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return _u.STRICT;case"normal":default:return _u.NORMAL}}},Hx={name:"line-height",initialValue:"normal",prefix:!1,type:4},ey=function(t,e){return be(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Me(t)?Ee(t,e):e},Nx={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Um.parse(t,e)}},Dx={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Nh={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Qc=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Mx=Qc("top"),$x=Qc("right"),jx=Qc("bottom"),Kx=Qc("left"),Gx={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(be).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Vx={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Uc=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},zx=Uc("top"),Wx=Uc("right"),Jx=Uc("bottom"),Zx=Uc("left"),Xx={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Yx={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},qx={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Hh(e[0],"none")?[]:qA(e).map(function(A){for(var r={color:dr.TRANSPARENT,offsetX:lt,offsetY:lt,blur:lt},n=0,s=0;s<A.length;s++){var a=A[s];on(a)?(n===0?r.offsetX=a:n===1?r.offsetY=a:r.blur=a,n++):r.color=tn.parse(t,a)}return r})}},e1={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},t1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=n1[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},A1=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},r1=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),A=e[0],r=e[1];e[2],e[3];var n=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],i=e[13];return e[14],e[15],e.length===16?[A,r,n,s,a,i]:null},n1={matrix:A1,matrix3d:r1},ty={type:16,number:50,flags:so},s1=[ty,ty],a1={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(Me);return A.length!==2?s1:[A[0],A[1]]}},i1={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},hi;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(hi||(hi={}));var o1={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return hi.BREAK_ALL;case"keep-all":return hi.KEEP_ALL;case"normal":default:return hi.NORMAL}}},l1={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(oa(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},mC={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},u1={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return oa(e)?e.number:1}},c1={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d1={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(be).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},f1={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:A.push(n.value);break;case 17:A.push(n.number.toString());break;case 4:r.push(A.join(" ")),A.length=0;break}}),A.length&&r.push(A.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},h1={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},p1={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(oa(e))return e.number;if(be(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},m1={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(be).map(function(A){return A.value})}},g1={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},We=function(t,e){return(t&e)!==0},w1={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e}},y1={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;for(var r=[],n=e.filter(q0),s=0;s<n.length;s++){var a=n[s],i=n[s+1];if(a.type===20){var o=i&&oa(i)?i.number:1;r.push({counter:a.value,increment:o})}}return r}},B1={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var A=[],r=e.filter(q0),n=0;n<r.length;n++){var s=r[n],a=r[n+1];if(be(s)&&s.value!=="none"){var i=a&&oa(a)?a.number:0;A.push({counter:s.value,reset:i})}}return A}},_1={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ao).map(function(A){return mC.parse(t,A)})}},v1={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;var r=[],n=e.filter(WS);if(n.length%2!==0)return null;for(var s=0;s<n.length;s+=2){var a=n[s].value,i=n[s+1].value;r.push({open:a,close:i})}return r}},Ay=function(t,e,A){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?A?r.open:r.close:""},C1={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Hh(e[0],"none")?[]:qA(e).map(function(A){for(var r={color:255,offsetX:lt,offsetY:lt,blur:lt,spread:lt,inset:!1},n=0,s=0;s<A.length;s++){var a=A[s];Hh(a,"inset")?r.inset=!0:on(a)?(n===0?r.offsetX=a:n===1?r.offsetY=a:n===2?r.blur=a:r.spread=a,n++):r.color=tn.parse(t,a)}return r})}},b1={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],r=[];return e.filter(be).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),A.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},E1={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Q1={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ao(e)?e.number:0}},U1=function(){function t(e,A){var r,n;this.animationDuration=W(e,_1,A.animationDuration),this.backgroundClip=W(e,XS,A.backgroundClip),this.backgroundColor=W(e,YS,A.backgroundColor),this.backgroundImage=W(e,ox,A.backgroundImage),this.backgroundOrigin=W(e,lx,A.backgroundOrigin),this.backgroundPosition=W(e,ux,A.backgroundPosition),this.backgroundRepeat=W(e,cx,A.backgroundRepeat),this.backgroundSize=W(e,fx,A.backgroundSize),this.borderTopColor=W(e,px,A.borderTopColor),this.borderRightColor=W(e,mx,A.borderRightColor),this.borderBottomColor=W(e,gx,A.borderBottomColor),this.borderLeftColor=W(e,wx,A.borderLeftColor),this.borderTopLeftRadius=W(e,yx,A.borderTopLeftRadius),this.borderTopRightRadius=W(e,Bx,A.borderTopRightRadius),this.borderBottomRightRadius=W(e,_x,A.borderBottomRightRadius),this.borderBottomLeftRadius=W(e,vx,A.borderBottomLeftRadius),this.borderTopStyle=W(e,Cx,A.borderTopStyle),this.borderRightStyle=W(e,bx,A.borderRightStyle),this.borderBottomStyle=W(e,Ex,A.borderBottomStyle),this.borderLeftStyle=W(e,Qx,A.borderLeftStyle),this.borderTopWidth=W(e,Ux,A.borderTopWidth),this.borderRightWidth=W(e,Fx,A.borderRightWidth),this.borderBottomWidth=W(e,Ix,A.borderBottomWidth),this.borderLeftWidth=W(e,Sx,A.borderLeftWidth),this.boxShadow=W(e,C1,A.boxShadow),this.color=W(e,xx,A.color),this.direction=W(e,Tx,A.direction),this.display=W(e,Ox,A.display),this.float=W(e,Rx,A.cssFloat),this.fontFamily=W(e,f1,A.fontFamily),this.fontSize=W(e,h1,A.fontSize),this.fontStyle=W(e,g1,A.fontStyle),this.fontVariant=W(e,m1,A.fontVariant),this.fontWeight=W(e,p1,A.fontWeight),this.letterSpacing=W(e,Lx,A.letterSpacing),this.lineBreak=W(e,Px,A.lineBreak),this.lineHeight=W(e,Hx,A.lineHeight),this.listStyleImage=W(e,Nx,A.listStyleImage),this.listStylePosition=W(e,Dx,A.listStylePosition),this.listStyleType=W(e,Nh,A.listStyleType),this.marginTop=W(e,Mx,A.marginTop),this.marginRight=W(e,$x,A.marginRight),this.marginBottom=W(e,jx,A.marginBottom),this.marginLeft=W(e,Kx,A.marginLeft),this.opacity=W(e,u1,A.opacity);var s=W(e,Gx,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=W(e,Vx,A.overflowWrap),this.paddingTop=W(e,zx,A.paddingTop),this.paddingRight=W(e,Wx,A.paddingRight),this.paddingBottom=W(e,Jx,A.paddingBottom),this.paddingLeft=W(e,Zx,A.paddingLeft),this.paintOrder=W(e,b1,A.paintOrder),this.position=W(e,Yx,A.position),this.textAlign=W(e,Xx,A.textAlign),this.textDecorationColor=W(e,c1,(r=A.textDecorationColor)!==null&&r!==void 0?r:A.color),this.textDecorationLine=W(e,d1,(n=A.textDecorationLine)!==null&&n!==void 0?n:A.textDecoration),this.textShadow=W(e,qx,A.textShadow),this.textTransform=W(e,e1,A.textTransform),this.transform=W(e,t1,A.transform),this.transformOrigin=W(e,a1,A.transformOrigin),this.visibility=W(e,i1,A.visibility),this.webkitTextStrokeColor=W(e,E1,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=W(e,Q1,A.webkitTextStrokeWidth),this.wordBreak=W(e,o1,A.wordBreak),this.zIndex=W(e,l1,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return An(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return We(this.display,4)||We(this.display,33554432)||We(this.display,268435456)||We(this.display,536870912)||We(this.display,67108864)||We(this.display,134217728)},t}(),F1=function(){function t(e,A){this.content=W(e,w1,A.content),this.quotes=W(e,v1,A.quotes)}return t}(),ry=function(){function t(e,A){this.counterIncrement=W(e,y1,A.counterIncrement),this.counterReset=W(e,B1,A.counterReset)}return t}(),W=function(t,e,A){var r=new X0,n=A!==null&&typeof A<"u"?A.toString():e.initialValue;r.write(n);var s=new Y0(r.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(t,be(a)?a.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Bc.parse(t,s.parseComponentValue());case"color":return tn.parse(t,s.parseComponentValue());case"image":return Um.parse(t,s.parseComponentValue());case"length":var i=s.parseComponentValue();return on(i)?i:lt;case"length-percentage":var o=s.parseComponentValue();return Me(o)?o:lt;case"time":return mC.parse(t,s.parseComponentValue())}break}},I1="data-html2canvas-debug",S1=function(t){var e=t.getAttribute(I1);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Dh=function(t,e){var A=S1(t);return A===1||e===A},er=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Dh(A,3))debugger;this.styles=new U1(e,window.getComputedStyle(A,null)),jh(A)&&(this.styles.animationDuration.some(function(r){return r>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=wc(this.context,A),Dh(A,4)&&(this.flags|=16)}return t}(),x1="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ja=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yo=0;Yo<ny.length;Yo++)ja[ny.charCodeAt(Yo)]=Yo;var T1=function(t){var e=t.length*.75,A=t.length,r,n=0,s,a,i,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<A;r+=4)s=ja[t.charCodeAt(r)],a=ja[t.charCodeAt(r+1)],i=ja[t.charCodeAt(r+2)],o=ja[t.charCodeAt(r+3)],u[n++]=s<<2|a>>4,u[n++]=(a&15)<<4|i>>2,u[n++]=(i&3)<<6|o&63;return l},O1=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},k1=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},Ln=5,Fm=11,Pd=2,R1=Fm-Ln,gC=65536>>Ln,L1=1<<Ln,Hd=L1-1,P1=1024>>Ln,H1=gC+P1,N1=H1,D1=32,M1=N1+D1,$1=65536>>Fm,j1=1<<R1,K1=j1-1,sy=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},G1=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},V1=function(t,e){var A=T1(t),r=Array.isArray(A)?k1(A):new Uint32Array(A),n=Array.isArray(A)?O1(A):new Uint16Array(A),s=24,a=sy(n,s/2,r[4]/2),i=r[5]===2?sy(n,(s+r[4])/2):G1(r,Math.ceil((s+r[4])/4));return new z1(r[0],r[1],r[2],r[3],a,i)},z1=function(){function t(e,A,r,n,s,a){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=a}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>Ln],A=(A<<Pd)+(e&Hd),this.data[A];if(e<=65535)return A=this.index[gC+(e-55296>>Ln)],A=(A<<Pd)+(e&Hd),this.data[A];if(e<this.highStart)return A=M1-$1+(e>>Fm),A=this.index[A],A+=e>>Ln&K1,A=this.index[A],A=(A<<Pd)+(e&Hd),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qo=0;qo<ay.length;qo++)W1[ay.charCodeAt(qo)]=qo;var J1=1,Nd=2,Dd=3,iy=4,oy=5,Z1=7,ly=8,Md=9,$d=10,uy=11,cy=12,dy=13,fy=14,jd=15,X1=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},Y1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var a=t[n];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},q1=V1(x1),nA="",Kd="",eT=function(t){return q1.get(t)},tT=function(t,e,A){var r=A-2,n=e[r],s=e[A-1],a=e[A];if(s===Nd&&a===Dd)return nA;if(s===Nd||s===Dd||s===iy||a===Nd||a===Dd||a===iy)return Kd;if(s===ly&&[ly,Md,uy,cy].indexOf(a)!==-1||(s===uy||s===Md)&&(a===Md||a===$d)||(s===cy||s===$d)&&a===$d||a===dy||a===oy||a===Z1||s===J1)return nA;if(s===dy&&a===fy){for(;n===oy;)n=e[--r];if(n===fy)return nA}if(s===jd&&a===jd){for(var i=0;n===jd;)i++,n=e[--r];if(i%2===0)return nA}return Kd},AT=function(t){var e=X1(t),A=e.length,r=0,n=0,s=e.map(eT);return{next:function(){if(r>=A)return{done:!0,value:null};for(var a=nA;r<A&&(a=tT(e,s,++r))===nA;);if(a!==nA||r===A){var i=Y1.apply(null,e.slice(n,r));return n=r,{value:i,done:!1}}return{done:!0,value:null}}}},rT=function(t){for(var e=AT(t),A=[],r;!(r=e.next()).done;)r.value&&A.push(r.value.slice());return A},nT=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),A.selectNode(r);var n=A.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===e)return!0}}return!1},sT=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=yc(r.data).map(function(o){return Le(o)}),s=0,a={},i=n.every(function(o,l){A.setStart(r,s),A.setEnd(r,s+o.length);var u=A.getBoundingClientRect();s+=o.length;var c=u.x>a.x||u.y>a.y;return a=u,l===0?!0:c});return t.body.removeChild(e),i},aT=function(){return typeof new Image().crossOrigin<"u"},iT=function(){return typeof new XMLHttpRequest().responseType=="string"},oT=function(t){var e=new Image,A=t.createElement("canvas"),r=A.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},hy=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},lT=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,A,A);var n=new Image,s=e.toDataURL();n.src=s;var a=Mh(A,A,0,0,n);return r.fillStyle="red",r.fillRect(0,0,A,A),py(a).then(function(i){r.drawImage(i,0,0);var o=r.getImageData(0,0,A,A).data;r.fillStyle="red",r.fillRect(0,0,A,A);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=A+"px",hy(o)?py(Mh(A,A,0,0,l)):Promise.reject(!1)}).then(function(i){return r.drawImage(i,0,0),hy(r.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Mh=function(t,e,A,r,n){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),i=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",A.toString()),i.setAttributeNS(null,"y",r.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(i),i.appendChild(n),a},py=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){return e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ot={get SUPPORT_RANGE_BOUNDS(){var t=nT(document);return Object.defineProperty(ot,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ot.SUPPORT_RANGE_BOUNDS&&sT(document);return Object.defineProperty(ot,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=oT(document);return Object.defineProperty(ot,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?lT(document):Promise.resolve(!1);return Object.defineProperty(ot,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=aT();return Object.defineProperty(ot,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=iT();return Object.defineProperty(ot,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ot,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ot,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},pi=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),uT=function(t,e,A,r){var n=fT(e,A),s=[],a=0;return n.forEach(function(i){if(A.textDecorationLine.length||i.trim().length>0)if(ot.SUPPORT_RANGE_BOUNDS){var o=my(r,a,i.length).getClientRects();if(o.length>1){var l=Im(i),u=0;l.forEach(function(d){s.push(new pi(d,wr.fromDOMRectList(t,my(r,u+a,d.length).getClientRects()))),u+=d.length})}else s.push(new pi(i,wr.fromDOMRectList(t,o)))}else{var c=r.splitText(i.length);s.push(new pi(i,cT(t,r))),r=c}else ot.SUPPORT_RANGE_BOUNDS||(r=r.splitText(i.length));a+=i.length}),s},cT=function(t,e){var A=e.ownerDocument;if(A){var r=A.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var s=wc(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return wr.EMPTY},my=function(t,e,A){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,e),n.setEnd(t,e+A),n},Im=function(t){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return rT(t)},dT=function(t,e){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(r){return r.segment})}return pT(t,e)},fT=function(t,e){return e.letterSpacing!==0?Im(t):dT(t,e)},hT=[32,160,4961,65792,65793,4153,4241],pT=function(t,e){for(var A=$I(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,s=function(){if(n.value){var a=n.value.slice(),i=yc(a),o="";i.forEach(function(l){hT.indexOf(l)===-1?o+=Le(l):(o.length&&r.push(o),r.push(Le(l)),o="")}),o.length&&r.push(o)}};!(n=A.next()).done;)s();return r},mT=function(){function t(e,A,r){this.text=gT(A.data,r.textTransform),this.textBounds=uT(e,this.text,r,A)}return t}(),gT=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(wT,yT);case 2:return t.toUpperCase();default:return t}},wT=/(^|\s|:|-|\(|\))([a-z])/g,yT=function(t,e,A){return t.length>0?e+A.toUpperCase():t},wC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e}(er),yC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e}(er),BC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=new XMLSerializer,a=wc(A,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(er),_C=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(er),$h=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e}(er),BT=[{type:15,flags:0,unit:"px",number:3}],_T=[{type:16,flags:0,number:50}],vT=function(t){return t.width>t.height?new wr(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new wr(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},CT=function(t){var e=t.type===bT?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},vu="checkbox",Cu="radio",bT="password",gy=707406591,Sm=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=CT(r),(n.type===vu||n.type===Cu)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=vT(n.bounds)),n.type){case vu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=BT;break;case Cu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=_T;break}return n}return e}(er),vC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return e}(er),CC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(er),bC=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=QC(A,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?fi(A,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):dr.TRANSPARENT,a=r.contentWindow.document.body?fi(A,getComputedStyle(r.contentWindow.document.body).backgroundColor):dr.TRANSPARENT;n.backgroundColor=An(s)?An(a)?n.styles.backgroundColor:a:s}}catch{}return n}return e}(er),ET=["OL","UL","MENU"],Pl=function(t,e,A,r){for(var n=e.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,UC(n)&&n.data.trim().length>0)A.textNodes.push(new mT(t,n,A.styles));else if(Ts(n))if(xC(n)&&n.assignedNodes)n.assignedNodes().forEach(function(i){return Pl(t,i,A,r)});else{var a=EC(t,n);a.styles.isVisible()&&(QT(n,a,r)?a.flags|=4:UT(a.styles)&&(a.flags|=2),ET.indexOf(n.tagName)!==-1&&(a.flags|=8),A.elements.push(a),n.slot,n.shadowRoot?Pl(t,n.shadowRoot,a,r):!bu(n)&&!FC(n)&&!Eu(n)&&Pl(t,n,a,r))}},EC=function(t,e){return Kh(e)?new wC(t,e):IC(e)?new yC(t,e):FC(e)?new BC(t,e):FT(e)?new _C(t,e):IT(e)?new $h(t,e):ST(e)?new Sm(t,e):Eu(e)?new vC(t,e):bu(e)?new CC(t,e):SC(e)?new bC(t,e):new er(t,e)},QC=function(t,e){var A=EC(t,e);return A.flags|=4,Pl(t,e,A,A),A},QT=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||xm(t)&&A.styles.isTransparent()},UT=function(t){return t.isPositioned()||t.isFloating()},UC=function(t){return t.nodeType===Node.TEXT_NODE},Ts=function(t){return t.nodeType===Node.ELEMENT_NODE},jh=function(t){return Ts(t)&&typeof t.style<"u"&&!Hl(t)},Hl=function(t){return typeof t.className=="object"},FT=function(t){return t.tagName==="LI"},IT=function(t){return t.tagName==="OL"},ST=function(t){return t.tagName==="INPUT"},xT=function(t){return t.tagName==="HTML"},FC=function(t){return t.tagName==="svg"},xm=function(t){return t.tagName==="BODY"},IC=function(t){return t.tagName==="CANVAS"},wy=function(t){return t.tagName==="VIDEO"},Kh=function(t){return t.tagName==="IMG"},SC=function(t){return t.tagName==="IFRAME"},yy=function(t){return t.tagName==="STYLE"},TT=function(t){return t.tagName==="SCRIPT"},bu=function(t){return t.tagName==="TEXTAREA"},Eu=function(t){return t.tagName==="SELECT"},xC=function(t){return t.tagName==="SLOT"},By=function(t){return t.tagName.indexOf("-")>0},OT=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},t.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},t.prototype.pop=function(e){var A=this;e.forEach(function(r){return A.counters[r].pop()})},t.prototype.parse=function(e){var A=this,r=e.counterIncrement,n=e.counterReset,s=!0;r!==null&&r.forEach(function(i){var o=A.counters[i.counter];o&&i.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=i.increment)});var a=[];return s&&n.forEach(function(i){var o=A.counters[i.counter];a.push(i.counter),o||(o=A.counters[i.counter]=[]),o.push(i.reset)}),a},t}(),_y={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},kT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},RT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ns=function(t,e,A,r,n,s){return t<e||t>A?Gi(t,n,s.length>0):r.integers.reduce(function(a,i,o){for(;t>=i;)t-=i,a+=r.values[o];return a},"")+s},TC=function(t,e,A,r){var n="";do A||t--,n=r(t)+n,t/=e;while(t*e>=e);return n},Re=function(t,e,A,r,n){var s=A-e+1;return(t<0?"-":"")+(TC(Math.abs(t),s,r,function(a){return Le(Math.floor(a%s)+e)})+n)},wn=function(t,e,A){A===void 0&&(A=". ");var r=e.length;return TC(Math.abs(t),r,!1,function(n){return e[Math.floor(n%r)]})+A},hs=1,Ir=2,Sr=4,Ka=8,rr=function(t,e,A,r,n,s){if(t<-9999||t>9999)return Gi(t,4,n.length>0);var a=Math.abs(t),i=n;if(a===0)return e[0]+i;for(var o=0;a>0&&o<=4;o++){var l=a%10;l===0&&We(s,hs)&&i!==""?i=e[l]+i:l>1||l===1&&o===0||l===1&&o===1&&We(s,Ir)||l===1&&o===1&&We(s,Sr)&&t>100||l===1&&o>1&&We(s,Ka)?i=e[l]+(o>0?A[o-1]:"")+i:l===1&&o>0&&(i=A[o-1]+i),a=Math.floor(a/10)}return(t<0?r:"")+i},Cy="",by="",Ey="",Gd="",Gi=function(t,e,A){var r=A?". ":"",n=A?"":"",s=A?", ":"",a=A?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var i=Re(t,48,57,!0,r);return i.length<4?"0"+i:i;case 4:return wn(t,"",n);case 6:return ns(t,1,3999,_y,3,r).toLowerCase();case 7:return ns(t,1,3999,_y,3,r);case 8:return Re(t,945,969,!1,r);case 9:return Re(t,97,122,!1,r);case 10:return Re(t,65,90,!1,r);case 11:return Re(t,1632,1641,!0,r);case 12:case 49:return ns(t,1,9999,vy,3,r);case 35:return ns(t,1,9999,vy,3,r).toLowerCase();case 13:return Re(t,2534,2543,!0,r);case 14:case 30:return Re(t,6112,6121,!0,r);case 15:return wn(t,"",n);case 16:return wn(t,"",n);case 17:case 48:return rr(t,"",Cy,"",n,Ir|Sr|Ka);case 47:return rr(t,"",by,"",n,hs|Ir|Sr|Ka);case 42:return rr(t,"",Cy,"",n,Ir|Sr|Ka);case 41:return rr(t,"",by,"",n,hs|Ir|Sr|Ka);case 26:return rr(t,"","",Ey,n,0);case 25:return rr(t,"","",Ey,n,hs|Ir|Sr);case 31:return rr(t,"","",Gd,s,hs|Ir|Sr);case 33:return rr(t,"","",Gd,s,0);case 32:return rr(t,"","",Gd,s,hs|Ir|Sr);case 18:return Re(t,2406,2415,!0,r);case 20:return ns(t,1,19999,RT,3,r);case 21:return Re(t,2790,2799,!0,r);case 22:return Re(t,2662,2671,!0,r);case 22:return ns(t,1,10999,kT,3,r);case 23:return wn(t,"");case 24:return wn(t,"");case 27:return Re(t,3302,3311,!0,r);case 28:return wn(t,"",n);case 29:return wn(t,"",n);case 34:return Re(t,3792,3801,!0,r);case 37:return Re(t,6160,6169,!0,r);case 38:return Re(t,4160,4169,!0,r);case 39:return Re(t,2918,2927,!0,r);case 40:return Re(t,1776,1785,!0,r);case 43:return Re(t,3046,3055,!0,r);case 44:return Re(t,3174,3183,!0,r);case 45:return Re(t,3664,3673,!0,r);case 46:return Re(t,3872,3881,!0,r);case 3:default:return Re(t,48,57,!0,r)}},OC="data-html2canvas-ignore",Qy=function(){function t(e,A,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=A,this.counters=new OT,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,A){var r=this,n=LT(e,A);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,i=n.contentWindow,o=i.document,l=NT(n).then(function(){return Ct(r,void 0,void 0,function(){var u,c;return pt(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(jT),i&&(i.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==A.top||i.scrollX!==A.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-A.left,i.scrollY-A.top,0,0))),u=this.options.onclone,c=this.clonedReferenceElement,typeof c>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,HT(o)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(o,c)}).then(function(){return n})]:[2,n]}})})});return o.open(),o.write(MT(document.doctype)+"<html></html>"),$T(this.referenceElement.ownerDocument,s,a),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),l},t.prototype.createElementClone=function(e){if(Dh(e,2))debugger;if(IC(e))return this.createCanvasClone(e);if(wy(e))return this.createVideoClone(e);if(yy(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return Kh(A)&&(Kh(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),A.loading==="lazy"&&(A.loading="eager")),By(A)?this.createCustomElementClone(A):A},t.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return Vd(e.style,A),A},t.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var r=[].slice.call(A.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),n=e.cloneNode(!1);return n.textContent=r,n}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var s=e.getContext("2d"),a=n.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var i=(A=e.getContext("webgl2"))!==null&&A!==void 0?A:e.getContext("webgl");if(i){var o=i.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},t.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var r=A.getContext("2d");try{return r&&(r.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||r.getImageData(0,0,A.width,A.height)),A}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},t.prototype.appendChildNode=function(e,A,r){(!Ts(A)||!TT(A)&&!A.hasAttribute(OC)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(A)))&&(!this.options.copyStyles||!Ts(A)||!yy(A))&&e.appendChild(this.cloneNode(A,r))},t.prototype.cloneChildNodes=function(e,A,r){for(var n=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Ts(s)&&xC(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(i){return n.appendChildNode(A,i,r)})}else this.appendChildNode(A,s,r)},t.prototype.cloneNode=function(e,A){if(UC(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Ts(e)&&(jh(e)||Hl(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var s=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),i=r.getComputedStyle(e,":after");this.referenceElement===e&&jh(n)&&(this.clonedReferenceElement=n),xm(n)&&VT(n);var o=this.counters.parse(new ry(this.context,s)),l=this.resolvePseudoContent(e,n,a,mi.BEFORE);By(e)&&(A=!0),wy(e)||this.cloneChildNodes(e,n,A),l&&n.insertBefore(l,n.firstChild);var u=this.resolvePseudoContent(e,n,i,mi.AFTER);return u&&n.appendChild(u),this.counters.pop(o),(s&&(this.options.copyStyles||Hl(e))&&!SC(e)||A)&&Vd(s,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(bu(e)||Eu(e))&&(bu(n)||Eu(n))&&(n.value=e.value),n}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,A,r,n){var s=this;if(r){var a=r.content,i=A.ownerDocument;if(!(!i||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new ry(this.context,r));var o=new F1(this.context,r),l=i.createElement("html2canvaspseudoelement");Vd(r,l),o.content.forEach(function(c){if(c.type===0)l.appendChild(i.createTextNode(c.value));else if(c.type===22){var d=i.createElement("img");d.src=c.value,d.style.opacity="1",l.appendChild(d)}else if(c.type===18){if(c.name==="attr"){var h=c.values.filter(be);h.length&&l.appendChild(i.createTextNode(e.getAttribute(h[0].value)||""))}else if(c.name==="counter"){var f=c.values.filter(Zs),w=f[0],y=f[1];if(w&&be(w)){var p=s.counters.getCounterValue(w.value),m=y&&be(y)?Nh.parse(s.context,y.value):3;l.appendChild(i.createTextNode(Gi(p,m,!1)))}}else if(c.name==="counters"){var g=c.values.filter(Zs),w=g[0],B=g[1],y=g[2];if(w&&be(w)){var _=s.counters.getCounterValues(w.value),v=y&&be(y)?Nh.parse(s.context,y.value):3,C=B&&B.type===0?B.value:"",E=_.map(function($){return Gi($,v,!1)}).join(C);l.appendChild(i.createTextNode(E))}}}else if(c.type===20)switch(c.value){case"open-quote":l.appendChild(i.createTextNode(Ay(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(Ay(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(c.value))}}),l.className=Gh+" "+Vh;var u=n===mi.BEFORE?" "+Gh:" "+Vh;return Hl(A)?A.className.baseValue+=u:A.className+=u,l}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),mi;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(mi||(mi={}));var LT=function(t,e){var A=t.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=e.width.toString(),A.height=e.height.toString(),A.scrolling="no",A.setAttribute(OC,"true"),t.body.appendChild(A),A},PT=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},HT=function(t){return Promise.all([].slice.call(t.images,0).map(PT))},NT=function(t){return new Promise(function(e,A){var r=t.contentWindow;if(!r)return A("No window assigned for iframe");var n=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},DT=["all","d","content"],Vd=function(t,e){for(var A=t.length-1;A>=0;A--){var r=t.item(A);DT.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},MT=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},$T=function(t,e,A){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||A!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,A)},jT=function(t){var e=t[0],A=t[1],r=t[2];e.scrollLeft=A,e.scrollTop=r},KT=":before",GT=":after",Gh="___html2canvas___pseudoelement_before",Vh="___html2canvas___pseudoelement_after",Uy=`{
    content: "" !important;
    display: none !important;
}`,VT=function(t){zT(t,"."+Gh+KT+Uy+`
         .`+Vh+GT+Uy)},zT=function(t,e){var A=t.ownerDocument;if(A){var r=A.createElement("style");r.textContent=e,t.appendChild(r)}},kC=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),WT=function(){function t(e,A){this.context=e,this._options=A,this._cache={}}return t.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)||(Wd(e)||YT(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),A},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ct(this,void 0,void 0,function(){var A,r,n,s,a=this;return pt(this,function(i){switch(i.label){case 0:return A=kC.isSameOrigin(e),r=!zd(e)&&this._options.useCORS===!0&&ot.SUPPORT_CORS_IMAGES&&!A,n=!zd(e)&&!A&&!Wd(e)&&typeof this._options.proxy=="string"&&ot.SUPPORT_CORS_XHR&&!r,!A&&this._options.allowTaint===!1&&!zd(e)&&!Wd(e)&&!n&&!r?[2]:(s=e,n?[4,this.proxy(s)]:[3,2]);case 1:s=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,l){var u=new Image;u.onload=function(){return o(u)},u.onerror=l,(qT(s)||r)&&(u.crossOrigin="anonymous"),u.src=s,u.complete===!0&&setTimeout(function(){return o(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var A=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(s,a){var i=ot.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(i==="text")s(o.response);else{var c=new FileReader;c.addEventListener("load",function(){return s(c.result)},!1),c.addEventListener("error",function(d){return a(d)},!1),c.readAsDataURL(o.response)}else a("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=a;var l=r.indexOf("?")>-1?"&":"?";if(o.open("GET",""+r+l+"url="+encodeURIComponent(e)+"&responseType="+i),i!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=i),A._options.imageTimeout){var u=A._options.imageTimeout;o.timeout=u,o.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+n)}}o.send()})},t}(),JT=/^data:image\/svg\+xml/i,ZT=/^data:image\/.*;base64,/i,XT=/^data:image\/.*/i,YT=function(t){return ot.SUPPORT_SVG_DRAWING||!eO(t)},zd=function(t){return XT.test(t)},qT=function(t){return ZT.test(t)},Wd=function(t){return t.substr(0,4)==="blob"},eO=function(t){return t.substr(-3).toLowerCase()==="svg"||JT.test(t)},K=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),ss=function(t,e,A){return new K(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},el=function(){function t(e,A,r,n){this.type=1,this.start=e,this.startControl=A,this.endControl=r,this.end=n}return t.prototype.subdivide=function(e,A){var r=ss(this.start,this.startControl,e),n=ss(this.startControl,this.endControl,e),s=ss(this.endControl,this.end,e),a=ss(r,n,e),i=ss(n,s,e),o=ss(a,i,e);return A?new t(this.start,r,a,o):new t(o,i,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),oA=function(t){return t.type===1},tO=function(){function t(e){var A=e.styles,r=e.bounds,n=$a(A.borderTopLeftRadius,r.width,r.height),s=n[0],a=n[1],i=$a(A.borderTopRightRadius,r.width,r.height),o=i[0],l=i[1],u=$a(A.borderBottomRightRadius,r.width,r.height),c=u[0],d=u[1],h=$a(A.borderBottomLeftRadius,r.width,r.height),f=h[0],w=h[1],y=[];y.push((s+o)/r.width),y.push((f+c)/r.width),y.push((a+w)/r.height),y.push((l+d)/r.height);var p=Math.max.apply(Math,y);p>1&&(s/=p,a/=p,o/=p,l/=p,c/=p,d/=p,f/=p,w/=p);var m=r.width-o,g=r.height-d,B=r.width-c,_=r.height-w,v=A.borderTopWidth,C=A.borderRightWidth,E=A.borderBottomWidth,I=A.borderLeftWidth,L=Ee(A.paddingTop,e.bounds.width),$=Ee(A.paddingRight,e.bounds.width),se=Ee(A.paddingBottom,e.bounds.width),z=Ee(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Ie(r.left+I/3,r.top+v/3,s-I/3,a-v/3,ye.TOP_LEFT):new K(r.left+I/3,r.top+v/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Ie(r.left+m,r.top+v/3,o-C/3,l-v/3,ye.TOP_RIGHT):new K(r.left+r.width-C/3,r.top+v/3),this.bottomRightBorderDoubleOuterBox=c>0||d>0?Ie(r.left+B,r.top+g,c-C/3,d-E/3,ye.BOTTOM_RIGHT):new K(r.left+r.width-C/3,r.top+r.height-E/3),this.bottomLeftBorderDoubleOuterBox=f>0||w>0?Ie(r.left+I/3,r.top+_,f-I/3,w-E/3,ye.BOTTOM_LEFT):new K(r.left+I/3,r.top+r.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Ie(r.left+I*2/3,r.top+v*2/3,s-I*2/3,a-v*2/3,ye.TOP_LEFT):new K(r.left+I*2/3,r.top+v*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Ie(r.left+m,r.top+v*2/3,o-C*2/3,l-v*2/3,ye.TOP_RIGHT):new K(r.left+r.width-C*2/3,r.top+v*2/3),this.bottomRightBorderDoubleInnerBox=c>0||d>0?Ie(r.left+B,r.top+g,c-C*2/3,d-E*2/3,ye.BOTTOM_RIGHT):new K(r.left+r.width-C*2/3,r.top+r.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=f>0||w>0?Ie(r.left+I*2/3,r.top+_,f-I*2/3,w-E*2/3,ye.BOTTOM_LEFT):new K(r.left+I*2/3,r.top+r.height-E*2/3),this.topLeftBorderStroke=s>0||a>0?Ie(r.left+I/2,r.top+v/2,s-I/2,a-v/2,ye.TOP_LEFT):new K(r.left+I/2,r.top+v/2),this.topRightBorderStroke=s>0||a>0?Ie(r.left+m,r.top+v/2,o-C/2,l-v/2,ye.TOP_RIGHT):new K(r.left+r.width-C/2,r.top+v/2),this.bottomRightBorderStroke=c>0||d>0?Ie(r.left+B,r.top+g,c-C/2,d-E/2,ye.BOTTOM_RIGHT):new K(r.left+r.width-C/2,r.top+r.height-E/2),this.bottomLeftBorderStroke=f>0||w>0?Ie(r.left+I/2,r.top+_,f-I/2,w-E/2,ye.BOTTOM_LEFT):new K(r.left+I/2,r.top+r.height-E/2),this.topLeftBorderBox=s>0||a>0?Ie(r.left,r.top,s,a,ye.TOP_LEFT):new K(r.left,r.top),this.topRightBorderBox=o>0||l>0?Ie(r.left+m,r.top,o,l,ye.TOP_RIGHT):new K(r.left+r.width,r.top),this.bottomRightBorderBox=c>0||d>0?Ie(r.left+B,r.top+g,c,d,ye.BOTTOM_RIGHT):new K(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=f>0||w>0?Ie(r.left,r.top+_,f,w,ye.BOTTOM_LEFT):new K(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||a>0?Ie(r.left+I,r.top+v,Math.max(0,s-I),Math.max(0,a-v),ye.TOP_LEFT):new K(r.left+I,r.top+v),this.topRightPaddingBox=o>0||l>0?Ie(r.left+Math.min(m,r.width-C),r.top+v,m>r.width+C?0:Math.max(0,o-C),Math.max(0,l-v),ye.TOP_RIGHT):new K(r.left+r.width-C,r.top+v),this.bottomRightPaddingBox=c>0||d>0?Ie(r.left+Math.min(B,r.width-I),r.top+Math.min(g,r.height-E),Math.max(0,c-C),Math.max(0,d-E),ye.BOTTOM_RIGHT):new K(r.left+r.width-C,r.top+r.height-E),this.bottomLeftPaddingBox=f>0||w>0?Ie(r.left+I,r.top+Math.min(_,r.height-E),Math.max(0,f-I),Math.max(0,w-E),ye.BOTTOM_LEFT):new K(r.left+I,r.top+r.height-E),this.topLeftContentBox=s>0||a>0?Ie(r.left+I+z,r.top+v+L,Math.max(0,s-(I+z)),Math.max(0,a-(v+L)),ye.TOP_LEFT):new K(r.left+I+z,r.top+v+L),this.topRightContentBox=o>0||l>0?Ie(r.left+Math.min(m,r.width+I+z),r.top+v+L,m>r.width+I+z?0:o-I+z,l-(v+L),ye.TOP_RIGHT):new K(r.left+r.width-(C+$),r.top+v+L),this.bottomRightContentBox=c>0||d>0?Ie(r.left+Math.min(B,r.width-(I+z)),r.top+Math.min(g,r.height+v+L),Math.max(0,c-(C+$)),d-(E+se),ye.BOTTOM_RIGHT):new K(r.left+r.width-(C+$),r.top+r.height-(E+se)),this.bottomLeftContentBox=f>0||w>0?Ie(r.left+I+z,r.top+_,Math.max(0,f-(I+z)),w-(E+se),ye.BOTTOM_LEFT):new K(r.left+I+z,r.top+r.height-(E+se))}return t}(),ye;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ye||(ye={}));var Ie=function(t,e,A,r,n){var s=4*((Math.sqrt(2)-1)/3),a=A*s,i=r*s,o=t+A,l=e+r;switch(n){case ye.TOP_LEFT:return new el(new K(t,l),new K(t,l-i),new K(o-a,e),new K(o,e));case ye.TOP_RIGHT:return new el(new K(t,e),new K(t+a,e),new K(o,l-i),new K(o,l));case ye.BOTTOM_RIGHT:return new el(new K(o,e),new K(o,e+i),new K(t+a,l),new K(t,l));case ye.BOTTOM_LEFT:default:return new el(new K(o,l),new K(o-a,l),new K(t,e+i),new K(t,e))}},Qu=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},AO=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Uu=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},rO=function(){function t(e,A,r){this.offsetX=e,this.offsetY=A,this.matrix=r,this.type=0,this.target=6}return t}(),tl=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),nO=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),sO=function(t){return t.type===0},RC=function(t){return t.type===1},aO=function(t){return t.type===2},Fy=function(t,e){return t.length===e.length?t.some(function(A,r){return A===e[r]}):!1},iO=function(t,e,A,r,n){return t.map(function(s,a){switch(a){case 0:return s.add(e,A);case 1:return s.add(e+r,A);case 2:return s.add(e+r,A+n);case 3:return s.add(e,A+n)}return s})},LC=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),PC=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new tO(this.container),this.container.styles.opacity<1&&this.effects.push(new nO(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new rO(r,n,s))}if(this.container.styles.overflowX!==0){var a=Qu(this.curves),i=Uu(this.curves);Fy(a,i)?this.effects.push(new tl(a,6)):(this.effects.push(new tl(a,2)),this.effects.push(new tl(i,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(o){return!RC(o)});if(A||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),A=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=Qu(r.curves),i=Uu(r.curves);Fy(a,i)||n.unshift(new tl(i,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(o){return We(o.target,e)})},t}(),zh=function(t,e,A,r){t.container.elements.forEach(function(n){var s=We(n.flags,4),a=We(n.flags,2),i=new PC(n,t);We(n.styles.display,2048)&&r.push(i);var o=We(n.flags,8)?[]:r;if(s||a){var l=s||n.styles.isPositioned()?A:e,u=new LC(i);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var c=n.styles.zIndex.order;if(c<0){var d=0;l.negativeZIndex.some(function(f,w){return c>f.element.container.styles.zIndex.order?(d=w,!1):d>0}),l.negativeZIndex.splice(d,0,u)}else if(c>0){var h=0;l.positiveZIndex.some(function(f,w){return c>=f.element.container.styles.zIndex.order?(h=w+1,!1):h>0}),l.positiveZIndex.splice(h,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);zh(i,u,s?u:A,o)}else n.styles.isInlineLevel()?e.inlineLevel.push(i):e.nonInlineLevel.push(i),zh(i,e,A,o);We(n.flags,8)&&HC(n,o)})},HC=function(t,e){for(var A=t instanceof $h?t.start:1,r=t instanceof $h?t.reversed:!1,n=0;n<e.length;n++){var s=e[n];s.container instanceof _C&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=Gi(A,s.container.styles.listStyleType,!0),A+=r?-1:1}},oO=function(t){var e=new PC(t,null),A=new LC(e),r=[];return zh(e,A,A,r),HC(e.container,r),A},Iy=function(t,e){switch(e){case 0:return cA(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return cA(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return cA(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return cA(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lO=function(t,e){switch(e){case 0:return cA(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return cA(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return cA(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return cA(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},uO=function(t,e){switch(e){case 0:return cA(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return cA(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return cA(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return cA(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},cO=function(t,e){switch(e){case 0:return Al(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Al(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Al(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Al(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Al=function(t,e){var A=[];return oA(t)?A.push(t.subdivide(.5,!1)):A.push(t),oA(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},cA=function(t,e,A,r){var n=[];return oA(t)?n.push(t.subdivide(.5,!1)):n.push(t),oA(A)?n.push(A.subdivide(.5,!0)):n.push(A),oA(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),oA(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},NC=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Fu=function(t){var e=t.styles,A=t.bounds,r=Ee(e.paddingLeft,A.width),n=Ee(e.paddingRight,A.width),s=Ee(e.paddingTop,A.width),a=Ee(e.paddingBottom,A.width);return A.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+s+a))},dO=function(t,e){return t===0?e.bounds:t===2?Fu(e):NC(e)},fO=function(t,e){return t===0?e.bounds:t===2?Fu(e):NC(e)},Jd=function(t,e,A){var r=dO(ps(t.styles.backgroundOrigin,e),t),n=fO(ps(t.styles.backgroundClip,e),t),s=hO(ps(t.styles.backgroundSize,e),A,r),a=s[0],i=s[1],o=$a(ps(t.styles.backgroundPosition,e),r.width-a,r.height-i),l=pO(ps(t.styles.backgroundRepeat,e),o,s,r,n),u=Math.round(r.left+o[0]),c=Math.round(r.top+o[1]);return[l,u,c,a,i]},as=function(t){return be(t)&&t.value===$s.AUTO},rl=function(t){return typeof t=="number"},hO=function(t,e,A){var r=e[0],n=e[1],s=e[2],a=t[0],i=t[1];if(!a)return[0,0];if(Me(a)&&i&&Me(i))return[Ee(a,A.width),Ee(i,A.height)];var o=rl(s);if(be(a)&&(a.value===$s.CONTAIN||a.value===$s.COVER)){if(rl(s)){var l=A.width/A.height;return l<s!=(a.value===$s.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=rl(r),c=rl(n),d=u||c;if(as(a)&&(!i||as(i))){if(u&&c)return[r,n];if(!o&&!d)return[A.width,A.height];if(d&&o){var h=u?r:n*s,f=c?n:r/s;return[h,f]}var w=u?r:A.width,y=c?n:A.height;return[w,y]}if(o){var p=0,m=0;return Me(a)?p=Ee(a,A.width):Me(i)&&(m=Ee(i,A.height)),as(a)?p=m*s:(!i||as(i))&&(m=p/s),[p,m]}var g=null,B=null;if(Me(a)?g=Ee(a,A.width):i&&Me(i)&&(B=Ee(i,A.height)),g!==null&&(!i||as(i))&&(B=u&&c?g/r*n:A.height),B!==null&&as(a)&&(g=u&&c?B/n*r:A.width),g!==null&&B!==null)return[g,B];throw new Error("Unable to calculate background-size for element")},ps=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},pO=function(t,e,A,r,n){var s=e[0],a=e[1],i=A[0],o=A[1];switch(t){case 2:return[new K(Math.round(r.left),Math.round(r.top+a)),new K(Math.round(r.left+r.width),Math.round(r.top+a)),new K(Math.round(r.left+r.width),Math.round(o+r.top+a)),new K(Math.round(r.left),Math.round(o+r.top+a))];case 3:return[new K(Math.round(r.left+s),Math.round(r.top)),new K(Math.round(r.left+s+i),Math.round(r.top)),new K(Math.round(r.left+s+i),Math.round(r.height+r.top)),new K(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new K(Math.round(r.left+s),Math.round(r.top+a)),new K(Math.round(r.left+s+i),Math.round(r.top+a)),new K(Math.round(r.left+s+i),Math.round(r.top+a+o)),new K(Math.round(r.left+s),Math.round(r.top+a+o))];default:return[new K(Math.round(n.left),Math.round(n.top)),new K(Math.round(n.left+n.width),Math.round(n.top)),new K(Math.round(n.left+n.width),Math.round(n.height+n.top)),new K(Math.round(n.left),Math.round(n.height+n.top))]}},mO="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Sy="Hidden Text",gO=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),n.src=mO,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Sy)),r.appendChild(s),r.appendChild(n);var i=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Sy)),r.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:i,middle:o}},t.prototype.getMetrics=function(e,A){var r=e+" "+A;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,A)),this._data[r]},t}(),DC=function(){function t(e,A){this.context=e,this.options=A}return t}(),wO=1e4,yO=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new gO(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(A){for(var r=this;this._activeEffects.length;)this.popEffect();A.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(A){this.ctx.save(),aO(A)&&(this.ctx.globalAlpha=A.opacity),sO(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),RC(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return Ct(this,void 0,void 0,function(){var r;return pt(this,function(n){switch(n.label){case 0:return r=A.element.container.styles,r.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return Ct(this,void 0,void 0,function(){return pt(this,function(r){switch(r.label){case 0:if(We(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(A)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,r,n){var s=this;if(r===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+n);else{var a=Im(A.text);a.reduce(function(i,o){return s.ctx.fillText(o,i,A.bounds.top+n),i+s.ctx.measureText(o).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var r=A.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),n=bO(A.fontFamily).join(", "),s=ao(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,r,A.fontWeight,s,n].join(" "),n,s]},e.prototype.renderTextNode=function(A,r){return Ct(this,void 0,void 0,function(){var n,s,a,i,o,l,u,c,d=this;return pt(this,function(h){return n=this.createFontStyle(r),s=n[0],a=n[1],i=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(a,i),l=o.baseline,u=o.middle,c=r.paintOrder,A.textBounds.forEach(function(f){c.forEach(function(w){switch(w){case 0:d.ctx.fillStyle=Ye(r.color),d.renderTextWithLetterSpacing(f,r.letterSpacing,l);var y=r.textShadow;y.length&&f.text.trim().length&&(y.slice(0).reverse().forEach(function(p){d.ctx.shadowColor=Ye(p.color),d.ctx.shadowOffsetX=p.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=p.offsetY.number*d.options.scale,d.ctx.shadowBlur=p.blur.number,d.renderTextWithLetterSpacing(f,r.letterSpacing,l)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=Ye(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(p){switch(p){case 1:d.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top+l),f.bounds.width,1);break;case 2:d.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top),f.bounds.width,1);break;case 3:d.ctx.fillRect(f.bounds.left,Math.ceil(f.bounds.top+u),f.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&f.text.trim().length&&(d.ctx.strokeStyle=Ye(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(f.text,f.bounds.left,f.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,r,n){if(n&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=Fu(A),a=Uu(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o,m,m,l,u,c,d,B,h,f,_,w,y,p,m,g,B,_;return pt(this,function(v){switch(v.label){case 0:this.applyEffects(A.getEffects(4)),r=A.container,n=A.curves,s=r.styles,a=0,i=r.textNodes,v.label=1;case 1:return a<i.length?(o=i[a],[4,this.renderTextNode(o,s)]):[3,4];case 2:v.sent(),v.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof wC))return[3,8];v.label=5;case 5:return v.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return m=v.sent(),this.renderReplacedElement(r,n,m),[3,8];case 7:return v.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof yC&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof BC))return[3,12];v.label=9;case 9:return v.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return m=v.sent(),this.renderReplacedElement(r,n,m),[3,12];case 11:return v.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof bC&&r.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,l.render(r.tree)]):[3,14];case 13:u=v.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),v.label=14;case 14:if(r instanceof Sm&&(c=Math.min(r.bounds.width,r.bounds.height),r.type===vu?r.checked&&(this.ctx.save(),this.path([new K(r.bounds.left+c*.39363,r.bounds.top+c*.79),new K(r.bounds.left+c*.16,r.bounds.top+c*.5549),new K(r.bounds.left+c*.27347,r.bounds.top+c*.44071),new K(r.bounds.left+c*.39694,r.bounds.top+c*.5649),new K(r.bounds.left+c*.72983,r.bounds.top+c*.23),new K(r.bounds.left+c*.84,r.bounds.top+c*.34085),new K(r.bounds.left+c*.39363,r.bounds.top+c*.79)]),this.ctx.fillStyle=Ye(gy),this.ctx.fill(),this.ctx.restore()):r.type===Cu&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+c/2,r.bounds.top+c/2,c/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ye(gy),this.ctx.fill(),this.ctx.restore())),BO(r)&&r.value.length){switch(d=this.createFontStyle(s),B=d[0],h=d[1],f=this.fontMetrics.getMetrics(B,h).baseline,this.ctx.font=B,this.ctx.fillStyle=Ye(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=vO(r.styles.textAlign),_=Fu(r),w=0,r.styles.textAlign){case 1:w+=_.width/2;break;case 2:w+=_.width;break}y=_.add(w,0,0,-_.height/2+1),this.ctx.save(),this.path([new K(_.left,_.top),new K(_.left+_.width,_.top),new K(_.left+_.width,_.top+_.height),new K(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pi(r.value,y),s.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!We(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(p=r.styles.listStyleImage,p.type!==0)return[3,18];m=void 0,g=p.url,v.label=15;case 15:return v.trys.push([15,17,,18]),[4,this.context.cache.match(g)];case 16:return m=v.sent(),this.ctx.drawImage(m,r.bounds.left-(m.width+10),r.bounds.top),[3,18];case 17:return v.sent(),this.context.logger.error("Error loading list-style-image "+g),[3,18];case 18:return[3,20];case 19:A.listValue&&r.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Ye(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new wr(r.bounds.left,r.bounds.top+Ee(r.styles.paddingTop,r.bounds.width),r.bounds.width,ey(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pi(A.listValue,_),s.letterSpacing,ey(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),v.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return Ct(this,void 0,void 0,function(){var r,n,p,s,a,p,i,o,p,l,u,p,c,d,p,h,f,p,w,y,p;return pt(this,function(m){switch(m.label){case 0:if(We(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:m.sent(),r=0,n=A.negativeZIndex,m.label=2;case 2:return r<n.length?(p=n[r],[4,this.renderStack(p)]):[3,5];case 3:m.sent(),m.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:m.sent(),s=0,a=A.nonInlineLevel,m.label=7;case 7:return s<a.length?(p=a[s],[4,this.renderNode(p)]):[3,10];case 8:m.sent(),m.label=9;case 9:return s++,[3,7];case 10:i=0,o=A.nonPositionedFloats,m.label=11;case 11:return i<o.length?(p=o[i],[4,this.renderStack(p)]):[3,14];case 12:m.sent(),m.label=13;case 13:return i++,[3,11];case 14:l=0,u=A.nonPositionedInlineLevel,m.label=15;case 15:return l<u.length?(p=u[l],[4,this.renderStack(p)]):[3,18];case 16:m.sent(),m.label=17;case 17:return l++,[3,15];case 18:c=0,d=A.inlineLevel,m.label=19;case 19:return c<d.length?(p=d[c],[4,this.renderNode(p)]):[3,22];case 20:m.sent(),m.label=21;case 21:return c++,[3,19];case 22:h=0,f=A.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return h<f.length?(p=f[h],[4,this.renderStack(p)]):[3,26];case 24:m.sent(),m.label=25;case 25:return h++,[3,23];case 26:w=0,y=A.positiveZIndex,m.label=27;case 27:return w<y.length?(p=y[w],[4,this.renderStack(p)]):[3,30];case 28:m.sent(),m.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var r=this;A.forEach(function(n,s){var a=oA(n)?n.start:n;s===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),oA(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(A,r,n,s){this.path(A),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},e.prototype.resizeImage=function(A,r,n){var s;if(A.width===r&&A.height===n)return A;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,i=a.createElement("canvas");i.width=Math.max(1,r),i.height=Math.max(1,n);var o=i.getContext("2d");return o.drawImage(A,0,0,A.width,A.height,0,0,r,n),i},e.prototype.renderBackgroundImage=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o;return pt(this,function(l){switch(l.label){case 0:r=A.styles.backgroundImage.length-1,n=function(u){var c,d,h,L,D,H,z,O,E,f,L,D,H,z,O,w,y,p,m,g,B,_,v,C,E,I,L,$,se,z,O,k,D,H,F,S,U,R,T,G,j,X;return pt(this,function(de){switch(de.label){case 0:if(u.type!==0)return[3,5];c=void 0,d=u.url,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return c=de.sent(),[3,4];case 3:return de.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return c&&(h=Jd(A,r,[c.width,c.height,c.width/c.height]),L=h[0],D=h[1],H=h[2],z=h[3],O=h[4],E=s.ctx.createPattern(s.resizeImage(c,z,O),"repeat"),s.renderRepeat(L,E,D,H)),[3,6];case 5:sx(u)?(f=Jd(A,r,[null,null,null]),L=f[0],D=f[1],H=f[2],z=f[3],O=f[4],w=ex(u.angle,z,O),y=w[0],p=w[1],m=w[2],g=w[3],B=w[4],_=document.createElement("canvas"),_.width=z,_.height=O,v=_.getContext("2d"),C=v.createLinearGradient(p,g,m,B),Yw(u.stops,y).forEach(function(He){return C.addColorStop(He.stop,Ye(He.color))}),v.fillStyle=C,v.fillRect(0,0,z,O),z>0&&O>0&&(E=s.ctx.createPattern(_,"repeat"),s.renderRepeat(L,E,D,H))):ax(u)&&(I=Jd(A,r,[null,null,null]),L=I[0],$=I[1],se=I[2],z=I[3],O=I[4],k=u.position.length===0?[Qm]:u.position,D=Ee(k[0],z),H=Ee(k[k.length-1],O),F=tx(u,D,H,z,O),S=F[0],U=F[1],S>0&&U>0&&(R=s.ctx.createRadialGradient($+D,se+H,0,$+D,se+H,S),Yw(u.stops,S*2).forEach(function(He){return R.addColorStop(He.stop,Ye(He.color))}),s.path(L),s.ctx.fillStyle=R,S!==U?(T=A.bounds.left+.5*A.bounds.width,G=A.bounds.top+.5*A.bounds.height,j=U/S,X=1/j,s.ctx.save(),s.ctx.translate(T,G),s.ctx.transform(1,0,0,j,0,0),s.ctx.translate(-T,-G),s.ctx.fillRect($,X*(se-G)+G,z,O*X),s.ctx.restore()):s.ctx.fill())),de.label=6;case 6:return r--,[2]}})},s=this,a=0,i=A.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<i.length?(o=i[a],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,r,n){return Ct(this,void 0,void 0,function(){return pt(this,function(s){return this.path(Iy(n,r)),this.ctx.fillStyle=Ye(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,r,n,s){return Ct(this,void 0,void 0,function(){var a,i;return pt(this,function(o){switch(o.label){case 0:return r<3?[4,this.renderSolidBorder(A,n,s)]:[3,2];case 1:return o.sent(),[2];case 2:return a=lO(s,n),this.path(a),this.ctx.fillStyle=Ye(A),this.ctx.fill(),i=uO(s,n),this.path(i),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o,l,u,c=this;return pt(this,function(d){switch(d.label){case 0:return this.applyEffects(A.getEffects(2)),r=A.container.styles,n=!An(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=_O(ps(r.backgroundClip,0),A.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),An(r.backgroundColor)||(this.ctx.fillStyle=Ye(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(h){c.ctx.save();var f=Qu(A.curves),w=h.inset?0:wO,y=iO(f,-w+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(c.path(f),c.ctx.clip(),c.mask(y)):(c.mask(f),c.ctx.clip(),c.path(y)),c.ctx.shadowOffsetX=h.offsetX.number+w,c.ctx.shadowOffsetY=h.offsetY.number,c.ctx.shadowColor=Ye(h.color),c.ctx.shadowBlur=h.blur.number,c.ctx.fillStyle=h.inset?Ye(h.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),d.label=2;case 2:i=0,o=0,l=s,d.label=3;case 3:return o<l.length?(u=l[o],u.style!==0&&!An(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,i,A.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,i,A.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,i,A.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,i,A.curves)];case 10:d.sent(),d.label=11;case 11:i++,d.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,r,n,s,a){return Ct(this,void 0,void 0,function(){var i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,v,_,v;return pt(this,function(C){return this.ctx.save(),i=cO(s,n),o=Iy(s,n),a===2&&(this.path(o),this.ctx.clip()),oA(o[0])?(l=o[0].start.x,u=o[0].start.y):(l=o[0].x,u=o[0].y),oA(o[1])?(c=o[1].end.x,d=o[1].end.y):(c=o[1].x,d=o[1].y),n===0||n===2?h=Math.abs(l-c):h=Math.abs(u-d),this.ctx.beginPath(),a===3?this.formatPath(i):this.formatPath(o.slice(0,2)),f=r<3?r*3:r*2,w=r<3?r*2:r,a===3&&(f=r,w=r),y=!0,h<=f*2?y=!1:h<=f*2+w?(p=h/(2*f+w),f*=p,w*=p):(m=Math.floor((h+w)/(f+w)),g=(h-m*f)/(m-1),B=(h-(m+1)*f)/m,w=B<=0||Math.abs(w-g)<Math.abs(w-B)?g:B),y&&(a===3?this.ctx.setLineDash([0,f+w]):this.ctx.setLineDash([f,w])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Ye(A),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(oA(o[0])&&(_=o[3],v=o[0],this.ctx.beginPath(),this.formatPath([new K(_.end.x,_.end.y),new K(v.start.x,v.start.y)]),this.ctx.stroke()),oA(o[1])&&(_=o[1],v=o[2],this.ctx.beginPath(),this.formatPath([new K(_.end.x,_.end.y),new K(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return Ct(this,void 0,void 0,function(){var r;return pt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ye(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=oO(A),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(DC),BO=function(t){return t instanceof CC||t instanceof vC?!0:t instanceof Sm&&t.type!==Cu&&t.type!==vu},_O=function(t,e){switch(t){case 0:return Qu(e);case 2:return AO(e);case 1:default:return Uu(e)}},vO=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},CO=["-apple-system","system-ui"],bO=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return CO.indexOf(e)===-1}):t},EO=function(t){RA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(A){return Ct(this,void 0,void 0,function(){var r,n;return pt(this,function(s){switch(s.label){case 0:return r=Mh(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,QO(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ye(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(DC),QO=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},UO=function(){function t(e){var A=e.id,r=e.enabled;this.id=A,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ro([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),FO=function(){function t(e,A){var r;this.windowBounds=A,this.instanceName="#"+t.instanceCount++,this.logger=new UO({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new WT(this,e)}return t.instanceCount=1,t}(),IO=function(t,e){return e===void 0&&(e={}),SO(t,e)};typeof window<"u"&&kC.setContext(window);var SO=function(t,e){return Ct(void 0,void 0,void 0,function(){var A,r,n,s,a,i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,C,v,C,E,I,L,$,se,z,O,k,D,H,F,S,U,R,T,G,j;return pt(this,function(X){switch(X.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(A=t.ownerDocument,!A)throw new Error("Element is not attached to a Document");if(r=A.defaultView,!r)throw new Error("Document is not attached to a Window");return n={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(I=e.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:e.proxy,useCORS:(L=e.useCORS)!==null&&L!==void 0?L:!1},s=Qh({logging:($=e.logging)!==null&&$!==void 0?$:!0,cache:e.cache},n),a={windowWidth:(se=e.windowWidth)!==null&&se!==void 0?se:r.innerWidth,windowHeight:(z=e.windowHeight)!==null&&z!==void 0?z:r.innerHeight,scrollX:(O=e.scrollX)!==null&&O!==void 0?O:r.pageXOffset,scrollY:(k=e.scrollY)!==null&&k!==void 0?k:r.pageYOffset},i=new wr(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),o=new FO(s,i),l=(D=e.foreignObjectRendering)!==null&&D!==void 0?D:!1,u={allowTaint:(H=e.allowTaint)!==null&&H!==void 0?H:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},o.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),c=new Qy(o,t,u),d=c.clonedReferenceElement,d?[4,c.toIFrame(A,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=X.sent(),f=xm(d)||xT(d)?iI(d.ownerDocument):wc(o,d),w=f.width,y=f.height,p=f.left,m=f.top,g=xO(o,d,e.backgroundColor),B={canvas:e.canvas,backgroundColor:g,scale:(S=(F=e.scale)!==null&&F!==void 0?F:r.devicePixelRatio)!==null&&S!==void 0?S:1,x:((U=e.x)!==null&&U!==void 0?U:0)+p,y:((R=e.y)!==null&&R!==void 0?R:0)+m,width:(T=e.width)!==null&&T!==void 0?T:Math.ceil(w),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(y)},l?(o.logger.debug("Document cloned, using foreign object rendering"),C=new EO(o,B),[4,C.render(d)]):[3,3];case 2:return _=X.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+p+","+m+" with size "+w+"x"+y+" using computed rendering"),o.logger.debug("Starting DOM parsing"),v=QC(o,d),g===v.styles.backgroundColor&&(v.styles.backgroundColor=dr.TRANSPARENT),o.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),C=new yO(o,B),[4,C.render(v)];case 4:_=X.sent(),X.label=5;case 5:return(!((j=e.removeContainer)!==null&&j!==void 0)||j)&&(Qy.destroy(h)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,_]}})})},xO=function(t,e,A){var r=e.ownerDocument,n=r.documentElement?fi(t,getComputedStyle(r.documentElement).backgroundColor):dr.TRANSPARENT,s=r.body?fi(t,getComputedStyle(r.body).backgroundColor):dr.TRANSPARENT,a=typeof A=="string"?fi(t,A):A===null?dr.TRANSPARENT:4294967295;return e===r.documentElement?An(n)?An(s)?a:s:n:a};const TO=({children:t,title:e,onClose:A,position:r="bottom-right",width:n=360,height:s=480,minWidth:a=280,minHeight:i=240,offset:o=16,zIndex:l=1e3,className:u,style:c,headerClassName:d,bodyClassName:h,closeButtonAriaLabel:f="Close",closeOnEscape:w=!0,draggable:y=!0,anchorRect:p})=>{const[m,g]=fe.useState(!1),B=fe.useRef(null),[_,v]=fe.useState(!1),C=fe.useRef(null),[E,I]=fe.useState(null);fe.useEffect(()=>{if(!w)return;const z=O=>{O.key==="Escape"&&(A==null||A())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[w,A]);const L=(()=>{const z=`${o}px`;switch(r){case"top-left":return{top:z,left:z};case"top-right":return{top:z,right:z};case"bottom-left":return{bottom:z,left:z};case"bottom-right":default:return{bottom:z,right:z}}})(),$=(()=>{if(r!=="auto"||!p)return null;const z=window.innerWidth,O=window.innerHeight,k=o,D=p.top<O/2,H=p.left>z/2,F=D?["bottom","top"]:["top","bottom"],S=H?["right","left"]:["left","right"],U=[`${F[0]}-${S[0]}`,`${F[0]}-${S[1]}`,`${F[1]}-${S[0]}`,`${F[1]}-${S[1]}`];for(const G of U){let j=0,X=0;if(G==="bottom-right"?(j=p.bottom+k,X=p.right-n):G==="bottom-left"?(j=p.bottom+k,X=p.left):G==="top-right"?(j=p.top-s-k,X=p.right-n):(j=p.top-s-k,X=p.left),j>=0&&X>=0&&j+s<=O&&X+n<=z)return{top:j,left:X}}let R=Math.min(Math.max(p.bottom+k,0),O-s),T=Math.min(Math.max(p.right-n,0),z-n);return{top:R,left:T}})(),se=z=>{if(!y)return;const O=B.current;if(!O)return;const k=O.getBoundingClientRect();C.current={x:z.clientX,y:z.clientY,top:k.top,left:k.left},I({top:k.top,left:k.left}),v(!0);const D=F=>{if(!C.current)return;const S=F.clientX-C.current.x,U=F.clientY-C.current.y;I({top:C.current.top+U,left:C.current.left+S})},H=()=>{v(!1),C.current=null,window.removeEventListener("pointermove",D),window.removeEventListener("pointerup",H)};window.addEventListener("pointermove",D),window.addEventListener("pointerup",H,{once:!0})};return Q.jsxs("div",{ref:B,role:"dialog","aria-modal":"false",className:u,style:{position:"fixed",...E?{top:E.top,left:E.left}:$?{top:$.top,left:$.left}:L,width:n,height:s,minWidth:a,minHeight:i,zIndex:l,background:"#ffffff",border:"1px solid rgba(0,0,0,0.06)",borderRadius:12,boxShadow:"0 10px 30px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.08)",display:"flex",flexDirection:"column",overflow:"hidden",userSelect:_?"none":void 0,...c},children:[Q.jsxs("div",{className:d,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(0,0,0,0.06)",background:"#f9fafb",cursor:y?"move":void 0},onPointerDown:se,children:[Q.jsx("div",{style:{fontWeight:600,color:"#111827"},children:e}),Q.jsx("button",{type:"button",onClick:A,"aria-label":f,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{width:28,height:28,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:"white",cursor:"pointer",color:m?"#ef4444":void 0,transition:"color 120ms ease"},children:Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Q.jsx("div",{className:h,style:{flex:1,overflow:"auto",background:"#ffffff"},children:t})]})},jt=rd.forwardRef(({children:t,onClick:e,label:A="Open chat",position:r="top-right",offset:n=8,icon:s,className:a,containerStyle:i,buttonClassName:o,buttonStyle:l,buttonSize:u=36,zIndex:c=10,disabled:d=!1,trigger:h,open:f,onOpenChange:w,renderButton:y,openWindowOnClick:p=!1,windowProps:m,windowContent:g},B)=>{const[_,v]=fe.useState(!1),[C,E]=fe.useState(!1),I=fe.useRef(null),L=fe.useRef(null),$=fe.useRef(null),[se,z]=fe.useState(null),O=h??"hover",k=fe.useMemo(()=>{const T={position:"absolute"},G=`${n}px`;switch(r){case"top-left":return{...T,top:G,left:G};case"top-right":return{...T,top:G,right:G};case"bottom-left":return{...T,bottom:G,left:G};case"bottom-right":default:return{...T,bottom:G,right:G}}},[r,n]),D=O==="always"?!0:O==="manual"?!!f:_,H=T=>{w&&w(T)},F={onMouseEnter:O==="hover"?()=>{v(!0),H(!0)}:void 0,onMouseLeave:O==="hover"?()=>{v(!1),H(!1)}:void 0,onFocus:O==="focus"?()=>{v(!0),H(!0)}:void 0,onBlur:O==="focus"?()=>{v(!1),H(!1)}:void 0},S=!!(m!=null&&m.sendComponentImageAsContext);fe.useEffect(()=>{C&&(async()=>{if(!S)return;const G=$.current;if(G)try{await new Promise(de=>requestAnimationFrame(()=>setTimeout(de,50)));const X=(await IO(G,{useCORS:!0,backgroundColor:null,scale:Math.min(2,Math.max(1,Math.ceil(G.offsetWidth/280)))})).toDataURL("image/png",.92);z(X)}catch{}})()},[C,S]);const U=T=>{I.current=T,typeof B=="function"?B(T):B&&typeof B=="object"&&(B.current=T)},R={type:"button","aria-label":A,onClick:T=>{e==null||e(T),!d&&p&&E(!0)},className:o,disabled:d,style:{...k,zIndex:c,width:u,height:u,borderRadius:9999,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(0,0,0,0.08)",background:d?"#f3f4f6":"white",color:d?"#9ca3af":void 0,boxShadow:"0 2px 6px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)",cursor:d?"not-allowed":"pointer",transition:"opacity 120ms ease, transform 120ms ease",opacity:D?1:0,transform:D?"scale(1)":"scale(0.95)",pointerEvents:D?"auto":"none",...l},tabIndex:D?0:-1,"aria-hidden":D?void 0:!0,ref:U,visible:D};return Q.jsxs("div",{className:a,style:{position:"relative",display:"inline-block",...i},...F,ref:L,children:[Q.jsx("div",{ref:$,style:{display:"inline-block"},children:t}),y?y(R):Q.jsx("button",{...R,children:s??Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:Math.max(12,Math.floor(u*.5)),height:Math.max(12,Math.floor(u*.5)),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Q.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})})}),p&&C&&g&&Q.jsx(TO,{...m,onClose:()=>{var T;(T=m==null?void 0:m.onClose)==null||T.call(m),E(!1),z(null)},anchorRect:(m==null?void 0:m.anchorRect)??(I.current?I.current.getBoundingClientRect():null),children:(()=>{var T;if(S){if(!se)return Q.jsx("div",{style:{padding:12,color:"#6b7280",fontSize:14},children:"Loading..."});if(rd.isValidElement(g)){const j=[...((T=g.props)==null?void 0:T.contextImages)??[],se];try{return rd.cloneElement(g,{contextImages:j})}catch{return g}}}return g})()})]})});jt.displayName="ChatEnabled";function Ae(t,e,A,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,A),A}function b(t,e,A,r){if(A==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?r:A==="a"?r.call(t):r?r.value:e.get(t)}let MC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return MC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),A=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^A()&15>>+r/4).toString(16))};function Wh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Jh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class te extends Error{}class dt extends te{constructor(e,A,r,n){super(`${dt.makeMessage(e,A,r)}`),this.status=e,this.headers=n,this.requestID=n==null?void 0:n.get("x-request-id"),this.error=A;const s=A;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,A,r){const n=A!=null&&A.message?typeof A.message=="string"?A.message:JSON.stringify(A.message):A?JSON.stringify(A):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,A,r,n){if(!e||!n)return new Fc({message:r,cause:Jh(A)});const s=A==null?void 0:A.error;return e===400?new $C(e,s,r,n):e===401?new jC(e,s,r,n):e===403?new KC(e,s,r,n):e===404?new GC(e,s,r,n):e===409?new VC(e,s,r,n):e===422?new zC(e,s,r,n):e===429?new WC(e,s,r,n):e>=500?new JC(e,s,r,n):new dt(e,s,r,n)}}class Zt extends dt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fc extends dt{constructor({message:e,cause:A}){super(void 0,void 0,e||"Connection error.",void 0),A&&(this.cause=A)}}class Ic extends Fc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $C extends dt{}class jC extends dt{}class KC extends dt{}class GC extends dt{}class VC extends dt{}class zC extends dt{}class WC extends dt{}class JC extends dt{}class ZC extends te{constructor(){super("Could not parse response content as the length limit was reached")}}class XC extends te{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ga extends Error{constructor(e){super(e)}}const OO=/^[a-z][a-z0-9+.-]*:/i,kO=t=>OO.test(t);let Ot=t=>(Ot=Array.isArray,Ot(t)),xy=Ot;function RO(t){return typeof t!="object"?{}:t??{}}function LO(t){if(!t)return!0;for(const e in t)return!1;return!0}function PO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const HO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new te(`${t} must be an integer`);if(e<0)throw new te(`${t} must be a positive integer`);return e},NO=t=>{try{return JSON.parse(t)}catch{return}},io=t=>new Promise(e=>setTimeout(e,t)),ms="5.12.2",DO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function MO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $O=()=>{var A;const t=MO();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ms,"X-Stainless-OS":Oy(Deno.build.os),"X-Stainless-Arch":Ty(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((A=Deno.version)==null?void 0:A.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ms,"X-Stainless-OS":Oy(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Ty(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=jO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function jO(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:A}of t){const r=A.exec(navigator.userAgent);if(r){const n=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${n}.${s}.${a}`}}}return null}const Ty=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Oy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ky;const KO=()=>ky??(ky=$O());function GO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function YC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function qC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return YC({start(){},async pull(A){const{done:r,value:n}=await e.next();r?A.close():A.enqueue(n)},async cancel(){var A;await((A=e.return)==null?void 0:A.call(e))}})}function eb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const A=await e.read();return A!=null&&A.done&&e.releaseLock(),A}catch(A){throw e.releaseLock(),A}},async return(){const A=e.cancel();return e.releaseLock(),await A,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function VO(t){var r,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(r=t[Symbol.asyncIterator]()).return)==null?void 0:n.call(r));return}const e=t.getReader(),A=e.cancel();e.releaseLock(),await A}const zO=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),tb="RFC3986",Ab=t=>String(t),Ry={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Ab},WO="RFC1738";let Zh=(t,e)=>(Zh=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Zh(t,e));const DA=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Xd=1024,JO=(t,e,A,r,n)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),A==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(i){return"%26%23"+parseInt(i.slice(2),16)+"%3B"});let a="";for(let i=0;i<s.length;i+=Xd){const o=s.length>=Xd?s.slice(i,i+Xd):s,l=[];for(let u=0;u<o.length;++u){let c=o.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||n===WO&&(c===40||c===41)){l[l.length]=o.charAt(u);continue}if(c<128){l[l.length]=DA[c];continue}if(c<2048){l[l.length]=DA[192|c>>6]+DA[128|c&63];continue}if(c<55296||c>=57344){l[l.length]=DA[224|c>>12]+DA[128|c>>6&63]+DA[128|c&63];continue}u+=1,c=65536+((c&1023)<<10|o.charCodeAt(u)&1023),l[l.length]=DA[240|c>>18]+DA[128|c>>12&63]+DA[128|c>>6&63]+DA[128|c&63]}a+=l.join("")}return a};function ZO(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Ly(t,e){if(Ot(t)){const A=[];for(let r=0;r<t.length;r+=1)A.push(e(t[r]));return A}return e(t)}const rb={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},nb=function(t,e){Array.prototype.push.apply(t,Ot(e)?e:[e])};let Py;const Ve={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:JO,encodeValuesOnly:!1,format:tb,formatter:Ab,indices:!1,serializeDate(t){return(Py??(Py=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function XO(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Yd={};function sb(t,e,A,r,n,s,a,i,o,l,u,c,d,h,f,w,y,p){let m=t,g=p,B=0,_=!1;for(;(g=g.get(Yd))!==void 0&&!_;){const L=g.get(t);if(B+=1,typeof L<"u"){if(L===B)throw new RangeError("Cyclic object value");_=!0}typeof g.get(Yd)>"u"&&(B=0)}if(typeof l=="function"?m=l(e,m):m instanceof Date?m=d==null?void 0:d(m):A==="comma"&&Ot(m)&&(m=Ly(m,function(L){return L instanceof Date?d==null?void 0:d(L):L})),m===null){if(s)return o&&!w?o(e,Ve.encoder,y,"key",h):e;m=""}if(XO(m)||ZO(m)){if(o){const L=w?e:o(e,Ve.encoder,y,"key",h);return[(f==null?void 0:f(L))+"="+(f==null?void 0:f(o(m,Ve.encoder,y,"value",h)))]}return[(f==null?void 0:f(e))+"="+(f==null?void 0:f(String(m)))]}const v=[];if(typeof m>"u")return v;let C;if(A==="comma"&&Ot(m))w&&o&&(m=Ly(m,o)),C=[{value:m.length>0?m.join(",")||null:void 0}];else if(Ot(l))C=l;else{const L=Object.keys(m);C=u?L.sort(u):L}const E=i?String(e).replace(/\./g,"%2E"):String(e),I=r&&Ot(m)&&m.length===1?E+"[]":E;if(n&&Ot(m)&&m.length===0)return I+"[]";for(let L=0;L<C.length;++L){const $=C[L],se=typeof $=="object"&&typeof $.value<"u"?$.value:m[$];if(a&&se===null)continue;const z=c&&i?$.replace(/\./g,"%2E"):$,O=Ot(m)?typeof A=="function"?A(I,z):I:I+(c?"."+z:"["+z+"]");p.set(t,B);const k=new WeakMap;k.set(Yd,p),nb(v,sb(se,O,A,r,n,s,a,i,A==="comma"&&w&&Ot(m)?null:o,l,u,c,d,h,f,w,y,k))}return v}function YO(t=Ve){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ve.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let A=tb;if(typeof t.format<"u"){if(!Zh(Ry,t.format))throw new TypeError("Unknown format option provided.");A=t.format}const r=Ry[A];let n=Ve.filter;(typeof t.filter=="function"||Ot(t.filter))&&(n=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in rb?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Ve.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ve.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ve.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ve.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ve.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ve.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ve.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ve.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ve.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ve.encodeValuesOnly,filter:n,format:A,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ve.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ve.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ve.strictNullHandling}}function qO(t,e={}){let A=t;const r=YO(e);let n,s;typeof r.filter=="function"?(s=r.filter,A=s("",A)):Ot(r.filter)&&(s=r.filter,n=s);const a=[];if(typeof A!="object"||A===null)return"";const i=rb[r.arrayFormat],o=i==="comma"&&r.commaRoundTrip;n||(n=Object.keys(A)),r.sort&&n.sort(r.sort);const l=new WeakMap;for(let d=0;d<n.length;++d){const h=n[d];r.skipNulls&&A[h]===null||nb(a,sb(A[h],h,i,o,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}const u=a.join(r.delimiter);let c=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),u.length>0?c+u:""}function ek(t){let e=0;for(const n of t)e+=n.length;const A=new Uint8Array(e);let r=0;for(const n of t)A.set(n,r),r+=n.length;return A}let Hy;function Tm(t){let e;return(Hy??(e=new globalThis.TextEncoder,Hy=e.encode.bind(e)))(t)}let Ny;function Dy(t){let e;return(Ny??(e=new globalThis.TextDecoder,Ny=e.decode.bind(e)))(t)}var Kt,Gt;class Sc{constructor(){Kt.set(this,void 0),Gt.set(this,void 0),Ae(this,Kt,new Uint8Array),Ae(this,Gt,null)}decode(e){if(e==null)return[];const A=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Tm(e):e;Ae(this,Kt,ek([b(this,Kt,"f"),A]));const r=[];let n;for(;(n=tk(b(this,Kt,"f"),b(this,Gt,"f")))!=null;){if(n.carriage&&b(this,Gt,"f")==null){Ae(this,Gt,n.index);continue}if(b(this,Gt,"f")!=null&&(n.index!==b(this,Gt,"f")+1||n.carriage)){r.push(Dy(b(this,Kt,"f").subarray(0,b(this,Gt,"f")-1))),Ae(this,Kt,b(this,Kt,"f").subarray(b(this,Gt,"f"))),Ae(this,Gt,null);continue}const s=b(this,Gt,"f")!==null?n.preceding-1:n.preceding,a=Dy(b(this,Kt,"f").subarray(0,s));r.push(a),Ae(this,Kt,b(this,Kt,"f").subarray(n.index)),Ae(this,Gt,null)}return r}flush(){return b(this,Kt,"f").length?this.decode(`
`):[]}}Kt=new WeakMap,Gt=new WeakMap;Sc.NEWLINE_CHARS=new Set([`
`,"\r"]);Sc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function tk(t,e){for(let n=e??0;n<t.length;n++){if(t[n]===10)return{preceding:n,index:n+1,carriage:!1};if(t[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function Ak(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Iu={off:0,error:200,warn:300,info:400,debug:500},My=(t,e,A)=>{if(t){if(PO(Iu,t))return t;at(A).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Iu))}`)}};function Va(){}function nl(t,e,A){return!e||Iu[t]>Iu[A]?Va:e[t].bind(e)}const rk={error:Va,warn:Va,info:Va,debug:Va};let $y=new WeakMap;function at(t){const e=t.logger,A=t.logLevel??"off";if(!e)return rk;const r=$y.get(e);if(r&&r[0]===A)return r[1];const n={error:nl("error",e,A),warn:nl("warn",e,A),info:nl("info",e,A),debug:nl("debug",e,A)};return $y.set(e,[A,n]),n}const vn=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,A])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":A]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var xa;class zA{constructor(e,A,r){this.iterator=e,xa.set(this,void 0),this.controller=A,Ae(this,xa,r)}static fromSSEResponse(e,A,r){let n=!1;const s=r?at(r):console;async function*a(){if(n)throw new te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of nk(e,A))if(!i){if(o.data.startsWith("[DONE]")){i=!0;continue}if(o.event===null||!o.event.startsWith("thread.")){let l;try{l=JSON.parse(o.data)}catch(u){throw s.error("Could not parse message into JSON:",o.data),s.error("From chunk:",o.raw),u}if(l&&l.error)throw new dt(void 0,l.error,void 0,e.headers);yield l}else{let l;try{l=JSON.parse(o.data)}catch(u){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),u}if(o.event=="error")throw new dt(void 0,l.error,l.message,void 0);yield{event:o.event,data:l}}}i=!0}catch(o){if(Wh(o))return;throw o}finally{i||A.abort()}}return new zA(a,A,r)}static fromReadableStream(e,A,r){let n=!1;async function*s(){const i=new Sc,o=eb(e);for await(const l of o)for(const u of i.decode(l))yield u;for(const l of i.flush())yield l}async function*a(){if(n)throw new te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of s())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(Wh(o))return;throw o}finally{i||A.abort()}}return new zA(a,A,r)}[(xa=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],A=[],r=this.iterator(),n=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),A.push(a)}return s.shift()}});return[new zA(()=>n(e),this.controller,b(this,xa,"f")),new zA(()=>n(A),this.controller,b(this,xa,"f"))]}toReadableStream(){const e=this;let A;return YC({async start(){A=e[Symbol.asyncIterator]()},async pull(r){try{const{value:n,done:s}=await A.next();if(s)return r.close();const a=Tm(JSON.stringify(n)+`
`);r.enqueue(a)}catch(n){r.error(n)}},async cancel(){var r;await((r=A.return)==null?void 0:r.call(A))}})}}async function*nk(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new te("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new te("Attempted to iterate over a response with no body");const A=new ak,r=new Sc,n=eb(t.body);for await(const s of sk(n))for(const a of r.decode(s)){const i=A.decode(a);i&&(yield i)}for(const s of r.flush()){const a=A.decode(s);a&&(yield a)}}async function*sk(t){let e=new Uint8Array;for await(const A of t){if(A==null)continue;const r=A instanceof ArrayBuffer?new Uint8Array(A):typeof A=="string"?Tm(A):A;let n=new Uint8Array(e.length+r.length);n.set(e),n.set(r,e.length),e=n;let s;for(;(s=Ak(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class ak{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[A,r,n]=ik(e,":");return n.startsWith(" ")&&(n=n.substring(1)),A==="event"?this.event=n:A==="data"&&this.data.push(n),null}}function ik(t,e){const A=t.indexOf(e);return A!==-1?[t.substring(0,A),e,t.substring(A+e.length)]:[t,"",""]}async function ab(t,e){const{response:A,requestLogID:r,retryOfRequestLogID:n,startTime:s}=e,a=await(async()=>{var c;if(e.options.stream)return at(t).debug("response",A.status,A.url,A.headers,A.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(A,e.controller,t):zA.fromSSEResponse(A,e.controller,t);if(A.status===204)return null;if(e.options.__binaryResponse)return A;const i=A.headers.get("content-type"),o=(c=i==null?void 0:i.split(";")[0])==null?void 0:c.trim();if((o==null?void 0:o.includes("application/json"))||(o==null?void 0:o.endsWith("+json"))){const d=await A.json();return ib(d,A)}return await A.text()})();return at(t).debug(`[${r}] response parsed`,vn({retryOfRequestLogID:n,url:A.url,status:A.status,body:a,durationMs:Date.now()-s})),a}function ib(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var za;class xc extends Promise{constructor(e,A,r=ab){super(n=>{n(null)}),this.responsePromise=A,this.parseResponse=r,za.set(this,void 0),Ae(this,za,e)}_thenUnwrap(e){return new xc(b(this,za,"f"),this.responsePromise,async(A,r)=>ib(e(await this.parseResponse(A,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,A]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:A,request_id:A.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(b(this,za,"f"),e))),this.parsedPromise}then(e,A){return this.parse().then(e,A)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}za=new WeakMap;var sl;class ob{constructor(e,A,r,n){sl.set(this,void 0),Ae(this,sl,e),this.options=n,this.response=A,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new te("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await b(this,sl,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(sl=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const A of e.getPaginatedItems())yield A}}class ok extends xc{constructor(e,A,r){super(e,A,async(n,s)=>new r(n,s.response,await ab(n,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const A of e)yield A}}class Tc extends ob{constructor(e,A,r,n){super(e,A,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class je extends ob{constructor(e,A,r,n){super(e,A,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),A=(r=e[e.length-1])==null?void 0:r.id;return A?{...this.options,query:{...RO(this.options.query),after:A}}:null}}const lb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,A=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(A?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function gi(t,e,A){return lb(),new File(t,e??"unknown_file",A)}function Nl(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ub=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",jn=async(t,e)=>({...t,body:await uk(t.body,e)}),jy=new WeakMap;function lk(t){const e=typeof t=="function"?t:t.fetch,A=jy.get(e);if(A)return A;const r=(async()=>{try{const n="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new n(s).text()}catch{return!0}})();return jy.set(e,r),r}const uk=async(t,e)=>{if(!await lk(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const A=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,n])=>Xh(A,r,n))),A},ck=t=>t instanceof Blob&&"name"in t,Xh=async(t,e,A)=>{if(A!==void 0){if(A==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof A=="string"||typeof A=="number"||typeof A=="boolean")t.append(e,String(A));else if(A instanceof Response)t.append(e,gi([await A.blob()],Nl(A)));else if(ub(A))t.append(e,gi([await new Response(qC(A)).blob()],Nl(A)));else if(ck(A))t.append(e,A,Nl(A));else if(Array.isArray(A))await Promise.all(A.map(r=>Xh(t,e+"[]",r)));else if(typeof A=="object")await Promise.all(Object.entries(A).map(([r,n])=>Xh(t,`${e}[${r}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${A} instead`)}},cb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",dk=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&cb(t),fk=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function hk(t,e,A){if(lb(),t=await t,dk(t))return t instanceof File?t:gi([await t.arrayBuffer()],t.name);if(fk(t)){const n=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),gi(await Yh(n),e,A)}const r=await Yh(t);if(e||(e=Nl(t)),!(A!=null&&A.type)){const n=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof n=="string"&&(A={...A,type:n})}return gi(r,e,A)}async function Yh(t){var A;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(cb(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(ub(t))for await(const r of t)e.push(...await Yh(r));else{const r=(A=t==null?void 0:t.constructor)==null?void 0:A.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${pk(t)}`)}return e}function pk(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(A=>`"${A}"`).join(", ")}]`}class re{constructor(e){this._client=e}}function db(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ky=Object.freeze(Object.create(null)),mk=(t=db)=>function(A,...r){if(A.length===1)return A[0];let n=!1;const s=[],a=A.reduce((u,c,d)=>{var w;/[?#]/.test(c)&&(n=!0);const h=r[d];let f=(n?encodeURIComponent:t)(""+h);return d!==r.length&&(h==null||typeof h=="object"&&h.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??Ky)??Ky))==null?void 0:w.toString))&&(f=h+"",s.push({start:u.length+c.length,length:f.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),u+c+(d===r.length?"":f)},""),i=a.split(/[?#]/,1)[0],o=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;(l=o.exec(i))!==null;)s.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(s.sort((u,c)=>u.start-c.start),s.length>0){let u=0;const c=s.reduce((d,h)=>{const f=" ".repeat(h.start-u),w="^".repeat(h.length);return u=h.start+h.length,d+f+w},"");throw new te(`Path parameters result in path with invalid segments:
${s.map(d=>d.error).join(`
`)}
${a}
${c}`)}return a},M=mk(db);let fb=class extends re{list(e,A={},r){return this._client.getAPIList(M`/chat/completions/${e}/messages`,je,{query:A,...r})}};function Su(t){return t!==void 0&&"function"in t&&t.function!==void 0}function gk(t,e){const A={...t};return Object.defineProperties(A,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),A}function Om(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function oo(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function wk(t,e){return!e||!hb(e)?{...t,choices:t.choices.map(A=>(pb(A.message.tool_calls),{...A,message:{...A.message,parsed:null,...A.message.tool_calls?{tool_calls:A.message.tool_calls}:void 0}}))}:km(t,e)}function km(t,e){const A=t.choices.map(r=>{var n;if(r.finish_reason==="length")throw new ZC;if(r.finish_reason==="content_filter")throw new XC;return pb(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((n=r.message.tool_calls)==null?void 0:n.map(s=>Bk(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?yk(e,r.message.content):null}}});return{...t,choices:A}}function yk(t,e){var A,r;return((A=t.response_format)==null?void 0:A.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Bk(t,e){var r;const A=(r=t.tools)==null?void 0:r.find(n=>{var s;return Su(n)&&((s=n.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:oo(A)?A.$parseRaw(e.function.arguments):A!=null&&A.function.strict?JSON.parse(e.function.arguments):null}}}function _k(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const A=(r=t.tools)==null?void 0:r.find(n=>{var s;return Su(n)&&((s=n.function)==null?void 0:s.name)===e.function.name});return Su(A)&&(oo(A)||(A==null?void 0:A.function.strict)||!1)}function hb(t){var e;return Om(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(A=>oo(A)||A.type==="function"&&A.function.strict===!0))??!1}function pb(t){for(const e of t||[])if(e.type!=="function")throw new te(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function vk(t){for(const e of t??[]){if(e.type!=="function")throw new te(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new te(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const xu=t=>(t==null?void 0:t.role)==="assistant",mb=t=>(t==null?void 0:t.role)==="tool";var qh,Dl,Ml,Wa,Ja,$l,Za,sr,Xa,Tu,Ou,gs,gb;class Rm{constructor(){qh.add(this),this.controller=new AbortController,Dl.set(this,void 0),Ml.set(this,()=>{}),Wa.set(this,()=>{}),Ja.set(this,void 0),$l.set(this,()=>{}),Za.set(this,()=>{}),sr.set(this,{}),Xa.set(this,!1),Tu.set(this,!1),Ou.set(this,!1),gs.set(this,!1),Ae(this,Dl,new Promise((e,A)=>{Ae(this,Ml,e,"f"),Ae(this,Wa,A,"f")})),Ae(this,Ja,new Promise((e,A)=>{Ae(this,$l,e,"f"),Ae(this,Za,A,"f")})),b(this,Dl,"f").catch(()=>{}),b(this,Ja,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},b(this,qh,"m",gb).bind(this))},0)}_connected(){this.ended||(b(this,Ml,"f").call(this),this._emit("connect"))}get ended(){return b(this,Xa,"f")}get errored(){return b(this,Tu,"f")}get aborted(){return b(this,Ou,"f")}abort(){this.controller.abort()}on(e,A){return(b(this,sr,"f")[e]||(b(this,sr,"f")[e]=[])).push({listener:A}),this}off(e,A){const r=b(this,sr,"f")[e];if(!r)return this;const n=r.findIndex(s=>s.listener===A);return n>=0&&r.splice(n,1),this}once(e,A){return(b(this,sr,"f")[e]||(b(this,sr,"f")[e]=[])).push({listener:A,once:!0}),this}emitted(e){return new Promise((A,r)=>{Ae(this,gs,!0),e!=="error"&&this.once("error",r),this.once(e,A)})}async done(){Ae(this,gs,!0),await b(this,Ja,"f")}_emit(e,...A){if(b(this,Xa,"f"))return;e==="end"&&(Ae(this,Xa,!0),b(this,$l,"f").call(this));const r=b(this,sr,"f")[e];if(r&&(b(this,sr,"f")[e]=r.filter(n=>!n.once),r.forEach(({listener:n})=>n(...A))),e==="abort"){const n=A[0];!b(this,gs,"f")&&!(r!=null&&r.length)&&Promise.reject(n),b(this,Wa,"f").call(this,n),b(this,Za,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=A[0];!b(this,gs,"f")&&!(r!=null&&r.length)&&Promise.reject(n),b(this,Wa,"f").call(this,n),b(this,Za,"f").call(this,n),this._emit("end")}}_emitFinal(){}}Dl=new WeakMap,Ml=new WeakMap,Wa=new WeakMap,Ja=new WeakMap,$l=new WeakMap,Za=new WeakMap,sr=new WeakMap,Xa=new WeakMap,Tu=new WeakMap,Ou=new WeakMap,gs=new WeakMap,qh=new WeakSet,gb=function(e){if(Ae(this,Tu,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Zt),e instanceof Zt)return Ae(this,Ou,!0),this._emit("abort",e);if(e instanceof te)return this._emit("error",e);if(e instanceof Error){const A=new te(e.message);return A.cause=e,this._emit("error",A)}return this._emit("error",new te(String(e)))};function Ck(t){return typeof t.parse=="function"}var vt,ep,ku,tp,Ap,rp,wb,yb;const bk=10;class Bb extends Rm{constructor(){super(...arguments),vt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const A=(r=e.choices[0])==null?void 0:r.message;return A&&this._addMessage(A),e}_addMessage(e,A=!0){if("content"in e||(e.content=null),this.messages.push(e),A){if(this._emit("message",e),mb(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(xu(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new te("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),b(this,vt,"m",ep).call(this)}async finalMessage(){return await this.done(),b(this,vt,"m",ku).call(this)}async finalFunctionToolCall(){return await this.done(),b(this,vt,"m",tp).call(this)}async finalFunctionToolCallResult(){return await this.done(),b(this,vt,"m",Ap).call(this)}async totalUsage(){return await this.done(),b(this,vt,"m",rp).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const A=b(this,vt,"m",ku).call(this);A&&this._emit("finalMessage",A);const r=b(this,vt,"m",ep).call(this);r&&this._emit("finalContent",r);const n=b(this,vt,"m",tp).call(this);n&&this._emit("finalFunctionToolCall",n);const s=b(this,vt,"m",Ap).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",b(this,vt,"m",rp).call(this))}async _createChatCompletion(e,A,r){const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),b(this,vt,"m",wb).call(this,A);const s=await e.chat.completions.create({...A,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(km(s,A))}async _runChatCompletion(e,A,r){for(const n of A.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,A,r)}async _runTools(e,A,r){var h,f,w;const n="tool",{tool_choice:s="auto",stream:a,...i}=A,o=typeof s!="string"&&s.type==="function"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:l=bk}=r||{},u=A.tools.map(y=>{if(oo(y)){if(!y.$callback)throw new te("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),c={};for(const y of u)y.type==="function"&&(c[y.function.name||y.function.function.name]=y.function);const d="tools"in A?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of A.messages)this._addMessage(y,!1);for(let y=0;y<l;++y){const m=(f=(await this._createChatCompletion(e,{...i,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!m)throw new te("missing message in ChatCompletion response");if(!((w=m.tool_calls)!=null&&w.length))return;for(const g of m.tool_calls){if(g.type!=="function")continue;const B=g.id,{name:_,arguments:v}=g.function,C=c[_];if(C){if(o&&o!==_){const $=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:B,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(c).map(se=>JSON.stringify(se)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:B,content:$});continue}let E;try{E=Ck(C)?await C.parse(v):v}catch($){const se=$ instanceof Error?$.message:String($);this._addMessage({role:n,tool_call_id:B,content:se});continue}const I=await C.function(E,this),L=b(this,vt,"m",yb).call(this,I);if(this._addMessage({role:n,tool_call_id:B,content:L}),o)return}}}}vt=new WeakSet,ep=function(){return b(this,vt,"m",ku).call(this).content??null},ku=function(){let e=this.messages.length;for(;e-- >0;){const A=this.messages[e];if(xu(A))return{...A,content:A.content??null,refusal:A.refusal??null}}throw new te("stream ended without producing a ChatCompletionMessage with role=assistant")},tp=function(){var e,A;for(let r=this.messages.length-1;r>=0;r--){const n=this.messages[r];if(xu(n)&&((e=n==null?void 0:n.tool_calls)!=null&&e.length))return(A=n.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:A.function}},Ap=function(){for(let e=this.messages.length-1;e>=0;e--){const A=this.messages[e];if(mb(A)&&A.content!=null&&typeof A.content=="string"&&this.messages.some(r=>{var n;return r.role==="assistant"&&((n=r.tool_calls)==null?void 0:n.some(s=>s.type==="function"&&s.id===A.tool_call_id))}))return A.content}},rp=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:A}of this._chatCompletions)A&&(e.completion_tokens+=A.completion_tokens,e.prompt_tokens+=A.prompt_tokens,e.total_tokens+=A.total_tokens);return e},wb=function(e){if(e.n!=null&&e.n>1)throw new te("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Lm extends Bb{static runTools(e,A,r){const n=new Lm,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,A,s)),n}_addMessage(e,A=!0){super._addMessage(e,A),xu(e)&&e.content&&this._emit("content",e.content)}}const _b=1,vb=2,Cb=4,bb=8,Eb=16,Qb=32,Ub=64,Fb=128,Ib=256,Sb=Fb|Ib,xb=Eb|Qb|Sb|Ub,Tb=_b|vb|xb,Ob=Cb|bb,Ek=Tb|Ob,qe={STR:_b,NUM:vb,ARR:Cb,OBJ:bb,NULL:Eb,BOOL:Qb,NAN:Ub,INFINITY:Fb,MINUS_INFINITY:Ib,INF:Sb,SPECIAL:xb,ATOM:Tb,COLLECTION:Ob,ALL:Ek};class Qk extends Error{}class Uk extends Error{}function Fk(t,e=qe.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Ik(t.trim(),e)}const Ik=(t,e)=>{const A=t.length;let r=0;const n=d=>{throw new Qk(`${d} at position ${r}`)},s=d=>{throw new Uk(`${d} at position ${r}`)},a=()=>(c(),r>=A&&n("Unexpected end of input"),t[r]==='"'?i():t[r]==="{"?o():t[r]==="["?l():t.substring(r,r+4)==="null"||qe.NULL&e&&A-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||qe.BOOL&e&&A-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||qe.BOOL&e&&A-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||qe.INFINITY&e&&A-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||qe.MINUS_INFINITY&e&&1<A-r&&A-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||qe.NAN&e&&A-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):u()),i=()=>{const d=r;let h=!1;for(r++;r<A&&(t[r]!=='"'||h&&t[r-1]==="\\");)h=t[r]==="\\"?!h:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(d,++r-Number(h)))}catch(f){s(String(f))}else if(qe.STR&e)try{return JSON.parse(t.substring(d,r-Number(h))+'"')}catch{return JSON.parse(t.substring(d,t.lastIndexOf("\\"))+'"')}n("Unterminated string literal")},o=()=>{r++,c();const d={};try{for(;t[r]!=="}";){if(c(),r>=A&&qe.OBJ&e)return d;const h=i();c(),r++;try{const f=a();Object.defineProperty(d,h,{value:f,writable:!0,enumerable:!0,configurable:!0})}catch(f){if(qe.OBJ&e)return d;throw f}c(),t[r]===","&&r++}}catch{if(qe.OBJ&e)return d;n("Expected '}' at end of object")}return r++,d},l=()=>{r++;const d=[];try{for(;t[r]!=="]";)d.push(a()),c(),t[r]===","&&r++}catch{if(qe.ARR&e)return d;n("Expected ']' at end of array")}return r++,d},u=()=>{if(r===0){t==="-"&&qe.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(t)}catch(h){if(qe.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(h))}}const d=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==A&&!(qe.NUM&e)&&n("Unterminated number literal");try{return JSON.parse(t.substring(d,r))}catch{t.substring(d,r)==="-"&&qe.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(t.substring(d,t.lastIndexOf("e")))}catch(f){s(String(f))}}},c=()=>{for(;r<A&&` 
\r	`.includes(t[r]);)r++};return a()},Gy=t=>Fk(t,qe.ALL^qe.NUM);var Ke,nr,is,br,qd,al,ef,tf,Af,il,rf,Vy;class Vi extends Bb{constructor(e){super(),Ke.add(this),nr.set(this,void 0),is.set(this,void 0),br.set(this,void 0),Ae(this,nr,e),Ae(this,is,[])}get currentChatCompletionSnapshot(){return b(this,br,"f")}static fromReadableStream(e){const A=new Vi(null);return A._run(()=>A._fromReadableStream(e)),A}static createChatCompletion(e,A,r){const n=new Vi(A);return n._run(()=>n._runChatCompletion(e,{...A,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,A,r){var a;super._createChatCompletion;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),b(this,Ke,"m",qd).call(this);const s=await e.chat.completions.create({...A,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const i of s)b(this,Ke,"m",ef).call(this,i);if((a=s.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(b(this,Ke,"m",il).call(this))}async _fromReadableStream(e,A){var a;const r=A==null?void 0:A.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),b(this,Ke,"m",qd).call(this),this._connected();const n=zA.fromReadableStream(e,this.controller);let s;for await(const i of n)s&&s!==i.id&&this._addChatCompletion(b(this,Ke,"m",il).call(this)),b(this,Ke,"m",ef).call(this,i),s=i.id;if((a=n.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(b(this,Ke,"m",il).call(this))}[(nr=new WeakMap,is=new WeakMap,br=new WeakMap,Ke=new WeakSet,qd=function(){this.ended||Ae(this,br,void 0)},al=function(A){let r=b(this,is,"f")[A.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},b(this,is,"f")[A.index]=r,r)},ef=function(A){var n,s,a,i,o,l,u,c,d,h,f,w,y,p,m;if(this.ended)return;const r=b(this,Ke,"m",Vy).call(this,A);this._emit("chunk",A,r);for(const g of A.choices){const B=r.choices[g.index];g.delta.content!=null&&((n=B.message)==null?void 0:n.role)==="assistant"&&((s=B.message)!=null&&s.content)&&(this._emit("content",g.delta.content,B.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:B.message.content,parsed:B.message.parsed})),g.delta.refusal!=null&&((a=B.message)==null?void 0:a.role)==="assistant"&&((i=B.message)!=null&&i.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:B.message.refusal}),((o=g.logprobs)==null?void 0:o.content)!=null&&((l=B.message)==null?void 0:l.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=g.logprobs)==null?void 0:u.content,snapshot:((c=B.logprobs)==null?void 0:c.content)??[]}),((d=g.logprobs)==null?void 0:d.refusal)!=null&&((h=B.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(f=g.logprobs)==null?void 0:f.refusal,snapshot:((w=B.logprobs)==null?void 0:w.refusal)??[]});const _=b(this,Ke,"m",al).call(this,B);B.finish_reason&&(b(this,Ke,"m",Af).call(this,B),_.current_tool_call_index!=null&&b(this,Ke,"m",tf).call(this,B,_.current_tool_call_index));for(const v of g.delta.tool_calls??[])_.current_tool_call_index!==v.index&&(b(this,Ke,"m",Af).call(this,B),_.current_tool_call_index!=null&&b(this,Ke,"m",tf).call(this,B,_.current_tool_call_index)),_.current_tool_call_index=v.index;for(const v of g.delta.tool_calls??[]){const C=(y=B.message.tool_calls)==null?void 0:y[v.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(p=C.function)==null?void 0:p.name,index:v.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((m=v.function)==null?void 0:m.arguments)??""}):(C==null||C.type,void 0))}}},tf=function(A,r){var a,i,o;if(b(this,Ke,"m",al).call(this,A).done_tool_calls.has(r))return;const s=(a=A.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const l=(o=(i=b(this,nr,"f"))==null?void 0:i.tools)==null?void 0:o.find(u=>Su(u)&&u.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:oo(l)?l.$parseRaw(s.function.arguments):l!=null&&l.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Af=function(A){var n,s;const r=b(this,Ke,"m",al).call(this,A);if(A.message.content&&!r.content_done){r.content_done=!0;const a=b(this,Ke,"m",rf).call(this);this._emit("content.done",{content:A.message.content,parsed:a?a.$parseRaw(A.message.content):null})}A.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:A.message.refusal})),(n=A.logprobs)!=null&&n.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:A.logprobs.content})),(s=A.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:A.logprobs.refusal}))},il=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");const A=b(this,br,"f");if(!A)throw new te("request ended without sending any chunks");return Ae(this,br,void 0),Ae(this,is,[]),Sk(A,b(this,nr,"f"))},rf=function(){var r;const A=(r=b(this,nr,"f"))==null?void 0:r.response_format;return Om(A)?A:null},Vy=function(A){var r,n,s,a;let i=b(this,br,"f");const{choices:o,...l}=A;i?Object.assign(i,l):i=Ae(this,br,{...l,choices:[]});for(const{delta:u,finish_reason:c,index:d,logprobs:h=null,...f}of A.choices){let w=i.choices[d];if(w||(w=i.choices[d]={finish_reason:c,index:d,message:{},logprobs:h,...f}),h)if(!w.logprobs)w.logprobs=Object.assign({},h);else{const{content:v,refusal:C,...E}=h;Object.assign(w.logprobs,E),v&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...v)),C&&((n=w.logprobs).refusal??(n.refusal=[]),w.logprobs.refusal.push(...C))}if(c&&(w.finish_reason=c,b(this,nr,"f")&&hb(b(this,nr,"f")))){if(c==="length")throw new ZC;if(c==="content_filter")throw new XC}if(Object.assign(w,f),!u)continue;const{content:y,refusal:p,function_call:m,role:g,tool_calls:B,..._}=u;if(Object.assign(w.message,_),p&&(w.message.refusal=(w.message.refusal||"")+p),g&&(w.message.role=g),m&&(w.message.function_call?(m.name&&(w.message.function_call.name=m.name),m.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=m.arguments)):w.message.function_call=m),y&&(w.message.content=(w.message.content||"")+y,!w.message.refusal&&b(this,Ke,"m",rf).call(this)&&(w.message.parsed=Gy(w.message.content))),B){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:v,id:C,type:E,function:I,...L}of B){const $=(a=w.message.tool_calls)[v]??(a[v]={});Object.assign($,L),C&&($.id=C),E&&($.type=E),I&&($.function??($.function={name:I.name??"",arguments:""})),I!=null&&I.name&&($.function.name=I.name),I!=null&&I.arguments&&($.function.arguments+=I.arguments,_k(b(this,nr,"f"),$)&&($.function.parsed_arguments=Gy($.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("chunk",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new zA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Sk(t,e){const{id:A,choices:r,created:n,model:s,system_fingerprint:a,...i}=t,o={...i,id:A,choices:r.map(({message:l,finish_reason:u,index:c,logprobs:d,...h})=>{if(!u)throw new te(`missing finish_reason for choice ${c}`);const{content:f=null,function_call:w,tool_calls:y,...p}=l,m=l.role;if(!m)throw new te(`missing role for choice ${c}`);if(w){const{arguments:g,name:B}=w;if(g==null)throw new te(`missing function_call.arguments for choice ${c}`);if(!B)throw new te(`missing function_call.name for choice ${c}`);return{...h,message:{content:f,function_call:{arguments:g,name:B},role:m,refusal:l.refusal??null},finish_reason:u,index:c,logprobs:d}}return y?{...h,index:c,finish_reason:u,logprobs:d,message:{...p,role:m,content:f,refusal:l.refusal??null,tool_calls:y.map((g,B)=>{const{function:_,type:v,id:C,...E}=g,{arguments:I,name:L,...$}=_||{};if(C==null)throw new te(`missing choices[${c}].tool_calls[${B}].id
${ol(t)}`);if(v==null)throw new te(`missing choices[${c}].tool_calls[${B}].type
${ol(t)}`);if(L==null)throw new te(`missing choices[${c}].tool_calls[${B}].function.name
${ol(t)}`);if(I==null)throw new te(`missing choices[${c}].tool_calls[${B}].function.arguments
${ol(t)}`);return{...E,id:C,type:v,function:{...$,name:L,arguments:I}}})}}:{...h,message:{...p,content:f,role:m,refusal:l.refusal??null},finish_reason:u,index:c,logprobs:d}}),created:n,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return wk(o,e)}function ol(t){return JSON.stringify(t)}class Ru extends Vi{static fromReadableStream(e){const A=new Ru(null);return A._run(()=>A._fromReadableStream(e)),A}static runTools(e,A,r){const n=new Ru(A),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,A,s)),n}}let Pm=class extends re{constructor(){super(...arguments),this.messages=new fb(this._client)}create(e,A){return this._client.post("/chat/completions",{body:e,...A,stream:e.stream??!1})}retrieve(e,A){return this._client.get(M`/chat/completions/${e}`,A)}update(e,A,r){return this._client.post(M`/chat/completions/${e}`,{body:A,...r})}list(e={},A){return this._client.getAPIList("/chat/completions",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/chat/completions/${e}`,A)}parse(e,A){return vk(e.tools),this._client.chat.completions.create(e,{...A,headers:{...A==null?void 0:A.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>km(r,e))}runTools(e,A){return e.stream?Ru.runTools(this._client,e,A):Lm.runTools(this._client,e,A)}stream(e,A){return Vi.createChatCompletion(this._client,e,A)}};Pm.Messages=fb;class Hm extends re{constructor(){super(...arguments),this.completions=new Pm(this._client)}}Hm.Completions=Pm;const kb=Symbol("brand.privateNullableHeaders");function*xk(t){if(!t)return;if(kb in t){const{values:r,nulls:n}=t;yield*r.entries();for(const s of n)yield[s,null];return}let e=!1,A;t instanceof Headers?A=t.entries():xy(t)?A=t:(e=!0,A=Object.entries(t??{}));for(let r of A){const n=r[0];if(typeof n!="string")throw new TypeError("expected header name to be a string");const s=xy(r[1])?r[1]:[r[1]];let a=!1;for(const i of s)i!==void 0&&(e&&!a&&(a=!0,yield[n,null]),yield[n,i])}}const ee=t=>{const e=new Headers,A=new Set;for(const r of t){const n=new Set;for(const[s,a]of xk(r)){const i=s.toLowerCase();n.has(i)||(e.delete(s),n.add(i)),a===null?(e.delete(s),A.add(i)):(e.append(s,a),A.delete(i))}}return{[kb]:!0,values:e,nulls:A}};class Rb extends re{create(e,A){return this._client.post("/audio/speech",{body:e,...A,headers:ee([{Accept:"application/octet-stream"},A==null?void 0:A.headers]),__binaryResponse:!0})}}class Lb extends re{create(e,A){return this._client.post("/audio/transcriptions",jn({body:e,...A,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Pb extends re{create(e,A){return this._client.post("/audio/translations",jn({body:e,...A,__metadata:{model:e.model}},this._client))}}class lo extends re{constructor(){super(...arguments),this.transcriptions=new Lb(this._client),this.translations=new Pb(this._client),this.speech=new Rb(this._client)}}lo.Transcriptions=Lb;lo.Translations=Pb;lo.Speech=Rb;class Hb extends re{create(e,A){return this._client.post("/batches",{body:e,...A})}retrieve(e,A){return this._client.get(M`/batches/${e}`,A)}list(e={},A){return this._client.getAPIList("/batches",je,{query:e,...A})}cancel(e,A){return this._client.post(M`/batches/${e}/cancel`,A)}}class Nb extends re{create(e,A){return this._client.post("/assistants",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/assistants/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/assistants/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},A){return this._client.getAPIList("/assistants",je,{query:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}delete(e,A){return this._client.delete(M`/assistants/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Db extends re{create(e,A){return this._client.post("/realtime/sessions",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Mb extends re{create(e,A){return this._client.post("/realtime/transcription_sessions",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Oc extends re{constructor(){super(...arguments),this.sessions=new Db(this._client),this.transcriptionSessions=new Mb(this._client)}}Oc.Sessions=Db;Oc.TranscriptionSessions=Mb;class $b extends re{create(e,A,r){return this._client.post(M`/threads/${e}/messages`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{thread_id:n}=A;return this._client.get(M`/threads/${n}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/messages/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/threads/${e}/messages`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A,r){const{thread_id:n}=A;return this._client.delete(M`/threads/${n}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class jb extends re{retrieve(e,A,r){const{thread_id:n,run_id:s,...a}=A;return this._client.get(M`/threads/${n}/runs/${s}/steps/${e}`,{query:a,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A,r){const{thread_id:n,...s}=A;return this._client.getAPIList(M`/threads/${n}/runs/${e}/steps`,je,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Tk=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),A=e.length,r=new Uint8Array(A);for(let n=0;n<A;n++)r[n]=e.charCodeAt(n);return Array.from(new Float32Array(r.buffer))}};var nf={};const os=t=>{var e,A,r,n;if(typeof globalThis.process<"u")return((e=nf==null?void 0:nf[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(n=(r=(A=globalThis.Deno.env)==null?void 0:A.get)==null?void 0:r.call(A,t))==null?void 0:n.trim()};var it,In,np,KA,jl,UA,Sn,Os,bn,Lu,zt,Kl,Gl,wi,Ya,qa,zy,Wy,Jy,Zy,Xy,Yy,qy;class yi extends Rm{constructor(){super(...arguments),it.add(this),np.set(this,[]),KA.set(this,{}),jl.set(this,{}),UA.set(this,void 0),Sn.set(this,void 0),Os.set(this,void 0),bn.set(this,void 0),Lu.set(this,void 0),zt.set(this,void 0),Kl.set(this,void 0),Gl.set(this,void 0),wi.set(this,void 0)}[(np=new WeakMap,KA=new WeakMap,jl=new WeakMap,UA=new WeakMap,Sn=new WeakMap,Os=new WeakMap,bn=new WeakMap,Lu=new WeakMap,zt=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,wi=new WeakMap,it=new WeakSet,Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("event",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const A=new In;return A._run(()=>A._fromReadableStream(e)),A}async _fromReadableStream(e,A){var s;const r=A==null?void 0:A.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=zA.fromReadableStream(e,this.controller);for await(const a of n)b(this,it,"m",Ya).call(this,a);if((s=n.controller.signal)!=null&&s.aborted)throw new Zt;return this._addRun(b(this,it,"m",qa).call(this))}toReadableStream(){return new zA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,A,r,n){const s=new In;return s._run(()=>s._runToolAssistantStream(e,A,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,A,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.submitToolOutputs(A,a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)b(this,it,"m",Ya).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Zt;return this._addRun(b(this,it,"m",qa).call(this))}static createThreadAssistantStream(e,A,r){const n=new In;return n._run(()=>n._threadAssistantStream(e,A,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,A,r,n){const s=new In;return s._run(()=>s._runAssistantStream(e,A,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return b(this,Kl,"f")}currentRun(){return b(this,Gl,"f")}currentMessageSnapshot(){return b(this,UA,"f")}currentRunStepSnapshot(){return b(this,wi,"f")}async finalRunSteps(){return await this.done(),Object.values(b(this,KA,"f"))}async finalMessages(){return await this.done(),Object.values(b(this,jl,"f"))}async finalRun(){if(await this.done(),!b(this,Sn,"f"))throw Error("Final run was not received.");return b(this,Sn,"f")}async _createThreadAssistantStream(e,A,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s={...A,stream:!0},a=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const o of a)b(this,it,"m",Ya).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new Zt;return this._addRun(b(this,it,"m",qa).call(this))}async _createAssistantStream(e,A,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.create(A,a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)b(this,it,"m",Ya).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Zt;return this._addRun(b(this,it,"m",qa).call(this))}static accumulateDelta(e,A){for(const[r,n]of Object.entries(A)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let s=e[r];if(s==null){e[r]=n;continue}if(r==="index"||r==="type"){e[r]=n;continue}if(typeof s=="string"&&typeof n=="string")s+=n;else if(typeof s=="number"&&typeof n=="number")s+=n;else if(Zd(s)&&Zd(n))s=this.accumulateDelta(s,n);else if(Array.isArray(s)&&Array.isArray(n)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...n);continue}for(const a of n){if(!Zd(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const i=a.index;if(i==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof i!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${i}`);const o=s[i];o==null?s.push(a):s[i]=this.accumulateDelta(o,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,A,r){return await this._createThreadAssistantStream(A,e,r)}async _runAssistantStream(e,A,r,n){return await this._createAssistantStream(A,e,r,n)}async _runToolAssistantStream(e,A,r,n){return await this._createToolAssistantStream(A,e,r,n)}}In=yi,Ya=function(e){if(!this.ended)switch(Ae(this,Kl,e),b(this,it,"m",Jy).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":b(this,it,"m",qy).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":b(this,it,"m",Wy).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":b(this,it,"m",zy).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},qa=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");if(!b(this,Sn,"f"))throw Error("Final run has not been received");return b(this,Sn,"f")},zy=function(e){const[A,r]=b(this,it,"m",Xy).call(this,e,b(this,UA,"f"));Ae(this,UA,A),b(this,jl,"f")[A.id]=A;for(const n of r){const s=A.content[n.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,A),e.data.delta.content)for(const n of e.data.delta.content){if(n.type=="text"&&n.text){let s=n.text,a=A.content[n.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=b(this,Os,"f")){if(b(this,bn,"f"))switch(b(this,bn,"f").type){case"text":this._emit("textDone",b(this,bn,"f").text,b(this,UA,"f"));break;case"image_file":this._emit("imageFileDone",b(this,bn,"f").image_file,b(this,UA,"f"));break}Ae(this,Os,n.index)}Ae(this,bn,A.content[n.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(b(this,Os,"f")!==void 0){const n=e.data.content[b(this,Os,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,b(this,UA,"f"));break;case"text":this._emit("textDone",n.text,b(this,UA,"f"));break}}b(this,UA,"f")&&this._emit("messageDone",e.data),Ae(this,UA,void 0)}},Wy=function(e){const A=b(this,it,"m",Zy).call(this,e);switch(Ae(this,wi,A),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&A.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==b(this,Lu,"f")?this._emit("toolCallDelta",s,A.step_details.tool_calls[s.index]):(b(this,zt,"f")&&this._emit("toolCallDone",b(this,zt,"f")),Ae(this,Lu,s.index),Ae(this,zt,A.step_details.tool_calls[s.index]),b(this,zt,"f")&&this._emit("toolCallCreated",b(this,zt,"f")));this._emit("runStepDelta",e.data.delta,A);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ae(this,wi,void 0),e.data.step_details.type=="tool_calls"&&b(this,zt,"f")&&(this._emit("toolCallDone",b(this,zt,"f")),Ae(this,zt,void 0)),this._emit("runStepDone",e.data,A);break}},Jy=function(e){b(this,np,"f").push(e),this._emit("event",e)},Zy=function(e){switch(e.event){case"thread.run.step.created":return b(this,KA,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let A=b(this,KA,"f")[e.data.id];if(!A)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const n=In.accumulateDelta(A,r.delta);b(this,KA,"f")[e.data.id]=n}return b(this,KA,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":b(this,KA,"f")[e.data.id]=e.data;break}if(b(this,KA,"f")[e.data.id])return b(this,KA,"f")[e.data.id];throw new Error("No snapshot available")},Xy=function(e,A){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!A)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(const s of n.delta.content)if(s.index in A.content){let a=A.content[s.index];A.content[s.index]=b(this,it,"m",Yy).call(this,s,a)}else A.content[s.index]=s,r.push(s);return[A,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(A)return[A,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Yy=function(e,A){return In.accumulateDelta(A,e)},qy=function(e){switch(Ae(this,Gl,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ae(this,Sn,e.data),b(this,zt,"f")&&(this._emit("toolCallDone",b(this,zt,"f")),Ae(this,zt,void 0));break}};let Nm=class extends re{constructor(){super(...arguments),this.steps=new jb(this._client)}create(e,A,r){const{include:n,...s}=A;return this._client.post(M`/threads/${e}/runs`,{query:{include:n},body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:A.stream??!1})}retrieve(e,A,r){const{thread_id:n}=A;return this._client.get(M`/threads/${n}/runs/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/runs/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/threads/${e}/runs`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,A,r){const{thread_id:n}=A;return this._client.post(M`/threads/${n}/runs/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,A,r){return yi.createAssistantStream(e,this._client.beta.threads.runs,A,r)}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(e,A,{...r,headers:{...r==null?void 0:r.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,A,r){return yi.createAssistantStream(e,this._client.beta.threads.runs,A,r)}submitToolOutputs(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:A.stream??!1})}async submitToolOutputsAndPoll(e,A,r){const n=await this.submitToolOutputs(e,A,r);return await this.poll(n.id,A,r)}submitToolOutputsStream(e,A,r){return yi.createToolAssistantStream(e,this._client.beta.threads.runs,A,r)}};Nm.Steps=jb;class kc extends re{constructor(){super(...arguments),this.runs=new Nm(this._client),this.messages=new $b(this._client)}create(e={},A){return this._client.post("/threads",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/threads/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/threads/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A){return this._client.delete(M`/threads/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}createAndRun(e,A){return this._client.post("/threads/runs",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers]),stream:e.stream??!1})}async createAndRunPoll(e,A){const r=await this.createAndRun(e,A);return await this.runs.poll(r.id,{thread_id:r.thread_id},A)}createAndRunStream(e,A){return yi.createThreadAssistantStream(e,this._client.beta.threads,A)}}kc.Runs=Nm;kc.Messages=$b;class uo extends re{constructor(){super(...arguments),this.realtime=new Oc(this._client),this.assistants=new Nb(this._client),this.threads=new kc(this._client)}}uo.Realtime=Oc;uo.Assistants=Nb;uo.Threads=kc;class Kb extends re{create(e,A){return this._client.post("/completions",{body:e,...A,stream:e.stream??!1})}}class Gb extends re{retrieve(e,A,r){const{container_id:n}=A;return this._client.get(M`/containers/${n}/files/${e}/content`,{...r,headers:ee([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let Dm=class extends re{constructor(){super(...arguments),this.content=new Gb(this._client)}create(e,A,r){return this._client.post(M`/containers/${e}/files`,jn({body:A,...r},this._client))}retrieve(e,A,r){const{container_id:n}=A;return this._client.get(M`/containers/${n}/files/${e}`,r)}list(e,A={},r){return this._client.getAPIList(M`/containers/${e}/files`,je,{query:A,...r})}delete(e,A,r){const{container_id:n}=A;return this._client.delete(M`/containers/${n}/files/${e}`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}};Dm.Content=Gb;class Mm extends re{constructor(){super(...arguments),this.files=new Dm(this._client)}create(e,A){return this._client.post("/containers",{body:e,...A})}retrieve(e,A){return this._client.get(M`/containers/${e}`,A)}list(e={},A){return this._client.getAPIList("/containers",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/containers/${e}`,{...A,headers:ee([{Accept:"*/*"},A==null?void 0:A.headers])})}}Mm.Files=Dm;class Vb extends re{create(e,A){const r=!!e.encoding_format;let n=r?e.encoding_format:"base64";r&&at(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:n},...A});return r?s:(at(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(i=>{const o=i.embedding;i.embedding=Tk(o)}),a)))}}class zb extends re{retrieve(e,A,r){const{eval_id:n,run_id:s}=A;return this._client.get(M`/evals/${n}/runs/${s}/output_items/${e}`,r)}list(e,A,r){const{eval_id:n,...s}=A;return this._client.getAPIList(M`/evals/${n}/runs/${e}/output_items`,je,{query:s,...r})}}class $m extends re{constructor(){super(...arguments),this.outputItems=new zb(this._client)}create(e,A,r){return this._client.post(M`/evals/${e}/runs`,{body:A,...r})}retrieve(e,A,r){const{eval_id:n}=A;return this._client.get(M`/evals/${n}/runs/${e}`,r)}list(e,A={},r){return this._client.getAPIList(M`/evals/${e}/runs`,je,{query:A,...r})}delete(e,A,r){const{eval_id:n}=A;return this._client.delete(M`/evals/${n}/runs/${e}`,r)}cancel(e,A,r){const{eval_id:n}=A;return this._client.post(M`/evals/${n}/runs/${e}`,r)}}$m.OutputItems=zb;class jm extends re{constructor(){super(...arguments),this.runs=new $m(this._client)}create(e,A){return this._client.post("/evals",{body:e,...A})}retrieve(e,A){return this._client.get(M`/evals/${e}`,A)}update(e,A,r){return this._client.post(M`/evals/${e}`,{body:A,...r})}list(e={},A){return this._client.getAPIList("/evals",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/evals/${e}`,A)}}jm.Runs=$m;let Wb=class extends re{create(e,A){return this._client.post("/files",jn({body:e,...A},this._client))}retrieve(e,A){return this._client.get(M`/files/${e}`,A)}list(e={},A){return this._client.getAPIList("/files",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/files/${e}`,A)}content(e,A){return this._client.get(M`/files/${e}/content`,{...A,headers:ee([{Accept:"application/binary"},A==null?void 0:A.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:A=5e3,maxWait:r=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!n.has(a.status);)if(await io(A),a=await this.retrieve(e),Date.now()-s>r)throw new Ic({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class Jb extends re{}let Zb=class extends re{run(e,A){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...A})}validate(e,A){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...A})}};class Km extends re{constructor(){super(...arguments),this.graders=new Zb(this._client)}}Km.Graders=Zb;class Xb extends re{create(e,A,r){return this._client.getAPIList(M`/fine_tuning/checkpoints/${e}/permissions`,Tc,{body:A,method:"post",...r})}retrieve(e,A={},r){return this._client.get(M`/fine_tuning/checkpoints/${e}/permissions`,{query:A,...r})}delete(e,A,r){const{fine_tuned_model_checkpoint:n}=A;return this._client.delete(M`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}}let Gm=class extends re{constructor(){super(...arguments),this.permissions=new Xb(this._client)}};Gm.Permissions=Xb;class Yb extends re{list(e,A={},r){return this._client.getAPIList(M`/fine_tuning/jobs/${e}/checkpoints`,je,{query:A,...r})}}class Vm extends re{constructor(){super(...arguments),this.checkpoints=new Yb(this._client)}create(e,A){return this._client.post("/fine_tuning/jobs",{body:e,...A})}retrieve(e,A){return this._client.get(M`/fine_tuning/jobs/${e}`,A)}list(e={},A){return this._client.getAPIList("/fine_tuning/jobs",je,{query:e,...A})}cancel(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/cancel`,A)}listEvents(e,A={},r){return this._client.getAPIList(M`/fine_tuning/jobs/${e}/events`,je,{query:A,...r})}pause(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/pause`,A)}resume(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/resume`,A)}}Vm.Checkpoints=Yb;class la extends re{constructor(){super(...arguments),this.methods=new Jb(this._client),this.jobs=new Vm(this._client),this.checkpoints=new Gm(this._client),this.alpha=new Km(this._client)}}la.Methods=Jb;la.Jobs=Vm;la.Checkpoints=Gm;la.Alpha=Km;class qb extends re{}class zm extends re{constructor(){super(...arguments),this.graderModels=new qb(this._client)}}zm.GraderModels=qb;class eE extends re{createVariation(e,A){return this._client.post("/images/variations",jn({body:e,...A},this._client))}edit(e,A){return this._client.post("/images/edits",jn({body:e,...A,stream:e.stream??!1},this._client))}generate(e,A){return this._client.post("/images/generations",{body:e,...A,stream:e.stream??!1})}}class tE extends re{retrieve(e,A){return this._client.get(M`/models/${e}`,A)}list(e){return this._client.getAPIList("/models",Tc,e)}delete(e,A){return this._client.delete(M`/models/${e}`,A)}}class AE extends re{create(e,A){return this._client.post("/moderations",{body:e,...A})}}function Ok(t,e){return!e||!Rk(e)?{...t,output_parsed:null,output:t.output.map(A=>A.type==="function_call"?{...A,parsed_arguments:null}:A.type==="message"?{...A,content:A.content.map(r=>({...r,parsed:null}))}:A)}:rE(t,e)}function rE(t,e){const A=t.output.map(n=>{if(n.type==="function_call")return{...n,parsed_arguments:Hk(e,n)};if(n.type==="message"){const s=n.content.map(a=>a.type==="output_text"?{...a,parsed:kk(e,a.text)}:a);return{...n,content:s}}return n}),r=Object.assign({},t,{output:A});return Object.getOwnPropertyDescriptor(t,"output_text")||sp(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const n of r.output)if(n.type==="message"){for(const s of n.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function kk(t,e){var A,r,n,s;return((r=(A=t.text)==null?void 0:A.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((n=t.text)==null?void 0:n.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Rk(t){var e;return!!Om((e=t.text)==null?void 0:e.format)}function Lk(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Pk(t,e){return t.find(A=>A.type==="function"&&A.name===e)}function Hk(t,e){const A=Pk(t.tools??[],e.name);return{...e,...e,parsed_arguments:Lk(A)?A.$parseRaw(e.arguments):A!=null&&A.strict?JSON.parse(e.arguments):null}}function sp(t){const e=[];for(const A of t.output)if(A.type==="message")for(const r of A.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ls,ll,Er,ul,eB,tB,AB,rB;class Wm extends Rm{constructor(e){super(),ls.add(this),ll.set(this,void 0),Er.set(this,void 0),ul.set(this,void 0),Ae(this,ll,e)}static createResponse(e,A,r){const n=new Wm(A);return n._run(()=>n._createOrRetrieveResponse(e,A,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,A,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),b(this,ls,"m",eB).call(this);let s,a=null;"response_id"in A?(s=await e.responses.retrieve(A.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=A.starting_after??null):s=await e.responses.create({...A,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of s)b(this,ls,"m",tB).call(this,o,a);if((i=s.controller.signal)!=null&&i.aborted)throw new Zt;return b(this,ls,"m",AB).call(this)}[(ll=new WeakMap,Er=new WeakMap,ul=new WeakMap,ls=new WeakSet,eB=function(){this.ended||Ae(this,Er,void 0)},tB=function(A,r){if(this.ended)return;const n=(a,i)=>{(r==null||i.sequence_number>r)&&this._emit(a,i)},s=b(this,ls,"m",rB).call(this,A);switch(n("event",A),A.type){case"response.output_text.delta":{const a=s.output[A.output_index];if(!a)throw new te(`missing output at index ${A.output_index}`);if(a.type==="message"){const i=a.content[A.content_index];if(!i)throw new te(`missing content at index ${A.content_index}`);if(i.type!=="output_text")throw new te(`expected content to be 'output_text', got ${i.type}`);n("response.output_text.delta",{...A,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const a=s.output[A.output_index];if(!a)throw new te(`missing output at index ${A.output_index}`);a.type==="function_call"&&n("response.function_call_arguments.delta",{...A,snapshot:a.arguments});break}default:n(A.type,A);break}},AB=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");const A=b(this,Er,"f");if(!A)throw new te("request ended without sending any events");Ae(this,Er,void 0);const r=Nk(A,b(this,ll,"f"));return Ae(this,ul,r),r},rB=function(A){let r=b(this,Er,"f");if(!r){if(A.type!=="response.created")throw new te(`When snapshot hasn't been set yet, expected 'response.created' event, got ${A.type}`);return r=Ae(this,Er,A.response),r}switch(A.type){case"response.output_item.added":{r.output.push(A.item);break}case"response.content_part.added":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);n.type==="message"&&n.content.push(A.part);break}case"response.output_text.delta":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);if(n.type==="message"){const s=n.content[A.content_index];if(!s)throw new te(`missing content at index ${A.content_index}`);if(s.type!=="output_text")throw new te(`expected content to be 'output_text', got ${s.type}`);s.text+=A.delta}break}case"response.function_call_arguments.delta":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);n.type==="function_call"&&(n.arguments+=A.delta);break}case"response.completed":{Ae(this,Er,A.response);break}}return r},Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("event",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=b(this,ul,"f");if(!e)throw new te("stream ended without producing a ChatCompletion");return e}}function Nk(t,e){return Ok(t,e)}class nE extends re{list(e,A={},r){return this._client.getAPIList(M`/responses/${e}/input_items`,je,{query:A,...r})}}class Jm extends re{constructor(){super(...arguments),this.inputItems=new nE(this._client)}create(e,A){return this._client.post("/responses",{body:e,...A,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&sp(r),r))}retrieve(e,A={},r){return this._client.get(M`/responses/${e}`,{query:A,...r,stream:(A==null?void 0:A.stream)??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&sp(n),n))}delete(e,A){return this._client.delete(M`/responses/${e}`,{...A,headers:ee([{Accept:"*/*"},A==null?void 0:A.headers])})}parse(e,A){return this._client.responses.create(e,A)._thenUnwrap(r=>rE(r,e))}stream(e,A){return Wm.createResponse(this._client,e,A)}cancel(e,A){return this._client.post(M`/responses/${e}/cancel`,A)}}Jm.InputItems=nE;class sE extends re{create(e,A,r){return this._client.post(M`/uploads/${e}/parts`,jn({body:A,...r},this._client))}}class Zm extends re{constructor(){super(...arguments),this.parts=new sE(this._client)}create(e,A){return this._client.post("/uploads",{body:e,...A})}cancel(e,A){return this._client.post(M`/uploads/${e}/cancel`,A)}complete(e,A,r){return this._client.post(M`/uploads/${e}/complete`,{body:A,...r})}}Zm.Parts=sE;const Dk=async t=>{const e=await Promise.allSettled(t),A=e.filter(n=>n.status==="rejected");if(A.length){for(const n of A)console.error(n.reason);throw new Error(`${A.length} promise(s) failed - see the above errors`)}const r=[];for(const n of e)n.status==="fulfilled"&&r.push(n.value);return r};class aE extends re{create(e,A,r){return this._client.post(M`/vector_stores/${e}/file_batches`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{vector_store_id:n}=A;return this._client.get(M`/vector_stores/${n}/file_batches/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,A,r){const{vector_store_id:n}=A;return this._client.post(M`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A);return await this.poll(e,n.id,r)}listFiles(e,A,r){const{vector_store_id:n,...s}=A;return this._client.getAPIList(M`/vector_stores/${n}/file_batches/${e}/files`,je,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(A,{vector_store_id:e},{...r,headers:n}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:A,fileIds:r=[]},n){if(A==null||A.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(n==null?void 0:n.maxConcurrency)??5,a=Math.min(s,A.length),i=this._client,o=A.values(),l=[...r];async function u(d){for(let h of d){const f=await i.files.create({file:h,purpose:"assistants"},n);l.push(f.id)}}const c=Array(a).fill(o).map(u);return await Dk(c),await this.createAndPoll(e,{file_ids:l})}}class iE extends re{create(e,A,r){return this._client.post(M`/vector_stores/${e}/files`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{vector_store_id:n}=A;return this._client.get(M`/vector_stores/${n}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{vector_store_id:n,...s}=A;return this._client.post(M`/vector_stores/${n}/files/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/vector_stores/${e}/files`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A,r){const{vector_store_id:n}=A;return this._client.delete(M`/vector_stores/${n}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A,r);return await this.poll(e,n.id,r)}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const a=await this.retrieve(A,{vector_store_id:e},{...r,headers:n}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"failed":case"completed":return i}}}async upload(e,A,r){const n=await this._client.files.create({file:A,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,A,r){const n=await this.upload(e,A,r);return await this.poll(e,n.id,r)}content(e,A,r){const{vector_store_id:n}=A;return this._client.getAPIList(M`/vector_stores/${n}/files/${e}/content`,Tc,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Rc extends re{constructor(){super(...arguments),this.files=new iE(this._client),this.fileBatches=new aE(this._client)}create(e,A){return this._client.post("/vector_stores",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/vector_stores/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/vector_stores/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},A){return this._client.getAPIList("/vector_stores",je,{query:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}delete(e,A){return this._client.delete(M`/vector_stores/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}search(e,A,r){return this._client.getAPIList(M`/vector_stores/${e}/search`,Tc,{body:A,method:"post",...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Rc.Files=iE;Rc.FileBatches=aE;var ws,oE,Vl;class lE extends re{constructor(){super(...arguments),ws.add(this)}async unwrap(e,A,r=this._client.webhookSecret,n=300){return await this.verifySignature(e,A,r,n),JSON.parse(e)}async verifySignature(e,A,r=this._client.webhookSecret,n=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");b(this,ws,"m",oE).call(this,r);const s=ee([A]).values,a=b(this,ws,"m",Vl).call(this,s,"webhook-signature"),i=b(this,ws,"m",Vl).call(this,s,"webhook-timestamp"),o=b(this,ws,"m",Vl).call(this,s,"webhook-id"),l=parseInt(i,10);if(isNaN(l))throw new Ga("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-l>n)throw new Ga("Webhook timestamp is too old");if(l>u+n)throw new Ga("Webhook timestamp is too new");const c=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),d=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),h=o?`${o}.${i}.${e}`:`${i}.${e}`,f=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of c)try{const y=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",f,y,new TextEncoder().encode(h)))return}catch{continue}throw new Ga("The given webhook signature does not match the expected signature")}}ws=new WeakSet,oE=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Vl=function(e,A){if(!e)throw new Error("Headers are required");const r=e.get(A);if(r==null)throw new Error(`Missing required header: ${A}`);return r};var ap,Xm,zl,uE;let ue=class{constructor({baseURL:e=os("OPENAI_BASE_URL"),apiKey:A=os("OPENAI_API_KEY"),organization:r=os("OPENAI_ORG_ID")??null,project:n=os("OPENAI_PROJECT_ID")??null,webhookSecret:s=os("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(ap.add(this),zl.set(this,void 0),this.completions=new Kb(this),this.chat=new Hm(this),this.embeddings=new Vb(this),this.files=new Wb(this),this.images=new eE(this),this.audio=new lo(this),this.moderations=new AE(this),this.models=new tE(this),this.fineTuning=new la(this),this.graders=new zm(this),this.vectorStores=new Rc(this),this.webhooks=new lE(this),this.beta=new uo(this),this.batches=new Hb(this),this.uploads=new Zm(this),this.responses=new Jm(this),this.evals=new jm(this),this.containers=new Mm(this),A===void 0)throw new te("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:A,organization:r,project:n,webhookSecret:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&DO())throw new te(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=i.baseURL,this.timeout=i.timeout??Xm.DEFAULT_TIMEOUT,this.logger=i.logger??console;const o="warn";this.logLevel=o,this.logLevel=My(i.logLevel,"ClientOptions.logLevel",this)??My(os("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??o,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??2,this.fetch=i.fetch??GO(),Ae(this,zl,zO),this._options=i,this.apiKey=A,this.organization=r,this.project=n,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:A}){}async authHeaders(e){return ee([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return qO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ms}`}defaultIdempotencyKey(){return`stainless-node-retry-${MC()}`}makeStatusError(e,A,r,n){return dt.generate(e,A,r,n)}buildURL(e,A,r){const n=!b(this,ap,"m",uE).call(this)&&r||this.baseURL,s=kO(e)?new URL(e):new URL(n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return LO(a)||(A={...a,...A}),typeof A=="object"&&A&&!Array.isArray(A)&&(s.search=this.stringifyQuery(A)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:A,options:r}){}get(e,A){return this.methodRequest("get",e,A)}post(e,A){return this.methodRequest("post",e,A)}patch(e,A){return this.methodRequest("patch",e,A)}put(e,A){return this.methodRequest("put",e,A)}delete(e,A){return this.methodRequest("delete",e,A)}methodRequest(e,A,r){return this.request(Promise.resolve(r).then(n=>({method:e,path:A,...n})))}request(e,A=null){return new xc(this,this.makeRequest(e,A,void 0))}async makeRequest(e,A,r){var p,m;const n=await e,s=n.maxRetries??this.maxRetries;A==null&&(A=s),await this.prepareOptions(n);const{req:a,url:i,timeout:o}=await this.buildRequest(n,{retryCount:s-A});await this.prepareRequest(a,{url:i,options:n});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=r===void 0?"":`, retryOf: ${r}`,c=Date.now();if(at(this).debug(`[${l}] sending request`,vn({retryOfRequestLogID:r,method:n.method,url:i,options:n,headers:a.headers})),(p=n.signal)!=null&&p.aborted)throw new Zt;const d=new AbortController,h=await this.fetchWithTimeout(i,a,o,d).catch(Jh),f=Date.now();if(h instanceof Error){const g=`retrying, ${A} attempts remaining`;if((m=n.signal)!=null&&m.aborted)throw new Zt;const B=Wh(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(A)return at(this).info(`[${l}] connection ${B?"timed out":"failed"} - ${g}`),at(this).debug(`[${l}] connection ${B?"timed out":"failed"} (${g})`,vn({retryOfRequestLogID:r,url:i,durationMs:f-c,message:h.message})),this.retryRequest(n,A,r??l);throw at(this).info(`[${l}] connection ${B?"timed out":"failed"} - error; no more retries left`),at(this).debug(`[${l}] connection ${B?"timed out":"failed"} (error; no more retries left)`,vn({retryOfRequestLogID:r,url:i,durationMs:f-c,message:h.message})),B?new Ic:new Fc({cause:h})}const w=[...h.headers.entries()].filter(([g])=>g==="x-request-id").map(([g,B])=>", "+g+": "+JSON.stringify(B)).join(""),y=`[${l}${u}${w}] ${a.method} ${i} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${f-c}ms`;if(!h.ok){const g=await this.shouldRetry(h);if(A&&g){const I=`retrying, ${A} attempts remaining`;return await VO(h.body),at(this).info(`${y} - ${I}`),at(this).debug(`[${l}] response error (${I})`,vn({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-c})),this.retryRequest(n,A,r??l,h.headers)}const B=g?"error; no more retries left":"error; not retryable";at(this).info(`${y} - ${B}`);const _=await h.text().catch(I=>Jh(I).message),v=NO(_),C=v?void 0:_;throw at(this).debug(`[${l}] response error (${B})`,vn({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,message:C,durationMs:Date.now()-c})),this.makeStatusError(h.status,v,C,h.headers)}return at(this).info(y),at(this).debug(`[${l}] response start`,vn({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-c})),{response:h,options:n,controller:d,requestLogID:l,retryOfRequestLogID:r,startTime:c}}getAPIList(e,A,r){return this.requestAPIList(A,{method:"get",path:e,...r})}requestAPIList(e,A){const r=this.makeRequest(A,null,void 0);return new ok(this,r,e)}async fetchWithTimeout(e,A,r,n){const{signal:s,method:a,...i}=A||{};s&&s.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r),l=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||typeof i.body=="object"&&i.body!==null&&Symbol.asyncIterator in i.body,u={signal:n.signal,...l?{duplex:"half"}:{},method:"GET",...i};a&&(u.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(o)}}async shouldRetry(e){const A=e.headers.get("x-should-retry");return A==="true"?!0:A==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,A,r,n){let s;const a=n==null?void 0:n.get("retry-after-ms");if(a){const o=parseFloat(a);Number.isNaN(o)||(s=o)}const i=n==null?void 0:n.get("retry-after");if(i&&!s){const o=parseFloat(i);Number.isNaN(o)?s=Date.parse(i)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(A,o)}return await io(s),this.makeRequest(e,A-1,r)}calculateDefaultRetryTimeoutMillis(e,A){const s=A-e,a=Math.min(.5*Math.pow(2,s),8),i=1-Math.random()*.25;return a*i*1e3}async buildRequest(e,{retryCount:A=0}={}){const r={...e},{method:n,path:s,query:a,defaultBaseURL:i}=r,o=this.buildURL(s,a,i);"timeout"in r&&HO("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:l,body:u}=this.buildBody({options:r}),c=await this.buildHeaders({options:e,method:n,bodyHeaders:l,retryCount:A});return{req:{method:n,headers:c,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:A,bodyHeaders:r,retryCount:n}){let s={};this.idempotencyHeader&&A!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=ee([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...KO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:A}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ee([A]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:qC(e)}:b(this,zl,"f").call(this,{body:e,headers:r})}};Xm=ue,zl=new WeakMap,ap=new WeakSet,uE=function(){return this.baseURL!=="https://api.openai.com/v1"};ue.OpenAI=Xm;ue.DEFAULT_TIMEOUT=6e5;ue.OpenAIError=te;ue.APIError=dt;ue.APIConnectionError=Fc;ue.APIConnectionTimeoutError=Ic;ue.APIUserAbortError=Zt;ue.NotFoundError=GC;ue.ConflictError=VC;ue.RateLimitError=WC;ue.BadRequestError=$C;ue.AuthenticationError=jC;ue.InternalServerError=JC;ue.PermissionDeniedError=KC;ue.UnprocessableEntityError=zC;ue.InvalidWebhookSignatureError=Ga;ue.toFile=hk;ue.Completions=Kb;ue.Chat=Hm;ue.Embeddings=Vb;ue.Files=Wb;ue.Images=eE;ue.Audio=lo;ue.Moderations=AE;ue.Models=tE;ue.FineTuning=la;ue.Graders=zm;ue.VectorStores=Rc;ue.Webhooks=lE;ue.Beta=uo;ue.Batches=Hb;ue.Uploads=Zm;ue.Responses=Jm;ue.Evals=jm;ue.Containers=Mm;function nB(t,e=Ym){t=t.trim();const A=t.indexOf("```");if(A===-1)return e(t);let r=t.substring(A+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const n=r.indexOf("```");let s=r;return n!==-1&&(s=r.substring(0,n)),e(s.trim())}function Ym(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const A=[];let r=!1,n=!1;for(let s of t){if(r)s==='"'&&!n?r=!1:s===`
`&&!n?s="\\n":s==="\\"?n=!n:n=!1;else if(s==='"')r=!0,n=!1;else if(s==="{")A.push("}");else if(s==="[")A.push("]");else if(s==="}"||s==="]")if(A&&A[A.length-1]===s)A.pop();else return null;e+=s}r&&(e+='"');for(let s=A.length-1;s>=0;s-=1)e+=A[s];try{return JSON.parse(e)}catch{return null}}var Mk=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const $k=tc(Mk);var cE={exports:{}};const jk=/[\p{Lu}]/u,Kk=/[\p{Ll}]/u,sB=/^[\p{Lu}](?![\p{Lu}])/gu,dE=/([\p{Alpha}\p{N}_]|$)/u,fE=/[_.\- ]+/,Gk=new RegExp("^"+fE.source),aB=new RegExp(fE.source+dE.source,"gu"),iB=new RegExp("\\d+"+dE.source,"gu"),Vk=(t,e,A)=>{let r=!1,n=!1,s=!1;for(let a=0;a<t.length;a++){const i=t[a];r&&jk.test(i)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,s=n,n=!0,a++):n&&s&&Kk.test(i)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=n,n=!1,r=!0):(r=e(i)===i&&A(i)!==i,s=n,n=A(i)===i&&e(i)!==i)}return t},zk=(t,e)=>(sB.lastIndex=0,t.replace(sB,A=>e(A))),Wk=(t,e)=>(aB.lastIndex=0,iB.lastIndex=0,t.replace(aB,(A,r)=>e(r)).replace(iB,A=>e(A))),hE=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const A=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):A(t):(t!==A(t)&&(t=Vk(t,A,r)),t=t.replace(Gk,""),e.preserveConsecutiveUppercase?t=zk(t,A):t=A(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),Wk(t,r))};cE.exports=hE;cE.exports.default=hE;function Jk(t,e){return(e==null?void 0:e[t])||$k(t)}function Zk(t,e,A){const r={};for(const n in t)Object.hasOwn(t,n)&&(r[e(n,A)]=t[n]);return r}function oB(t){return Array.isArray(t)?[...t]:{...t}}function Xk(t,e){const A=oB(t);for(const[r,n]of Object.entries(e)){const[s,...a]=r.split(".").reverse();let i=A;for(const o of a.reverse()){if(i[o]===void 0)break;i[o]=oB(i[o]),i=i[o]}i[s]!==void 0&&(i[s]={lc:1,type:"secret",id:[n]})}return A}function pE(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Kn{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,pE(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...A){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var n;return(n=this.lc_serializable_keys)==null?void 0:n.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Kn||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},A={},r=Object.keys(this.lc_kwargs).reduce((n,s)=>(n[s]=s in this?this[s]:this.lc_kwargs[s],n),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(A,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(A).forEach(n=>{let s=this,a=r;const[i,...o]=n.split(".").reverse();for(const l of o.reverse()){if(!(l in s)||s[l]===void 0)return;(!(l in a)||a[l]===void 0)&&(typeof s[l]=="object"&&s[l]!=null?a[l]={}:Array.isArray(s[l])&&(a[l]=[])),s=s[l],a=a[l]}i in s&&s[i]!==void 0&&(a[i]=a[i]||s[i])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Zk(Object.keys(A).length?Xk(r,A):r,Jk,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Gn(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Yk(t){return Gn(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function qk(t){return Gn(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function eR(t){if(Gn(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function lB(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const A=e[0].trim(),r=e[1].trim();if(A===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const n={};for(const s of t.split(";").slice(1)){const a=s.split("=");if(a.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const i=a[0].trim(),o=a[1].trim();if(i==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);n[i]=o}return{type:A,subtype:r,parameters:n}}function uB({dataUrl:t,asTypedArray:e=!1}){const A=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(A){r=A[1].toLowerCase();const n=e?Uint8Array.from(atob(A[2]),s=>s.charCodeAt(0)):A[2];return{mime_type:r,data:n}}}function mE(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function ua(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(A=>Gn(A))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Lc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(A=>Gn(A))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function tR(t,e){return t==="error"||e==="error"?"error":"success"}function AR(t,e){function A(r,n){if(typeof r!="object"||r===null||r===void 0)return r;if(n>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>A(a,n+1));const s={};for(const a of Object.keys(r))s[a]=A(r[a],n+1);return s}return JSON.stringify(A(t,0),null,2)}class ca extends Kn{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,A){typeof e=="string"&&(e={content:e,additional_kwargs:A,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const A=AR(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${A}`}}function Ut(t,e){const A={...t};for(const[r,n]of Object.entries(e))if(A[r]==null)A[r]=n;else{if(n==null)continue;if(typeof A[r]!=typeof n||Array.isArray(A[r])!==Array.isArray(n))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof A[r]=="string"){if(r==="type")continue;A[r]+=n}else if(typeof A[r]=="object"&&!Array.isArray(A[r]))A[r]=Ut(A[r],n);else if(Array.isArray(A[r]))A[r]=Lc(A[r],n);else{if(A[r]===n)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return A}function Lc(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const A=[...t];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const n=A.findIndex(s=>s.index===r.index);n!==-1?A[n]=Ut(A[n],r):A.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;A.push(r)}return A}}}function rR(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return Lc(t,e);if(typeof t=="object"&&typeof e=="object")return Ut(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class da extends ca{}function nR(t){return typeof t.role=="string"}function Pc(t){return typeof(t==null?void 0:t._getType)=="function"}function sR(t){return Pc(t)&&typeof t.concat=="function"}class gE extends ca{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,A,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:A}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status,this.metadata=e.metadata}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class qm extends da{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new qm({content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),artifact:rR(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:tR(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function aR(t){const e=[],A=[];for(const r of t)if(r.function){const n=r.function.name;try{const s=JSON.parse(r.function.arguments),a={name:n||"",args:s||{},id:r.id};e.push(a)}catch{A.push({name:n,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,A]}class Xs extends ca{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,A){var n;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:A??{}};else{r=e;const s=(n=r.additional_kwargs)==null?void 0:n.tool_calls,a=r.tool_calls;s!=null&&s.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(s!=null&&a===void 0){const[i,o]=aR(s);r.tool_calls=i??[],r.invalid_tool_calls=o??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function co(t){return t._getType()==="ai"}function cB(t){return t._getType()==="ai"}class ln extends da{constructor(e){var r,n;let A;if(typeof e=="string")A={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)A={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const s=e.tool_call_chunks.reduce((o,l)=>{const u=l.id||`fallback-${l.index||0}`;return o[u]=o[u]??[],o[u].push(l),o},{}),a=[],i=[];for(const[o,l]of Object.entries(s)){let u={};const c=((r=l[0])==null?void 0:r.name)??"",d=l.map(w=>w.args||"").join(""),h=d.length?d:"{}",f=((n=l[0])==null?void 0:n.id)||o;try{if(u=Ym(h),u===null||typeof u!="object"||Array.isArray(u))throw new Error("Malformed tool call chunk args.");a.push({name:c,args:u,id:f,type:"tool_call"})}catch{i.push({name:c,args:h,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}A={...e,tool_calls:a,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(A),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=A.tool_call_chunks??this.tool_call_chunks,this.tool_calls=A.tool_calls??this.tool_calls,this.invalid_tool_calls=A.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=A.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,n,s,a,i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,v,C,E,I,L,$,se,z,O,k,D,H,F,S,U,R,T,G,j,X,de;const A={content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const He=Lc(this.tool_call_chunks,e.tool_call_chunks);He!==void 0&&He.length>0&&(A.tool_call_chunks=He)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const He={...(((n=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:n.audio)!==void 0||((a=(s=e.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:a.audio)!==void 0)&&{audio:(((o=(i=this.usage_metadata)==null?void 0:i.input_token_details)==null?void 0:o.audio)??0)+(((u=(l=e.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:u.audio)??0)},...(((d=(c=this.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:d.cache_read)!==void 0||((f=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:f.cache_read)!==void 0)&&{cache_read:(((y=(w=this.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:y.cache_read)??0)+(((m=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:m.cache_read)??0)},...(((B=(g=this.usage_metadata)==null?void 0:g.input_token_details)==null?void 0:B.cache_creation)!==void 0||((v=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:v.cache_creation)!==void 0)&&{cache_creation:(((E=(C=this.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:E.cache_creation)??0)+(((L=(I=e.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:L.cache_creation)??0)}},gA={...(((se=($=this.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:se.audio)!==void 0||((O=(z=e.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:O.audio)!==void 0)&&{audio:(((D=(k=this.usage_metadata)==null?void 0:k.output_token_details)==null?void 0:D.audio)??0)+(((F=(H=e.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:F.audio)??0)},...(((U=(S=this.usage_metadata)==null?void 0:S.output_token_details)==null?void 0:U.reasoning)!==void 0||((T=(R=e.usage_metadata)==null?void 0:R.output_token_details)==null?void 0:T.reasoning)!==void 0)&&{reasoning:(((j=(G=this.usage_metadata)==null?void 0:G.output_token_details)==null?void 0:j.reasoning)??0)+(((de=(X=e.usage_metadata)==null?void 0:X.output_token_details)==null?void 0:de.reasoning)??0)}},Zn=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},gn=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},td={input_tokens:Zn.input_tokens+gn.input_tokens,output_tokens:Zn.output_tokens+gn.output_tokens,total_tokens:Zn.total_tokens+gn.total_tokens,...Object.keys(He).length>0&&{input_token_details:He},...Object.keys(gA).length>0&&{output_token_details:gA}};A.usage_metadata=td}return new ln(A)}}class fo extends ca{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return fo}constructor(e,A){typeof e=="string"&&(e={content:e,role:A}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Hc extends da{static lc_name(){return"ChatMessageChunk"}constructor(e,A){typeof e=="string"&&(e={content:e,role:A}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Hc({content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Nc extends da{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Nc({content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Ys extends ca{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,A){super(e,A)}}class Dc extends da{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,A){super(e,A)}concat(e){return new Dc({content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class ip extends ca{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,A){super(e,A)}}class zi extends da{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,A){super(e,A)}concat(e){return new zi({content:ua(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function wE(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function yE(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class iR extends Error{constructor(e,A){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=A}}function oR(t){return yE(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function lR(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function sf(t){let e,A;if(lR(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",A=t.kwargs}else{const{type:r,...n}=t;e=r,A=n}if(e==="human"||e==="user")return new Ys(A);if(e==="ai"||e==="assistant"){const{tool_calls:r,...n}=A;if(!Array.isArray(r))return new Xs(A);const s=r.map(oR);return new Xs({...n,tool_calls:s})}else{if(e==="system")return new ip(A);if(e==="developer")return new ip({...A,additional_kwargs:{...A.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in A)return new gE({...A,content:A.content,tool_call_id:A.tool_call_id,name:A.name});throw wE(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ei(t){if(typeof t=="string")return new Ys(t);if(Pc(t))return t;if(Array.isArray(t)){const[e,A]=t;return sf({type:e,content:A})}else if(nR(t)){const{role:e,...A}=t;return sf({...A,type:e})}else return sf(t)}function BE(t,e="Human",A="AI"){const r=[];for(const n of t){let s;if(n._getType()==="human")s=e;else if(n._getType()==="ai")s=A;else if(n._getType()==="system")s="System";else if(n._getType()==="function")s="Function";else if(n._getType()==="tool")s="Tool";else if(n._getType()==="generic")s=n.role;else throw new Error(`Got unsupported message type: ${n._getType()}`);const a=n.name?`${n.name}, `:"",i=typeof n.content=="string"?n.content:JSON.stringify(n.content,null,2);r.push(`${s}: ${a}${i}`)}return r.join(`
`)}function uR(t){var A;const e=t._getType();if(e==="human")return new Dc({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(A=r.tool_calls)==null?void 0:A.map(n=>({...n,type:"tool_call_chunk",index:void 0,args:JSON.stringify(n.args)}))}),new ln({...r})}else{if(e==="system")return new zi({...t});if(e==="function")return new Nc({...t});if(fo.isInstance(t))return new Hc({...t});throw new Error("Unknown message type.")}}var me;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function A(n){throw new Error}t.assertNever=A,t.arrayToEnum=n=>{const s={};for(const a of n)s[a]=a;return s},t.getValidEnumValues=n=>{const s=t.objectKeys(n).filter(i=>typeof n[n[i]]!="number"),a={};for(const i of s)a[i]=n[i];return t.objectValues(a)},t.objectValues=n=>t.objectKeys(n).map(function(s){return n[s]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const s=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&s.push(a);return s},t.find=(n,s)=>{for(const a of n)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function r(n,s=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(me||(me={}));var dB;(function(t){t.mergeShapes=(e,A)=>({...e,...A})})(dB||(dB={}));const Z=me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kr=t=>{switch(typeof t){case"undefined":return Z.undefined;case"string":return Z.string;case"number":return Number.isNaN(t)?Z.nan:Z.number;case"boolean":return Z.boolean;case"function":return Z.function;case"bigint":return Z.bigint;case"symbol":return Z.symbol;case"object":return Array.isArray(t)?Z.array:t===null?Z.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Z.promise:typeof Map<"u"&&t instanceof Map?Z.map:typeof Set<"u"&&t instanceof Set?Z.set:typeof Date<"u"&&t instanceof Date?Z.date:Z.object;default:return Z.unknown}},N=me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class yr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const A=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,A):this.__proto__=A,this.name="ZodError",this.issues=e}format(e){const A=e||function(s){return s.message},r={_errors:[]},n=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)r._errors.push(A(a));else{let i=r,o=0;for(;o<a.path.length;){const l=a.path[o];o===a.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(A(a))):i[l]=i[l]||{_errors:[]},i=i[l],o++}}};return n(this),r}static assert(e){if(!(e instanceof yr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=A=>A.message){const A={},r=[];for(const n of this.issues)if(n.path.length>0){const s=n.path[0];A[s]=A[s]||[],A[s].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:A}}get formErrors(){return this.flatten()}}yr.create=t=>new yr(t);const op=(t,e)=>{let A;switch(t.code){case N.invalid_type:t.received===Z.undefined?A="Required":A=`Expected ${t.expected}, received ${t.received}`;break;case N.invalid_literal:A=`Invalid literal value, expected ${JSON.stringify(t.expected,me.jsonStringifyReplacer)}`;break;case N.unrecognized_keys:A=`Unrecognized key(s) in object: ${me.joinValues(t.keys,", ")}`;break;case N.invalid_union:A="Invalid input";break;case N.invalid_union_discriminator:A=`Invalid discriminator value. Expected ${me.joinValues(t.options)}`;break;case N.invalid_enum_value:A=`Invalid enum value. Expected ${me.joinValues(t.options)}, received '${t.received}'`;break;case N.invalid_arguments:A="Invalid function arguments";break;case N.invalid_return_type:A="Invalid function return type";break;case N.invalid_date:A="Invalid date";break;case N.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(A=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(A=`${A} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?A=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?A=`Invalid input: must end with "${t.validation.endsWith}"`:me.assertNever(t.validation):t.validation!=="regex"?A=`Invalid ${t.validation}`:A="Invalid";break;case N.too_small:t.type==="array"?A=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?A=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?A=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?A=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?A=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:A="Invalid input";break;case N.too_big:t.type==="array"?A=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?A=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?A=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?A=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?A=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:A="Invalid input";break;case N.custom:A="Invalid input";break;case N.invalid_intersection_types:A="Intersection results could not be merged";break;case N.not_multiple_of:A=`Number must be a multiple of ${t.multipleOf}`;break;case N.not_finite:A="Number must be finite";break;default:A=e.defaultError,me.assertNever(t)}return{message:A}};let cR=op;function dR(){return cR}const fR=t=>{const{data:e,path:A,errorMaps:r,issueData:n}=t,s=[...A,...n.path||[]],a={...n,path:s};if(n.message!==void 0)return{...n,path:s,message:n.message};let i="";const o=r.filter(l=>!!l).slice().reverse();for(const l of o)i=l(a,{data:e,defaultError:i}).message;return{...n,path:s,message:i}};function V(t,e){const A=dR(),r=fR({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,A,A===op?void 0:op].filter(n=>!!n)});t.common.issues.push(r)}class qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,A){const r=[];for(const n of A){if(n.status==="aborted")return ne;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,A){const r=[];for(const n of A){const s=await n.key,a=await n.value;r.push({key:s,value:a})}return qt.mergeObjectSync(e,r)}static mergeObjectSync(e,A){const r={};for(const n of A){const{key:s,value:a}=n;if(s.status==="aborted"||a.status==="aborted")return ne;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const ne=Object.freeze({status:"aborted"}),ti=t=>({status:"dirty",value:t}),mA=t=>({status:"valid",value:t}),fB=t=>t.status==="aborted",hB=t=>t.status==="dirty",qs=t=>t.status==="valid",Pu=t=>typeof Promise<"u"&&t instanceof Promise;var Y;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Y||(Y={}));class un{constructor(e,A,r,n){this._cachedPath=[],this.parent=e,this.data=A,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pB=(t,e)=>{if(qs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const A=new yr(t.common.issues);return this._error=A,this._error}}};function oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:A,required_error:r,description:n}=t;if(e&&(A||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,i)=>{const{message:o}=t;return a.code==="invalid_enum_value"?{message:o??i.defaultError}:typeof i.data>"u"?{message:o??r??i.defaultError}:a.code!=="invalid_type"?{message:i.defaultError}:{message:o??A??i.defaultError}},description:n}}class pe{get description(){return this._def.description}_getType(e){return kr(e.data)}_getOrReturnCtx(e,A){return A||{common:e.parent.common,data:e.data,parsedType:kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const A=this._parse(e);if(Pu(A))throw new Error("Synchronous parse encountered promise.");return A}_parseAsync(e){const A=this._parse(e);return Promise.resolve(A)}parse(e,A){const r=this.safeParse(e,A);if(r.success)return r.data;throw r.error}safeParse(e,A){const r={common:{issues:[],async:(A==null?void 0:A.async)??!1,contextualErrorMap:A==null?void 0:A.errorMap},path:(A==null?void 0:A.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)},n=this._parseSync({data:e,path:r.path,parent:r});return pB(r,n)}"~validate"(e){var r,n;const A={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:A});return qs(s)?{value:s.value}:{issues:A.common.issues}}catch(s){(n=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),A.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:A}).then(s=>qs(s)?{value:s.value}:{issues:A.common.issues})}async parseAsync(e,A){const r=await this.safeParseAsync(e,A);if(r.success)return r.data;throw r.error}async safeParseAsync(e,A){const r={common:{issues:[],contextualErrorMap:A==null?void 0:A.errorMap,async:!0},path:(A==null?void 0:A.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)},n=this._parse({data:e,path:r.path,parent:r}),s=await(Pu(n)?n:Promise.resolve(n));return pB(r,s)}refine(e,A){const r=n=>typeof A=="string"||typeof A>"u"?{message:A}:typeof A=="function"?A(n):A;return this._refinement((n,s)=>{const a=e(n),i=()=>s.addIssue({code:N.custom,...r(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(e,A){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof A=="function"?A(r,n):A),!1))}_refinement(e){return new ta({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:A=>this["~validate"](A)}}optional(){return rn.create(this,this._def)}nullable(){return Aa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return XA.create(this)}promise(){return Mu.create(this,this._def)}or(e){return Nu.create([this,e],this._def)}and(e){return Du.create(this,e,this._def)}transform(e){return new ta({...oe(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const A=typeof e=="function"?e:()=>e;return new cp({...oe(this._def),innerType:this,defaultValue:A,typeName:x.ZodDefault})}brand(){return new LR({typeName:x.ZodBranded,type:this,...oe(this._def)})}catch(e){const A=typeof e=="function"?e:()=>e;return new dp({...oe(this._def),innerType:this,catchValue:A,typeName:x.ZodCatch})}describe(e){const A=this.constructor;return new A({...this._def,description:e})}pipe(e){return eg.create(this,e)}readonly(){return fp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hR=/^c[^\s-]{8,}$/i,pR=/^[0-9a-z]+$/,mR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wR=/^[a-z0-9_-]{21}$/i,yR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_R=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let af;const CR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ER=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,FR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_E="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",IR=new RegExp(`^${_E}$`);function vE(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const A=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${A}`}function SR(t){return new RegExp(`^${vE(t)}$`)}function xR(t){let e=`${_E}T${vE(t)}`;const A=[];return A.push(t.local?"Z?":"Z"),t.offset&&A.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${A.join("|")})`,new RegExp(`^${e}$`)}function TR(t,e){return!!((e==="v4"||!e)&&CR.test(t)||(e==="v6"||!e)&&ER.test(t))}function OR(t,e){if(!yR.test(t))return!1;try{const[A]=t.split(".");if(!A)return!1;const r=A.replace(/-/g,"+").replace(/_/g,"/").padEnd(A.length+(4-A.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function kR(t,e){return!!((e==="v4"||!e)&&bR.test(t)||(e==="v6"||!e)&&QR.test(t))}class Kr extends pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Z.string){const s=this._getOrReturnCtx(e);return V(s,{code:N.invalid_type,expected:Z.string,received:s.parsedType}),ne}const r=new qt;let n;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:N.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:N.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,i=e.data.length<s.value;(a||i)&&(n=this._getOrReturnCtx(e,n),a?V(n,{code:N.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&V(n,{code:N.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")_R.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"email",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")af||(af=new RegExp(vR,"u")),af.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"emoji",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")gR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"uuid",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")wR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"nanoid",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")hR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cuid",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")pR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cuid2",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")mR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"ulid",code:N.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),V(n,{validation:"url",code:N.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"regex",code:N.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?xR(s).test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?IR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?SR(s).test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:N.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?BR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"duration",code:N.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?TR(e.data,s.version)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"ip",code:N.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?OR(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"jwt",code:N.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?kR(e.data,s.version)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cidr",code:N.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?UR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"base64",code:N.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?FR.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"base64url",code:N.invalid_string,message:s.message}),r.dirty()):me.assertNever(s);return{status:r.value,value:e.data}}_regex(e,A,r){return this.refinement(n=>e.test(n),{validation:A,code:N.invalid_string,...Y.errToObj(r)})}_addCheck(e){return new Kr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Y.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Y.errToObj(e)})}regex(e,A){return this._addCheck({kind:"regex",regex:e,...Y.errToObj(A)})}includes(e,A){return this._addCheck({kind:"includes",value:e,position:A==null?void 0:A.position,...Y.errToObj(A==null?void 0:A.message)})}startsWith(e,A){return this._addCheck({kind:"startsWith",value:e,...Y.errToObj(A)})}endsWith(e,A){return this._addCheck({kind:"endsWith",value:e,...Y.errToObj(A)})}min(e,A){return this._addCheck({kind:"min",value:e,...Y.errToObj(A)})}max(e,A){return this._addCheck({kind:"max",value:e,...Y.errToObj(A)})}length(e,A){return this._addCheck({kind:"length",value:e,...Y.errToObj(A)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new Kr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Kr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Kr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxLength(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}}Kr.create=t=>new Kr({checks:[],typeName:x.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...oe(t)});function RR(t,e){const A=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=A>r?A:r,s=Number.parseInt(t.toFixed(n).replace(".","")),a=Number.parseInt(e.toFixed(n).replace(".",""));return s%a/10**n}class Wi extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Z.number){const s=this._getOrReturnCtx(e);return V(s,{code:N.invalid_type,expected:Z.number,received:s.parsedType}),ne}let r;const n=new qt;for(const s of this._def.checks)s.kind==="int"?me.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:N.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?RR(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:N.not_finite,message:s.message}),n.dirty()):me.assertNever(s);return{status:n.value,value:e.data}}gte(e,A){return this.setLimit("min",e,!0,Y.toString(A))}gt(e,A){return this.setLimit("min",e,!1,Y.toString(A))}lte(e,A){return this.setLimit("max",e,!0,Y.toString(A))}lt(e,A){return this.setLimit("max",e,!1,Y.toString(A))}setLimit(e,A,r,n){return new Wi({...this._def,checks:[...this._def.checks,{kind:e,value:A,inclusive:r,message:Y.toString(n)}]})}_addCheck(e){return new Wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,A){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(A)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxValue(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&me.isInteger(e.value))}get isFinite(){let e=null,A=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(A===null||r.value>A)&&(A=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(A)&&Number.isFinite(e)}}Wi.create=t=>new Wi({checks:[],typeName:x.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class Ji extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Z.bigint)return this._getInvalidInput(e);let r;const n=new qt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),V(r,{code:N.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):me.assertNever(s);return{status:n.value,value:e.data}}_getInvalidInput(e){const A=this._getOrReturnCtx(e);return V(A,{code:N.invalid_type,expected:Z.bigint,received:A.parsedType}),ne}gte(e,A){return this.setLimit("min",e,!0,Y.toString(A))}gt(e,A){return this.setLimit("min",e,!1,Y.toString(A))}lte(e,A){return this.setLimit("max",e,!0,Y.toString(A))}lt(e,A){return this.setLimit("max",e,!1,Y.toString(A))}setLimit(e,A,r,n){return new Ji({...this._def,checks:[...this._def.checks,{kind:e,value:A,inclusive:r,message:Y.toString(n)}]})}_addCheck(e){return new Ji({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,A){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(A)})}get minValue(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxValue(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}}Ji.create=t=>new Ji({checks:[],typeName:x.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...oe(t)});class mB extends pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Z.boolean){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.boolean,received:r.parsedType}),ne}return mA(e.data)}}mB.create=t=>new mB({typeName:x.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class Hu extends pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Z.date){const s=this._getOrReturnCtx(e);return V(s,{code:N.invalid_type,expected:Z.date,received:s.parsedType}),ne}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return V(s,{code:N.invalid_date}),ne}const r=new qt;let n;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:N.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:N.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):me.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hu({...this._def,checks:[...this._def.checks,e]})}min(e,A){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(A)})}max(e,A){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(A)})}get minDate(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e!=null?new Date(e):null}}Hu.create=t=>new Hu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:x.ZodDate,...oe(t)});class gB extends pe{_parse(e){if(this._getType(e)!==Z.symbol){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.symbol,received:r.parsedType}),ne}return mA(e.data)}}gB.create=t=>new gB({typeName:x.ZodSymbol,...oe(t)});class wB extends pe{_parse(e){if(this._getType(e)!==Z.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.undefined,received:r.parsedType}),ne}return mA(e.data)}}wB.create=t=>new wB({typeName:x.ZodUndefined,...oe(t)});class yB extends pe{_parse(e){if(this._getType(e)!==Z.null){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.null,received:r.parsedType}),ne}return mA(e.data)}}yB.create=t=>new yB({typeName:x.ZodNull,...oe(t)});class lp extends pe{constructor(){super(...arguments),this._any=!0}_parse(e){return mA(e.data)}}lp.create=t=>new lp({typeName:x.ZodAny,...oe(t)});class BB extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mA(e.data)}}BB.create=t=>new BB({typeName:x.ZodUnknown,...oe(t)});class cn extends pe{_parse(e){const A=this._getOrReturnCtx(e);return V(A,{code:N.invalid_type,expected:Z.never,received:A.parsedType}),ne}}cn.create=t=>new cn({typeName:x.ZodNever,...oe(t)});class _B extends pe{_parse(e){if(this._getType(e)!==Z.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.void,received:r.parsedType}),ne}return mA(e.data)}}_B.create=t=>new _B({typeName:x.ZodVoid,...oe(t)});class XA extends pe{_parse(e){const{ctx:A,status:r}=this._processInputParams(e),n=this._def;if(A.parsedType!==Z.array)return V(A,{code:N.invalid_type,expected:Z.array,received:A.parsedType}),ne;if(n.exactLength!==null){const a=A.data.length>n.exactLength.value,i=A.data.length<n.exactLength.value;(a||i)&&(V(A,{code:a?N.too_big:N.too_small,minimum:i?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&A.data.length<n.minLength.value&&(V(A,{code:N.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&A.data.length>n.maxLength.value&&(V(A,{code:N.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),A.common.async)return Promise.all([...A.data].map((a,i)=>n.type._parseAsync(new un(A,a,A.path,i)))).then(a=>qt.mergeArray(r,a));const s=[...A.data].map((a,i)=>n.type._parseSync(new un(A,a,A.path,i)));return qt.mergeArray(r,s)}get element(){return this._def.type}min(e,A){return new XA({...this._def,minLength:{value:e,message:Y.toString(A)}})}max(e,A){return new XA({...this._def,maxLength:{value:e,message:Y.toString(A)}})}length(e,A){return new XA({...this._def,exactLength:{value:e,message:Y.toString(A)}})}nonempty(e){return this.min(1,e)}}XA.create=(t,e)=>new XA({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...oe(e)});function ys(t){if(t instanceof Ne){const e={};for(const A in t.shape){const r=t.shape[A];e[A]=rn.create(ys(r))}return new Ne({...t._def,shape:()=>e})}else return t instanceof XA?new XA({...t._def,type:ys(t.element)}):t instanceof rn?rn.create(ys(t.unwrap())):t instanceof Aa?Aa.create(ys(t.unwrap())):t instanceof Vn?Vn.create(t.items.map(e=>ys(e))):t}class Ne extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),A=me.objectKeys(e);return this._cached={shape:e,keys:A},this._cached}_parse(e){if(this._getType(e)!==Z.object){const l=this._getOrReturnCtx(e);return V(l,{code:N.invalid_type,expected:Z.object,received:l.parsedType}),ne}const{status:r,ctx:n}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof cn&&this._def.unknownKeys==="strip"))for(const l in n.data)a.includes(l)||i.push(l);const o=[];for(const l of a){const u=s[l],c=n.data[l];o.push({key:{status:"valid",value:l},value:u._parse(new un(n,c,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof cn){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of i)o.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")i.length>0&&(V(n,{code:N.unrecognized_keys,keys:i}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of i){const c=n.data[u];o.push({key:{status:"valid",value:u},value:l._parse(new un(n,c,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of o){const c=await u.key,d=await u.value;l.push({key:c,value:d,alwaysSet:u.alwaysSet})}return l}).then(l=>qt.mergeObjectSync(r,l)):qt.mergeObjectSync(r,o)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new Ne({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(A,r)=>{var s,a;const n=((a=(s=this._def).errorMap)==null?void 0:a.call(s,A,r).message)??r.defaultError;return A.code==="unrecognized_keys"?{message:Y.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new Ne({...this._def,unknownKeys:"strip"})}passthrough(){return new Ne({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ne({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ne({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,A){return this.augment({[e]:A})}catchall(e){return new Ne({...this._def,catchall:e})}pick(e){const A={};for(const r of me.objectKeys(e))e[r]&&this.shape[r]&&(A[r]=this.shape[r]);return new Ne({...this._def,shape:()=>A})}omit(e){const A={};for(const r of me.objectKeys(this.shape))e[r]||(A[r]=this.shape[r]);return new Ne({...this._def,shape:()=>A})}deepPartial(){return ys(this)}partial(e){const A={};for(const r of me.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?A[r]=n:A[r]=n.optional()}return new Ne({...this._def,shape:()=>A})}required(e){const A={};for(const r of me.objectKeys(this.shape))if(e&&!e[r])A[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof rn;)s=s._def.innerType;A[r]=s}return new Ne({...this._def,shape:()=>A})}keyof(){return CE(me.objectKeys(this.shape))}}Ne.create=(t,e)=>new Ne({shape:()=>t,unknownKeys:"strip",catchall:cn.create(),typeName:x.ZodObject,...oe(e)});Ne.strictCreate=(t,e)=>new Ne({shape:()=>t,unknownKeys:"strict",catchall:cn.create(),typeName:x.ZodObject,...oe(e)});Ne.lazycreate=(t,e)=>new Ne({shape:t,unknownKeys:"strip",catchall:cn.create(),typeName:x.ZodObject,...oe(e)});class Nu extends pe{_parse(e){const{ctx:A}=this._processInputParams(e),r=this._def.options;function n(s){for(const i of s)if(i.result.status==="valid")return i.result;for(const i of s)if(i.result.status==="dirty")return A.common.issues.push(...i.ctx.common.issues),i.result;const a=s.map(i=>new yr(i.ctx.common.issues));return V(A,{code:N.invalid_union,unionErrors:a}),ne}if(A.common.async)return Promise.all(r.map(async s=>{const a={...A,common:{...A.common,issues:[]},parent:null};return{result:await s._parseAsync({data:A.data,path:A.path,parent:a}),ctx:a}})).then(n);{let s;const a=[];for(const o of r){const l={...A,common:{...A.common,issues:[]},parent:null},u=o._parseSync({data:A.data,path:A.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(s)return A.common.issues.push(...s.ctx.common.issues),s.result;const i=a.map(o=>new yr(o));return V(A,{code:N.invalid_union,unionErrors:i}),ne}}get options(){return this._def.options}}Nu.create=(t,e)=>new Nu({options:t,typeName:x.ZodUnion,...oe(e)});function up(t,e){const A=kr(t),r=kr(e);if(t===e)return{valid:!0,data:t};if(A===Z.object&&r===Z.object){const n=me.objectKeys(e),s=me.objectKeys(t).filter(i=>n.indexOf(i)!==-1),a={...t,...e};for(const i of s){const o=up(t[i],e[i]);if(!o.valid)return{valid:!1};a[i]=o.data}return{valid:!0,data:a}}else if(A===Z.array&&r===Z.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let s=0;s<t.length;s++){const a=t[s],i=e[s],o=up(a,i);if(!o.valid)return{valid:!1};n.push(o.data)}return{valid:!0,data:n}}else return A===Z.date&&r===Z.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Du extends pe{_parse(e){const{status:A,ctx:r}=this._processInputParams(e),n=(s,a)=>{if(fB(s)||fB(a))return ne;const i=up(s.value,a.value);return i.valid?((hB(s)||hB(a))&&A.dirty(),{status:A.value,value:i.data}):(V(r,{code:N.invalid_intersection_types}),ne)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>n(s,a)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Du.create=(t,e,A)=>new Du({left:t,right:e,typeName:x.ZodIntersection,...oe(A)});class Vn extends pe{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.array)return V(r,{code:N.invalid_type,expected:Z.array,received:r.parsedType}),ne;if(r.data.length<this._def.items.length)return V(r,{code:N.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&r.data.length>this._def.items.length&&(V(r,{code:N.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A.dirty());const s=[...r.data].map((a,i)=>{const o=this._def.items[i]||this._def.rest;return o?o._parse(new un(r,a,r.path,i)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>qt.mergeArray(A,a)):qt.mergeArray(A,s)}get items(){return this._def.items}rest(e){return new Vn({...this._def,rest:e})}}Vn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vn({items:t,typeName:x.ZodTuple,rest:null,...oe(e)})};class vB extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.map)return V(r,{code:N.invalid_type,expected:Z.map,received:r.parsedType}),ne;const n=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([i,o],l)=>({key:n._parse(new un(r,i,r.path,[l,"key"])),value:s._parse(new un(r,o,r.path,[l,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const o of a){const l=await o.key,u=await o.value;if(l.status==="aborted"||u.status==="aborted")return ne;(l.status==="dirty"||u.status==="dirty")&&A.dirty(),i.set(l.value,u.value)}return{status:A.value,value:i}})}else{const i=new Map;for(const o of a){const l=o.key,u=o.value;if(l.status==="aborted"||u.status==="aborted")return ne;(l.status==="dirty"||u.status==="dirty")&&A.dirty(),i.set(l.value,u.value)}return{status:A.value,value:i}}}}vB.create=(t,e,A)=>new vB({valueType:e,keyType:t,typeName:x.ZodMap,...oe(A)});class Zi extends pe{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.set)return V(r,{code:N.invalid_type,expected:Z.set,received:r.parsedType}),ne;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(V(r,{code:N.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),A.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(V(r,{code:N.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),A.dirty());const s=this._def.valueType;function a(o){const l=new Set;for(const u of o){if(u.status==="aborted")return ne;u.status==="dirty"&&A.dirty(),l.add(u.value)}return{status:A.value,value:l}}const i=[...r.data.values()].map((o,l)=>s._parse(new un(r,o,r.path,l)));return r.common.async?Promise.all(i).then(o=>a(o)):a(i)}min(e,A){return new Zi({...this._def,minSize:{value:e,message:Y.toString(A)}})}max(e,A){return new Zi({...this._def,maxSize:{value:e,message:Y.toString(A)}})}size(e,A){return this.min(e,A).max(e,A)}nonempty(e){return this.min(1,e)}}Zi.create=(t,e)=>new Zi({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...oe(e)});class CB extends pe{get schema(){return this._def.getter()}_parse(e){const{ctx:A}=this._processInputParams(e);return this._def.getter()._parse({data:A.data,path:A.path,parent:A})}}CB.create=(t,e)=>new CB({getter:t,typeName:x.ZodLazy,...oe(e)});class bB extends pe{_parse(e){if(e.data!==this._def.value){const A=this._getOrReturnCtx(e);return V(A,{received:A.data,code:N.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}bB.create=(t,e)=>new bB({value:t,typeName:x.ZodLiteral,...oe(e)});function CE(t,e){return new ea({values:t,typeName:x.ZodEnum,...oe(e)})}class ea extends pe{_parse(e){if(typeof e.data!="string"){const A=this._getOrReturnCtx(e),r=this._def.values;return V(A,{expected:me.joinValues(r),received:A.parsedType,code:N.invalid_type}),ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const A=this._getOrReturnCtx(e),r=this._def.values;return V(A,{received:A.data,code:N.invalid_enum_value,options:r}),ne}return mA(e.data)}get options(){return this._def.values}get enum(){const e={};for(const A of this._def.values)e[A]=A;return e}get Values(){const e={};for(const A of this._def.values)e[A]=A;return e}get Enum(){const e={};for(const A of this._def.values)e[A]=A;return e}extract(e,A=this._def){return ea.create(e,{...this._def,...A})}exclude(e,A=this._def){return ea.create(this.options.filter(r=>!e.includes(r)),{...this._def,...A})}}ea.create=CE;class EB extends pe{_parse(e){const A=me.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Z.string&&r.parsedType!==Z.number){const n=me.objectValues(A);return V(r,{expected:me.joinValues(n),received:r.parsedType,code:N.invalid_type}),ne}if(this._cache||(this._cache=new Set(me.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=me.objectValues(A);return V(r,{received:r.data,code:N.invalid_enum_value,options:n}),ne}return mA(e.data)}get enum(){return this._def.values}}EB.create=(t,e)=>new EB({values:t,typeName:x.ZodNativeEnum,...oe(e)});class Mu extends pe{unwrap(){return this._def.type}_parse(e){const{ctx:A}=this._processInputParams(e);if(A.parsedType!==Z.promise&&A.common.async===!1)return V(A,{code:N.invalid_type,expected:Z.promise,received:A.parsedType}),ne;const r=A.parsedType===Z.promise?A.data:Promise.resolve(A.data);return mA(r.then(n=>this._def.type.parseAsync(n,{path:A.path,errorMap:A.common.contextualErrorMap})))}}Mu.create=(t,e)=>new Mu({type:t,typeName:x.ZodPromise,...oe(e)});class ta extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:A,ctx:r}=this._processInputParams(e),n=this._def.effect||null,s={addIssue:a=>{V(r,a),a.fatal?A.abort():A.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){const a=n.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async i=>{if(A.value==="aborted")return ne;const o=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return o.status==="aborted"?ne:o.status==="dirty"||A.value==="dirty"?ti(o.value):o});{if(A.value==="aborted")return ne;const i=this._def.schema._parseSync({data:a,path:r.path,parent:r});return i.status==="aborted"?ne:i.status==="dirty"||A.value==="dirty"?ti(i.value):i}}if(n.type==="refinement"){const a=i=>{const o=n.refinement(i,s);if(r.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ne:(i.status==="dirty"&&A.dirty(),a(i.value),{status:A.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?ne:(i.status==="dirty"&&A.dirty(),a(i.value).then(()=>({status:A.value,value:i.value}))))}if(n.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qs(a))return ne;const i=n.transform(a.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:A.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>qs(a)?Promise.resolve(n.transform(a.value,s)).then(i=>({status:A.value,value:i})):ne);me.assertNever(n)}}ta.create=(t,e,A)=>new ta({schema:t,typeName:x.ZodEffects,effect:e,...oe(A)});ta.createWithPreprocess=(t,e,A)=>new ta({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...oe(A)});class rn extends pe{_parse(e){return this._getType(e)===Z.undefined?mA(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rn.create=(t,e)=>new rn({innerType:t,typeName:x.ZodOptional,...oe(e)});class Aa extends pe{_parse(e){return this._getType(e)===Z.null?mA(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Aa.create=(t,e)=>new Aa({innerType:t,typeName:x.ZodNullable,...oe(e)});class cp extends pe{_parse(e){const{ctx:A}=this._processInputParams(e);let r=A.data;return A.parsedType===Z.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:A.path,parent:A})}removeDefault(){return this._def.innerType}}cp.create=(t,e)=>new cp({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...oe(e)});class dp extends pe{_parse(e){const{ctx:A}=this._processInputParams(e),r={...A,common:{...A.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Pu(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new yr(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new yr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}dp.create=(t,e)=>new dp({innerType:t,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...oe(e)});class QB extends pe{_parse(e){if(this._getType(e)!==Z.nan){const r=this._getOrReturnCtx(e);return V(r,{code:N.invalid_type,expected:Z.nan,received:r.parsedType}),ne}return{status:"valid",value:e.data}}}QB.create=t=>new QB({typeName:x.ZodNaN,...oe(t)});class LR extends pe{_parse(e){const{ctx:A}=this._processInputParams(e),r=A.data;return this._def.type._parse({data:r,path:A.path,parent:A})}unwrap(){return this._def.type}}class eg extends pe{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ne:s.status==="dirty"?(A.dirty(),ti(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?ne:n.status==="dirty"?(A.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,A){return new eg({in:e,out:A,typeName:x.ZodPipeline})}}class fp extends pe{_parse(e){const A=this._def.innerType._parse(e),r=n=>(qs(n)&&(n.value=Object.freeze(n.value)),n);return Pu(A)?A.then(n=>r(n)):r(A)}unwrap(){return this._def.innerType}}fp.create=(t,e)=>new fp({innerType:t,typeName:x.ZodReadonly,...oe(e)});var x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(x||(x={}));const bE=Kr.create,UB=lp.create;cn.create;XA.create;const EE=Ne.create;Nu.create;Du.create;Vn.create;ea.create;Mu.create;rn.create;Aa.create;var Mc={exports:{}},QE={};function pA(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var PR=pA;pA.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};pA.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};pA.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var A=this._timeouts.shift();if(A===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),A=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},A),this._options.unref&&this._timer.unref(),!0};pA.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var A=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){A._operationTimeoutCb()},A._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};pA.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};pA.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};pA.prototype.start=pA.prototype.try;pA.prototype.errors=function(){return this._errors};pA.prototype.attempts=function(){return this._attempts};pA.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,A=0,r=0;r<this._errors.length;r++){var n=this._errors[r],s=n.message,a=(t[s]||0)+1;t[s]=a,a>=A&&(e=n,A=a)}return e};(function(t){var e=PR;t.operation=function(A){var r=t.timeouts(A);return new e(r,{forever:A&&(A.forever||A.retries===1/0),unref:A&&A.unref,maxRetryTime:A&&A.maxRetryTime})},t.timeouts=function(A){if(A instanceof Array)return[].concat(A);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in A)r[n]=A[n];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return A&&A.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(i,o){return i-o}),s},t.createTimeout=function(A,r){var n=r.randomize?Math.random()+1:1,s=Math.round(n*Math.max(r.minTimeout,1)*Math.pow(r.factor,A));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(A,r,n){if(r instanceof Array&&(n=r,r=null),!n){n=[];for(var s in A)typeof A[s]=="function"&&n.push(s)}for(var a=0;a<n.length;a++){var i=n[a],o=A[i];A[i]=(function(u){var c=t.operation(r),d=Array.prototype.slice.call(arguments,1),h=d.pop();d.push(function(f){c.retry(f)||(f&&(arguments[0]=c.mainError()),h.apply(this,arguments))}),c.attempt(function(){u.apply(A,d)})}).bind(A,o),A[i].options=r}}})(QE);var HR=QE;const NR=HR,DR=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class UE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const MR=(t,e,A)=>{const r=A.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},$R=t=>DR.includes(t),FE=(t,e)=>new Promise((A,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const n=NR.operation(e);n.attempt(async s=>{try{A(await t(s))}catch(a){if(!(a instanceof Error)){r(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof UE)n.stop(),r(a.originalError);else if(a instanceof TypeError&&!$R(a.message))n.stop(),r(a);else{MR(a,s,e);try{await e.onFailedAttempt(a)}catch(i){r(i);return}n.retry(a)||r(n.mainError())}}})});Mc.exports=FE;Mc.exports.default=FE;Mc.exports.AbortError=UE;var jR=Mc.exports;const $u=tc(jR),KR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Bi(t){return typeof t=="string"&&KR.test(t)}function GR(t){if(!Bi(t))throw TypeError("Invalid UUID");var e,A=new Uint8Array(16);return A[0]=(e=parseInt(t.slice(0,8),16))>>>24,A[1]=e>>>16&255,A[2]=e>>>8&255,A[3]=e&255,A[4]=(e=parseInt(t.slice(9,13),16))>>>8,A[5]=e&255,A[6]=(e=parseInt(t.slice(14,18),16))>>>8,A[7]=e&255,A[8]=(e=parseInt(t.slice(19,23),16))>>>8,A[9]=e&255,A[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,A[11]=e/4294967296&255,A[12]=e>>>24&255,A[13]=e>>>16&255,A[14]=e>>>8&255,A[15]=e&255,A}var nt=[];for(var of=0;of<256;++of)nt.push((of+256).toString(16).slice(1));function IE(t,e=0){return(nt[t[e+0]]+nt[t[e+1]]+nt[t[e+2]]+nt[t[e+3]]+"-"+nt[t[e+4]]+nt[t[e+5]]+"-"+nt[t[e+6]]+nt[t[e+7]]+"-"+nt[t[e+8]]+nt[t[e+9]]+"-"+nt[t[e+10]]+nt[t[e+11]]+nt[t[e+12]]+nt[t[e+13]]+nt[t[e+14]]+nt[t[e+15]]).toLowerCase()}var cl,VR=new Uint8Array(16);function zR(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(VR)}function WR(t){t=unescape(encodeURIComponent(t));for(var e=[],A=0;A<t.length;++A)e.push(t.charCodeAt(A));return e}var JR="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ZR="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function XR(t,e,A){function r(n,s,a,i){var o;if(typeof n=="string"&&(n=WR(n)),typeof s=="string"&&(s=GR(s)),((o=s)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+n.length);if(l.set(s),l.set(n,s.length),l=A(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){i=i||0;for(var u=0;u<16;++u)a[i+u]=l[u];return a}return IE(l)}try{r.name=t}catch{}return r.DNS=JR,r.URL=ZR,r}var YR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const FB={randomUUID:YR};function Et(t,e,A){if(FB.randomUUID&&!t)return FB.randomUUID();t=t||{};var r=t.random||(t.rng||zR)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,IE(r)}function qR(t,e,A,r){switch(t){case 0:return e&A^~e&r;case 1:return e^A^r;case 2:return e&A^e&r^A&r;case 3:return e^A^r}}function lf(t,e){return t<<e|t>>>32-e}function eL(t){var e=[1518500249,1859775393,2400959708,3395469782],A=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var n=0;n<r.length;++n)t.push(r.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,a=Math.ceil(s/16),i=new Array(a),o=0;o<a;++o){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[o*64+u*4]<<24|t[o*64+u*4+1]<<16|t[o*64+u*4+2]<<8|t[o*64+u*4+3];i[o]=l}i[a-1][14]=(t.length-1)*8/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=(t.length-1)*8&4294967295;for(var c=0;c<a;++c){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=i[c][h];for(var f=16;f<80;++f)d[f]=lf(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var w=A[0],y=A[1],p=A[2],m=A[3],g=A[4],B=0;B<80;++B){var _=Math.floor(B/20),v=lf(w,5)+qR(_,y,p,m)+g+e[_]+d[B]>>>0;g=m,m=p,p=lf(y,30)>>>0,y=w,w=v}A[0]=A[0]+w>>>0,A[1]=A[1]+y>>>0,A[2]=A[2]+p>>>0,A[3]=A[3]+m>>>0,A[4]=A[4]+g>>>0}return[A[0]>>24&255,A[0]>>16&255,A[0]>>8&255,A[0]&255,A[1]>>24&255,A[1]>>16&255,A[1]>>8&255,A[1]&255,A[2]>>24&255,A[2]>>16&255,A[2]>>8&255,A[2]&255,A[3]>>24&255,A[3]>>16&255,A[3]>>8&255,A[3]&255,A[4]>>24&255,A[4]>>16&255,A[4]>>8&255,A[4]&255]}var IB=XR("v5",80,eL);let tL=class{getStore(){}run(e,A){return A()}};const uf=Symbol.for("ls:tracing_async_local_storage"),AL=new tL;let rL=class{getInstance(){return globalThis[uf]??AL}initializeGlobalInstance(e){globalThis[uf]===void 0&&(globalThis[uf]=e)}};const nL=new rL;function sL(t=!1){const e=nL.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function tg(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const aL=Object.prototype.hasOwnProperty;function hp(t,e){return aL.call(t,e)}function pp(t){if(Array.isArray(t)){const A=new Array(t.length);for(let r=0;r<A.length;r++)A[r]=""+r;return A}if(Object.keys)return Object.keys(t);let e=[];for(let A in t)hp(t,A)&&e.push(A);return e}function WA(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function mp(t){let e=0;const A=t.length;let r;for(;e<A;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function us(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function iL(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function gp(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let A=0,r=t.length;A<r;A++)if(gp(t[A]))return!0}else if(typeof t=="object"){const A=pp(t),r=A.length;for(var e=0;e<r;e++)if(gp(t[A[e]]))return!0}}return!1}function SB(t,e){const A=[t];for(const r in e){const n=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof n<"u"&&A.push(`${r}: ${n}`)}return A.join(`
`)}class oL extends Error{constructor(e,A,r,n,s){super(SB(e,{name:A,index:r,operation:n,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=SB(e,{name:A,index:r,operation:n,tree:s})}}const De=oL,ks={add:function(t,e,A){return t[e]=this.value,{newDocument:A}},remove:function(t,e,A){var r=t[e];return delete t[e],{newDocument:A,removed:r}},replace:function(t,e,A){var r=t[e];return t[e]=this.value,{newDocument:A,removed:r}},move:function(t,e,A){let r=wp(A,this.path);r&&(r=WA(r));const n=_i(A,{op:"remove",path:this.from}).removed;return _i(A,{op:"add",path:this.path,value:n}),{newDocument:A,removed:r}},copy:function(t,e,A){const r=wp(A,this.from);return _i(A,{op:"add",path:this.path,value:WA(r)}),{newDocument:A}},test:function(t,e,A){return{newDocument:A,test:Ku(t[e],this.value)}},_get:function(t,e,A){return this.value=t[e],{newDocument:A}}};var lL={add:function(t,e,A){return mp(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:A,index:e}},remove:function(t,e,A){var r=t.splice(e,1);return{newDocument:A,removed:r[0]}},replace:function(t,e,A){var r=t[e];return t[e]=this.value,{newDocument:A,removed:r}},move:ks.move,copy:ks.copy,test:ks.test,_get:ks._get};function wp(t,e){if(e=="")return t;var A={op:"_get",path:e};return _i(t,A),A.value}function _i(t,e,A=!1,r=!0,n=!0,s=0){if(A&&(typeof A=="function"?A(e,0,t,e.path):yp(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=wp(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Ku(t,e.value),a.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(A)throw new De("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{r||(t=WA(t));const i=(e.path||"").split("/");let o=t,l=1,u=i.length,c,d,h;for(typeof A=="function"?h=A:h=yp;;){if(d=i[l],d&&d.indexOf("~")!=-1&&(d=iL(d)),n&&(d=="__proto__"||d=="prototype"&&l>0&&i[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(A&&c===void 0&&(o[d]===void 0?c=i.slice(0,l).join("/"):l==u-1&&(c=e.path),c!==void 0&&h(e,0,t,c)),l++,Array.isArray(o)){if(d==="-")d=o.length;else{if(A&&!mp(d))throw new De("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);mp(d)&&(d=~~d)}if(l>=u){if(A&&e.op==="add"&&d>o.length)throw new De("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const f=lL[e.op].call(e,o,d,t);if(f.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}}else if(l>=u){const f=ks[e.op].call(e,o,d,t);if(f.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}if(o=o[d],A&&l<u&&(!o||typeof o!="object"))throw new De("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function ju(t,e,A,r=!0,n=!0){if(A&&!Array.isArray(e))throw new De("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=WA(t));const s=new Array(e.length);for(let a=0,i=e.length;a<i;a++)s[a]=_i(t,e[a],A,!0,n,a),t=s[a].newDocument;return s.newDocument=t,s}function yp(t,e,A,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new De("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,A);if(ks[t.op]){if(typeof t.path!="string")throw new De("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,A);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new De('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,A);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new De("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new De("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&gp(t.value))throw new De("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,A);if(A){if(t.op=="add"){var n=t.path.split("/").length,s=r.split("/").length;if(n!==s+1&&n!==s)throw new De("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,A)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new De("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,A)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},i=uL([a],A);if(i&&i.name==="OPERATION_PATH_UNRESOLVABLE")throw new De("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,A)}}}else throw new De("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,A)}function uL(t,e,A){try{if(!Array.isArray(t))throw new De("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)ju(WA(e),WA(t),A||!0);else{A=A||yp;for(var r=0;r<t.length;r++)A(t[r],r,e,void 0)}}catch(n){if(n instanceof De)return n;throw n}}function Ku(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var A=Array.isArray(t),r=Array.isArray(e),n,s,a;if(A&&r){if(s=t.length,s!=e.length)return!1;for(n=s;n--!==0;)if(!Ku(t[n],e[n]))return!1;return!0}if(A!=r)return!1;var i=Object.keys(t);if(s=i.length,s!==Object.keys(e).length)return!1;for(n=s;n--!==0;)if(!e.hasOwnProperty(i[n]))return!1;for(n=s;n--!==0;)if(a=i[n],!Ku(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function SE(t,e,A,r,n){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=pp(e),a=pp(t),i=!1,o=a.length-1;o>=0;o--){var l=a[o],u=t[l];if(hp(e,l)&&!(e[l]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var c=e[l];typeof u=="object"&&u!=null&&typeof c=="object"&&c!=null&&Array.isArray(u)===Array.isArray(c)?SE(u,c,A,r+"/"+us(l),n):u!==c&&(n&&A.push({op:"test",path:r+"/"+us(l),value:WA(u)}),A.push({op:"replace",path:r+"/"+us(l),value:WA(c)}))}else Array.isArray(t)===Array.isArray(e)?(n&&A.push({op:"test",path:r+"/"+us(l),value:WA(u)}),A.push({op:"remove",path:r+"/"+us(l)}),i=!0):(n&&A.push({op:"test",path:r,value:t}),A.push({op:"replace",path:r,value:e}))}if(!(!i&&s.length==a.length))for(var o=0;o<s.length;o++){var l=s[o];!hp(t,l)&&e[l]!==void 0&&A.push({op:"add",path:r+"/"+us(l),value:WA(e[l])})}}}function cL(t,e,A=!1){var r=[];return SE(t,e,r,"",A),r}const dL="gen_ai.operation.name",fL="gen_ai.system",xB="gen_ai.request.model",hL="gen_ai.response.model",TB="gen_ai.usage.input_tokens",OB="gen_ai.usage.output_tokens",kB="gen_ai.usage.total_tokens",pL="gen_ai.request.max_tokens",mL="gen_ai.request.temperature",gL="gen_ai.request.top_p",wL="gen_ai.request.frequency_penalty",yL="gen_ai.request.presence_penalty",BL="gen_ai.response.finish_reasons",_L="gen_ai.prompt",vL="gen_ai.completion",CL="gen_ai.request.extra_query",bL="gen_ai.request.extra_body",EL="gen_ai.serialized.name",QL="gen_ai.serialized.signature",UL="gen_ai.serialized.doc",FL="gen_ai.response.id",IL="gen_ai.response.service_tier",SL="gen_ai.response.system_fingerprint",xL="gen_ai.usage.input_token_details",TL="gen_ai.usage.output_token_details",OL="langsmith.trace.session_id",kL="langsmith.trace.session_name",RL="langsmith.span.kind",LL="langsmith.trace.name",PL="langsmith.metadata",RB="langsmith.span.tags",HL="langsmith.request.streaming",NL="langsmith.request.headers",DL=(...t)=>fetch(...t),xE=Symbol.for("ls:fetch_implementation"),ML=()=>{const t=globalThis[xE];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},$L=t=>async(...e)=>{if(t||Rt("DEBUG")==="true"){const[r,n]=e;console.log(` ${(n==null?void 0:n.method)||"GET"} ${r}`)}const A=await(globalThis[xE]??DL)(...e);return(t||Rt("DEBUG")==="true")&&console.log(` ${A.status} ${A.statusText} ${A.url}`),A},TE=()=>Rt("PROJECT")??YA("LANGCHAIN_SESSION")??"default",OE="0.3.67";var vi={};let MA;const jL=()=>typeof window<"u"&&typeof window.document<"u",KL=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",GL=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),kE=()=>typeof Deno<"u",VL=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!kE(),RE=()=>MA||(typeof Bun<"u"?MA="bun":jL()?MA="browser":VL()?MA="node":KL()?MA="webworker":GL()?MA="jsdom":kE()?MA="deno":MA="other",MA);let cf;function LE(){if(cf===void 0){const t=RE(),e=JL();cf={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:OE,...e}}return cf}function zL(){const t=WL()||{},e={},A=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,n]of Object.entries(t))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof n=="string"&&!A.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=n:e[r]=n);return e}function WL(){try{return typeof process<"u"&&vi?Object.entries(vi).reduce((t,[e,A])=>(t[e]=String(A),t),{}):void 0}catch{return}}function YA(t){try{return typeof process<"u"?vi==null?void 0:vi[t]:void 0}catch{return}}function Rt(t){return YA(`LANGSMITH_${t}`)||YA(`LANGCHAIN_${t}`)}let df;function JL(){if(df!==void 0)return df;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const A of t){const r=YA(A);r!==void 0&&(e[A]=r)}return df=e,e}function PE(){return YA("OTEL_ENABLED")==="true"||Rt("OTEL_ENABLED")==="true"}class ZL{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...A){!this.hasWarned&&PE()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(A.length===1&&typeof A[0]=="function"?r=A[0]:A.length===2&&typeof A[1]=="function"?r=A[1]:A.length===3&&typeof A[2]=="function"&&(r=A[2]),typeof r=="function")return r()}}class XL{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new ZL})}getTracer(e,A){return this.mockTracer}getActiveSpan(){}setSpan(e,A){return e}getSpan(e){}setSpanContext(e,A){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class YL{active(){return{}}with(e,A){return A()}}const ff=Symbol.for("ls:otel_trace"),hf=Symbol.for("ls:otel_context"),LB=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),qL=new XL,eP=new YL;class tP{getTraceInstance(){return globalThis[ff]??qL}getContextInstance(){return globalThis[hf]??eP}initializeGlobalInstances(e){globalThis[ff]===void 0&&(globalThis[ff]=e.trace),globalThis[hf]===void 0&&(globalThis[hf]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[LB]=e}getDefaultOTLPTracerComponents(){return globalThis[LB]??void 0}}const Ag=new tP;function HE(){return Ag.getTraceInstance()}function AP(){return Ag.getContextInstance()}function rP(){return Ag.getDefaultOTLPTracerComponents()}const nP={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function sP(t){return nP[t]||t}class aP{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,A){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const n=this.createSpanForRun(r,r.run,A.get(r.id));n&&!r.run.end_time&&this.spans.set(r.id,n)}else this.updateSpanForRun(r,r.run)}catch(n){console.error(`Error processing operation ${r.id}:`,n)}}createSpanForRun(e,A,r){const n=r&&HE().getSpan(r);if(n)try{return this.finishSpanSetup(n,A,e)}catch(s){console.error(`Failed to create span for run ${e.id}:`,s);return}}finishSpanSetup(e,A,r){return this.setSpanAttributes(e,A,r),A.error?(e.setStatus({code:2}),e.recordException(new Error(A.error))):e.setStatus({code:1}),A.end_time&&e.end(new Date(A.end_time)),e}updateSpanForRun(e,A){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,A,e),A.error?(r.setStatus({code:2}),r.recordException(new Error(A.error))):r.setStatus({code:1});const n=A.end_time;n&&(r.end(new Date(n)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var A;if((A=e.extra)!=null&&A.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const n=r.invocation_params;if(n.model)return n.model;if(n.model_name)return n.model_name}}}setSpanAttributes(e,A,r){var i;if("run_type"in A&&A.run_type){e.setAttribute(RL,A.run_type);const o=sP(A.run_type||"chain");e.setAttribute(dL,o)}"name"in A&&A.name&&e.setAttribute(LL,A.name),"session_id"in A&&A.session_id&&e.setAttribute(OL,A.session_id),"session_name"in A&&A.session_name&&e.setAttribute(kL,A.session_name),this.setGenAiSystem(e,A);const n=this.extractModelName(A);n&&e.setAttribute(xB,n),"prompt_tokens"in A&&typeof A.prompt_tokens=="number"&&e.setAttribute(TB,A.prompt_tokens),"completion_tokens"in A&&typeof A.completion_tokens=="number"&&e.setAttribute(OB,A.completion_tokens),"total_tokens"in A&&typeof A.total_tokens=="number"&&e.setAttribute(kB,A.total_tokens),this.setInvocationParameters(e,A);const s=((i=A.extra)==null?void 0:i.metadata)||{};for(const[o,l]of Object.entries(s))l!=null&&e.setAttribute(`${PL}.${o}`,String(l));const a=A.tags;if(a&&Array.isArray(a)?e.setAttribute(RB,a.join(", ")):a&&e.setAttribute(RB,String(a)),"serialized"in A&&typeof A.serialized=="object"){const o=A.serialized;o.name&&e.setAttribute(EL,String(o.name)),o.signature&&e.setAttribute(QL,String(o.signature)),o.doc&&e.setAttribute(UL,String(o.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,A){let r="langchain";const n=this.extractModelName(A);if(n){const s=n.toLowerCase();s.includes("anthropic")||s.startsWith("claude")?r="anthropic":s.includes("bedrock")?r="aws.bedrock":s.includes("azure")&&s.includes("openai")?r="az.ai.openai":s.includes("azure")&&s.includes("inference")?r="az.ai.inference":s.includes("cohere")?r="cohere":s.includes("deepseek")?r="deepseek":s.includes("gemini")?r="gemini":s.includes("groq")?r="groq":s.includes("watson")||s.includes("ibm")?r="ibm.watsonx.ai":s.includes("mistral")?r="mistral_ai":s.includes("gpt")||s.includes("openai")?r="openai":s.includes("perplexity")||s.includes("sonar")?r="perplexity":s.includes("vertex")?r="vertex_ai":(s.includes("xai")||s.includes("grok"))&&(r="xai")}e.setAttribute(fL,r)}setInvocationParameters(e,A){var n,s;if(!((s=(n=A.extra)==null?void 0:n.metadata)!=null&&s.invocation_params))return;const r=A.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(pL,r.max_tokens),r.temperature!==void 0&&e.setAttribute(mL,r.temperature),r.top_p!==void 0&&e.setAttribute(gL,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(wL,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(yL,r.presence_penalty)}setIOAttributes(e,A){if(A.run.inputs)try{const r=A.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(xB,r.model),r.stream!==void 0&&e.setAttribute(HL,r.stream),r.extra_headers&&e.setAttribute(NL,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(CL,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(bL,JSON.stringify(r.extra_body))),e.setAttribute(_L,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${A.id}`,r)}if(A.run.outputs)try{const r=A.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(TB,n[0]),e.setAttribute(OB,n[1]),e.setAttribute(kB,n[0]+n[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(hL,String(r.model)),r.id&&e.setAttribute(FL,r.id),r.choices&&Array.isArray(r.choices)){const s=r.choices.map(a=>a.finish_reason).filter(a=>a).map(String);s.length>0&&e.setAttribute(BL,s.join(", "))}if(r.service_tier&&e.setAttribute(IL,r.service_tier),r.system_fingerprint&&e.setAttribute(SL,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const s=r.usage_metadata;s.input_token_details&&e.setAttribute(xL,JSON.stringify(s.input_token_details)),s.output_token_details&&e.setAttribute(TL,JSON.stringify(s.output_token_details))}}e.setAttribute(vL,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${A.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let A=this.extractUnifiedRunTokens(e.usage_metadata);if(A)return A;const r=Object.keys(e);for(const a of r){const i=e[a];if(!(!i||typeof i!="object")&&(A=this.extractUnifiedRunTokens(i.usage_metadata),A||i.lc===1&&i.kwargs&&typeof i.kwargs=="object"&&(A=this.extractUnifiedRunTokens(i.kwargs.usage_metadata),A)))return A}const n=e.generations||[];if(!Array.isArray(n))return null;const s=Array.isArray(n[0])?n.flat():n;for(const a of s)if(typeof a=="object"&&a.message&&typeof a.message=="object"&&a.message.kwargs&&typeof a.message.kwargs=="object"&&(A=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),A))return A;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}var NE={},DE={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,A="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(A=!1));function n(o,l,u){this.fn=o,this.context=l,this.once=u||!1}function s(o,l,u,c,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new n(u,c||o,d),f=A?A+l:l;return o._events[f]?o._events[f].fn?o._events[f]=[o._events[f],h]:o._events[f].push(h):(o._events[f]=h,o._eventsCount++),o}function a(o,l){--o._eventsCount===0?o._events=new r:delete o._events[l]}function i(){this._events=new r,this._eventsCount=0}i.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)e.call(u,c)&&l.push(A?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},i.prototype.listeners=function(l){var u=A?A+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,h=c.length,f=new Array(h);d<h;d++)f[d]=c[d].fn;return f},i.prototype.listenerCount=function(l){var u=A?A+l:l,c=this._events[u];return c?c.fn?1:c.length:0},i.prototype.emit=function(l,u,c,d,h,f){var w=A?A+l:l;if(!this._events[w])return!1;var y=this._events[w],p=arguments.length,m,g;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),p){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,c),!0;case 4:return y.fn.call(y.context,u,c,d),!0;case 5:return y.fn.call(y.context,u,c,d,h),!0;case 6:return y.fn.call(y.context,u,c,d,h,f),!0}for(g=1,m=new Array(p-1);g<p;g++)m[g-1]=arguments[g];y.fn.apply(y.context,m)}else{var B=y.length,_;for(g=0;g<B;g++)switch(y[g].once&&this.removeListener(l,y[g].fn,void 0,!0),p){case 1:y[g].fn.call(y[g].context);break;case 2:y[g].fn.call(y[g].context,u);break;case 3:y[g].fn.call(y[g].context,u,c);break;case 4:y[g].fn.call(y[g].context,u,c,d);break;default:if(!m)for(_=1,m=new Array(p-1);_<p;_++)m[_-1]=arguments[_];y[g].fn.apply(y[g].context,m)}}return!0},i.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},i.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},i.prototype.removeListener=function(l,u,c,d){var h=A?A+l:l;if(!this._events[h])return this;if(!u)return a(this,h),this;var f=this._events[h];if(f.fn)f.fn===u&&(!d||f.once)&&(!c||f.context===c)&&a(this,h);else{for(var w=0,y=[],p=f.length;w<p;w++)(f[w].fn!==u||d&&!f[w].once||c&&f[w].context!==c)&&y.push(f[w]);y.length?this._events[h]=y.length===1?y[0]:y:a(this,h)}return this},i.prototype.removeAllListeners=function(l){var u;return l?(u=A?A+l:l,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=A,i.EventEmitter=i,t.exports=i})(DE);var iP=DE.exports,$c={exports:{}},oP=(t,e)=>(e=e||(()=>{}),t.then(A=>new Promise(r=>{r(e())}).then(()=>A),A=>new Promise(r=>{r(e())}).then(()=>{throw A})));const lP=oP;class ME extends Error{constructor(e){super(e),this.name="TimeoutError"}}const $E=(t,e,A)=>new Promise((r,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const s=setTimeout(()=>{if(typeof A=="function"){try{r(A())}catch(o){n(o)}return}const a=typeof A=="string"?A:`Promise timed out after ${e} milliseconds`,i=A instanceof Error?A:new ME(a);typeof t.cancel=="function"&&t.cancel(),n(i)},e);lP(t.then(r,n),()=>{clearTimeout(s)})});$c.exports=$E;$c.exports.default=$E;$c.exports.TimeoutError=ME;var uP=$c.exports,rg={},ng={};Object.defineProperty(ng,"__esModule",{value:!0});function cP(t,e,A){let r=0,n=t.length;for(;n>0;){const s=n/2|0;let a=r+s;A(t[a],e)<=0?(r=++a,n-=s+1):n=s}return r}ng.default=cP;Object.defineProperty(rg,"__esModule",{value:!0});const dP=ng;class fP{constructor(){this._queue=[]}enqueue(e,A){A=Object.assign({priority:0},A);const r={priority:A.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=A.priority){this._queue.push(r);return}const n=dP.default(this._queue,r,(s,a)=>a.priority-s.priority);this._queue.splice(n,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(A=>A.priority===e.priority).map(A=>A.run)}get size(){return this._queue.length}}rg.default=fP;Object.defineProperty(NE,"__esModule",{value:!0});const hP=iP,jE=uP,pP=rg,dl=()=>{},mP=new jE.TimeoutError;class gP extends hP{constructor(e){var A,r,n,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=dl,this._resolveIdle=dl,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:pP.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(A=e.intervalCap)===null||A===void 0?void 0:A.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=dl,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=dl,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const A=this._intervalEnd-e;if(A<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},A)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const A=this._queue.dequeue();return A?(this.emit("active"),A(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,A={}){return new Promise((r,n)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&A.timeout===void 0?e():jE.default(Promise.resolve(e()),A.timeout===void 0?this._timeout:A.timeout,()=>{(A.throwOnTimeout===void 0?this._throwOnTimeout:A.throwOnTimeout)&&n(mP)});r(await a)}catch(a){n(a)}this._next()};this._queue.enqueue(s,A),this._tryToStartAnother(),this.emit("add")})}async addAll(e,A){return Promise.all(e.map(async r=>this.add(r,A)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const A=this._resolveEmpty;this._resolveEmpty=()=>{A(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const A=this._resolveIdle;this._resolveIdle=()=>{A(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var fr=NE.default=gP;const wP=[429,500,502,503,504];let PB=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in fr?this.queue=new fr.default({concurrency:this.maxConcurrency}):this.queue=new fr({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...A){const r=this.onFailedResponseHook;return this.queue.add(()=>$u(()=>e(...A).catch(n=>{throw n instanceof Error?n:new Error(n)}),{async onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.name==="TimeoutError"||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const s=n==null?void 0:n.response;if(r&&await r(s))return;const a=(s==null?void 0:s.status)??(n==null?void 0:n.status);if(a&&!wP.includes(+a))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,A,...r){return e.signal?Promise.race([this.call(A,...r),new Promise((n,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(A,...r)}};function HB(t){return typeof(t==null?void 0:t._getType)=="function"}function NB(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const yP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ae(t,e){if(!yP.test(t)){const A=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(A)}return t}const DB={};function KE(t){DB[t]||(console.warn(t),DB[t]=!0)}var Bp={exports:{}};const BP="2.0.0",GE=256,_P=Number.MAX_SAFE_INTEGER||9007199254740991,vP=16,CP=GE-6,bP=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var jc={MAX_LENGTH:GE,MAX_SAFE_COMPONENT_LENGTH:vP,MAX_SAFE_BUILD_LENGTH:CP,MAX_SAFE_INTEGER:_P,RELEASE_TYPES:bP,SEMVER_SPEC_VERSION:BP,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},pf={};const EP=typeof process=="object"&&pf&&pf.NODE_DEBUG&&/\bsemver\b/i.test(pf.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Kc=EP;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:A,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=jc,s=Kc;e=t.exports={};const a=e.re=[],i=e.safeRe=[],o=e.src=[],l=e.safeSrc=[],u=e.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",n],[d,r]],f=y=>{for(const[p,m]of h)y=y.split(`${p}*`).join(`${p}{0,${m}}`).split(`${p}+`).join(`${p}{1,${m}}`);return y},w=(y,p,m)=>{const g=f(p),B=c++;s(y,B,p),u[y]=B,o[B]=p,l[B]=g,a[B]=new RegExp(p,m?"g":void 0),i[B]=new RegExp(g,m?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),w("MAINVERSION",`(${o[u.NUMERICIDENTIFIER]})\\.(${o[u.NUMERICIDENTIFIER]})\\.(${o[u.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${o[u.NUMERICIDENTIFIERLOOSE]})\\.(${o[u.NUMERICIDENTIFIERLOOSE]})\\.(${o[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${o[u.NONNUMERICIDENTIFIER]}|${o[u.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${o[u.NONNUMERICIDENTIFIER]}|${o[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${o[u.PRERELEASEIDENTIFIER]}(?:\\.${o[u.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${o[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[u.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${d}+`),w("BUILD",`(?:\\+(${o[u.BUILDIDENTIFIER]}(?:\\.${o[u.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${o[u.MAINVERSION]}${o[u.PRERELEASE]}?${o[u.BUILD]}?`),w("FULL",`^${o[u.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${o[u.MAINVERSIONLOOSE]}${o[u.PRERELEASELOOSE]}?${o[u.BUILD]}?`),w("LOOSE",`^${o[u.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${o[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${o[u.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${o[u.XRANGEIDENTIFIER]})(?:\\.(${o[u.XRANGEIDENTIFIER]})(?:\\.(${o[u.XRANGEIDENTIFIER]})(?:${o[u.PRERELEASE]})?${o[u.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${o[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[u.XRANGEIDENTIFIERLOOSE]})(?:${o[u.PRERELEASELOOSE]})?${o[u.BUILD]}?)?)?`),w("XRANGE",`^${o[u.GTLT]}\\s*${o[u.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${o[u.GTLT]}\\s*${o[u.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${A}})(?:\\.(\\d{1,${A}}))?(?:\\.(\\d{1,${A}}))?`),w("COERCE",`${o[u.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",o[u.COERCEPLAIN]+`(?:${o[u.PRERELEASE]})?(?:${o[u.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",o[u.COERCE],!0),w("COERCERTLFULL",o[u.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${o[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${o[u.LONETILDE]}${o[u.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${o[u.LONETILDE]}${o[u.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${o[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${o[u.LONECARET]}${o[u.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${o[u.LONECARET]}${o[u.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${o[u.GTLT]}\\s*(${o[u.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${o[u.GTLT]}\\s*(${o[u.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${o[u.GTLT]}\\s*(${o[u.LOOSEPLAIN]}|${o[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${o[u.XRANGEPLAIN]})\\s+-\\s+(${o[u.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${o[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[u.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Bp,Bp.exports);var ho=Bp.exports;const QP=Object.freeze({loose:!0}),UP=Object.freeze({}),FP=t=>t?typeof t!="object"?QP:t:UP;var sg=FP;const MB=/^[0-9]+$/,VE=(t,e)=>{const A=MB.test(t),r=MB.test(e);return A&&r&&(t=+t,e=+e),t===e?0:A&&!r?-1:r&&!A?1:t<e?-1:1},IP=(t,e)=>VE(e,t);var zE={compareIdentifiers:VE,rcompareIdentifiers:IP};const fl=Kc,{MAX_LENGTH:$B,MAX_SAFE_INTEGER:hl}=jc,{safeRe:pl,t:ml}=ho,SP=sg,{compareIdentifiers:cs}=zE;let xP=class $A{constructor(e,A){if(A=SP(A),e instanceof $A){if(e.loose===!!A.loose&&e.includePrerelease===!!A.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>$B)throw new TypeError(`version is longer than ${$B} characters`);fl("SemVer",e,A),this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease;const r=e.trim().match(A.loose?pl[ml.LOOSE]:pl[ml.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>hl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hl||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const s=+n;if(s>=0&&s<hl)return s}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(fl("SemVer.compare",this.version,this.options,e),!(e instanceof $A)){if(typeof e=="string"&&e===this.version)return 0;e=new $A(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof $A||(e=new $A(e,this.options)),cs(this.major,e.major)||cs(this.minor,e.minor)||cs(this.patch,e.patch)}comparePre(e){if(e instanceof $A||(e=new $A(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let A=0;do{const r=this.prerelease[A],n=e.prerelease[A];if(fl("prerelease compare",A,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return cs(r,n)}while(++A)}compareBuild(e){e instanceof $A||(e=new $A(e,this.options));let A=0;do{const r=this.build[A],n=e.build[A];if(fl("build compare",A,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return cs(r,n)}while(++A)}inc(e,A,r){if(e.startsWith("pre")){if(!A&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(A){const n=`-${A}`.match(this.options.loose?pl[ml.PRERELEASELOOSE]:pl[ml.PRERELEASE]);if(!n||n[1]!==A)throw new Error(`invalid identifier: ${A}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A,r),this.inc("pre",A,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",A,r),this.inc("pre",A,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(A===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(A){let s=[A,n];r===!1&&(s=[A]),cs(this.prerelease[0],A)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ag=xP;const jB=ag,TP=(t,e,A)=>new jB(t,A).compare(new jB(e,A));var fa=TP;const OP=fa,kP=(t,e,A)=>OP(t,e,A)>0;var RP=kP;const LP=fa,PP=(t,e,A)=>LP(t,e,A)<0;var HP=PP;const NP=fa,DP=(t,e,A)=>NP(t,e,A)===0;var MP=DP;const $P=fa,jP=(t,e,A)=>$P(t,e,A)!==0;var KP=jP;const GP=fa,VP=(t,e,A)=>GP(t,e,A)>=0;var zP=VP;const WP=fa,JP=(t,e,A)=>WP(t,e,A)<=0;var ZP=JP;const XP=MP,YP=KP,qP=RP,eH=zP,tH=HP,AH=ZP,rH=(t,e,A,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof A=="object"&&(A=A.version),t===A;case"!==":return typeof t=="object"&&(t=t.version),typeof A=="object"&&(A=A.version),t!==A;case"":case"=":case"==":return XP(t,A,r);case"!=":return YP(t,A,r);case">":return qP(t,A,r);case">=":return eH(t,A,r);case"<":return tH(t,A,r);case"<=":return AH(t,A,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var nH=rH;const{safeRe:LD,t:PD}=ho;class sH{constructor(){this.max=1e3,this.map=new Map}get(e){const A=this.map.get(e);if(A!==void 0)return this.map.delete(e),this.map.set(e,A),A}delete(e){return this.map.delete(e)}set(e,A){if(!this.delete(e)&&A!==void 0){if(this.map.size>=this.max){const n=this.map.keys().next().value;this.delete(n)}this.map.set(e,A)}return this}}var aH=sH,mf,KB;function LA(){if(KB)return mf;KB=1;const t=/\s+/g;class e{constructor(k,D){if(D=n(D),k instanceof e)return k.loose===!!D.loose&&k.includePrerelease===!!D.includePrerelease?k:new e(k.raw,D);if(k instanceof s)return this.raw=k.value,this.set=[[k]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=k.trim().replace(t," "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(F=>!w(F[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&y(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let k=0;k<this.set.length;k++){k>0&&(this.formatted+="||");const D=this.set[k];for(let H=0;H<D.length;H++)H>0&&(this.formatted+=" "),this.formatted+=D[H].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(k){const H=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+k,F=r.get(H);if(F)return F;const S=this.options.loose,U=S?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];k=k.replace(U,se(this.options.includePrerelease)),a("hyphen replace",k),k=k.replace(o[l.COMPARATORTRIM],u),a("comparator trim",k),k=k.replace(o[l.TILDETRIM],c),a("tilde trim",k),k=k.replace(o[l.CARETTRIM],d),a("caret trim",k);let R=k.split(" ").map(X=>m(X,this.options)).join(" ").split(/\s+/).map(X=>$(X,this.options));S&&(R=R.filter(X=>(a("loose invalid filter",X,this.options),!!X.match(o[l.COMPARATORLOOSE])))),a("range list",R);const T=new Map,G=R.map(X=>new s(X,this.options));for(const X of G){if(w(X))return[X];T.set(X.value,X)}T.size>1&&T.has("")&&T.delete("");const j=[...T.values()];return r.set(H,j),j}intersects(k,D){if(!(k instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>p(H,D)&&k.set.some(F=>p(F,D)&&H.every(S=>F.every(U=>S.intersects(U,D)))))}test(k){if(!k)return!1;if(typeof k=="string")try{k=new i(k,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(z(this.set[D],k,this.options))return!0;return!1}}mf=e;const A=aH,r=new A,n=sg,s=Gc(),a=Kc,i=ag,{safeRe:o,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=ho,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=jc,w=O=>O.value==="<0.0.0-0",y=O=>O.value==="",p=(O,k)=>{let D=!0;const H=O.slice();let F=H.pop();for(;D&&H.length;)D=H.every(S=>F.intersects(S,k)),F=H.pop();return D},m=(O,k)=>(a("comp",O,k),O=v(O,k),a("caret",O),O=B(O,k),a("tildes",O),O=E(O,k),a("xrange",O),O=L(O,k),a("stars",O),O),g=O=>!O||O.toLowerCase()==="x"||O==="*",B=(O,k)=>O.trim().split(/\s+/).map(D=>_(D,k)).join(" "),_=(O,k)=>{const D=k.loose?o[l.TILDELOOSE]:o[l.TILDE];return O.replace(D,(H,F,S,U,R)=>{a("tilde",O,H,F,S,U,R);let T;return g(F)?T="":g(S)?T=`>=${F}.0.0 <${+F+1}.0.0-0`:g(U)?T=`>=${F}.${S}.0 <${F}.${+S+1}.0-0`:R?(a("replaceTilde pr",R),T=`>=${F}.${S}.${U}-${R} <${F}.${+S+1}.0-0`):T=`>=${F}.${S}.${U} <${F}.${+S+1}.0-0`,a("tilde return",T),T})},v=(O,k)=>O.trim().split(/\s+/).map(D=>C(D,k)).join(" "),C=(O,k)=>{a("caret",O,k);const D=k.loose?o[l.CARETLOOSE]:o[l.CARET],H=k.includePrerelease?"-0":"";return O.replace(D,(F,S,U,R,T)=>{a("caret",O,F,S,U,R,T);let G;return g(S)?G="":g(U)?G=`>=${S}.0.0${H} <${+S+1}.0.0-0`:g(R)?S==="0"?G=`>=${S}.${U}.0${H} <${S}.${+U+1}.0-0`:G=`>=${S}.${U}.0${H} <${+S+1}.0.0-0`:T?(a("replaceCaret pr",T),S==="0"?U==="0"?G=`>=${S}.${U}.${R}-${T} <${S}.${U}.${+R+1}-0`:G=`>=${S}.${U}.${R}-${T} <${S}.${+U+1}.0-0`:G=`>=${S}.${U}.${R}-${T} <${+S+1}.0.0-0`):(a("no pr"),S==="0"?U==="0"?G=`>=${S}.${U}.${R}${H} <${S}.${U}.${+R+1}-0`:G=`>=${S}.${U}.${R}${H} <${S}.${+U+1}.0-0`:G=`>=${S}.${U}.${R} <${+S+1}.0.0-0`),a("caret return",G),G})},E=(O,k)=>(a("replaceXRanges",O,k),O.split(/\s+/).map(D=>I(D,k)).join(" ")),I=(O,k)=>{O=O.trim();const D=k.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return O.replace(D,(H,F,S,U,R,T)=>{a("xRange",O,H,F,S,U,R,T);const G=g(S),j=G||g(U),X=j||g(R),de=X;return F==="="&&de&&(F=""),T=k.includePrerelease?"-0":"",G?F===">"||F==="<"?H="<0.0.0-0":H="*":F&&de?(j&&(U=0),R=0,F===">"?(F=">=",j?(S=+S+1,U=0,R=0):(U=+U+1,R=0)):F==="<="&&(F="<",j?S=+S+1:U=+U+1),F==="<"&&(T="-0"),H=`${F+S}.${U}.${R}${T}`):j?H=`>=${S}.0.0${T} <${+S+1}.0.0-0`:X&&(H=`>=${S}.${U}.0${T} <${S}.${+U+1}.0-0`),a("xRange return",H),H})},L=(O,k)=>(a("replaceStars",O,k),O.trim().replace(o[l.STAR],"")),$=(O,k)=>(a("replaceGTE0",O,k),O.trim().replace(o[k.includePrerelease?l.GTE0PRE:l.GTE0],"")),se=O=>(k,D,H,F,S,U,R,T,G,j,X,de)=>(g(H)?D="":g(F)?D=`>=${H}.0.0${O?"-0":""}`:g(S)?D=`>=${H}.${F}.0${O?"-0":""}`:U?D=`>=${D}`:D=`>=${D}${O?"-0":""}`,g(G)?T="":g(j)?T=`<${+G+1}.0.0-0`:g(X)?T=`<${G}.${+j+1}.0-0`:de?T=`<=${G}.${j}.${X}-${de}`:O?T=`<${G}.${j}.${+X+1}-0`:T=`<=${T}`,`${D} ${T}`.trim()),z=(O,k,D)=>{for(let H=0;H<O.length;H++)if(!O[H].test(k))return!1;if(k.prerelease.length&&!D.includePrerelease){for(let H=0;H<O.length;H++)if(a(O[H].semver),O[H].semver!==s.ANY&&O[H].semver.prerelease.length>0){const F=O[H].semver;if(F.major===k.major&&F.minor===k.minor&&F.patch===k.patch)return!0}return!1}return!0};return mf}var gf,GB;function Gc(){if(GB)return gf;GB=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,c){if(c=A(c),u instanceof e){if(u.loose===!!c.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,c),this.options=c,this.loose=!!c.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const c=this.options.loose?r[n.COMPARATORLOOSE]:r[n.COMPARATOR],d=u.match(c);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new i(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new i(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,c){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(u.value,c).test(this.value):u.operator===""?u.value===""?!0:new o(this.value,c).test(u.semver):(c=A(c),c.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,c)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,c)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}gf=e;const A=sg,{safeRe:r,t:n}=ho,s=nH,a=Kc,i=ag,o=LA();return gf}LA();LA();LA();LA();LA();LA();const iH=Gc(),{ANY:HD}=iH;LA();LA();LA();const ig=Gc(),{ANY:ND}=ig;new ig(">=0.0.0-0");new ig(">=0.0.0");const wf=ho,VB=jc,zB=zE;Gc();LA();wf.re,wf.src,wf.t,VB.SEMVER_SPEC_VERSION,VB.RELEASE_TYPES,zB.compareIdentifiers,zB.rcompareIdentifiers;function Qr(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,A]=t.split(":"),r=A||"latest";if(e.includes("/")){const[n,s]=e.split("/",2);if(!n||!s)throw new Error(`Invalid identifier format: ${t}`);return[n,s,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class oH extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function q(t,e,A){let r;if(t.ok){A&&(r=await t.text());return}if(t.status===403)try{const a=await t.json();if((a==null?void 0:a.error)==="org_scoped_key_requires_workspace")throw new Error("This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{throw new Error(`${t.status} ${t.statusText}`)}r=await t.text();const n=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${r}`;if(t.status===409)throw new oH(n);const s=new Error(n);throw s.status=t.status,s}const WE="ERR_CONFLICTING_ENDPOINTS";class lH extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:WE}),this.name="ConflictingEndpointsError"}}function uH(t){return typeof t=="object"&&t!==null&&t.code===WE}var WB="[...]",cH={result:"[Circular]"},Gu=[],Rs=[];const dH=new TextEncoder;function fH(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function gl(t){return dH.encode(t)}function JE(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function hH(t){return function(e,A){return JE(A)}}function Vt(t,e,A,r,n){var s;try{const a=JSON.stringify(t,hH(A),r);return gl(a)}catch(a){if(!((s=a.message)!=null&&s.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),gl("[Unserializable]");Rt("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof n>"u"&&(n=fH()),_p(t,"",0,[],void 0,0,n);let i;try{Rs.length===0?i=JSON.stringify(t,A,r):i=JSON.stringify(t,pH(A),r)}catch{return gl("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Gu.length!==0;){const o=Gu.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return gl(i)}}function yf(t,e,A,r){var n=Object.getOwnPropertyDescriptor(r,A);n.get!==void 0?n.configurable?(Object.defineProperty(r,A,{value:t}),Gu.push([r,A,e,n])):Rs.push([e,A,t]):(r[A]=t,Gu.push([r,A,e]))}function _p(t,e,A,r,n,s,a){s+=1;var i;if(typeof t=="object"&&t!==null){for(i=0;i<r.length;i++)if(r[i]===t){yf(cH,t,e,n);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){yf(WB,t,e,n);return}if(typeof a.edgesLimit<"u"&&A+1>a.edgesLimit){yf(WB,t,e,n);return}if(r.push(t),Array.isArray(t))for(i=0;i<t.length;i++)_p(t[i],i,i,r,t,s,a);else{t=JE(t);var o=Object.keys(t);for(i=0;i<o.length;i++){var l=o[i];_p(t[l],l,i,r,t,s,a)}}r.pop()}}function pH(t){return t=typeof t<"u"?t:function(e,A){return A},function(e,A){if(Rs.length>0)for(var r=0;r<Rs.length;r++){var n=Rs[r];if(n[1]===e&&n[0]===A){A=n[2],Rs.splice(r,1);break}}return t.call(this,e,A)}}function JB(t){const e=LE(),A=zL(),r=t.extra??{},n=r.metadata;return t.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...A,...A.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??A.revision_id}:{},...n}},t}const mH=t=>{const e=(t==null?void 0:t.toString())??Rt("TRACING_SAMPLING_RATE");if(e===void 0)return;const A=parseFloat(e);if(A<0||A>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${A}`);return A},gH=t=>{const A=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return A==="localhost"||A==="127.0.0.1"||A==="::1"};async function wH(t){const e=[];for await(const A of t)e.push(A);return e}function wl(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const yH=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(A=>setTimeout(A,e)),!0}return!1};function ZB(t){return typeof t=="number"?Number(t.toFixed(4)):t}class BH{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let A;const r=new Promise(s=>{A=s}),n=Vt(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:A,itemPromise:r,size:n}),this.sizeBytes+=n,r}pop(e){var n;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const A=[];let r=0;for(;r+(((n=this.peek())==null?void 0:n.size)??0)<e&&this.items.length>0;){const s=this.items.shift();s&&(A.push(s),r+=s.size,this.sizeBytes-=s.size)}if(A.length===0&&this.items.length>0){const s=this.items.shift();A.push(s),r+=s.size,this.sizeBytes-=s.size}return[A.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl})),()=>A.forEach(s=>s.itemPromiseResolve())]}}const _H=24*1024*1024,vH=1e4,XB="https://api.smith.langchain.com";class Xi{get _fetch(){return this.fetchImplementation||$L(this.debug)}constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new BH}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:YA("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:YA("LANGSMITH_DEBUG")==="true"});const A=Xi.getDefaultClientConfig();if(this.tracingSampleRate=mH(e.tracingSamplingRate),this.apiUrl=wl(e.apiUrl??A.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=wl(e.apiKey??A.apiKey),this.webUrl=wl(e.webUrl??A.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=wl(e.workspaceId??Rt("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new PB({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation,this.batchIngestCaller=new PB({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:yH,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??A.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??A.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,PE()&&(this.langSmithToOTELTranslator=new aP)}static getDefaultClientConfig(){const e=Rt("API_KEY"),A=Rt("ENDPOINT")??XB,r=Rt("HIDE_INPUTS")==="true",n=Rt("HIDE_OUTPUTS")==="true";return{apiUrl:A,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:n}}getHostUrl(){return this.webUrl?this.webUrl:gH(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${OE}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const A={...e};return A.inputs!==void 0&&(A.inputs=await this.processInputs(A.inputs)),A.outputs!==void 0&&(A.outputs=await this.processOutputs(A.outputs)),A}async _getResponse(e,A){const r=(A==null?void 0:A.toString())??"",n=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const a=await this._fetch(n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(a,`Failed to fetch ${e}`),a})}async _get(e,A){return(await this._getResponse(e,A)).json()}async*_getPaginated(e,A=new URLSearchParams,r){let n=Number(A.get("offset"))||0;const s=Number(A.get("limit"))||100;for(;;){A.set("offset",String(n)),A.set("limit",String(s));const a=`${this.apiUrl}${e}?${A}`,i=await this.caller.call(async()=>{const l=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(l,`Failed to fetch ${e}`),l}),o=r?r(await i.json()):await i.json();if(o.length===0||(yield o,o.length<s))break;n+=o.length}}async*_getCursorPaginatedList(e,A=null,r="POST",n="runs"){const s=A?{...A}:{};for(;;){const a=JSON.stringify(s),o=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(u,`Failed to fetch ${e}`),u})).json();if(!o||!o[n])break;yield o[n];const l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,A=!1){if(this.tracingSampleRate===void 0)return e;if(A){const r=[];for(const n of e)this.filteredPostUuids.has(n.trace_id)?n.id===n.trace_id&&this.filteredPostUuids.delete(n.trace_id):r.push(n);return r}else{const r=[];for(const n of e){const s=n.trace_id??n.id;this.filteredPostUuids.has(s)||(n.id===s?this._shouldSample()?r.push(n):this.filteredPostUuids.add(s):r.push(n))}return r}}async _getBatchSizeLimitBytes(){var A;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((A=e.batch_ingest_config)==null?void 0:A.size_limit_bytes)??_H}async _getDatasetExamplesMultiPartSupport(){var A;return((A=(await this._ensureServerInfo()).instance_flags)==null?void 0:A.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const A=[];for(;this.autoBatchQueue.items.length>0;){const[r,n]=this.autoBatchQueue.pop(e);if(!r.length){n();break}const s=r.reduce((o,l)=>{const u=l.apiUrl??this.apiUrl,c=l.apiKey??this.apiKey,h=l.apiKey===this.apiKey&&l.apiUrl===this.apiUrl?"default":`${u}|${c}`;return o[h]||(o[h]=[]),o[h].push(l),o},{}),a=[];for(const[o,l]of Object.entries(s)){const u=this._processBatch(l,{apiUrl:o==="default"?void 0:o.split("|")[0],apiKey:o==="default"?void 0:o.split("|")[1]});a.push(u)}const i=Promise.all(a).finally(n);A.push(i)}return Promise.all(A)}async _processBatch(e,A){var r,n;if(e.length)try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const s={runCreates:e.filter(i=>i.action==="create").map(i=>i.item),runUpdates:e.filter(i=>i.action==="update").map(i=>i.item)},a=await this._ensureServerInfo();if((r=a==null?void 0:a.batch_ingest_config)!=null&&r.use_multipart_endpoint){const i=(n=a==null?void 0:a.instance_flags)==null?void 0:n.gzip_body_enabled;await this.multipartIngestRuns(s,{...A,useGzip:i})}else await this.batchIngestRuns(s,A)}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const A=new Map,r=[];for(const n of e)n.item.id&&n.otelContext&&(A.set(n.item.id,n.otelContext),n.action==="create"?r.push({operation:"post",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}):r.push({operation:"patch",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}));this.langSmithToOTELTranslator.exportBatch(r,A)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=JB(e.item);const A=this.autoBatchQueue.push(e);if(this.manualFlushMode)return A;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),A}async _getServerInfo(){const A=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(vH),...this.fetchOptions});return await q(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(A,null,2)+`
`),A}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}_cloneCurrentOTELContext(){const e=HE(),A=AP();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(A.active(),r)}}async createRun(e,A){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const s=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:s,otelContext:o,apiKey:A==null?void 0:A.apiKey,apiUrl:A==null?void 0:A.apiUrl}).catch(console.error);return}const a=JB(s);(A==null?void 0:A.apiKey)!==void 0&&(r["x-api-key"]=A.apiKey),(A==null?void 0:A.workspaceId)!==void 0&&(r["x-tenant-id"]=A.workspaceId);const i=Vt(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{const o=await this._fetch(`${(A==null?void 0:A.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await q(o,"create run",!0),o})}async batchIngestRuns({runCreates:e,runUpdates:A},r){if(e===void 0&&A===void 0)return;let n=await Promise.all((e==null?void 0:e.map(o=>this.prepareRunCreateOrUpdateInputs(o)))??[]),s=await Promise.all((A==null?void 0:A.map(o=>this.prepareRunCreateOrUpdateInputs(o)))??[]);if(n.length>0&&s.length>0){const o=n.reduce((u,c)=>(c.id&&(u[c.id]=c),u),{}),l=[];for(const u of s)u.id!==void 0&&o[u.id]?o[u.id]={...o[u.id],...u}:l.push(u);n=Object.values(o),s=l}const a={post:n,patch:s};if(!a.post.length&&!a.patch.length)return;const i={post:[],patch:[]};for(const o of["post","patch"]){const l=o,u=a[l].reverse();let c=u.pop();for(;c!==void 0;)i[l].push(c),c=u.pop()}if(i.post.length>0||i.patch.length>0){const o=i.post.map(l=>l.id).concat(i.patch.map(l=>l.id)).join(",");await this._postBatchIngestRuns(Vt(i,`Ingesting runs with ids: ${o}`),r)}}async _postBatchIngestRuns(e,A){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(A==null?void 0:A.apiKey)!==void 0&&(r["x-api-key"]=A.apiKey),await this.batchIngestCaller.call(async()=>{const n=await this._fetch(`${(A==null?void 0:A.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await q(n,"batch create run",!0),n})}async multipartIngestRuns({runCreates:e,runUpdates:A},r){if(e===void 0&&A===void 0)return;const n={};let s=[];for(const c of e??[]){const d=await this.prepareRunCreateOrUpdateInputs(c);d.id!==void 0&&d.attachments!==void 0&&(n[d.id]=d.attachments),delete d.attachments,s.push(d)}let a=[];for(const c of A??[])a.push(await this.prepareRunCreateOrUpdateInputs(c));if(s.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(s.length>0&&a.length>0){const c=s.reduce((h,f)=>(f.id&&(h[f.id]=f),h),{}),d=[];for(const h of a)h.id!==void 0&&c[h.id]?c[h.id]={...c[h.id],...h}:d.push(h);s=Object.values(c),a=d}if(s.length===0&&a.length===0)return;const l=[],u=[];for(const[c,d]of[["post",s],["patch",a]])for(const h of d){const{inputs:f,outputs:w,events:y,extra:p,error:m,serialized:g,attachments:B,..._}=h,v={inputs:f,outputs:w,events:y,extra:p,error:m,serialized:g},C=Vt(_,`Serializing for multipart ingestion of run with id: ${_.id}`);u.push({name:`${c}.${_.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[E,I]of Object.entries(v)){if(I===void 0)continue;const L=Vt(I,`Serializing ${E} for multipart ingestion of run with id: ${_.id}`);u.push({name:`${c}.${_.id}.${E}`,payload:new Blob([L],{type:`application/json; length=${L.length}`})})}if(_.id!==void 0){const E=n[_.id];if(E){delete n[_.id];for(const[I,L]of Object.entries(E)){let $,se;if(Array.isArray(L)?[$,se]=L:($=L.mimeType,se=L.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${_.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${_.id}.${I}`,payload:new Blob([se],{type:`${$}; length=${se.byteLength}`})})}}}l.push(`trace=${_.trace_id},id=${_.id}`)}await this._sendMultipartRequest(u,l.join("; "),r)}async _createNodeFetchBody(e,A){const r=[];for(const a of e)r.push(new Blob([`--${A}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${a.name}"\r
`,`Content-Type: ${a.payload.type}\r
\r
`])),r.push(a.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${A}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,A){const r=new TextEncoder;return new ReadableStream({async start(s){const a=async i=>{typeof i=="string"?s.enqueue(r.encode(i)):s.enqueue(i)};for(const i of e){await a(`--${A}\r
`),await a(`Content-Disposition: form-data; name="${i.name}"\r
`),await a(`Content-Type: ${i.payload.type}\r
\r
`);const l=i.payload.stream().getReader();try{let u;for(;!(u=await l.read()).done;)s.enqueue(u.value)}finally{l.releaseLock()}await a(`\r
`)}await a(`--${A}--\r
`),s.close()}})}async _sendMultipartRequest(e,A,r){const n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),s=ML(),a=()=>this._createNodeFetchBody(e,n),i=()=>this._createMultipartStream(e,n),o=async l=>this.batchIngestCaller.call(async()=>{const u=await l(),c={...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`};(r==null?void 0:r.apiKey)!==void 0&&(c["x-api-key"]=r.apiKey);let d=u;r!=null&&r.useGzip&&typeof u=="object"&&"pipeThrough"in u&&(d=u.pipeThrough(new CompressionStream("gzip")),c["Content-Encoding"]="gzip");const h=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:c,body:d,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(h,"Failed to send multipart request",!0),h});try{let l,u=!1;!s&&!this.multipartStreamingDisabled&&RE()!=="bun"?(u=!0,l=await o(i)):l=await o(a),(!this.multipartStreamingDisabled||u)&&l.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==XB&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${A}".`),this.multipartStreamingDisabled=!0,l=await o(a))}catch(l){console.warn(`${l.message.trim()}

Context: ${A}`)}}async updateRun(e,A,r){ae(e),A.inputs&&(A.inputs=await this.processInputs(A.inputs)),A.outputs&&(A.outputs=await this.processOutputs(A.outputs));const n={...A,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){const i=this._cloneCurrentOTELContext();if(A.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n,otelContext:i,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:n,otelContext:i,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const s={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(s["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(s["x-tenant-id"]=r.workspaceId);const a=Vt(A,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const i=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:s,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(i,"update run",!0),i})}async readRun(e,{loadChildRuns:A}={loadChildRuns:!1}){ae(e);let r=await this._get(`/runs/${e}`);return A&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:A,projectOpts:r}){if(A!==void 0){let n;A.session_id?n=A.session_id:r!=null&&r.projectName?n=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?n=r==null?void 0:r.projectId:n=(await this.readProject({projectName:Rt("PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${n}/r/${A.id}?poll=true`}else if(e!==void 0){const n=await this.readRun(e);if(!n.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${n.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var s;const A=await wH(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},n={};A.sort((a,i)=>((a==null?void 0:a.dotted_order)??"").localeCompare((i==null?void 0:i.dotted_order)??""));for(const a of A){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);(s=a.dotted_order)!=null&&s.startsWith(e.dotted_order??"")&&a.id!==e.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),n[a.id]=a)}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(n[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:A,projectName:r,parentRunId:n,traceId:s,referenceExampleId:a,startTime:i,executionOrder:o,isRoot:l,runType:u,error:c,id:d,query:h,filter:f,traceFilter:w,treeFilter:y,limit:p,select:m,order:g}=e;let B=[];if(A&&(B=Array.isArray(A)?A:[A]),r){const E=Array.isArray(r)?r:[r],I=await Promise.all(E.map(L=>this.readProject({projectName:L}).then($=>$.id)));B.push(...I)}const _=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],v={session:B.length?B:null,run_type:u,reference_example:a,query:h,filter:f,trace_filter:w,tree_filter:y,execution_order:o,parent_run:n,start_time:i?i.toISOString():null,error:c,id:d,limit:p,trace:s,select:m||_,is_root:l,order:g};let C=0;for await(const E of this._getCursorPaginatedList("/runs/query",v))if(p){if(C>=p)break;if(E.length+C>p){yield*E.slice(0,p-C);break}C+=E.length,yield*E}else yield*E}async*listGroupRuns(e){const{projectId:A,projectName:r,groupBy:n,filter:s,startTime:a,endTime:i,limit:o,offset:l}=e,c={session_id:A||(await this.readProject({projectName:r})).id,group_by:n,filter:s,start_time:a?a.toISOString():null,end_time:i?i.toISOString():null,limit:Number(o)||100};let d=Number(l)||0;const h="/runs/group",f=`${this.apiUrl}${h}`;for(;;){const w={...c,offset:d},y=Object.fromEntries(Object.entries(w).filter(([v,C])=>C!==void 0)),p=JSON.stringify(y),g=await(await this.caller.call(async()=>{const v=await this._fetch(f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await q(v,`Failed to fetch ${h}`),v})).json(),{groups:B,total:_}=g;if(B.length===0)break;for(const v of B)yield v;if(d+=B.length,d>=_)break}}async getRunStats({id:e,trace:A,parentRun:r,runType:n,projectNames:s,projectIds:a,referenceExampleIds:i,startTime:o,endTime:l,error:u,query:c,filter:d,traceFilter:h,treeFilter:f,isRoot:w,dataSourceType:y}){let p=a||[];s&&(p=[...a||[],...await Promise.all(s.map(C=>this.readProject({projectName:C}).then(E=>E.id)))]);const g=Object.fromEntries(Object.entries({id:e,trace:A,parent_run:r,run_type:n,session:p,reference_example:i,start_time:o,end_time:l,error:u,query:c,filter:d,trace_filter:h,tree_filter:f,is_root:w,data_source_type:y}).filter(([C,E])=>E!==void 0)),B=JSON.stringify(g);return await(await this.caller.call(async()=>{const C=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:B});return await q(C,"get run stats"),C})).json()}async shareRun(e,{shareId:A}={}){const r={run_id:e,share_token:A||Et()};ae(e);const n=JSON.stringify(r),a=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await q(i,"share run"),i})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){ae(e),await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(A,"unshare run",!0),A})}async readRunSharedLink(e){ae(e);const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(n,"read run shared link"),n})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:A}={}){const r=new URLSearchParams({share_token:e});if(A!==void 0)for(const a of A)r.append("id",a);return ae(e),await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(a,"list shared runs"),a})).json()}async readDatasetSharedSchema(e,A){if(!e&&!A)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:A})).id),ae(e);const n=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(s,"read dataset shared schema"),s})).json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,A){if(!e&&!A)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:A})).id);const r={dataset_id:e};ae(e);const n=JSON.stringify(r),a=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await q(i,"share dataset"),i})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){ae(e),await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(A,"unshare dataset",!0),A})}async readSharedDataset(e){return ae(e),await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(n,"read shared dataset"),n})).json()}async listSharedExamples(e,A){const r={};A!=null&&A.exampleIds&&(r.id=A.exampleIds);const n=new URLSearchParams;Object.entries(r).forEach(([i,o])=>{Array.isArray(o)?o.forEach(l=>n.append(i,l)):n.append(i,o)});const s=await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(i,"list shared examples"),i}),a=await s.json();if(!s.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${Array.isArray(a.detail)?a.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return a.map(i=>({...i,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:A=null,metadata:r=null,upsert:n=!1,projectExtra:s=null,referenceDatasetId:a=null}){const i=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${i}`,l=s||{};r&&(l.metadata=r);const u={name:e,extra:l,description:A};a!==null&&(u.reference_dataset_id=a);const c=JSON.stringify(u);return await(await this.caller.call(async()=>{const f=await this._fetch(o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await q(f,"create project"),f})).json()}async updateProject(e,{name:A=null,description:r=null,metadata:n=null,projectExtra:s=null,endTime:a=null}){const i=`${this.apiUrl}/sessions/${e}`;let o=s;n&&(o={...o||{},metadata:n});const l=JSON.stringify({name:A,extra:o,description:r,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{const d=await this._fetch(i,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await q(d,"update project"),d})).json()}async hasProject({projectId:e,projectName:A}){let r="/sessions";const n=new URLSearchParams;if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ae(e),r+=`/${e}`;else if(A!==void 0)n.append("name",A);else throw new Error("Must provide projectName or projectId");const s=await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(a,"has project"),a});try{const a=await s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:A,includeStats:r}){let n="/sessions";const s=new URLSearchParams;if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ae(e),n+=`/${e}`;else if(A!==void 0)s.append("name",A);else throw new Error("Must provide projectName or projectId");r!==void 0&&s.append("include_stats",r.toString());const a=await this._get(n,s);let i;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${A}] not found`);i=a[0]}else i=a;return i}async getProjectUrl({projectId:e,projectName:A}){if(e===void 0&&A===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:A}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:A}){if(e===void 0&&A===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:A}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const A of this._getPaginated("/sessions",e))return this._tenantId=A[0].tenant_id,A[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:A,nameContains:r,referenceDatasetId:n,referenceDatasetName:s,includeStats:a,datasetVersion:i,referenceFree:o,metadata:l}={}){const u=new URLSearchParams;if(e!==void 0)for(const c of e)u.append("id",c);if(A!==void 0&&u.append("name",A),r!==void 0&&u.append("name_contains",r),n!==void 0)u.append("reference_dataset",n);else if(s!==void 0){const c=await this.readDataset({datasetName:s});u.append("reference_dataset",c.id)}a!==void 0&&u.append("include_stats",a.toString()),i!==void 0&&u.append("dataset_version",i),o!==void 0&&u.append("reference_free",o.toString()),l!==void 0&&u.append("metadata",JSON.stringify(l));for await(const c of this._getPaginated("/sessions",u))yield*c}async deleteProject({projectId:e,projectName:A}){let r;if(e===void 0&&A===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:A})).id:r=e,ae(r),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(n,`delete session ${r} (${A})`,!0),n})}async uploadCsv({csvFile:e,fileName:A,inputKeys:r,outputKeys:n,description:s,dataType:a,name:i}){const o=`${this.apiUrl}/datasets/upload`,l=new FormData;return l.append("file",e,A),r.forEach(d=>{l.append("input_keys",d)}),n.forEach(d=>{l.append("output_keys",d)}),s&&l.append("description",s),a&&l.append("data_type",a),i&&l.append("name",i),await(await this.caller.call(async()=>{const d=await this._fetch(o,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await q(d,"upload CSV"),d})).json()}async createDataset(e,{description:A,dataType:r,inputsSchema:n,outputsSchema:s,metadata:a}={}){const i={name:e,description:A,extra:a?{metadata:a}:void 0};r&&(i.data_type=r),n&&(i.inputs_schema_definition=n),s&&(i.outputs_schema_definition=s);const o=JSON.stringify(i);return await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await q(c,"create dataset"),c})).json()}async readDataset({datasetId:e,datasetName:A}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(e&&A)throw new Error("Must provide either datasetName or datasetId, not both");if(e)ae(e),r+=`/${e}`;else if(A)n.append("name",A);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,n);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${A}] not found`);a=s[0]}else a=s;return a}async hasDataset({datasetId:e,datasetName:A}){try{return await this.readDataset({datasetId:e,datasetName:A}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:A,fromVersion:r,toVersion:n}){let s=e;if(s===void 0&&A===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:A})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof n=="string"?n:n.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:A}){const r="/datasets";if(e===void 0)if(A!==void 0)e=(await this.readDataset({datasetName:A})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(i=>JSON.parse(i))}async*listDatasets({limit:e=100,offset:A=0,datasetIds:r,datasetName:n,datasetNameContains:s,metadata:a}={}){const i="/datasets",o=new URLSearchParams({limit:e.toString(),offset:A.toString()});if(r!==void 0)for(const l of r)o.append("id",l);n!==void 0&&o.append("name",n),s!==void 0&&o.append("name_contains",s),a!==void 0&&o.append("metadata",JSON.stringify(a));for await(const l of this._getPaginated(i,o))yield*l}async updateDataset(e){const{datasetId:A,datasetName:r,...n}=e;if(!A&&!r)throw new Error("Must provide either datasetName or datasetId");const s=A??(await this.readDataset({datasetName:r})).id;ae(s);const a=JSON.stringify(n);return await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(o,"update dataset"),o})).json()}async updateDatasetTag(e){const{datasetId:A,datasetName:r,asOf:n,tag:s}=e;if(!A&&!r)throw new Error("Must provide either datasetName or datasetId");const a=A??(await this.readDataset({datasetName:r})).id;ae(a);const i=JSON.stringify({as_of:typeof n=="string"?n:n.toISOString(),tag:s});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await q(o,"update dataset tags",!0),o})}async deleteDataset({datasetId:e,datasetName:A}){let r="/datasets",n=e;if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(A!==void 0&&(n=(await this.readDataset({datasetName:A})).id),n!==void 0)ae(n),r+=`/${n}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const s=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(s,`delete ${r}`,!0),s})}async indexDataset({datasetId:e,datasetName:A,tag:r}){let n=e;if(!n&&!A)throw new Error("Must provide either datasetName or datasetId");if(n&&A)throw new Error("Must provide either datasetName or datasetId, not both");n||(n=(await this.readDataset({datasetName:A})).id),ae(n);const a=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(o,"index dataset"),o})).json()}async similarExamples(e,A,r,{filter:n}={}){const s={limit:r,inputs:e};n!==void 0&&(s.filter=n),ae(A);const a=JSON.stringify(s);return(await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${A}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await q(l,"fetch similar examples"),l})).json()).examples}async createExample(e,A,r){var u;if(YB(e)&&(A!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let n=A?r==null?void 0:r.datasetId:e.dataset_id;const s=A?r==null?void 0:r.datasetName:e.dataset_name;if(n===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(n!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");n===void 0&&(n=(await this.readDataset({datasetName:s})).id);const a=(A?r==null?void 0:r.createdAt:e.created_at)||new Date;let i;YB(e)?i=e:i={inputs:e,outputs:A,created_at:a==null?void 0:a.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const o=await this._uploadExamplesMultipart(n,[i]);return await this.readExample(((u=o.example_ids)==null?void 0:u[0])??Et())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const m=e;let g=m[0].dataset_id;const B=m[0].dataset_name;if(g===void 0&&B===void 0)throw new Error("Must provide either datasetName or datasetId");if(g!==void 0&&B!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");g===void 0&&(g=(await this.readDataset({datasetName:B})).id);const _=await this._uploadExamplesMultipart(g,m);return await Promise.all(_.example_ids.map(C=>this.readExample(C)))}const{inputs:A,outputs:r,metadata:n,splits:s,sourceRunIds:a,useSourceRunIOs:i,useSourceRunAttachments:o,attachments:l,exampleIds:u,datasetId:c,datasetName:d}=e;if(A===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=c;const f=d;if(h===void 0&&f===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&f!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:f})).id);const w=A.map((m,g)=>({dataset_id:h,inputs:m,outputs:r==null?void 0:r[g],metadata:n==null?void 0:n[g],split:s==null?void 0:s[g],id:u==null?void 0:u[g],attachments:l==null?void 0:l[g],source_run_id:a==null?void 0:a[g],use_source_run_io:i==null?void 0:i[g],use_source_run_attachments:o==null?void 0:o[g]})),y=await this._uploadExamplesMultipart(h,w);return await Promise.all(y.example_ids.map(m=>this.readExample(m)))}async createLLMExample(e,A,r){return this.createExample({input:e},{output:A},r)}async createChatExample(e,A,r){const n=e.map(a=>HB(a)?NB(a):a),s=HB(A)?NB(A):A;return this.createExample({input:n},{output:s},r)}async readExample(e){ae(e);const A=`/examples/${e}`,r=await this._get(A),{attachment_urls:n,...s}=r,a=s;return n&&(a.attachments=Object.entries(n).reduce((i,[o,l])=>(i[o.slice(11)]={presigned_url:l.presigned_url,mime_type:l.mime_type},i),{})),a}async*listExamples({datasetId:e,datasetName:A,exampleIds:r,asOf:n,splits:s,inlineS3Urls:a,metadata:i,limit:o,offset:l,filter:u,includeAttachments:c}={}){let d;if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(A!==void 0)d=(await this.readDataset({datasetName:A})).id;else throw new Error("Must provide a datasetName or datasetId");const h=new URLSearchParams({dataset:d}),f=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;f&&h.append("as_of",f);const w=a??!0;if(h.append("inline_s3_urls",w.toString()),r!==void 0)for(const p of r)h.append("id",p);if(s!==void 0)for(const p of s)h.append("splits",p);if(i!==void 0){const p=JSON.stringify(i);h.append("metadata",p)}o!==void 0&&h.append("limit",o.toString()),l!==void 0&&h.append("offset",l.toString()),u!==void 0&&h.append("filter",u),c===!0&&["attachment_urls","outputs","metadata"].forEach(p=>h.append("select",p));let y=0;for await(const p of this._getPaginated("/examples",h)){for(const m of p){const{attachment_urls:g,...B}=m,_=B;g&&(_.attachments=Object.entries(g).reduce((v,[C,E])=>(v[C.slice(11)]={presigned_url:E.presigned_url,mime_type:E.mime_type||void 0},v),{})),yield _,y++}if(o!==void 0&&y>=o)break}}async deleteExample(e){ae(e);const A=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+A,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(r,`delete ${A}`,!0),r})}async updateExample(e,A){let r;A?r=e:r=e.id,ae(r);let n;A?n={id:r,...A}:n=e;let s;return n.dataset_id!==void 0?s=n.dataset_id:s=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(s,[n])}async updateExamples(e){let A;return e[0].dataset_id===void 0?A=(await this.readExample(e[0].id)).dataset_id:A=e[0].dataset_id,this._updateExamplesMultipart(A,e)}async readDatasetVersion({datasetId:e,datasetName:A,asOf:r,tag:n}){let s;if(e?s=e:s=(await this.readDataset({datasetName:A})).id,ae(s),r&&n||!r&&!n)throw new Error("Exactly one of asOf and tag must be specified.");const a=new URLSearchParams;return r!==void 0&&a.append("as_of",typeof r=="string"?r:r.toISOString()),n!==void 0&&a.append("tag",n),await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${s}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(o,"read dataset version"),o})).json()}async listDatasetSplits({datasetId:e,datasetName:A,asOf:r}){let n;if(e===void 0&&A===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?n=(await this.readDataset({datasetName:A})).id:n=e,ae(n);const s=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&s.append("as_of",a),await this._get(`/datasets/${n}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:A,splitName:r,exampleIds:n,remove:s=!1}){let a;if(e===void 0&&A===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:A})).id:a=e,ae(a);const i={split_name:r,examples:n.map(l=>(ae(l),l)),remove:s},o=JSON.stringify(i);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await q(l,"update dataset splits",!0),l})}async evaluateRun(e,A,{sourceInfo:r,loadChildRuns:n,referenceExample:s}={loadChildRuns:!1}){KE("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:n});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));const i=await A.evaluateRun(a,s),[o,l]=await this._logEvaluationFeedback(i,a,r);return l[0]}async createFeedback(e,A,{score:r,value:n,correction:s,comment:a,sourceInfo:i,feedbackSourceType:o="api",sourceRunId:l,feedbackId:u,feedbackConfig:c,projectId:d,comparativeExperimentId:h}){var m;if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const f={type:o??"api",metadata:i??{}};l!==void 0&&(f==null?void 0:f.metadata)!==void 0&&!f.metadata.__run&&(f.metadata.__run={run_id:l}),(f==null?void 0:f.metadata)!==void 0&&((m=f.metadata.__run)==null?void 0:m.run_id)!==void 0&&ae(f.metadata.__run.run_id);const w={id:u??Et(),run_id:e,key:A,score:ZB(r),value:n,correction:s,comment:a,feedback_source:f,comparative_experiment_id:h,feedbackConfig:c,session_id:d},y=JSON.stringify(w),p=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const g=await this._fetch(p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await q(g,"create feedback",!0),g}),w}async updateFeedback(e,{score:A,value:r,correction:n,comment:s}){const a={};A!=null&&(a.score=ZB(A)),r!=null&&(a.value=r),n!=null&&(a.correction=n),s!=null&&(a.comment=s),ae(e);const i=JSON.stringify(a);await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await q(o,"update feedback",!0),o})}async readFeedback(e){ae(e);const A=`/feedback/${e}`;return await this._get(A)}async deleteFeedback(e){ae(e);const A=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+A,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(r,`delete ${A}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:A,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e)for(const s of e)ae(s),n.append("run",s);if(A)for(const s of A)n.append("key",s);if(r)for(const s of r)n.append("source",s);for await(const s of this._getPaginated("/feedback",n))yield*s}async createPresignedFeedbackToken(e,A,{expiration:r,feedbackConfig:n}={}){const s={run_id:e,feedback_key:A,feedback_config:n};r?typeof r=="string"?s.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(s.expires_in=r):s.expires_in={hours:3};const a=JSON.stringify(s);return await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(o,"create presigned feedback token"),o})).json()}async createComparativeExperiment({name:e,experimentIds:A,referenceDatasetId:r,createdAt:n,description:s,metadata:a,id:i}){var c;if(A.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:A[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const o={id:i,name:e,experiment_ids:A,reference_dataset_id:r,description:s,created_at:(c=n??new Date)==null?void 0:c.toISOString(),extra:{}};a&&(o.extra.metadata=a);const l=JSON.stringify(o);return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await q(d,"create comparative experiment"),d})).json()}async*listPresignedFeedbackTokens(e){ae(e);const A=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",A))yield*r}_selectEvalResults(e){let A;return"results"in e?A=e.results:Array.isArray(e)?A=e:A=[e],A}async _logEvaluationFeedback(e,A,r){const n=this._selectEvalResults(e),s=[];for(const a of n){let i=r||{};a.evaluatorInfo&&(i={...a.evaluatorInfo,...i});let o=null;a.targetRunId?o=a.targetRunId:A&&(o=A.id),s.push(await this.createFeedback(o,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:i,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[n,s]}async logEvaluationFeedback(e,A,r){const[n]=await this._logEvaluationFeedback(e,A,r);return n}async*listAnnotationQueues(e={}){const{queueIds:A,name:r,nameContains:n,limit:s}=e,a=new URLSearchParams;A&&A.forEach((o,l)=>{ae(o,`queueIds[${l}]`),a.append("ids",o)}),r&&a.append("name",r),n&&a.append("name_contains",n),a.append("limit",(s!==void 0?Math.min(s,100):100).toString());let i=0;for await(const o of this._getPaginated("/annotation-queues",a))if(yield*o,i++,s!==void 0&&i>=s)break}async createAnnotationQueue(e){const{name:A,description:r,queueId:n,rubricInstructions:s}=e,a={name:A,description:r,id:n||Et(),rubric_instructions:s},i=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([l,u])=>u!==void 0)));return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await q(l,"create annotation queue"),l})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,A){const{name:r,description:n,rubricInstructions:s}=A,a=JSON.stringify({name:r,description:n,rubric_instructions:s});await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(i,"update annotation queue",!0),i})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(A,"delete annotation queue",!0),A})}async addRunsToAnnotationQueue(e,A){const r=JSON.stringify(A.map((n,s)=>ae(n,`runIds[${s}]`).toString()));await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await q(n,"add runs to annotation queue",!0),n})}async getRunFromAnnotationQueue(e,A){const r=`/annotation-queues/${ae(e,"queueId")}/run`;return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}/${A}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(s,"get run from annotation queue"),s})).json()}async deleteRunFromAnnotationQueue(e,A){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/runs/${ae(A,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const A=await this._getSettings();return e=="-"||A.tenant_handle===e}async _ownerConflictError(e,A){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${A}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(n,"get latest commit hash"),n})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,A){const[r,n,s]=Qr(e),a=JSON.stringify({like:A});return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(o,`${A?"like":"unlike"} prompt`),o})).json()}async _getPromptUrl(e){const[A,r,n]=Qr(e);if(await this._currentTenantIsOwner(A)){const s=await this._getSettings();return n!=="latest"?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${s.id}`}else return n!=="latest"?`${this.getHostUrl()}/hub/${A}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${A}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const A of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*A}async*listPrompts(e){const A=new URLSearchParams;A.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),A.append("sort_direction","desc"),A.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&A.append("is_public",e.isPublic.toString()),e!=null&&e.query&&A.append("query",e.query);for await(const r of this._getPaginated("/repos",A,n=>n.repos))yield*r}async getPrompt(e){const[A,r,n]=Qr(e),s=await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/repos/${A}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(i==null?void 0:i.status)===404?null:(await q(i,"get prompt"),i)}),a=await(s==null?void 0:s.json());return a!=null&&a.repo?a.repo:null}async createPrompt(e,A){const r=await this._getSettings();if(A!=null&&A.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[n,s,a]=Qr(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("create a prompt",n);const i={repo_handle:s,...(A==null?void 0:A.description)&&{description:A.description},...(A==null?void 0:A.readme)&&{readme:A.readme},...(A==null?void 0:A.tags)&&{tags:A.tags},is_public:!!(A!=null&&A.isPublic)},o=JSON.stringify(i),l=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await q(c,"create prompt"),c}),{repo:u}=await l.json();return u}async createCommit(e,A,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,s,a]=Qr(e),i=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${n}/${s}`):r==null?void 0:r.parentCommitHash,o={manifest:JSON.parse(JSON.stringify(A)),parent_commit:i},l=JSON.stringify(o),c=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/commits/${n}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await q(d,"create commit"),d})).json();return this._getPromptUrl(`${n}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,A=[]){return this._updateExamplesMultipart(e,A)}async _updateExamplesMultipart(e,A=[]){var a;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of A){const o=i.id,l={...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split}},u=Vt(l,`Serializing body for example with id: ${o}`),c=new Blob([u],{type:"application/json"});if(r.append(o,c),i.inputs){const d=Vt(i.inputs,`Serializing inputs for example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.inputs`,h)}if(i.outputs){const d=Vt(i.outputs,`Serializing outputs whle updating example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.outputs`,h)}if(i.attachments)for(const[d,h]of Object.entries(i.attachments)){let f,w;Array.isArray(h)?[f,w]=h:(f=h.mimeType,w=h.data);const y=new Blob([w],{type:`${f}; length=${w.byteLength}`});r.append(`${o}.attachment.${d}`,y)}if(i.attachments_operations){const d=Vt(i.attachments_operations,`Serializing attachments while updating example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.attachments_operations`,h)}}const n=e??((a=A[0])==null?void 0:a.dataset_id);return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${n}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await q(i,"update examples"),i})).json()}async uploadExamplesMultipart(e,A=[]){return this._uploadExamplesMultipart(e,A)}async _uploadExamplesMultipart(e,A=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const s of A){const a=(s.id??Et()).toString(),i={created_at:s.created_at,...s.metadata&&{metadata:s.metadata},...s.split&&{split:s.split},...s.source_run_id&&{source_run_id:s.source_run_id},...s.use_source_run_io&&{use_source_run_io:s.use_source_run_io},...s.use_source_run_attachments&&{use_source_run_attachments:s.use_source_run_attachments}},o=Vt(i,`Serializing body for uploaded example with id: ${a}`),l=new Blob([o],{type:"application/json"});if(r.append(a,l),s.inputs){const u=Vt(s.inputs,`Serializing inputs for uploaded example with id: ${a}`),c=new Blob([u],{type:"application/json"});r.append(`${a}.inputs`,c)}if(s.outputs){const u=Vt(s.outputs,`Serializing outputs for uploaded example with id: ${a}`),c=new Blob([u],{type:"application/json"});r.append(`${a}.outputs`,c)}if(s.attachments)for(const[u,c]of Object.entries(s.attachments)){let d,h;Array.isArray(c)?[d,h]=c:(d=c.mimeType,h=c.data);const f=new Blob([h],{type:`${d}; length=${h.byteLength}`});r.append(`${a}.attachment.${u}`,f)}}return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await q(s,"upload examples"),s})).json()}async updatePrompt(e,A){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n]=Qr(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const s={};if((A==null?void 0:A.description)!==void 0&&(s.description=A.description),(A==null?void 0:A.readme)!==void 0&&(s.readme=A.readme),(A==null?void 0:A.tags)!==void 0&&(s.tags=A.tags),(A==null?void 0:A.isPublic)!==void 0&&(s.is_public=A.isPublic),(A==null?void 0:A.isArchived)!==void 0&&(s.is_archived=A.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");const a=JSON.stringify(s);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await q(o,"update prompt"),o})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[A,r,n]=Qr(e);if(!await this._currentTenantIsOwner(A))throw await this._ownerConflictError("delete a prompt",A);return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/repos/${A}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(a,"delete prompt"),a})).json()}async pullPromptCommit(e,A){const[r,n,s]=Qr(e),i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/commits/${r}/${n}/${s}${A!=null&&A.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q(o,"pull prompt commit"),o})).json();return{owner:r,repo:n,commit_hash:i.commit_hash,manifest:i.manifest,examples:i.examples}}async _pullPrompt(e,A){const r=await this.pullPromptCommit(e,{includeModel:A==null?void 0:A.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,A){return await this.promptExists(e)?A&&Object.keys(A).some(n=>n!=="object")&&await this.updatePrompt(e,{description:A==null?void 0:A.description,readme:A==null?void 0:A.readme,tags:A==null?void 0:A.tags,isPublic:A==null?void 0:A.isPublic}):await this.createPrompt(e,{description:A==null?void 0:A.description,readme:A==null?void 0:A.readme,tags:A==null?void 0:A.tags,isPublic:A==null?void 0:A.isPublic}),A!=null&&A.object?await this.createCommit(e,A==null?void 0:A.object,{parentCommitHash:A==null?void 0:A.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,A={}){const{sourceApiUrl:r=this.apiUrl,datasetName:n}=A,[s,a]=this.parseTokenOrUrl(e,r),i=new Xi({apiUrl:s,apiKey:"placeholder"}),o=await i.readSharedDataset(a),l=n||o.name;try{if(await this.hasDataset({datasetId:l})){console.log(`Dataset ${l} already exists in your tenant. Skipping.`);return}}catch{}const u=await i.listSharedExamples(a),c=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(d=>d.inputs),outputs:u.flatMap(d=>d.outputs?[d.outputs]:[]),datasetId:c.id})}catch(d){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),d}}parseTokenOrUrl(e,A,r=2,n="dataset"){try{return ae(e),[A,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(i=>i!=="");if(a.length>=r){const i=a[a.length-r];return[A,i]}else throw new Error(`Invalid public ${n} URL: ${e}`)}catch{throw new Error(`Invalid public ${n} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,A;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((A=(e=rP())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:A.forceFlush())}}function YB(t){return"dataset_id"in t||"dataset_name"in t}const CH=t=>!!["TRACING_V2","TRACING"].find(A=>Rt(A)==="true"),Bf=Symbol.for("lc:context_variables");function bH(t){return t.replace(/[-:.]/g,"")}function ZE(t,e,A=1){const r=A.toFixed(0).slice(0,3).padStart(3,"0"),n=`${new Date(t).toISOString().slice(0,-1)}${r}Z`;return{dottedOrder:bH(n)+e,microsecondPrecisionDatestring:n}}class Vu{constructor(e,A,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=A,this.project_name=r,this.replicas=n}static fromHeader(e){const A=e.split(",");let r={},n=[],s,a;for(const i of A){const[o,l]=i.split("="),u=decodeURIComponent(l);o==="langsmith-metadata"?r=JSON.parse(u):o==="langsmith-tags"?n=u.split(","):o==="langsmith-project"?s=u:o==="langsmith-replicas"&&(a=JSON.parse(u))}return new Vu(r,n,s,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class xt{constructor(e){var i;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),EH(e)){Object.assign(this,{...e});return}const A=xt.getDefaultConfig(),{metadata:r,...n}=e,s=n.client??xt.getSharedClient(),a={...r,...(i=n==null?void 0:n.extra)==null?void 0:i.metadata};if(n.extra={...n.extra,metadata:a},Object.assign(this,{...A,...n,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=SH(this.replicas),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const{dottedOrder:o,microsecondPrecisionDatestring:l}=ZE(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+o:this.dotted_order=o,this._serialized_start_time=l}}set metadata(e){var A;this.extra={...this.extra,metadata:{...(A=this.extra)==null?void 0:A.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:Et(),run_type:"chain",project_name:TE(),child_runs:[],api_url:YA("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:YA("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return xt.sharedClient||(xt.sharedClient=new Xi),xt.sharedClient}createChild(e){var o,l,u,c,d,h;const A=this.child_execution_order+1,r=new xt({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:A,child_execution_order:A});Bf in this&&(r[Bf]=this[Bf]);const n=Symbol.for("lc:child_config"),s=((o=e.extra)==null?void 0:o[n])??this.extra[n];if(UH(s)){const f={...s},w=QH(f.callbacks)?(u=(l=f.callbacks).copy)==null?void 0:u.call(l):void 0;w&&(Object.assign(w,{_parentRunId:r.id}),(h=(d=(c=w.handlers)==null?void 0:c.find(XE))==null?void 0:d.updateFromRunTree)==null||h.call(d,r),f.callbacks=w),r.extra[n]=f}const a=new Set;let i=this;for(;i!=null&&!a.has(i.id);)a.add(i.id),i.child_execution_order=Math.max(i.child_execution_order,A),i=i.parent_run;return this.child_runs.push(r),r}async end(e,A,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??A,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,A,r=!0){var i,o;const n=e.extra??{};if(((i=n==null?void 0:n.runtime)==null?void 0:i.library)===void 0&&(n.runtime||(n.runtime={}),A))for(const[l,u]of Object.entries(A))n.runtime[l]||(n.runtime[l]=u);let s,a;return r?(a=((o=e.parent_run)==null?void 0:o.id)??e.parent_run_id,s=[]):(s=e.child_runs.map(l=>this._convertToCreate(l,A,r)),a=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:n,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,A,r=!0){const n=this._convertToCreate(this,A,r);if(e===this.project_name)return n;const s=c=>IB(`${c}:${e}`,IB.DNS),a=s(n.id),i=n.trace_id?s(n.trace_id):void 0,o=n.parent_run_id?s(n.parent_run_id):void 0;let l;if(n.dotted_order){const c=FH(n.dotted_order),d=[];for(let f=0;f<c.length-1;f++){const[w,y]=c[f],p=s(y);d.push(w.toISOString().replace(/[-:]/g,"").replace(".","")+p)}const[h]=c[c.length-1];d.push(h.toISOString().replace(/[-:]/g,"").replace(".","")+a),l=d.join(".")}else l=void 0;return{...n,id:a,trace_id:i,parent_run_id:o,dotted_order:l,session_name:e}}async postRun(e=!0){try{const A=LE();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:n,apiUrl:s,workspaceId:a}of this.replicas){const i=this._remapForProject(r??this.project_name,A,!0);await this.client.createRun(i,{apiKey:n,apiUrl:s,workspaceId:a})}else{const r=this._convertToCreate(this,A,e);await this.client.createRun(r)}if(!e){KE("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(A){console.error(`Error in postRun for run ${this.id}:`,A)}}async patchRun(e){var A;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:n,apiUrl:s,workspaceId:a,updates:i}of this.replicas){const o=this._remapForProject(r??this.project_name),l={id:o.id,outputs:o.outputs,error:o.error,parent_run_id:o.parent_run_id,session_name:o.session_name,reference_example_id:o.reference_example_id,end_time:o.end_time,dotted_order:o.dotted_order,trace_id:o.trace_id,events:o.events,tags:o.tags,extra:o.extra,attachments:this.attachments,...i};e!=null&&e.excludeInputs||(l.inputs=o.inputs),await this.client.updateRun(o.id,l,{apiKey:n,apiUrl:s,workspaceId:a})}else try{const r={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((A=this.parent_run)==null?void 0:A.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,A){var l,u,c,d;const r=e==null?void 0:e.callbacks;let n,s,a,i=CH();if(r){const h=((l=r==null?void 0:r.getParentRunId)==null?void 0:l.call(r))??"",f=(u=r==null?void 0:r.handlers)==null?void 0:u.find(w=>(w==null?void 0:w.name)=="langchain_tracer");n=(c=f==null?void 0:f.getRun)==null?void 0:c.call(f,h),s=f==null?void 0:f.projectName,a=f==null?void 0:f.client,i=i||!!f}return n?new xt({name:n.name,id:n.id,trace_id:n.trace_id,dotted_order:n.dotted_order,client:a,tracingEnabled:i,project_name:s,tags:[...new Set(((n==null?void 0:n.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(d=n==null?void 0:n.extra)==null?void 0:d.metadata,...e==null?void 0:e.metadata}}}).createChild(A):new xt({...A,client:a,tracingEnabled:i,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,A){var l;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||typeof n!="string")return;const s=n.trim(),a=s.split(".").map(u=>{const[c,d]=u.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:d}}),i=a[0].uuid,o={...A,name:(A==null?void 0:A.name)??"parent",run_type:(A==null?void 0:A.run_type)??"chain",start_time:(A==null?void 0:A.start_time)??Date.now(),id:(l=a.at(-1))==null?void 0:l.uuid,trace_id:i,dotted_order:s};if(r.baggage&&typeof r.baggage=="string"){const u=Vu.fromHeader(r.baggage);o.metadata=u.metadata,o.tags=u.tags,o.project_name=u.project_name,o.replicas=u.replicas}return new xt(o)}toHeaders(e){var r;const A={"langsmith-trace":this.dotted_order,baggage:new Vu((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[n,s]of Object.entries(A))e.set(n,s);return A}}Object.defineProperty(xt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function EH(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function XE(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function qB(t){return Array.isArray(t)&&t.some(e=>XE(e))}function QH(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function UH(t){var e;return t!=null&&typeof t.callbacks=="object"&&(qB((e=t.callbacks)==null?void 0:e.handlers)||qB(t.callbacks))}function FH(t){return t.split(".").map(A=>{const r=A.slice(0,-36),n=A.slice(-36),s=parseInt(r.slice(0,4)),a=parseInt(r.slice(4,6))-1,i=parseInt(r.slice(6,8)),o=parseInt(r.slice(9,11)),l=parseInt(r.slice(11,13)),u=parseInt(r.slice(13,15)),c=parseInt(r.slice(15,21));return[new Date(s,a,i,o,l,u,c/1e3),n]})}function IH(){const t=YA("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const A=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}A.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return A}else if(typeof e=="object"&&e!==null){xH(e);const A=[];for(const[r,n]of Object.entries(e)){const s=r.replace(/\/$/,"");if(typeof n=="string")A.push({apiUrl:s,apiKey:n});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof n}`);continue}}return A}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(uH(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function SH(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):IH()}function xH(t){if(Object.keys(t).length>0&&Rt("ENDPOINT"))throw new lH}var _f={};const TH=()=>typeof window<"u"&&typeof window.document<"u",OH=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",kH=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),og=()=>typeof Deno<"u",RH=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!og(),LH=()=>{let t;return TH()?t="browser":RH()?t="node":OH()?t="webworker":kH()?t="jsdom":og()?t="deno":t="other",t};let vf;function PH(){return vf===void 0&&(vf={library:"langchain-js",runtime:LH()}),vf}function nn(t){try{return typeof process<"u"?_f==null?void 0:_f[t]:og()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}class HH{}function NH(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}class po extends HH{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,pE(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:nn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Kn.prototype.toJSON.call(this)}toJSONNotImplemented(){return Kn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class A extends po{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Et()}),Object.assign(this,e)}}return new A}}const DH=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},MH=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function vp(t,e){if(t)return new xt({...t,start_time:t._serialized_start_time??t.start_time,parent_run:vp(e),child_runs:t.child_runs.map(A=>vp(A)).filter(A=>A!==void 0),extra:{...t.extra,runtime:PH()},tracingEnabled:!1})}function Cf(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Ta(t){return typeof t._addRunToRunMap=="function"}class mo extends po{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?MH(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,A){e.child_runs.push(A)}_addRunToRunMap(e){const{dottedOrder:A,microsecondPrecisionDatestring:r}=ZE(new Date(e.start_time).getTime(),e.id,e.execution_order),n={...e},s=this.getRunById(n.parent_run_id);if(n.parent_run_id!==void 0?s&&(this._addChildRun(s,n),s.child_execution_order=Math.max(s.child_execution_order,n.child_execution_order),n.trace_id=s.trace_id,s.dotted_order!==void 0&&(n.dotted_order=[s.dotted_order,A].join("."),n._serialized_start_time=r)):(n.trace_id=n.id,n.dotted_order=A,n._serialized_start_time=r),this.usesRunTreeMap){const a=vp(n,s);a!==void 0&&this.runTreeMap.set(n.id,a)}else this.runMap.set(n.id,n);return n}async _endTrace(e){var r;const A=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);A?A.child_execution_order=Math.max(A.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const A=e!==void 0&&this.getRunById(e);return A?A.child_execution_order+1:1}_createRunForLLMStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c=i?{...s,metadata:i}:s,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:A},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForLLMStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onLLMStart)==null?void 0:c.call(this,l)),l}_createRunForChatModelStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c=i?{...s,metadata:i}:s,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:A},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForChatModelStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onLLMStart)==null?void 0:c.call(this,l)),l}async handleLLMEnd(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await((i=this.onLLMEnd)==null?void 0:i.call(this,a)),await this._endTrace(a),a}async handleLLMError(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await((i=this.onLLMError)==null?void 0:i.call(this,a)),await this._endTrace(a),a}_createRunForChainStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:A,execution_order:l,child_execution_order:l,run_type:i??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleChainStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForChainStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onChainStart)==null?void 0:c.call(this,l)),l}async handleChainEnd(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Cf(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Cf(s.inputs,"input")),await((i=this.onChainEnd)==null?void 0:i.call(this,a)),await this._endTrace(a),a}async handleChainError(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Cf(s.inputs,"input")),await((i=this.onChainError)==null?void 0:i.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,A,r,n,s,a,i){const o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:A},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(u)}async handleToolStart(e,A,r,n,s,a,i){var l,u;const o=this.getRunById(r)??this._createRunForToolStart(e,A,r,n,s,a,i);return await((l=this.onRunCreate)==null?void 0:l.call(this,o)),await((u=this.onToolStart)==null?void 0:u.call(this,o)),o}async handleToolEnd(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((n=this.onToolEnd)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleToolError(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((n=this.onToolError)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,A){var s;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,A){var n;const r=this.getRunById(A);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((n=this.onAgentEnd)==null?void 0:n.call(this,r)))}_createRunForRetrieverStart(e,A,r,n,s,a,i){const o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:A},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,A,r,n,s,a,i){var l,u;const o=this.getRunById(r)??this._createRunForRetrieverStart(e,A,r,n,s,a,i);return await((l=this.onRunCreate)==null?void 0:l.call(this,o)),await((u=this.onRetrieverStart)==null?void 0:u.call(this,o)),o}async handleRetrieverEnd(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((n=this.onRetrieverEnd)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((n=this.onRetrieverError)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleText(e,A){var n;const r=this.getRunById(A);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((n=this.onText)==null?void 0:n.call(this,r)))}async handleLLMNewToken(e,A,r,n,s,a){var o;const i=this.getRunById(r);if(!i||(i==null?void 0:i.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return i.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:A,chunk:a==null?void 0:a.chunk}}),await((o=this.onLLMNewToken)==null?void 0:o.call(this,i,e,{chunk:a==null?void 0:a.chunk})),i}}var lg={exports:{}};lg.exports;(function(t){const A=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,r=(s=0)=>(a,i,o)=>`\x1B[${38+s};2;${a};${i};${o}m`;function n(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[i,o]of Object.entries(a)){for(const[l,u]of Object.entries(o))a[l]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[l]=a[l],s.set(u[0],u[1]);Object.defineProperty(a,i,{value:o,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=A(),a.color.ansi16m=r(),a.bgColor.ansi256=A(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(i,o,l)=>i===o&&o===l?i<8?16:i>248?231:Math.round((i-8)/247*24)+232:16+36*Math.round(i/255*5)+6*Math.round(o/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:i=>{const o=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(i.toString(16));if(!o)return[0,0,0];let{colorString:l}=o.groups;l.length===3&&(l=l.split("").map(c=>c+c).join(""));const u=Number.parseInt(l,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:i=>a.rgbToAnsi256(...a.hexToRgb(i)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:n})})(lg);var $H=lg.exports;const YE=tc($H);function Bt(t,e){return`${t.open}${e}${t.close}`}function rA(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function e_(t){return typeof t=="string"?t.trim():t==null?t:rA(t,t.toString())}function Ur(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:St}=YE;class t_ extends mo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const A=[];let r=e;for(;r.parent_run_id;){const n=this.runMap.get(r.parent_run_id);if(n)A.push(n),r=n;else break}return A}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((n,s,a)=>{const i=`${n.execution_order}:${n.run_type}:${n.name}`;return s===a.length-1?Bt(YE.bold,i):i}).join(" > ");return Bt(St.grey,r)}onChainStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[chain/start]")} [${A}] Entering Chain run with input: ${rA(e.inputs,"[inputs]")}`)}onChainEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[chain/end]")} [${A}] [${Ur(e)}] Exiting Chain run with output: ${rA(e.outputs,"[outputs]")}`)}onChainError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[chain/error]")} [${A}] [${Ur(e)}] Chain run errored with error: ${rA(e.error,"[error]")}`)}onLLMStart(e){const A=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(n=>n.trim())}:e.inputs;console.log(`${Bt(St.green,"[llm/start]")} [${A}] Entering LLM run with input: ${rA(r,"[inputs]")}`)}onLLMEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[llm/end]")} [${A}] [${Ur(e)}] Exiting LLM run with output: ${rA(e.outputs,"[response]")}`)}onLLMError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[llm/error]")} [${A}] [${Ur(e)}] LLM run errored with error: ${rA(e.error,"[error]")}`)}onToolStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[tool/start]")} [${A}] Entering Tool run with input: "${e_(e.inputs.input)}"`)}onToolEnd(e){var r;const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[tool/end]")} [${A}] [${Ur(e)}] Exiting Tool run with output: "${e_((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[tool/error]")} [${A}] [${Ur(e)}] Tool run errored with error: ${rA(e.error,"[error]")}`)}onRetrieverStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[retriever/start]")} [${A}] Entering Retriever run with input: ${rA(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[retriever/end]")} [${A}] [${Ur(e)}] Exiting Retriever run with output: ${rA(e.outputs,"[outputs]")}`)}onRetrieverError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[retriever/error]")} [${A}] [${Ur(e)}] Retriever run errored with error: ${rA(e.error,"[error]")}`)}onAgentAction(e){const A=e,r=this.getBreadcrumbs(e);console.log(`${Bt(St.blue,"[agent/action]")} [${r}] Agent selected action: ${rA(A.actions[A.actions.length-1],"[action]")}`)}}let bf;const jH=()=>{if(bf===void 0){const t=nn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};bf=new Xi(t)}return bf};class Ci extends mo{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:A,projectName:r,client:n,replicas:s}=e;this.projectName=r??TE(),this.replicas=s,this.exampleId=A,this.client=n??jH();const a=Ci.getTraceableRunTree();a&&this.updateFromRunTree(a)}async persistRun(e){}async onRunCreate(e){const A=this.getRunTreeWithTracingConfig(e.id);await(A==null?void 0:A.postRun())}async onRunUpdate(e){const A=this.getRunTreeWithTracingConfig(e.id);await(A==null?void 0:A.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let A=e;const r=new Set;for(;A.parent_run&&!(r.has(A.id)||(r.add(A.id),!A.parent_run));)A=A.parent_run;r.clear();const n=[A];for(;n.length>0;){const s=n.shift();!s||r.has(s.id)||(r.add(s.id),this.runTreeMap.set(s.id,s),s.child_runs&&n.push(...s.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const A=this.runTreeMap.get(e);if(A)return new xt({...A,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return sL(!0)}catch{return}}}const qE=Symbol.for("ls:tracing_async_local_storage"),Wl=Symbol.for("lc:context_variables"),KH=t=>{globalThis[qE]=t},Yi=()=>globalThis[qE];let bi;function GH(){const t="default"in fr?fr.default:fr;return new t({autoStart:!0,concurrency:1})}function VH(){return typeof bi>"u"&&(bi=GH()),bi}async function Je(t,e){if(e===!0){const A=Yi();A!==void 0?await A.run(void 0,async()=>t()):await t()}else bi=VH(),bi.add(async()=>{const A=Yi();A!==void 0?await A.run(void 0,async()=>t()):await t()})}const zH=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(A=>nn(A)==="true");function eQ(t){var r;const e=Yi();if(e===void 0)return;const A=e.getStore();return(r=A==null?void 0:A[Wl])==null?void 0:r[t]}const WH=Symbol("lc:configure_hooks"),JH=()=>eQ(WH)||[];class ZH{setHandler(e){return this.setHandlers([e])}}class Vc{constructor(e,A,r,n,s,a,i,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;try{await((r=A.handleText)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleText: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleCustomEvent(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;try{await((i=a.handleCustomEvent)==null?void 0:i.call(a,e,A,this.runId,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}}class XH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreRetriever)try{await((r=A.handleRetrieverEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleRetriever`),A.raiseError)throw n}},A.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreRetriever)try{await((r=A.handleRetrieverError)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleRetrieverError: ${n}`),A.raiseError)throw e}},A.awaitHandlers)))}}class A_ extends Vc{async handleLLMNewToken(e,A,r,n,s,a){await Promise.all(this.handlers.map(i=>Je(async()=>{var o;if(!i.ignoreLLM)try{await((o=i.handleLLMNewToken)==null?void 0:o.call(i,e,A??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(l){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMNewToken: ${l}`),i.raiseError)throw l}},i.awaitHandlers)))}async handleLLMError(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreLLM)try{await((i=a.handleLLMError)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleLLMEnd(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreLLM)try{await((i=a.handleLLMEnd)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}}class YH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleChainError(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreChain)try{await((i=a.handleChainError)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleChainEnd(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreChain)try{await((i=a.handleChainEnd)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleAgentAction)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleAgentAction: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleAgentEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleAgentEnd: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}}class qH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleToolError(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleToolError)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleToolError: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleToolEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleToolEnd: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}}class Pt extends ZH{constructor(e,A){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(A==null?void 0:A.handlers)??this.handlers,this.inheritableHandlers=(A==null?void 0:A.inheritableHandlers)??this.inheritableHandlers,this.tags=(A==null?void 0:A.tags)??this.tags,this.inheritableTags=(A==null?void 0:A.inheritableTags)??this.inheritableTags,this.metadata=(A==null?void 0:A.metadata)??this.metadata,this.inheritableMetadata=(A==null?void 0:A.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,A,r=void 0,n=void 0,s=void 0,a=void 0,i=void 0,o=void 0){return Promise.all(A.map(async(l,u)=>{const c=u===0&&r?r:Et();return await Promise.all(this.handlers.map(d=>{if(!d.ignoreLLM)return Ta(d)&&d._createRunForLLMStart(e,[l],c,this._parentRunId,s,this.tags,this.metadata,o),Je(async()=>{var h;try{await((h=d.handleLLMStart)==null?void 0:h.call(d,e,[l],c,this._parentRunId,s,this.tags,this.metadata,o))}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMStart: ${f}`),d.raiseError)throw f}},d.awaitHandlers)})),new A_(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,A,r=void 0,n=void 0,s=void 0,a=void 0,i=void 0,o=void 0){return Promise.all(A.map(async(l,u)=>{const c=u===0&&r?r:Et();return await Promise.all(this.handlers.map(d=>{if(!d.ignoreLLM)return Ta(d)&&d._createRunForChatModelStart(e,[l],c,this._parentRunId,s,this.tags,this.metadata,o),Je(async()=>{var h,f;try{if(d.handleChatModelStart)await((h=d.handleChatModelStart)==null?void 0:h.call(d,e,[l],c,this._parentRunId,s,this.tags,this.metadata,o));else if(d.handleLLMStart){const w=BE(l);await((f=d.handleLLMStart)==null?void 0:f.call(d,e,[w],c,this._parentRunId,s,this.tags,this.metadata,o))}}catch(w){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMStart: ${w}`),d.raiseError)throw w}},d.awaitHandlers)})),new A_(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreChain)return Ta(o)&&o._createRunForChainStart(e,A,r,this._parentRunId,this.tags,this.metadata,n,i),Je(async()=>{var l;try{await((l=o.handleChainStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,n,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new YH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreAgent)return Ta(o)&&o._createRunForToolStart(e,A,r,this._parentRunId,this.tags,this.metadata,i),Je(async()=>{var l;try{await((l=o.handleToolStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleToolStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new qH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreRetriever)return Ta(o)&&o._createRunForRetrieverStart(e,A,r,this._parentRunId,this.tags,this.metadata,i),Je(async()=>{var l;try{await((l=o.handleRetrieverStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleRetrieverStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new XH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreCustomEvent)try{await((i=a.handleCustomEvent)==null?void 0:i.call(a,e,A,r,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}addHandler(e,A=!0){this.handlers.push(e),A&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(A=>A!==e),this.inheritableHandlers=this.inheritableHandlers.filter(A=>A!==e)}setHandlers(e,A=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,A)}addTags(e,A=!0){this.removeTags(e),this.tags.push(...e),A&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(A=>!e.includes(A)),this.inheritableTags=this.inheritableTags.filter(A=>!e.includes(A))}addMetadata(e,A=!0){this.metadata={...this.metadata,...e},A&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const A of Object.keys(e))delete this.metadata[A],delete this.inheritableMetadata[A]}copy(e=[],A=!0){const r=new Pt(this._parentRunId);for(const n of this.handlers){const s=this.inheritableHandlers.includes(n);r.addHandler(n,s)}for(const n of this.tags){const s=this.inheritableTags.includes(n);r.addTags([n],s)}for(const n of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(n);r.addMetadata({[n]:this.metadata[n]},s)}for(const n of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===n.name)||r.addHandler(n,A);return r}static fromHandlers(e){class A extends po{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Et()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new A),r}static configure(e,A,r,n,s,a,i){return this._configureSync(e,A,r,n,s,a,i)}static _configureSync(e,A,r,n,s,a,i){var d;let o;(e||A)&&(Array.isArray(e)||!e?(o=new Pt,o.setHandlers((e==null?void 0:e.map(zu))??[],!0)):o=e,o=o.copy(Array.isArray(A)?A.map(zu):A==null?void 0:A.handlers,!1));const l=nn("LANGCHAIN_VERBOSE")==="true"||(i==null?void 0:i.verbose),u=((d=Ci.getTraceableRunTree())==null?void 0:d.tracingEnabled)||zH(),c=u||(nn("LANGCHAIN_TRACING")??!1);if(l||c){if(o||(o=new Pt),l&&!o.handlers.some(h=>h.name===t_.prototype.name)){const h=new t_;o.addHandler(h,!0)}if(c&&!o.handlers.some(h=>h.name==="langchain_tracer")&&u){const h=new Ci;o.addHandler(h,!0)}if(u){const h=Ci.getTraceableRunTree();if(h&&o._parentRunId===void 0){o._parentRunId=h.id;const f=o.handlers.find(w=>w.name==="langchain_tracer");f==null||f.updateFromRunTree(h)}}}for(const{contextVar:h,inheritable:f=!0,handlerClass:w,envVar:y}of JH()){const p=y&&nn(y)==="true"&&w;let m;const g=h!==void 0?eQ(h):void 0;g&&DH(g)?m=g:p&&(m=new w({})),m!==void 0&&(o||(o=new Pt),o.handlers.some(B=>B.name===m.name)||o.addHandler(m,f))}return(r||n)&&o&&(o.addTags(r??[]),o.addTags(n??[],!1)),(s||a)&&o&&(o.addMetadata(s??{}),o.addMetadata(a??{},!1)),o}}function zu(t){return"name"in t?t:po.fromMethods(t)}class eN{getStore(){}run(e,A){return A()}enterWith(e){}}const tN=new eN,r_=Symbol.for("lc:child_config");class AN{getInstance(){return Yi()??tN}getRunnableConfig(){var A,r;return(r=(A=this.getInstance().getStore())==null?void 0:A.extra)==null?void 0:r[r_]}runWithConfig(e,A,r){var u;const n=Pt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),s=this.getInstance(),a=s.getStore(),i=n==null?void 0:n.getParentRunId(),o=(u=n==null?void 0:n.handlers)==null?void 0:u.find(c=>(c==null?void 0:c.name)==="langchain_tracer");let l;return o&&i?l=o.getRunTreeWithTracingConfig(i):r||(l=new xt({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[r_]:e}),a!==void 0&&a[Wl]!==void 0&&(l===void 0&&(l={}),l[Wl]=a[Wl]),s.run(l,A)}initializeGlobalInstance(e){Yi()===void 0&&KH(e)}}const dn=new AN,Ef=25;async function TA(t){return Pt._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function n_(...t){const e={};for(const A of t.filter(r=>!!r))for(const r of Object.keys(A))if(r==="metadata")e[r]={...e[r],...A[r]};else if(r==="tags"){const n=e[r]??[];e[r]=[...new Set(n.concat(A[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...A[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=A.timeout:A.timeout!==void 0&&(e.timeout=Math.min(e.timeout,A.timeout));else if(r==="signal")e.signal===void 0?e.signal=A.signal:A.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,A.signal]):e.signal=A.signal);else if(r==="callbacks"){const n=e.callbacks,s=A.callbacks;if(Array.isArray(s))if(!n)e.callbacks=s;else if(Array.isArray(n))e.callbacks=n.concat(s);else{const a=n.copy();for(const i of s)a.addHandler(zu(i),!0);e.callbacks=a}else if(s)if(!n)e.callbacks=s;else if(Array.isArray(n)){const a=s.copy();for(const i of n)a.addHandler(zu(i),!0);e.callbacks=a}else e.callbacks=new Pt(s._parentRunId,{handlers:n.handlers.concat(s.handlers),inheritableHandlers:n.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(n.tags.concat(s.tags))),inheritableTags:Array.from(new Set(n.inheritableTags.concat(s.inheritableTags))),metadata:{...n.metadata,...s.metadata}})}else{const n=r;e[n]=A[n]??e[n]}return e}const rN=new Set(["string","number","boolean"]);function Be(t){var r;const e=dn.getRunnableConfig();let A={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:n,runName:s,...a}=e;A=Object.entries(a).reduce((i,[o,l])=>(l!==void 0&&(i[o]=l),i),A)}if(t&&(A=Object.entries(t).reduce((n,[s,a])=>(a!==void 0&&(n[s]=a),n),A)),A!=null&&A.configurable)for(const n of Object.keys(A.configurable))rN.has(typeof A.configurable[n])&&!((r=A.metadata)!=null&&r[n])&&(A.metadata||(A.metadata={}),A.metadata[n]=A.configurable[n]);if(A.timeout!==void 0){if(A.timeout<=0)throw new Error("Timeout must be a positive number");const n=AbortSignal.timeout(A.timeout);A.signal!==void 0?"any"in AbortSignal&&(A.signal=AbortSignal.any([A.signal,n])):A.signal=n,delete A.timeout}return A}function wt(t={},{callbacks:e,maxConcurrency:A,recursionLimit:r,runName:n,configurable:s,runId:a}={}){const i=Be(t);return e!==void 0&&(delete i.runName,i.callbacks=e),r!==void 0&&(i.recursionLimit=r),A!==void 0&&(i.maxConcurrency=A),n!==void 0&&(i.runName=n),s!==void 0&&(i.configurable={...i.configurable,...s}),a!==void 0&&delete i.runId,i}function ra(t){return t?{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal}:void 0}async function fn(t,e){if(e===void 0)return t;let A;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,n)=>{A=()=>{n(new Error("Aborted"))},e.addEventListener("abort",A),e.aborted&&n(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",A))}class eA extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const A=this.reader.cancel();this.reader.releaseLock(),await A}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const A=e.getReader();return new eA({start(r){return n();function n(){return A.read().then(({done:s,value:a})=>{if(s){r.close();return}return r.enqueue(a),n()})}},cancel(){A.releaseLock()}})}static fromAsyncGenerator(e){return new eA({async pull(A){const{value:r,done:n}=await e.next();n&&A.close(),A.enqueue(r)},async cancel(A){await e.return(A)}})}}function tQ(t,e=2){const A=Array.from({length:e},()=>[]);return A.map(async function*(n){for(;;)if(n.length===0){const s=await t.next();for(const a of A)a.push(s)}else{if(n[0].done)return;yield n.shift().value}})}function zc(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const A={...t};for(const[r,n]of Object.entries(e))r in A&&!Array.isArray(A[r])?A[r]=zc(A[r],n):A[r]=n;return A}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class ha{constructor(e){var A;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((A=this.config)==null?void 0:A.signal),this.setup=new Promise((r,n)=>{dn.runWithConfig(ra(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,n):this.firstResult.then(s=>r(void 0),n)},!0)})}async next(...e){var A;return(A=this.signal)==null||A.throwIfAborted(),this.firstResultUsed?dn.runWithConfig(ra(this.config),this.signal?async()=>fn(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function nN(t,e,A,r,...n){const s=new ha({generator:e,startSetup:A,signal:r}),a=await s.setup;return{output:t(s,a,...n),setup:a}}class Rr{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const A=this.ops.concat(e.ops),r=ju({},A);return new qi({ops:A,state:r[r.length-1].newDocument})}}class qi extends Rr{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const A=this.ops.concat(e.ops),r=ju(this.state,e.ops);return new qi({ops:A,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const A=ju({},e.ops);return new qi({ops:e.ops,state:A[A.length-1].newDocument})}}const sN=t=>t.name==="log_stream_tracer";async function s_(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:A}=t;if(["retriever","llm","prompt"].includes(t.run_type))return A;if(!(Object.keys(A).length===1&&(A==null?void 0:A.input)===""))return A.input}async function a_(t,e){const{outputs:A}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?A:A!==void 0&&Object.keys(A).length===1&&(A==null?void 0:A.output)!==void 0?A.output:A}function aN(t){return t!==void 0&&t.message!==void 0}class i_ extends mo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=eA.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const A=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||A.find(n=>{var s;return(s=this.includeTags)==null?void 0:s.includes(n)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&A.every(n=>{var s;return!((s=this.excludeTags)!=null&&s.includes(n))})),r}async*tapOutputIterable(e,A){for await(const r of A){if(e!==this.rootId){const n=this.keyMapByRunId[e];n&&await this.writer.write(new Rr({ops:[{op:"add",path:`/logs/${n}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var n;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Rr({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const A=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=A===1?e.name:`${e.name}:${A}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await s_(e,this._schemaFormat)),await this.writer.write(new Rr({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const A=this.keyMapByRunId[e.id];if(A===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${A}/inputs`,value:await s_(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${A}/final_output`,value:await a_(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${A}/end_time`,value:new Date(e.end_time).toISOString()});const n=new Rr({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const A=new Rr({ops:[{op:"replace",path:"/final_output",value:await a_(e,this._schemaFormat)}]});await this.writer.write(A),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,A,r){const n=this.keyMapByRunId[e.id];if(n===void 0)return;const s=e.inputs.messages!==void 0;let a;s?aN(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new ln({id:`run-${e.id}`,content:A}):a=A;const i=new Rr({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:A},{op:"add",path:`/logs/${n}/streamed_output/-`,value:a}]});await this.writer.write(i)}}const o_="__run";class na{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new na({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class zn extends na{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new zn({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function yl({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const iN=t=>t.name==="event_stream_tracer";class oN extends mo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=eA.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const A=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||A.find(n=>{var s;return(s=this.includeTags)==null?void 0:s.includes(n)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&A.every(n=>{var s;return!((s=this.excludeTags)!=null&&s.includes(n))})),r}async*tapOutputIterable(e,A){const r=await A.next();if(r.done)return;const n=this.runInfoMap.get(e);if(n===void 0){yield r.value;return}function s(i,o){return i==="llm"&&typeof o=="string"?new na({text:o}):o}let a=this.tappedPromises.get(e);if(a===void 0){let i;a=new Promise(o=>{i=o}),this.tappedPromises.set(e,a);try{const o={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...o,data:{chunk:s(n.runType,r.value)}},n),yield r.value;for await(const l of A)n.runType!=="tool"&&n.runType!=="retriever"&&await this.send({...o,data:{chunk:s(n.runType,l)}},n),yield l}finally{i()}}else{yield r.value;for await(const i of A)yield i}}async send(e,A){this._includeRun(A)&&await this.writer.write(e)}async sendEndEvent(e,A){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,A)}):await this.send(e,A)}async onLLMStart(e){var a,i;const A=yl(e),r=e.inputs.messages!==void 0?"chat_model":"llm",n={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:A,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const s=`on_${r}_start`;await this.send({event:s,data:{input:e.inputs},name:A,tags:e.tags??[],run_id:e.id,metadata:((i=e.extra)==null?void 0:i.metadata)??{}},n)}async onLLMNewToken(e,A,r){const n=this.runInfoMap.get(e.id);let s,a;if(n===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(n.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?s=new ln({content:A,id:`run-${e.id}`}):s=r.chunk.message;else if(n.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?s=new na({text:A}):s=r.chunk;else throw new Error(`Unexpected run type ${n.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){var a,i,o;const A=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(A===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=(a=e.outputs)==null?void 0:a.generations;let s;if(A.runType==="chat_model"){for(const l of n??[]){if(s!==void 0)break;s=(i=l[0])==null?void 0:i.message}r="on_chat_model_end"}else if(A.runType==="llm")s={generations:n==null?void 0:n.map(l=>l.map(u=>({text:u.text,generationInfo:u.generationInfo}))),llmOutput:((o=e.outputs)==null?void 0:o.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${A.runType}`);await this.sendEndEvent({event:r,data:{output:s,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async onChainStart(e){var a,i;const A=yl(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:A,runType:e.run_type};let s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},n.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,n.inputs=e.inputs.input):(s.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:s,name:A,tags:e.tags??[],run_id:e.id,metadata:((i=e.extra)==null?void 0:i.metadata)??{}},n)}async onChainEnd(e){var i;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??A.inputs??{},a={output:((i=e.outputs)==null?void 0:i.output)??e.outputs,input:n};n.input&&Object.keys(n).length===1&&(a.input=n.input,A.inputs=n.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata??{}},A)}async onToolStart(e){var n,s;const A=yl(e),r={tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},name:A,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:A,run_id:e.id,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{}},r)}async onToolEnd(e){var n;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(A.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((n=e.outputs)==null?void 0:n.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async onRetrieverStart(e){var s,a;const A=yl(e),n={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:A,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,n),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:A,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},n)}async onRetrieverEnd(e){var r;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async handleCustomEvent(e,A,r){const n=this.runInfoMap.get(r);if(n===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:A},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const lN=[400,401,402,403,404,405,406,407,409],uN=t=>{var A,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((A=t==null?void 0:t.response)==null?void 0:A.status)??(t==null?void 0:t.status);if(e&&lN.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const n=new Error(t==null?void 0:t.message);throw n.name="InsufficientQuotaError",n}};class ug{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??uN;const A="default"in fr?fr.default:fr;this.queue=new A({concurrency:this.maxConcurrency})}call(e,...A){return this.queue.add(()=>$u(()=>e(...A).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,A,...r){return e.signal?Promise.race([this.call(A,...r),new Promise((n,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(A,...r)}fetch(...e){return this.call(()=>fetch(...e).then(A=>A.ok?A:Promise.reject(A)))}}class AQ extends mo{constructor({config:e,onStart:A,onEnd:r,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=A,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function cg(t){return t?t.lc_runnable:!1}class cN{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,A){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const n=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(A)),this.includeTags!==void 0&&(r=r||n.some(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(A)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}}function Qf(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const dN=["*","_","`"];function fN(t){let e="";for(const[A,r]of Object.entries(t))e+=`	classDef ${A} ${r};
`;return e}function hN(t,e,A){const{firstNode:r,lastNode:n,nodeColors:s,withStyles:a=!0,curveStyle:i="linear",wrapLabelNWords:o=9}=A??{};let l=a?`%%{init: {'flowchart': {'curve': '${i}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const h="default",f={[h]:"{0}({1})"};r!==void 0&&(f[r]="{0}([{1}]):::first"),n!==void 0&&(f[n]="{0}([{1}]):::last");for(const[w,y]of Object.entries(t)){const p=y.name.split(":").pop()??"";let g=dN.some(_=>p.startsWith(_)&&p.endsWith(_))?`<p>${p}</p>`:p;Object.keys(y.metadata??{}).length&&(g+=`<hr/><small><em>${Object.entries(y.metadata??{}).map(([_,v])=>`${_} = ${v}`).join(`
`)}</em></small>`);const B=(f[w]??f[h]).replace("{0}",Qf(w)).replace("{1}",g);l+=`	${B}
`}}const u={};for(const h of e){const f=h.source.split(":"),w=h.target.split(":"),y=f.filter((p,m)=>p===w[m]).join(":");u[y]||(u[y]=[]),u[y].push(h)}const c=new Set;function d(h,f){const w=h.length===1&&h[0].source===h[0].target;if(f&&!w){const y=f.split(":").pop();if(c.has(y))throw new Error(`Found duplicate subgraph '${y}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);c.add(y),l+=`	subgraph ${y}
`}for(const y of h){const{source:p,target:m,data:g,conditional:B}=y;let _="";if(g!==void 0){let v=g;const C=v.split(" ");C.length>o&&(v=Array.from({length:Math.ceil(C.length/o)},(E,I)=>C.slice(I*o,(I+1)*o).join(" ")).join("&nbsp;<br>&nbsp;")),_=B?` -. &nbsp;${v}&nbsp; .-> `:` -- &nbsp;${v}&nbsp; --> `}else _=B?" -.-> ":" --> ";l+=`	${Qf(p)}${_}${Qf(m)};
`}for(const y in u)y.startsWith(`${f}:`)&&y!==f&&d(u[y],y);f&&!w&&(l+=`	end
`)}d(u[""]??[],"");for(const h in u)!h.includes(":")&&h!==""&&d(u[h],h);return a&&(l+=fN(s??{})),l}async function pN(t,e){let{backgroundColor:A="white"}=e??{};const r=btoa(t);A!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(A)||(A=`!${A}`));const n=`https://mermaid.ink/img/${r}?bgColor=${A}`,s=await fetch(n);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}function Wc(t,e,A){function r(i,o){var l;Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(l=i._zod).traits??(l.traits=new Set),i._zod.traits.add(t),e(i,o);for(const u in a.prototype)u in i||Object.defineProperty(i,u,{value:a.prototype[u].bind(i)});i._zod.constr=a,i._zod.def=o}const n=(A==null?void 0:A.Parent)??Object;class s extends n{}Object.defineProperty(s,"name",{value:t});function a(i){var o;const l=A!=null&&A.Parent?new s:this;r(l,i),(o=l._zod).deferred??(o.deferred=[]);for(const u of l._zod.deferred)u();return l}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>{var o,l;return A!=null&&A.Parent&&i instanceof A.Parent?!0:(l=(o=i==null?void 0:i._zod)==null?void 0:o.traits)==null?void 0:l.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Wu extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const mN={};function Jc(t){return mN}function gN(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,n])=>e.indexOf(+r)===-1).map(([r,n])=>n)}function wN(t,e){return typeof e=="bigint"?e.toString():e}const rQ=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Ju(t,e,A){const r=new t._zod.constr(e??t._zod.def);return(!e||A!=null&&A.parent)&&(r._zod.parent=t),r}function yN(t){return{}}function Uf(t,e=0){var A;for(let r=e;r<t.issues.length;r++)if(((A=t.issues[r])==null?void 0:A.continue)!==!0)return!0;return!1}function Bl(t){return typeof t=="string"?t:t==null?void 0:t.message}function Zc(t,e,A){var n,s,a,i,o,l;const r={...t,path:t.path??[]};if(!t.message){const u=Bl((a=(s=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,t))??Bl((i=e==null?void 0:e.error)==null?void 0:i.call(e,t))??Bl((o=A.customError)==null?void 0:o.call(A,t))??Bl((l=A.localeError)==null?void 0:l.call(A,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const nQ=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,wN,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},BN=Wc("$ZodError",nQ),Xc=Wc("$ZodError",nQ,{Parent:Error}),_N=t=>(e,A,r,n)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:A,issues:[]},s);if(a instanceof Promise)throw new Wu;if(a.issues.length){const i=new((n==null?void 0:n.Err)??t)(a.issues.map(o=>Zc(o,s,Jc())));throw rQ(i,n==null?void 0:n.callee),i}return a.value},sQ=_N(Xc),vN=t=>async(e,A,r,n)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:A,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new((n==null?void 0:n.Err)??t)(a.issues.map(o=>Zc(o,s,Jc())));throw rQ(i,n==null?void 0:n.callee),i}return a.value},CN=vN(Xc),bN=t=>(e,A,r)=>{const n=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:A,issues:[]},n);if(s instanceof Promise)throw new Wu;return s.issues.length?{success:!1,error:new(t??BN)(s.issues.map(a=>Zc(a,n,Jc())))}:{success:!0,data:s.value}},EN=bN(Xc),QN=t=>async(e,A,r)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:A,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(a=>Zc(a,n,Jc())))}:{success:!0,data:s.value}},UN=QN(Xc),FN={major:4,minor:0,patch:0},IN=Wc("$ZodType",(t,e)=>{var n;var A;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=FN;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(A=t._zod).deferred??(A.deferred=[]),(n=t._zod.deferred)==null||n.push(()=>{t._zod.run=t._zod.parse});else{const s=(a,i,o)=>{let l=Uf(a),u;for(const c of i){if(c._zod.def.when){if(!c._zod.def.when(a))continue}else if(l)continue;const d=a.issues.length,h=c._zod.check(a);if(h instanceof Promise&&(o==null?void 0:o.async)===!1)throw new Wu;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,a.issues.length!==d&&(l||(l=Uf(a,d)))});else{if(a.issues.length===d)continue;l||(l=Uf(a,d))}}return u?u.then(()=>a):a};t._zod.run=(a,i)=>{const o=t._zod.parse(a,i);if(o instanceof Promise){if(i.async===!1)throw new Wu;return o.then(l=>s(l,r,i))}return s(o,r,i)}}t["~standard"]={validate:s=>{var a;try{const i=EN(t,s);return i.success?{value:i.data}:{issues:(a=i.error)==null?void 0:a.issues}}catch{return UN(t,s).then(o=>{var l;return o.success?{value:o.data}:{issues:(l=o.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),SN=Wc("$ZodNever",(t,e)=>{IN.init(t,e),t._zod.parse=(A,r)=>(A.issues.push({expected:"never",code:"invalid_type",input:A.value,inst:t}),A)});class aQ{constructor(){this._map=new Map,this._idmap=new Map}add(e,...A){const r=A[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const A=this._map.get(e);return A&&typeof A=="object"&&"id"in A&&this._idmap.delete(A.id),this._map.delete(e),this}get(e){const A=e._zod.parent;if(A){const r={...this.get(A)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function xN(){return new aQ}const Gr=xN();function TN(t,e){return new t({type:"never",...yN()})}class l_{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Gr,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,A={path:[],schemaPath:[]}){var c,d,h;var r;const n=e._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,A.schemaPath.includes(e)&&(a.cycle=A.path),a.schema;const i={schema:{},count:1,cycle:void 0,path:A.path};this.seen.set(e,i);const o=(d=(c=e._zod).toJSONSchema)==null?void 0:d.call(c);if(o)i.schema=o;else{const f={...A,schemaPath:[...A.schemaPath,e],path:A.path},w=e._zod.parent;if(w)i.ref=w,this.process(w,f),this.seen.get(w).isParent=!0;else{const y=i.schema;switch(n.type){case"string":{const p=y;p.type="string";const{minimum:m,maximum:g,format:B,patterns:_,contentEncoding:v}=e._zod.bag;if(typeof m=="number"&&(p.minLength=m),typeof g=="number"&&(p.maxLength=g),B&&(p.format=s[B]??B,p.format===""&&delete p.format),v&&(p.contentEncoding=v),_&&_.size>0){const C=[..._];C.length===1?p.pattern=C[0].source:C.length>1&&(i.schema.allOf=[...C.map(E=>({...this.target==="draft-7"?{type:"string"}:{},pattern:E.source}))])}break}case"number":{const p=y,{minimum:m,maximum:g,format:B,multipleOf:_,exclusiveMaximum:v,exclusiveMinimum:C}=e._zod.bag;typeof B=="string"&&B.includes("int")?p.type="integer":p.type="number",typeof C=="number"&&(p.exclusiveMinimum=C),typeof m=="number"&&(p.minimum=m,typeof C=="number"&&(C>=m?delete p.minimum:delete p.exclusiveMinimum)),typeof v=="number"&&(p.exclusiveMaximum=v),typeof g=="number"&&(p.maximum=g,typeof v=="number"&&(v<=g?delete p.maximum:delete p.exclusiveMaximum)),typeof _=="number"&&(p.multipleOf=_);break}case"boolean":{const p=y;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=y,{minimum:m,maximum:g}=e._zod.bag;typeof m=="number"&&(p.minItems=m),typeof g=="number"&&(p.maxItems=g),p.type="array",p.items=this.process(n.element,{...f,path:[...f.path,"items"]});break}case"object":{const p=y;p.type="object",p.properties={};const m=n.shape;for(const _ in m)p.properties[_]=this.process(m[_],{...f,path:[...f.path,"properties",_]});const g=new Set(Object.keys(m)),B=new Set([...g].filter(_=>{const v=n.shape[_]._zod;return this.io==="input"?v.optin===void 0:v.optout===void 0}));B.size>0&&(p.required=Array.from(B)),((h=n.catchall)==null?void 0:h._zod.def.type)==="never"?p.additionalProperties=!1:n.catchall?n.catchall&&(p.additionalProperties=this.process(n.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=y;p.anyOf=n.options.map((m,g)=>this.process(m,{...f,path:[...f.path,"anyOf",g]}));break}case"intersection":{const p=y,m=this.process(n.left,{...f,path:[...f.path,"allOf",0]}),g=this.process(n.right,{...f,path:[...f.path,"allOf",1]}),B=v=>"allOf"in v&&Object.keys(v).length===1,_=[...B(m)?m.allOf:[m],...B(g)?g.allOf:[g]];p.allOf=_;break}case"tuple":{const p=y;p.type="array";const m=n.items.map((_,v)=>this.process(_,{...f,path:[...f.path,"prefixItems",v]}));if(this.target==="draft-2020-12"?p.prefixItems=m:p.items=m,n.rest){const _=this.process(n.rest,{...f,path:[...f.path,"items"]});this.target==="draft-2020-12"?p.items=_:p.additionalItems=_}n.rest&&(p.items=this.process(n.rest,{...f,path:[...f.path,"items"]}));const{minimum:g,maximum:B}=e._zod.bag;typeof g=="number"&&(p.minItems=g),typeof B=="number"&&(p.maxItems=B);break}case"record":{const p=y;p.type="object",p.propertyNames=this.process(n.keyType,{...f,path:[...f.path,"propertyNames"]}),p.additionalProperties=this.process(n.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=y,m=gN(n.entries);m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),p.enum=m;break}case"literal":{const p=y,m=[];for(const g of n.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(g))}else m.push(g);if(m.length!==0)if(m.length===1){const g=m[0];p.type=g===null?"null":typeof g,p.const=g}else m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),m.every(g=>typeof g=="boolean")&&(p.type="string"),m.every(g=>g===null)&&(p.type="null"),p.enum=m;break}case"file":{const p=y,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:B,mime:_}=e._zod.bag;g!==void 0&&(m.minLength=g),B!==void 0&&(m.maxLength=B),_?_.length===1?(m.contentMediaType=_[0],Object.assign(p,m)):p.anyOf=_.map(v=>({...m,contentMediaType:v})):Object.assign(p,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(n.innerType,f);y.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(n.innerType,f),i.ref=n.innerType;break}case"success":{const p=y;p.type="boolean";break}case"default":{this.process(n.innerType,f),i.ref=n.innerType,y.default=JSON.parse(JSON.stringify(n.defaultValue));break}case"prefault":{this.process(n.innerType,f),i.ref=n.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break}case"catch":{this.process(n.innerType,f),i.ref=n.innerType;let p;try{p=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=y,m=e._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=m.source;break}case"pipe":{const p=this.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;this.process(p,f),i.ref=p;break}case"readonly":{this.process(n.innerType,f),i.ref=n.innerType,y.readOnly=!0;break}case"promise":{this.process(n.innerType,f),i.ref=n.innerType;break}case"optional":{this.process(n.innerType,f),i.ref=n.innerType;break}case"lazy":{const p=e._zod.innerType;this.process(p,f),i.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(e);return l&&Object.assign(i.schema,l),this.io==="input"&&Ge(e)&&(delete i.schema.examples,delete i.schema.default),this.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,this.seen.get(e).schema}emit(e,A){var u,c,d,h,f,w;const r={cycles:(A==null?void 0:A.cycles)??"ref",reused:(A==null?void 0:A.reused)??"inline",external:(A==null?void 0:A.external)??void 0},n=this.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=y=>{var _;const p=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const v=(_=r.external.registry.get(y[0]))==null?void 0:_.id,C=r.external.uri??(I=>I);if(v)return{ref:C(v)};const E=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=E,{defId:E,ref:`${C("__shared")}#/${p}/${E}`}}if(y[1]===n)return{ref:"#"};const g=`#/${p}/`,B=y[1].schema.id??`__schema${this.counter++}`;return{defId:B,ref:g+B}},a=y=>{if(y[1].schema.$ref)return;const p=y[1],{ref:m,defId:g}=s(y);p.def={...p.schema},g&&(p.defId=g);const B=p.schema;for(const _ in B)delete B[_];B.$ref=m};if(r.cycles==="throw")for(const y of this.seen.entries()){const p=y[1];if(p.cycle)throw new Error(`Cycle detected: #/${(u=p.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const p=y[1];if(e===y[0]){a(y);continue}if(r.external){const g=(c=r.external.registry.get(y[0]))==null?void 0:c.id;if(e!==y[0]&&g){a(y);continue}}if((d=this.metadataRegistry.get(y[0]))==null?void 0:d.id){a(y);continue}if(p.cycle){a(y);continue}if(p.count>1&&r.reused==="ref"){a(y);continue}}const i=(y,p)=>{const m=this.seen.get(y),g=m.def??m.schema,B={...g};if(m.ref===null)return;const _=m.ref;if(m.ref=null,_){i(_,p);const v=this.seen.get(_).schema;v.$ref&&p.target==="draft-7"?(g.allOf=g.allOf??[],g.allOf.push(v)):(Object.assign(g,v),Object.assign(g,B))}m.isParent||this.override({zodSchema:y,jsonSchema:g,path:m.path??[]})};for(const y of[...this.seen.entries()].reverse())i(y[0],{target:this.target});const o={};if(this.target==="draft-2020-12"?o.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(h=r.external)!=null&&h.uri){const y=(f=r.external.registry.get(e))==null?void 0:f.id;if(!y)throw new Error("Schema is missing an `id` property");o.$id=r.external.uri(y)}Object.assign(o,n.def);const l=((w=r.external)==null?void 0:w.defs)??{};for(const y of this.seen.entries()){const p=y[1];p.def&&p.defId&&(l[p.defId]=p.def)}r.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch{throw new Error("Error converting schema to JSON.")}}}function Cp(t,e){if(t instanceof aQ){const r=new l_(e),n={};for(const i of t._idmap.entries()){const[o,l]=i;r.process(l)}const s={},a={registry:t,uri:e==null?void 0:e.uri,defs:n};for(const i of t._idmap.entries()){const[o,l]=i;s[o]=r.emit(l,{...e,external:a})}if(Object.keys(n).length>0){const i=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[i]:n}}return{schemas:s}}const A=new l_(e);return A.process(t),A.emit(t,e)}function Ge(t,e){const A=e??{seen:new Set};if(A.seen.has(t))return!1;A.seen.add(t);const n=t._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Ge(n.element,A);case"object":{for(const s in n.shape)if(Ge(n.shape[s],A))return!0;return!1}case"union":{for(const s of n.options)if(Ge(s,A))return!0;return!1}case"intersection":return Ge(n.left,A)||Ge(n.right,A);case"tuple":{for(const s of n.items)if(Ge(s,A))return!0;return!!(n.rest&&Ge(n.rest,A))}case"record":return Ge(n.keyType,A)||Ge(n.valueType,A);case"map":return Ge(n.keyType,A)||Ge(n.valueType,A);case"set":return Ge(n.valueType,A);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Ge(n.innerType,A);case"lazy":return Ge(n.getter(),A);case"default":return Ge(n.innerType,A);case"prefault":return Ge(n.innerType,A);case"custom":return!1;case"transform":return!0;case"pipe":return Ge(n.in,A)||Ge(n.out,A);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${n.type}`)}const ON=Symbol("Let zodToJsonSchema decide on which parser to use"),kN={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},RN=t=>({...kN,...t}),LN=t=>{const e=RN(t),A=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:A,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,n])=>[n._def,{def:n._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function iQ(t,e,A,r){r!=null&&r.errorMessages&&A&&(t.errorMessage={...t.errorMessage,[e]:A})}function _e(t,e,A,r,n){t[e]=A,iQ(t,e,r,n)}const oQ=(t,e)=>{let A=0;for(;A<t.length&&A<e.length&&t[A]===e[A];A++);return[(t.length-A).toString(),...e.slice(A)].join("/")};function Mt(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?oQ(e,t.currentPath):e.join("/")}}function PN(t,e){var r,n,s;const A={type:"array"};return(r=t.type)!=null&&r._def&&((s=(n=t.type)==null?void 0:n._def)==null?void 0:s.typeName)!==x.ZodAny&&(A.items=we(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&_e(A,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&_e(A,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(_e(A,"minItems",t.exactLength.value,t.exactLength.message,e),_e(A,"maxItems",t.exactLength.value,t.exactLength.message,e)),A}function HN(t,e){const A={type:"integer",format:"int64"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?_e(A,"minimum",r.value,r.message,e):_e(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),_e(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?_e(A,"maximum",r.value,r.message,e):_e(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),_e(A,"maximum",r.value,r.message,e));break;case"multipleOf":_e(A,"multipleOf",r.value,r.message,e);break}return A}function NN(){return{type:"boolean"}}function lQ(t,e){return we(t.type._def,e)}const DN=(t,e)=>we(t.innerType._def,e);function uQ(t,e,A){const r=A??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,s)=>uQ(t,e,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return MN(t,e)}}const MN=(t,e)=>{const A={type:"integer",format:"unix-time"};if(e.target==="openApi3")return A;for(const r of t.checks)switch(r.kind){case"min":_e(A,"minimum",r.value,r.message,e);break;case"max":_e(A,"maximum",r.value,r.message,e);break}return A};function $N(t,e){return{...we(t.innerType._def,e),default:t.defaultValue()}}function jN(t,e){return e.effectStrategy==="input"?we(t.schema._def,e):Mt(e)}function KN(t){return{type:"string",enum:Array.from(t.values)}}const GN=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function VN(t,e){const A=[we(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),we(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const n=[];return A.forEach(s=>{if(GN(s))n.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...o}=s;a=o}else r=void 0;n.push(a)}}),n.length?{allOf:n,...r}:void 0}function zN(t,e){const A=typeof t.value;return A!=="bigint"&&A!=="number"&&A!=="boolean"&&A!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:A==="bigint"?"integer":A,enum:[t.value]}:{type:A==="bigint"?"integer":A,const:t.value}}let Ff;const BA={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ff===void 0&&(Ff=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ff),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function cQ(t,e){const A={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":_e(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,r.value):r.value,r.message,e);break;case"max":_e(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":_A(A,"email",r.message,e);break;case"format:idn-email":_A(A,"idn-email",r.message,e);break;case"pattern:zod":_t(A,BA.email,r.message,e);break}break;case"url":_A(A,"uri",r.message,e);break;case"uuid":_A(A,"uuid",r.message,e);break;case"regex":_t(A,r.regex,r.message,e);break;case"cuid":_t(A,BA.cuid,r.message,e);break;case"cuid2":_t(A,BA.cuid2,r.message,e);break;case"startsWith":_t(A,RegExp(`^${If(r.value,e)}`),r.message,e);break;case"endsWith":_t(A,RegExp(`${If(r.value,e)}$`),r.message,e);break;case"datetime":_A(A,"date-time",r.message,e);break;case"date":_A(A,"date",r.message,e);break;case"time":_A(A,"time",r.message,e);break;case"duration":_A(A,"duration",r.message,e);break;case"length":_e(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,r.value):r.value,r.message,e),_e(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,r.value):r.value,r.message,e);break;case"includes":{_t(A,RegExp(If(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&_A(A,"ipv4",r.message,e),r.version!=="v4"&&_A(A,"ipv6",r.message,e);break}case"base64url":_t(A,BA.base64url,r.message,e);break;case"jwt":_t(A,BA.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&_t(A,BA.ipv4Cidr,r.message,e),r.version!=="v4"&&_t(A,BA.ipv6Cidr,r.message,e);break}case"emoji":_t(A,BA.emoji(),r.message,e);break;case"ulid":{_t(A,BA.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{_A(A,"binary",r.message,e);break}case"contentEncoding:base64":{_e(A,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{_t(A,BA.base64,r.message,e);break}}break}case"nanoid":_t(A,BA.nanoid,r.message,e)}return A}function If(t,e){return e.patternStrategy==="escape"?JN(t):t}const WN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function JN(t){let e="";for(let A=0;A<t.length;A++)WN.has(t[A])||(e+="\\"),e+=t[A];return e}function _A(t,e,A,r){var n;t.format||(n=t.anyOf)!=null&&n.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...A&&r.errorMessages&&{errorMessage:{format:A}}})):_e(t,"format",e,A,r)}function _t(t,e,A,r){var n;t.pattern||(n=t.allOf)!=null&&n.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:u_(e,r),...A&&r.errorMessages&&{errorMessage:{pattern:A}}})):_e(t,"pattern",u_(e,r),A,r)}function u_(t,e){var o;if(!e.applyRegexFlags||!t.flags)return t.source;const A={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=A.i?t.source.toLowerCase():t.source;let n="",s=!1,a=!1,i=!1;for(let l=0;l<r.length;l++){if(s){n+=r[l],s=!1;continue}if(A.i){if(a){if(r[l].match(/[a-z]/)){i?(n+=r[l],n+=`${r[l-2]}-${r[l]}`.toUpperCase(),i=!1):r[l+1]==="-"&&((o=r[l+2])!=null&&o.match(/[a-z]/))?(n+=r[l],i=!0):n+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){n+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(A.m){if(r[l]==="^"){n+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){n+=`($|(?=[\r
]))`;continue}}if(A.s&&r[l]==="."){n+=a?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}n+=r[l],r[l]==="\\"?s=!0:a&&r[l]==="]"?a=!1:!a&&r[l]==="["&&(a=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return n}function dQ(t,e){var r,n,s,a,i,o;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===x.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,u)=>({...l,[u]:we(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??Mt(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const A={type:"object",additionalProperties:we(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return A;if(((n=t.keyType)==null?void 0:n._def.typeName)===x.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:l,...u}=cQ(t.keyType._def,e);return{...A,propertyNames:u}}else{if(((a=t.keyType)==null?void 0:a._def.typeName)===x.ZodEnum)return{...A,propertyNames:{enum:t.keyType._def.values}};if(((i=t.keyType)==null?void 0:i._def.typeName)===x.ZodBranded&&t.keyType._def.type._def.typeName===x.ZodString&&((o=t.keyType._def.type._def.checks)!=null&&o.length)){const{type:l,...u}=lQ(t.keyType._def,e);return{...A,propertyNames:u}}}return A}function ZN(t,e){if(e.mapStrategy==="record")return dQ(t,e);const A=we(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Mt(e),r=we(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Mt(e);return{type:"array",maxItems:125,items:{type:"array",items:[A,r],minItems:2,maxItems:2}}}function XN(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),n=Array.from(new Set(r.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:r}}function YN(t){return t.target==="openAi"?void 0:{not:Mt({...t,currentPath:[...t.currentPath,"not"]})}}function qN(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Zu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function e4(t,e){if(e.target==="openApi3")return c_(t,e);const A=t.options instanceof Map?Array.from(t.options.values()):t.options;if(A.every(r=>r._def.typeName in Zu&&(!r._def.checks||!r._def.checks.length))){const r=A.reduce((n,s)=>{const a=Zu[s._def.typeName];return a&&!n.includes(a)?[...n,a]:n},[]);return{type:r.length>1?r:r[0]}}else if(A.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=A.reduce((n,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...n,a];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(r.length===A.length){const n=r.filter((s,a,i)=>i.indexOf(s)===a);return{type:n.length>1?n:n[0],enum:A.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(A.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:A.reduce((r,n)=>[...r,...n._def.values.filter(s=>!r.includes(s))],[])};return c_(t,e)}const c_=(t,e)=>{const A=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,n)=>we(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return A.length?{anyOf:A}:void 0};function t4(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Zu[t.innerType._def.typeName],nullable:!0}:{type:[Zu[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=we(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const A=we(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return A&&{anyOf:[A,{type:"null"}]}}function A4(t,e){const A={type:"number"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"int":A.type="integer",iQ(A,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?_e(A,"minimum",r.value,r.message,e):_e(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),_e(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?_e(A,"maximum",r.value,r.message,e):_e(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),_e(A,"maximum",r.value,r.message,e));break;case"multipleOf":_e(A,"multipleOf",r.value,r.message,e);break}return A}function r4(t,e){const A=e.target==="openAi",r={type:"object",properties:{}},n=[],s=t.shape();for(const i in s){let o=s[i];if(o===void 0||o._def===void 0)continue;let l=s4(o);l&&A&&(o._def.typeName==="ZodOptional"&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),l=!1);const u=we(o._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,l||n.push(i))}n.length&&(r.required=n);const a=n4(t,e);return a!==void 0&&(r.additionalProperties=a),r}function n4(t,e){if(t.catchall._def.typeName!=="ZodNever")return we(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function s4(t){try{return t.isOptional()}catch{return!0}}const a4=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return we(t.innerType._def,e);const A=we(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return A?{anyOf:[{not:Mt(e)},A]}:Mt(e)},i4=(t,e)=>{if(e.pipeStrategy==="input")return we(t.in._def,e);if(e.pipeStrategy==="output")return we(t.out._def,e);const A=we(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=we(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",A?"1":"0"]});return{allOf:[A,r].filter(n=>n!==void 0)}};function o4(t,e){return we(t.type._def,e)}function l4(t,e){const r={type:"array",uniqueItems:!0,items:we(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&_e(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&_e(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function u4(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((A,r)=>we(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[]),additionalItems:we(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((A,r)=>we(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[])}}function c4(t){return{not:Mt(t)}}function d4(t){return Mt(t)}const f4=(t,e)=>we(t.innerType._def,e),h4=(t,e,A)=>{switch(e){case x.ZodString:return cQ(t,A);case x.ZodNumber:return A4(t,A);case x.ZodObject:return r4(t,A);case x.ZodBigInt:return HN(t,A);case x.ZodBoolean:return NN();case x.ZodDate:return uQ(t,A);case x.ZodUndefined:return c4(A);case x.ZodNull:return qN(A);case x.ZodArray:return PN(t,A);case x.ZodUnion:case x.ZodDiscriminatedUnion:return e4(t,A);case x.ZodIntersection:return VN(t,A);case x.ZodTuple:return u4(t,A);case x.ZodRecord:return dQ(t,A);case x.ZodLiteral:return zN(t,A);case x.ZodEnum:return KN(t);case x.ZodNativeEnum:return XN(t);case x.ZodNullable:return t4(t,A);case x.ZodOptional:return a4(t,A);case x.ZodMap:return ZN(t,A);case x.ZodSet:return l4(t,A);case x.ZodLazy:return()=>t.getter()._def;case x.ZodPromise:return o4(t,A);case x.ZodNaN:case x.ZodNever:return YN(A);case x.ZodEffects:return jN(t,A);case x.ZodAny:return Mt(A);case x.ZodUnknown:return d4(A);case x.ZodDefault:return $N(t,A);case x.ZodBranded:return lQ(t,A);case x.ZodReadonly:return f4(t,A);case x.ZodCatch:return DN(t,A);case x.ZodPipeline:return i4(t,A);case x.ZodFunction:case x.ZodVoid:case x.ZodSymbol:return;default:return(r=>{})()}};function we(t,e,A=!1){var i;const r=e.seen.get(t);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,t,e,r,A);if(o!==ON)return o}if(r&&!A){const o=p4(r,e);if(o!==void 0)return o}const n={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,n);const s=h4(t,t.typeName,e),a=typeof s=="function"?we(s(),e):s;if(a&&m4(t,e,a),e.postProcess){const o=e.postProcess(a,t,e);return n.jsonSchema=a,o}return n.jsonSchema=a,a}const p4=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:oQ(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((A,r)=>e.currentPath[r]===A)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Mt(e)):e.$refStrategy==="seen"?Mt(e):void 0}},m4=(t,e,A)=>(t.description&&(A.description=t.description,e.markdownDescription&&(A.markdownDescription=t.description)),A),g4=(t,e)=>{const A=LN(e);let r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((i,[o,l])=>({...i,[o]:we(l._def,{...A,currentPath:[...A.basePath,A.definitionPath,o]},!0)??Mt(A)}),{}):void 0;const n=typeof e=="string"?e:e==null?void 0:e.name,s=we(t._def,A,!1)??Mt(A);A.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[A.openAiAnyTypeName]||(r[A.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:A.$refStrategy==="relative"?"1":[...A.basePath,A.definitionPath,A.openAiAnyTypeName].join("/")}}));const a=n===void 0?r?{...s,[A.definitionPath]:r}:s:{$ref:[...A.$refStrategy==="relative"?[]:A.basePath,A.definitionPath,n].join("/"),[A.definitionPath]:{...r,[n]:s}};return A.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(A.target==="jsonSchema2019-09"||A.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),A.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function bp(t,e){const A=typeof t;if(A!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(!bp(t[n],e[n]))return!1;return!0}if(A==="object"){if(!t||!e)return t===e;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const a of r)if(!bp(t[a],e[a]))return!1;return!0}return t===e}function PA(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const A=e._zod;return typeof A=="object"&&A!==null&&"def"in A}function tr(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const A=e._def;return typeof A=="object"&&A!=null&&"typeName"in A}function xn(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(PA(t)||tr(t))}async function w4(t,e){if(PA(t))try{return{success:!0,data:await CN(t,e)}}catch(A){return{success:!1,error:A}}if(tr(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function fQ(t,e){if(PA(t))return sQ(t,e);if(tr(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function dg(t){var e;if(PA(t))return(e=Gr.get(t))==null?void 0:e.description;if(tr(t)||"description"in t&&typeof t.description=="string")return t.description}function y4(t){return xn(t)?tr(t)?t._def.typeName==="ZodString":PA(t)?t._zod.def.type==="string":!1:!1}function Ei(t){return PA(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function hQ(t){return PA(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function Ep(t,e=!1){if(tr(t))return t.strict();if(Ei(t)){const A=t._zod.def.shape;if(e)for(const[s,a]of Object.entries(t._zod.def.shape)){if(Ei(a)){const o=Ep(a,e);A[s]=o}else if(hQ(a)){let o=a._zod.def.element;Ei(o)&&(o=Ep(o,e)),A[s]=Ju(a,{...a._zod.def,element:o})}else A[s]=a;const i=Gr.get(a);i&&Gr.add(A[s],i)}const r=Ju(t,{...t._zod.def,shape:A,catchall:TN(SN)}),n=Gr.get(t);return n&&Gr.add(r,n),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function B4(t){return tr(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function _4(t){return PA(t)&&t._zod.def.type==="pipe"}function Ai(t,e=!1){if(tr(t))return B4(t)?Ai(t._def.schema,e):t;if(PA(t)){let A=t;if(_4(t)&&(A=Ai(t._zod.def.in,e)),e){if(Ei(A)){const n=A._zod.def.shape;for(const[s,a]of Object.entries(A._zod.def.shape))n[s]=Ai(a,e);A=Ju(A,{...A._zod.def,shape:n})}else if(hQ(A)){const n=Ai(A._zod.def.element,e);A=Ju(A,{...A._zod.def,element:n})}}const r=Gr.get(t);return r&&Gr.add(A,r),A}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Vr(t){if(PA(t)){const e=Ai(t,!0);if(Ei(e)){const A=Ep(e,!0);return Cp(A)}else return Cp(t)}return tr(t)?g4(t):t}function v4(t,e){if(t!==void 0&&!Bi(t))return t;if(cg(e))try{let A=e.getName();return A=A.startsWith("Runnable")?A.slice(8):A,A}catch{return e.getName()}else return e.name??"UnknownSchema"}function C4(t){return cg(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Vr(t.data.schema),title:t.data.name}}}class Yc{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((A,r)=>{e[A.id]=Bi(A.id)?r:A.id}),{nodes:Object.values(this.nodes).map(A=>({id:e[A.id],...C4(A)})),edges:this.edges.map(A=>{const r={source:e[A.source],target:e[A.target]};return typeof A.data<"u"&&(r.data=A.data),typeof A.conditional<"u"&&(r.conditional=A.conditional),r})}}addNode(e,A,r){if(A!==void 0&&this.nodes[A]!==void 0)throw new Error(`Node with id ${A} already exists`);const n=A??Et(),s={id:n,data:e,name:v4(A,e),metadata:r};return this.nodes[n]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(A=>A.source!==e.id&&A.target!==e.id)}addEdge(e,A,r,n){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[A.id]===void 0)throw new Error(`Target node ${A.id} not in graph`);const s={source:e.id,target:A.id,data:r,conditional:n};return this.edges.push(s),s}firstNode(){return d_(this)}lastNode(){return f_(this)}extend(e,A=""){let r=A;Object.values(e.nodes).map(l=>l.id).every(Bi)&&(r="");const s=l=>r?`${r}:${l}`:l;Object.entries(e.nodes).forEach(([l,u])=>{this.nodes[s(l)]={...u,id:s(l)}});const a=e.edges.map(l=>({...l,source:s(l.source),target:s(l.target)}));this.edges=[...this.edges,...a];const i=e.firstNode(),o=e.lastNode();return[i?{id:s(i.id),data:i.data}:void 0,o?{id:s(o.id),data:o.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&d_(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&f_(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(n=>[n.id,n.name])),A=new Map;Object.values(e).forEach(n=>{A.set(n,(A.get(n)||0)+1)});const r=n=>{const s=e[n];return Bi(n)&&A.get(s)===1?s:n};return new Yc({nodes:Object.fromEntries(Object.entries(this.nodes).map(([n,s])=>[r(n),{...s,id:r(n)}])),edges:this.edges.map(n=>({...n,source:r(n.source),target:r(n.target)}))})}drawMermaid(e){const{withStyles:A,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},a=this.reid(),i=a.firstNode(),o=a.lastNode();return hN(a.nodes,a.edges,{firstNode:i==null?void 0:i.id,lastNode:o==null?void 0:o.id,withStyles:A,curveStyle:r,nodeColors:n,wrapLabelNWords:s})}async drawMermaidPng(e){const A=this.drawMermaid(e);return pN(A,{backgroundColor:e==null?void 0:e.backgroundColor})}}function d_(t,e=[]){const A=new Set(t.edges.filter(n=>!e.includes(n.source)).map(n=>n.target)),r=[];for(const n of Object.values(t.nodes))!e.includes(n.id)&&!A.has(n.id)&&r.push(n);return r.length===1?r[0]:void 0}function f_(t,e=[]){const A=new Set(t.edges.filter(n=>!e.includes(n.target)).map(n=>n.source)),r=[];for(const n of Object.values(t.nodes))!e.includes(n.id)&&!A.has(n.id)&&r.push(n);return r.length===1?r[0]:void 0}function b4(t){const e=new TextEncoder,A=new ReadableStream({async start(r){for await(const n of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(n)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return eA.fromReadableStream(A)}function h_(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const E4=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function Qp(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*p_(t,e){for(;;){const{value:A,done:r}=dn.runWithConfig(ra(t),e.next.bind(e),!0);if(r)break;yield A}}async function*Up(t,e){const A=e[Symbol.asyncIterator]();for(;;){const{value:r,done:n}=await dn.runWithConfig(ra(t),A.next.bind(e),!0);if(n)break;yield r}}function tt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class rt extends Kn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const A=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${A}${e}`:A}bind(e){return new Pn({bound:this,kwargs:e,config:{}})}map(){return new Xu({bound:this})}withRetry(e){return new pQ({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Pn({bound:this,config:e,kwargs:{}})}withFallbacks(e){const A=Array.isArray(e)?e:e.fallbacks;return new U4({runnable:this,fallbacks:A})}_getOptionsList(e,A=0){if(Array.isArray(e)&&e.length!==A)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${A} inputs`);if(Array.isArray(e))return e.map(Be);if(A>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([n])=>n!=="runId"));return Array.from({length:A},(n,s)=>Be(s===0?e:r))}return Array.from({length:A},()=>Be(e))}async batch(e,A,r){var o;const n=this._getOptionsList(A??{},e.length),s=((o=n[0])==null?void 0:o.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new ug({maxConcurrency:s,onFailedAttempt:l=>{throw l}}),i=e.map((l,u)=>a.call(async()=>{try{return await this.invoke(l,n[u])}catch(c){if(r!=null&&r.returnExceptions)return c;throw c}}));return Promise.all(i)}async*_streamIterator(e,A){yield this.invoke(e,A)}async stream(e,A){const r=Be(A),n=new ha({generator:this._streamIterator(e,r),config:r});return await n.setup,eA.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let A;e===void 0?A=Be(e):A=Be({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[A,r]}async _callWithConfig(e,A,r){const n=Be(r),s=await TA(n),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),tt(A,"input"),n.runId,n==null?void 0:n.runType,void 0,void 0,(n==null?void 0:n.runName)??this.getName()));delete n.runId;let i;try{const o=e.call(this,A,n,a);i=await fn(o,r==null?void 0:r.signal)}catch(o){throw await(a==null?void 0:a.handleChainError(o)),o}return await(a==null?void 0:a.handleChainEnd(tt(i,"output"))),i}async _batchWithConfig(e,A,r,n){var l;const s=this._getOptionsList(r??{},A.length),a=await Promise.all(s.map(TA)),i=await Promise.all(a.map(async(u,c)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),tt(A[c],"input"),s[c].runId,s[c].runType,void 0,void 0,s[c].runName??this.getName()));return delete s[c].runId,d}));let o;try{const u=e.call(this,A,s,i,n);o=await fn(u,(l=s==null?void 0:s[0])==null?void 0:l.signal)}catch(u){throw await Promise.all(i.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(i.map(u=>u==null?void 0:u.handleChainEnd(tt(o,"output")))),o}_concatOutputChunks(e,A){return zc(e,A)}async*_transformStreamWithConfig(e,A,r){let n,s=!0,a,i=!0;const o=Be(r),l=await TA(o),u=this;async function*c(){for await(const h of e){if(s)if(n===void 0)n=h;else try{n=u._concatOutputChunks(n,h)}catch{n=void 0,s=!1}yield h}}let d;try{const h=await nN(A.bind(this),c(),async()=>l==null?void 0:l.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName()),r==null?void 0:r.signal,o);delete o.runId,d=h.setup;const f=d==null?void 0:d.handlers.find(iN);let w=h.output;f!==void 0&&d!==void 0&&(w=f.tapOutputIterable(d.runId,w));const y=d==null?void 0:d.handlers.find(sN);y!==void 0&&d!==void 0&&(w=y.tapOutputIterable(d.runId,w));for await(const p of w)if(yield p,i)if(a===void 0)a=p;else try{a=this._concatOutputChunks(a,p)}catch{a=void 0,i=!1}}catch(h){throw await(d==null?void 0:d.handleChainError(h,void 0,void 0,void 0,{inputs:tt(n,"input")})),h}await(d==null?void 0:d.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:tt(n,"input")}))}getGraph(e){const A=new Yc,r=A.addNode({name:`${this.getName()}Input`,schema:UB()}),n=A.addNode(this),s=A.addNode({name:`${this.getName()}Output`,schema:UB()});return A.addEdge(r,n),A.addEdge(n,s),A}pipe(e){return new ur({first:this,last:Tn(e)})}pick(e){return this.pipe(new F4(e))}assign(e){return this.pipe(new mQ(new pa({steps:e})))}async*transform(e,A){let r;for await(const n of e)r===void 0?r=n:r=this._concatOutputChunks(r,n);yield*this._streamIterator(r,Be(A))}async*streamLog(e,A,r){const n=new i_({...r,autoClose:!1,_schemaFormat:"original"}),s=Be(A);yield*this._streamLog(e,n,s)}async*_streamLog(e,A,r){const{callbacks:n}=r;if(n===void 0)r.callbacks=[A];else if(Array.isArray(n))r.callbacks=n.concat([A]);else{const o=n.copy();o.addHandler(A,!0),r.callbacks=o}const s=this.stream(e,r);async function a(){try{const o=await s;for await(const l of o){const u=new Rr({ops:[{op:"add",path:"/streamed_output/-",value:l}]});await A.writer.write(u)}}finally{await A.writer.close()}}const i=a();try{for await(const o of A)yield o}finally{await i}}streamEvents(e,A,r){let n;if(A.version==="v1")n=this._streamEventsV1(e,A,r);else if(A.version==="v2")n=this._streamEventsV2(e,A,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return A.encoding==="text/event-stream"?b4(n):eA.fromAsyncGenerator(n)}async*_streamEventsV2(e,A,r){var f;const n=new oN({...r,autoClose:!1}),s=Be(A),a=s.runId??Et();s.runId=a;const i=s.callbacks;if(i===void 0)s.callbacks=[n];else if(Array.isArray(i))s.callbacks=i.concat(n);else{const w=i.copy();w.addHandler(n,!0),s.callbacks=w}const o=new AbortController,l=this;async function u(){let w,y=null;try{A!=null&&A.signal?"any"in AbortSignal?w=AbortSignal.any([o.signal,A.signal]):(w=A.signal,y=()=>{o.abort()},A.signal.addEventListener("abort",y,{once:!0})):w=o.signal;const p=await l.stream(e,{...s,signal:w}),m=n.tapOutputIterable(a,p);for await(const g of m)if(o.signal.aborted)break}finally{await n.finish(),w&&y&&w.removeEventListener("abort",y)}}const c=u();let d=!1,h;try{for await(const w of n){if(!d){w.data.input=e,d=!0,h=w.run_id,yield w;continue}w.run_id===h&&w.event.endsWith("_end")&&(f=w.data)!=null&&f.input&&delete w.data.input,yield w}}finally{o.abort(),await c}}async*_streamEventsV1(e,A,r){let n,s=!1;const a=Be(A),i=a.tags??[],o=a.metadata??{},l=a.runName??this.getName(),u=new i_({...r,autoClose:!1,_schemaFormat:"streaming_events"}),c=new cN({...r}),d=this._streamLog(e,u,a);for await(const f of d){if(n?n=n.concat(f):n=qi.fromRunLogPatch(f),n.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;const m={...n.state},g={run_id:m.id,event:`on_${m.type}_start`,name:l,tags:i,metadata:o,data:{input:e}};c.includeEvent(g,m.type)&&(yield g)}const w=f.ops.filter(m=>m.path.startsWith("/logs/")).map(m=>m.path.split("/")[2]),y=[...new Set(w)];for(const m of y){let g,B={};const _=n.state.logs[m];if(_.end_time===void 0?_.streamed_output.length>0?g="stream":g="start":g="end",g==="start")_.inputs!==void 0&&(B.input=_.inputs);else if(g==="end")_.inputs!==void 0&&(B.input=_.inputs),B.output=_.final_output;else if(g==="stream"){const v=_.streamed_output.length;if(v!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${v} instead. Encountered in: "${_.name}"`);B={chunk:_.streamed_output[0]},_.streamed_output=[]}yield{event:`on_${_.type}_${g}`,name:_.name,run_id:_.id,tags:_.tags,metadata:_.metadata,data:B}}const{state:p}=n;if(p.streamed_output.length>0){const m=p.streamed_output.length;if(m!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${m} instead. Encountered in: "${p.name}"`);const g={chunk:p.streamed_output[0]};p.streamed_output=[];const B={event:`on_${p.type}_stream`,run_id:p.id,tags:i,metadata:o,name:l,data:g};c.includeEvent(B,p.type)&&(yield B)}}const h=n==null?void 0:n.state;if(h!==void 0){const f={event:`on_${h.type}_end`,name:l,run_id:h.id,tags:i,metadata:o,data:{output:h.final_output}};c.includeEvent(f,h.type)&&(yield f)}}static isRunnable(e){return cg(e)}withListeners({onStart:e,onEnd:A,onError:r}){return new Pn({bound:this,config:{},configFactories:[n=>({callbacks:[new AQ({config:n,onStart:e,onEnd:A,onError:r})]})]})}asTool(e){return I4(this,e)}}class Pn extends rt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const A=n_(this.config,...e);return n_(A,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(A))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new pQ({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,A){return this.bound.invoke(e,await this._mergeConfig(Be(A),this.kwargs))}async batch(e,A,r){const n=Array.isArray(A)?await Promise.all(A.map(async s=>this._mergeConfig(Be(s),this.kwargs))):await this._mergeConfig(Be(A),this.kwargs);return this.bound.batch(e,n,r)}_concatOutputChunks(e,A){return this.bound._concatOutputChunks(e,A)}async*_streamIterator(e,A){yield*this.bound._streamIterator(e,await this._mergeConfig(Be(A),this.kwargs))}async stream(e,A){return this.bound.stream(e,await this._mergeConfig(Be(A),this.kwargs))}async*transform(e,A){yield*this.bound.transform(e,await this._mergeConfig(Be(A),this.kwargs))}streamEvents(e,A,r){const n=this,s=async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig(Be(A),n.kwargs),version:A.version},r)};return eA.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&rt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:A,onError:r}){return new Pn({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new AQ({config:n,onStart:e,onEnd:A,onError:r})]})]})}}class Xu extends rt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Xu({bound:this.bound.bind(e)})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async _invoke(e,A,r){return this.bound.batch(e,wt(A,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:A,onError:r}){return new Xu({bound:this.bound.withListeners({onStart:e,onEnd:A,onError:r})})}}class pQ extends Pn{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,A,r){const n=e>1?`retry:attempt:${e}`:void 0;return wt(A,{callbacks:r==null?void 0:r.getChild(n)})}async _invoke(e,A,r){return $u(n=>super.invoke(e,this._patchConfigForRetry(n,A,r)),{onFailedAttempt:n=>this.onFailedAttempt(n,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async _batch(e,A,r,n){const s={};try{await $u(async a=>{const i=e.map((d,h)=>h).filter(d=>s[d.toString()]===void 0||s[d.toString()]instanceof Error),o=i.map(d=>e[d]),l=i.map(d=>this._patchConfigForRetry(a,A==null?void 0:A[d],r==null?void 0:r[d])),u=await super.batch(o,l,{...n,returnExceptions:!0});let c;for(let d=0;d<u.length;d+=1){const h=u[d],f=i[d];h instanceof Error&&c===void 0&&(c=h,c.input=o[d]),s[f.toString()]=h}if(c)throw c;return u},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((n==null?void 0:n.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,i)=>parseInt(a,10)-parseInt(i,10)).map(a=>s[parseInt(a,10)])}async batch(e,A,r){return this._batchWithConfig(this._batch.bind(this),e,A,r)}}class ur extends rt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,A){var o;const r=Be(A),n=await TA(r),s=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let a=e,i;try{const l=[this.first,...this.middle];for(let u=0;u<l.length;u+=1){const d=l[u].invoke(a,wt(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`)}));a=await fn(d,A==null?void 0:A.signal)}if((o=A==null?void 0:A.signal)!=null&&o.aborted)throw new Error("Aborted");i=await this.last.invoke(a,wt(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(tt(i,"output"))),i}async batch(e,A,r){var o;const n=this._getOptionsList(A??{},e.length),s=await Promise.all(n.map(TA)),a=await Promise.all(s.map(async(l,u)=>{const c=await(l==null?void 0:l.handleChainStart(this.toJSON(),tt(e[u],"input"),n[u].runId,void 0,void 0,void 0,n[u].runName));return delete n[u].runId,c}));let i=e;try{for(let l=0;l<this.steps.length;l+=1){const c=this.steps[l].batch(i,a.map((d,h)=>{const f=d==null?void 0:d.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return wt(n[h],{callbacks:f})}),r);i=await fn(c,(o=n[0])==null?void 0:o.signal)}}catch(l){throw await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(l))),l}return await Promise.all(a.map(l=>l==null?void 0:l.handleChainEnd(tt(i,"output")))),i}_concatOutputChunks(e,A){return this.last._concatOutputChunks(e,A)}async*_streamIterator(e,A){var c;const r=await TA(A),{runId:n,...s}=A??{},a=await(r==null?void 0:r.handleChainStart(this.toJSON(),tt(e,"input"),n,void 0,void 0,void 0,s==null?void 0:s.runName)),i=[this.first,...this.middle,this.last];let o=!0,l;async function*u(){yield e}try{let d=i[0].transform(u(),wt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let h=1;h<i.length;h+=1)d=await i[h].transform(d,wt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));for await(const h of d)if((c=A==null?void 0:A.signal)==null||c.throwIfAborted(),yield h,o)if(l===void 0)l=h;else try{l=this._concatOutputChunks(l,h)}catch{l=void 0,o=!1}}catch(d){throw await(a==null?void 0:a.handleChainError(d)),d}await(a==null?void 0:a.handleChainEnd(tt(l,"output")))}getGraph(e){const A=new Yc;let r=null;return this.steps.forEach((n,s)=>{const a=n.getGraph(e);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),A.extend(a);const i=a.firstNode();if(!i)throw new Error(`Runnable ${n} has no first node`);r&&A.addEdge(r,i),r=a.lastNode()}),A}pipe(e){return ur.isRunnableSequence(e)?new ur({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new ur({first:this.first,middle:[...this.middle,this.last],last:Tn(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&rt.isRunnable(e)}static from([e,...A],r){let n={};return typeof r=="string"?n.name=r:r!==void 0&&(n=r),new ur({...n,first:Tn(e),middle:A.slice(0,-1).map(Tn),last:Tn(A[A.length-1])})}}class pa extends rt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[A,r]of Object.entries(e.steps))this.steps[A]=Tn(r)}static from(e){return new pa({steps:e})}async invoke(e,A){const r=Be(A),n=await TA(r),s=await(n==null?void 0:n.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const a={};try{const i=Object.entries(this.steps).map(async([o,l])=>{a[o]=await l.invoke(e,wt(r,{callbacks:s==null?void 0:s.getChild(`map:key:${o}`)}))});await fn(Promise.all(i),A==null?void 0:A.signal)}catch(i){throw await(s==null?void 0:s.handleChainError(i)),i}return await(s==null?void 0:s.handleChainEnd(a)),a}async*_transform(e,A,r){const n={...this.steps},s=tQ(e,Object.keys(n).length),a=new Map(Object.entries(n).map(([i,o],l)=>{const u=o.transform(s[l],wt(r,{callbacks:A==null?void 0:A.getChild(`map:key:${i}`)}));return[i,u.next().then(c=>({key:i,gen:u,result:c}))]}));for(;a.size;){const i=Promise.race(a.values()),{key:o,result:l,gen:u}=await fn(i,r==null?void 0:r.signal);a.delete(o),l.done||(yield{[o]:l.value},a.set(o,u.next().then(c=>({key:o,gen:u,result:c}))))}}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=Be(A),s=new ha({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class fg extends rt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!tg(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,A){const[r]=this._getOptionsList(A??{},1),n=await TA(r),s=this.func(wt(r,{callbacks:n}),e);return fn(s,r==null?void 0:r.signal)}async*_streamIterator(e,A){var s,a;const[r]=this._getOptionsList(A??{},1),n=await this.invoke(e,A);if(Qp(n)){for await(const i of n)(s=r==null?void 0:r.signal)==null||s.throwIfAborted(),yield i;return}if(E4(n)){for(;;){(a=r==null?void 0:r.signal)==null||a.throwIfAborted();const i=n.next();if(i.done)break;yield i.value}return}yield n}static from(e){return new fg({func:e})}}function Q4(t){if(tg(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class ma extends rt{static lc_name(){return"RunnableLambda"}constructor(e){if(tg(e.func))return fg.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Q4(e.func),this.func=e.func}static from(e){return new ma({func:e})}async _invoke(e,A,r){return new Promise((n,s)=>{const a=wt(A,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((A==null?void 0:A.recursionLimit)??Ef)-1});dn.runWithConfig(ra(a),async()=>{var i,o;try{let l=await this.func(e,{...a});if(l&&rt.isRunnable(l)){if((A==null?void 0:A.recursionLimit)===0)throw new Error("Recursion limit reached.");l=await l.invoke(e,{...a,recursionLimit:(a.recursionLimit??Ef)-1})}else if(Qp(l)){let u;for await(const c of Up(a,l))if((i=A==null?void 0:A.signal)==null||i.throwIfAborted(),u===void 0)u=c;else try{u=this._concatOutputChunks(u,c)}catch{u=c}l=u}else if(h_(l)){let u;for(const c of p_(a,l))if((o=A==null?void 0:A.signal)==null||o.throwIfAborted(),u===void 0)u=c;else try{u=this._concatOutputChunks(u,c)}catch{u=c}l=u}n(l)}catch(l){s(l)}})})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async*_transform(e,A,r){var i,o;let n;for await(const l of e)if(n===void 0)n=l;else try{n=this._concatOutputChunks(n,l)}catch{n=l}const s=wt(r,{callbacks:A==null?void 0:A.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Ef)-1}),a=await new Promise((l,u)=>{dn.runWithConfig(ra(s),async()=>{try{const c=await this.func(n,{...s,config:s});l(c)}catch(c){u(c)}})});if(a&&rt.isRunnable(a)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const l=await a.stream(n,s);for await(const u of l)yield u}else if(Qp(a))for await(const l of Up(s,a))(i=r==null?void 0:r.signal)==null||i.throwIfAborted(),yield l;else if(h_(a))for(const l of p_(s,a))(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield l;else yield a}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=Be(A),s=new ha({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class U4 extends rt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,A){const r=Be(A),n=await TA(r),{runId:s,...a}=r,i=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),o=wt(a,{callbacks:i==null?void 0:i.getChild()});return await dn.runWithConfig(o,async()=>{var c;let u;for(const d of this.runnables()){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();try{const h=await d.invoke(e,o);return await(i==null?void 0:i.handleChainEnd(tt(h,"output"))),h}catch(h){u===void 0&&(u=h)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(u)),u)})}async*_streamIterator(e,A){var c;const r=Be(A),n=await TA(r),{runId:s,...a}=r,i=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let o,l;for(const d of this.runnables()){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const h=wt(a,{callbacks:i==null?void 0:i.getChild()});try{const f=await d.stream(e,h);l=Up(h,f);break}catch(f){o===void 0&&(o=f)}}if(l===void 0){const d=o??new Error("No error stored at end of fallback.");throw await(i==null?void 0:i.handleChainError(d)),d}let u;try{for await(const d of l){yield d;try{u=u===void 0?u:this._concatOutputChunks(u,d)}catch{u=void 0}}}catch(d){throw await(i==null?void 0:i.handleChainError(d)),d}await(i==null?void 0:i.handleChainEnd(tt(u,"output")))}async batch(e,A,r){var o;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(A??{},e.length),s=await Promise.all(n.map(l=>TA(l))),a=await Promise.all(s.map(async(l,u)=>{const c=await(l==null?void 0:l.handleChainStart(this.toJSON(),tt(e[u],"input"),n[u].runId,void 0,void 0,void 0,n[u].runName));return delete n[u].runId,c}));let i;for(const l of this.runnables()){(o=n[0].signal)==null||o.throwIfAborted();try{const u=await l.batch(e,a.map((c,d)=>wt(n[d],{callbacks:c==null?void 0:c.getChild()})),r);return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(tt(u[d],"output")))),u}catch(u){i===void 0&&(i=u)}}throw i?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(i))),i):new Error("No error stored at end of fallbacks.")}}function Tn(t){if(typeof t=="function")return new ma({func:t});if(rt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[A,r]of Object.entries(t))e[A]=Tn(r);return new pa({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class mQ extends rt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof pa&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,A){const r=await this.mapper.invoke(e,A);return{...e,...r}}async*_transform(e,A,r){const n=this.mapper.getStepsKeys(),[s,a]=tQ(e),i=this.mapper.transform(a,wt(r,{callbacks:A==null?void 0:A.getChild()})),o=i.next();for await(const l of s){if(typeof l!="object"||Array.isArray(l))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof l}`);const u=Object.fromEntries(Object.entries(l).filter(([c])=>!n.includes(c)));Object.keys(u).length>0&&(yield u)}yield(await o).value;for await(const l of i)yield l}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=Be(A),s=new ha({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class F4 extends rt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const A=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return A.length===0?void 0:Object.fromEntries(A)}}async invoke(e,A){return this._callWithConfig(this._pick.bind(this),e,A)}async*_transform(e){for await(const A of e){const r=await this._pick(A);r!==void 0&&(yield r)}}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=Be(A),s=new ha({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class m_ extends Pn{constructor(e){const A=ur.from([ma.from(async r=>{let n;if(yE(r))try{n=await fQ(this.schema,r.args)}catch{throw new iR("Received tool input did not match expected schema",JSON.stringify(r.args))}else n=r;return n}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:A,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function I4(t,e){const A=e.name??t.getName(),r=e.description??dg(e.schema);return y4(e.schema)?new m_({name:A,description:r,schema:EE({input:bE()}).transform(n=>n.input),bound:t}):new m_({name:A,description:r,schema:e.schema,bound:t})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var S4=typeof window=="object"?window:{},ie="0123456789abcdef".split(""),x4=[-2147483648,8388608,32768,128],vA=[24,16,8,0],Xe=[];function kA(t){t?(Xe[0]=Xe[16]=Xe[1]=Xe[2]=Xe[3]=Xe[4]=Xe[5]=Xe[6]=Xe[7]=Xe[8]=Xe[9]=Xe[10]=Xe[11]=Xe[12]=Xe[13]=Xe[14]=Xe[15]=0,this.blocks=Xe):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}kA.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===S4.ArrayBuffer&&(t=new Uint8Array(t));for(var A,r=0,n,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(n=this.start;r<s&&n<64;++r)a[n>>2]|=t[r]<<vA[n++&3];else for(n=this.start;r<s&&n<64;++r)A=t.charCodeAt(r),A<128?a[n>>2]|=A<<vA[n++&3]:A<2048?(a[n>>2]|=(192|A>>6)<<vA[n++&3],a[n>>2]|=(128|A&63)<<vA[n++&3]):A<55296||A>=57344?(a[n>>2]|=(224|A>>12)<<vA[n++&3],a[n>>2]|=(128|A>>6&63)<<vA[n++&3],a[n>>2]|=(128|A&63)<<vA[n++&3]):(A=65536+((A&1023)<<10|t.charCodeAt(++r)&1023),a[n>>2]|=(240|A>>18)<<vA[n++&3],a[n>>2]|=(128|A>>12&63)<<vA[n++&3],a[n>>2]|=(128|A>>6&63)<<vA[n++&3],a[n>>2]|=(128|A&63)<<vA[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};kA.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=x4[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};kA.prototype.hash=function(){var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4,s,a,i,o=this.blocks;for(a=16;a<80;++a)i=o[a-3]^o[a-8]^o[a-14]^o[a-16],o[a]=i<<1|i>>>31;for(a=0;a<20;a+=5)s=e&A|~e&r,i=t<<5|t>>>27,n=i+s+n+1518500249+o[a]<<0,e=e<<30|e>>>2,s=t&e|~t&A,i=n<<5|n>>>27,r=i+s+r+1518500249+o[a+1]<<0,t=t<<30|t>>>2,s=n&t|~n&e,i=r<<5|r>>>27,A=i+s+A+1518500249+o[a+2]<<0,n=n<<30|n>>>2,s=r&n|~r&t,i=A<<5|A>>>27,e=i+s+e+1518500249+o[a+3]<<0,r=r<<30|r>>>2,s=A&r|~A&n,i=e<<5|e>>>27,t=i+s+t+1518500249+o[a+4]<<0,A=A<<30|A>>>2;for(;a<40;a+=5)s=e^A^r,i=t<<5|t>>>27,n=i+s+n+1859775393+o[a]<<0,e=e<<30|e>>>2,s=t^e^A,i=n<<5|n>>>27,r=i+s+r+1859775393+o[a+1]<<0,t=t<<30|t>>>2,s=n^t^e,i=r<<5|r>>>27,A=i+s+A+1859775393+o[a+2]<<0,n=n<<30|n>>>2,s=r^n^t,i=A<<5|A>>>27,e=i+s+e+1859775393+o[a+3]<<0,r=r<<30|r>>>2,s=A^r^n,i=e<<5|e>>>27,t=i+s+t+1859775393+o[a+4]<<0,A=A<<30|A>>>2;for(;a<60;a+=5)s=e&A|e&r|A&r,i=t<<5|t>>>27,n=i+s+n-1894007588+o[a]<<0,e=e<<30|e>>>2,s=t&e|t&A|e&A,i=n<<5|n>>>27,r=i+s+r-1894007588+o[a+1]<<0,t=t<<30|t>>>2,s=n&t|n&e|t&e,i=r<<5|r>>>27,A=i+s+A-1894007588+o[a+2]<<0,n=n<<30|n>>>2,s=r&n|r&t|n&t,i=A<<5|A>>>27,e=i+s+e-1894007588+o[a+3]<<0,r=r<<30|r>>>2,s=A&r|A&n|r&n,i=e<<5|e>>>27,t=i+s+t-1894007588+o[a+4]<<0,A=A<<30|A>>>2;for(;a<80;a+=5)s=e^A^r,i=t<<5|t>>>27,n=i+s+n-899497514+o[a]<<0,e=e<<30|e>>>2,s=t^e^A,i=n<<5|n>>>27,r=i+s+r-899497514+o[a+1]<<0,t=t<<30|t>>>2,s=n^t^e,i=r<<5|r>>>27,A=i+s+A-899497514+o[a+2]<<0,n=n<<30|n>>>2,s=r^n^t,i=A<<5|A>>>27,e=i+s+e-899497514+o[a+3]<<0,r=r<<30|r>>>2,s=A^r^n,i=e<<5|e>>>27,t=i+s+t-899497514+o[a+4]<<0,A=A<<30|A>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+A<<0,this.h3=this.h3+r<<0,this.h4=this.h4+n<<0};kA.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4;return ie[t>>28&15]+ie[t>>24&15]+ie[t>>20&15]+ie[t>>16&15]+ie[t>>12&15]+ie[t>>8&15]+ie[t>>4&15]+ie[t&15]+ie[e>>28&15]+ie[e>>24&15]+ie[e>>20&15]+ie[e>>16&15]+ie[e>>12&15]+ie[e>>8&15]+ie[e>>4&15]+ie[e&15]+ie[A>>28&15]+ie[A>>24&15]+ie[A>>20&15]+ie[A>>16&15]+ie[A>>12&15]+ie[A>>8&15]+ie[A>>4&15]+ie[A&15]+ie[r>>28&15]+ie[r>>24&15]+ie[r>>20&15]+ie[r>>16&15]+ie[r>>12&15]+ie[r>>8&15]+ie[r>>4&15]+ie[r&15]+ie[n>>28&15]+ie[n>>24&15]+ie[n>>20&15]+ie[n>>16&15]+ie[n>>12&15]+ie[n>>8&15]+ie[n>>4&15]+ie[n&15]};kA.prototype.toString=kA.prototype.hex;kA.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,A>>24&255,A>>16&255,A>>8&255,A&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255]};kA.prototype.array=kA.prototype.digest;kA.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};let g_=!1;const T4=t=>(g_||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),g_=!0),new kA(!0).update(t).hex()),O4=(...t)=>T4(t.join("_"));class k4{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:O4})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const R4=new Map;class hg extends k4{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,A){return Promise.resolve(this.cache.get(this.keyEncoder(e,A))??null)}async update(e,A,r){this.cache.set(this.keyEncoder(e,A),r)}static global(){return new hg(R4)}}class gQ extends Kn{}class L4 extends gQ{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Ys(this.value)]}}class P4 extends gQ{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return BE(this.messages)}toChatMessages(){return this.messages}}var qc={};qc.byteLength=D4;qc.toByteArray=$4;qc.fromByteArray=G4;var VA=[],sA=[],H4=typeof Uint8Array<"u"?Uint8Array:Array,Sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ds=0,N4=Sf.length;ds<N4;++ds)VA[ds]=Sf[ds],sA[Sf.charCodeAt(ds)]=ds;sA[45]=62;sA[95]=63;function wQ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=t.indexOf("=");A===-1&&(A=e);var r=A===e?0:4-A%4;return[A,r]}function D4(t){var e=wQ(t),A=e[0],r=e[1];return(A+r)*3/4-r}function M4(t,e,A){return(e+A)*3/4-A}function $4(t){var e,A=wQ(t),r=A[0],n=A[1],s=new H4(M4(t,r,n)),a=0,i=n>0?r-4:r,o;for(o=0;o<i;o+=4)e=sA[t.charCodeAt(o)]<<18|sA[t.charCodeAt(o+1)]<<12|sA[t.charCodeAt(o+2)]<<6|sA[t.charCodeAt(o+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=sA[t.charCodeAt(o)]<<2|sA[t.charCodeAt(o+1)]>>4,s[a++]=e&255),n===1&&(e=sA[t.charCodeAt(o)]<<10|sA[t.charCodeAt(o+1)]<<4|sA[t.charCodeAt(o+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function j4(t){return VA[t>>18&63]+VA[t>>12&63]+VA[t>>6&63]+VA[t&63]}function K4(t,e,A){for(var r,n=[],s=e;s<A;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(j4(r));return n.join("")}function G4(t){for(var e,A=t.length,r=A%3,n=[],s=16383,a=0,i=A-r;a<i;a+=s)n.push(K4(t,a,a+s>i?i:a+s));return r===1?(e=t[A-1],n.push(VA[e>>2]+VA[e<<4&63]+"==")):r===2&&(e=(t[A-2]<<8)+t[A-1],n.push(VA[e>>10]+VA[e>>4&63]+VA[e<<2&63]+"=")),n.join("")}var V4=Object.defineProperty,z4=(t,e,A)=>e in t?V4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A,W4=(t,e,A)=>(z4(t,e+"",A),A);function J4(t,e){let A=Array.from({length:t.length},(r,n)=>({start:n,end:n+1}));for(;A.length>1;){let r=null;for(let n=0;n<A.length-1;n++){const s=t.slice(A[n].start,A[n+1].end),a=e.get(s.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,n])}if(r!=null){const n=r[1];A[n]={start:A[n].start,end:A[n+1].end},A.splice(n+1,1)}else break}return A}function Z4(t,e){return t.length===1?[e.get(t.join(","))]:J4(t,e).map(A=>e.get(t.slice(A.start,A.end).join(","))).filter(A=>A!=null)}function X4(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Fp=class{constructor(t,e){vr(this,"specialTokens");vr(this,"inverseSpecialTokens");vr(this,"patStr");vr(this,"textEncoder",new TextEncoder);vr(this,"textDecoder",new TextDecoder("utf-8"));vr(this,"rankMap",new Map);vr(this,"textMap",new Map);this.patStr=t.pat_str;const A=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,n)=>{const[s,a,...i]=n.split(" "),o=Number.parseInt(a,10);return i.forEach((l,u)=>r[l]=o+u),r},{});for(const[r,n]of Object.entries(A)){const s=qc.toByteArray(r);this.rankMap.set(s.join(","),n),this.textMap.set(n,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[n,s])=>(r[s]=this.textEncoder.encode(n),r),{})}encode(t,e=[],A="all"){const r=new RegExp(this.patStr,"ug"),n=Fp.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),i=new Set(A==="all"?Object.keys(this.specialTokens).filter(l=>!a.has(l)):A);if(i.size>0){const l=Fp.specialTokenRegex([...i]),u=t.match(l);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let o=0;for(;;){let l=null,u=o;for(;n.lastIndex=u,l=n.exec(t),!(l==null||a.has(l[0]));)u=l.index+1;const c=(l==null?void 0:l.index)??t.length;for(const h of t.substring(o,c).matchAll(r)){const f=this.textEncoder.encode(h[0]),w=this.rankMap.get(f.join(","));if(w!=null){s.push(w);continue}s.push(...Z4(f,this.rankMap))}if(l==null)break;let d=this.specialTokens[l[0]];s.push(d),o=l.index+l[0].length}return s}decode(t){const e=[];let A=0;for(let s=0;s<t.length;++s){const a=t[s],i=this.textMap.get(a)??this.inverseSpecialTokens[a];i!=null&&(e.push(i),A+=i.length)}const r=new Uint8Array(A);let n=0;for(const s of e)r.set(s,n),n+=s.length;return this.textDecoder.decode(r)}},yQ=Fp;W4(yQ,"specialTokenRegex",t=>new RegExp(t.map(e=>X4(e)).join("|"),"g"));function Y4(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const _l={},q4=new ug({});async function e2(t){return t in _l||(_l[t]=q4.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new yQ(e)).catch(e=>{throw delete _l[t],e})),await _l[t]}async function t2(t){return e2(Y4(t))}const A2=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function BQ(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const r2=()=>!1;class n2 extends rt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??r2(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class s2 extends n2{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:A,...r}){const{cache:n,...s}=r;super({callbacks:e??A,...s}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n=="object"?this.cache=n:n?this.cache=hg.global():this.cache=void 0,this.caller=new ug(r??{})}async getNumTokens(e){let A;typeof e=="string"?A=e:A=e.map(n=>typeof n=="string"?n:n.type==="text"&&"text"in n?n.text:"").join("");let r=Math.ceil(A.length/4);if(!this._encoding)try{this._encoding=await t2("modelName"in this?A2(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(A).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new L4(e):Array.isArray(e)?new P4(e.map(ei)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...A}){const r={...this._identifyingParams(),...A,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,i])=>i!==void 0).map(([a,i])=>`${a}:${JSON.stringify(i)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Yu extends rt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,A){const r=Be(A);return this.func&&await this.func(e,r),this._callWithConfig(n=>Promise.resolve(n),e,r)}async*transform(e,A){const r=Be(A);let n,s=!0;for await(const a of this._transformStreamWithConfig(e,i=>i,r))if(yield a,s)if(n===void 0)n=a;else try{n=zc(n,a)}catch{n=void 0,s=!1}this.func&&n!==void 0&&await this.func(n,r)}static assign(e){return new mQ(new pa({steps:e}))}}function xf(t){const e=[];for(const A of t){let r=A;if(Array.isArray(A.content))for(let n=0;n<A.content.length;n++){const s=A.content[n];(Yk(s)||qk(s))&&r===A&&(r=new A.constructor({...r,content:[...A.content.slice(0,n),eR(s),...A.content.slice(n+1)]}))}e.push(r)}return e}class Lr extends s2{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[A,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=A.signal,[A,r]}async invoke(e,A){const r=Lr._convertInputToPromptValue(e);return(await this.generatePrompt([r],A,A==null?void 0:A.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,A,r){throw new Error("Not implemented.")}async*_streamIterator(e,A){var r;if(this._streamResponseChunks===Lr.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,A);else{const s=Lr._convertInputToPromptValue(e).toChatMessages(),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(A),o={...a.metadata,...this.getLsParams(i)},l=await Pt.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},c=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),[xf(s)],a.runId,void 0,u,void 0,void 0,a.runName));let d,h;try{for await(const f of this._streamResponseChunks(s,i,c==null?void 0:c[0])){if(f.message.id==null){const w=(r=c==null?void 0:c.at(0))==null?void 0:r.runId;w!=null&&f.message._updateId(`run-${w}`)}f.message.response_metadata={...f.generationInfo,...f.message.response_metadata},yield f.message,d?d=d.concat(f):d=f,cB(f.message)&&f.message.usage_metadata!==void 0&&(h={tokenUsage:{promptTokens:f.message.usage_metadata.input_tokens,completionTokens:f.message.usage_metadata.output_tokens,totalTokens:f.message.usage_metadata.total_tokens}})}}catch(f){throw await Promise.all((c??[]).map(w=>w==null?void 0:w.handleLLMError(f))),f}await Promise.all((c??[]).map(f=>f==null?void 0:f.handleLLMEnd({generations:[[d]],llmOutput:h})))}}getLsParams(e){const A=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:A}}async _generateUncached(e,A,r,n){var c,d;const s=e.map(h=>h.map(ei));let a;if(n!==void 0&&n.length===s.length)a=n;else{const h={...r.metadata,...this.getLsParams(A)},f=await Pt.configure(r.callbacks,this.callbacks,r.tags,this.tags,h,this.metadata,{verbose:this.verbose}),w={options:A,invocation_params:this==null?void 0:this.invocationParams(A),batch_size:1};a=await(f==null?void 0:f.handleChatModelStart(this.toJSON(),s.map(xf),r.runId,void 0,w,void 0,void 0,r.runName))}const i=[],o=[];if(!!(a!=null&&a[0].handlers.find(NH))&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==Lr.prototype._streamResponseChunks)try{const h=await this._streamResponseChunks(s[0],A,a==null?void 0:a[0]);let f,w;for await(const y of h){if(y.message.id==null){const p=(c=a==null?void 0:a.at(0))==null?void 0:c.runId;p!=null&&y.message._updateId(`run-${p}`)}f===void 0?f=y:f=zc(f,y),cB(y.message)&&y.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:y.message.usage_metadata.input_tokens,completionTokens:y.message.usage_metadata.output_tokens,totalTokens:y.message.usage_metadata.total_tokens}})}if(f===void 0)throw new Error("Received empty response from chat model call.");i.push([f]),await(a==null?void 0:a[0].handleLLMEnd({generations:i,llmOutput:w}))}catch(h){throw await(a==null?void 0:a[0].handleLLMError(h)),h}else{const h=await Promise.allSettled(s.map((f,w)=>this._generate(f,{...A,promptIndex:w},a==null?void 0:a[w])));await Promise.all(h.map(async(f,w)=>{var y,p,m;if(f.status==="fulfilled"){const g=f.value;for(const B of g.generations){if(B.message.id==null){const _=(y=a==null?void 0:a.at(0))==null?void 0:y.runId;_!=null&&B.message._updateId(`run-${_}`)}B.message.response_metadata={...B.generationInfo,...B.message.response_metadata}}return g.generations.length===1&&(g.generations[0].message.response_metadata={...g.llmOutput,...g.generations[0].message.response_metadata}),i[w]=g.generations,o[w]=g.llmOutput,(p=a==null?void 0:a[w])==null?void 0:p.handleLLMEnd({generations:[g.generations],llmOutput:g.llmOutput})}else return await((m=a==null?void 0:a[w])==null?void 0:m.handleLLMError(f.reason)),Promise.reject(f.reason)}))}const u={generations:i,llmOutput:o.length?(d=this._combineLLMOutput)==null?void 0:d.call(this,...o):void 0};return Object.defineProperty(u,o_,{value:a?{runIds:a==null?void 0:a.map(h=>h.runId)}:void 0,configurable:!0}),u}async _generateCached({messages:e,cache:A,llmStringKey:r,parsedOptions:n,handledOptions:s}){const a=e.map(y=>y.map(ei)),i={...s.metadata,...this.getLsParams(n)},o=await Pt.configure(s.callbacks,this.callbacks,s.tags,this.tags,i,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1},u=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),a.map(xf),s.runId,void 0,l,void 0,void 0,s.runName)),c=[],h=(await Promise.allSettled(a.map(async(y,p)=>{const m=Lr._convertInputToPromptValue(y).toString(),g=await A.lookup(m,r);return g==null&&c.push(p),g}))).map((y,p)=>({result:y,runManager:u==null?void 0:u[p]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),f=[];await Promise.all(h.map(async({result:y,runManager:p},m)=>{if(y.status==="fulfilled"){const g=y.value;return f[m]=g.map(B=>("message"in B&&Pc(B.message)&&co(B.message)&&(B.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),B.generationInfo={...B.generationInfo,tokenUsage:{}},B)),g.length&&await(p==null?void 0:p.handleLLMNewToken(g[0].text)),p==null?void 0:p.handleLLMEnd({generations:[g]},void 0,void 0,void 0,{cached:!0})}else return await(p==null?void 0:p.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(y.reason)}));const w={generations:f,missingPromptIndices:c,startedRunManagers:u};return Object.defineProperty(w,o_,{value:u?{runIds:u==null?void 0:u.map(y=>y.runId)}:void 0,configurable:!0}),w}async generate(e,A,r){let n;Array.isArray(A)?n={stop:A}:n=A;const s=e.map(f=>f.map(ei)),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(n);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(s,i,a);const{cache:o}=this,l=this._getSerializedCacheKeyParametersForCall(i),{generations:u,missingPromptIndices:c,startedRunManagers:d}=await this._generateCached({messages:s,cache:o,llmStringKey:l,parsedOptions:i,handledOptions:a});let h={};if(c.length>0){const f=await this._generateUncached(c.map(w=>s[w]),i,a,d!==void 0?c.map(w=>d==null?void 0:d[w]):void 0);await Promise.all(f.generations.map(async(w,y)=>{const p=c[y];u[p]=w;const m=Lr._convertInputToPromptValue(s[p]).toString();return o.update(m,l,w)})),h=f.llmOutput??{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,A,r){const n=e.map(s=>s.toChatMessages());return this.generate(n,A,r)}async call(e,A,r){return(await this.generate([e.map(ei)],A,r)).generations[0][0].message}async callPrompt(e,A,r){const n=e.toChatMessages();return this.call(n,A,r)}async predictMessages(e,A,r){return this.call(e,A,r)}async predict(e,A,r){const n=new Ys(e),s=await this.call([n],A,r);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,A){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(A!=null&&A.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,n=A==null?void 0:A.name,s=dg(r)??"A function available to call.",a=A==null?void 0:A.method,i=A==null?void 0:A.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let o=n??"extract",l;xn(r)?l=[{type:"function",function:{name:o,description:s,parameters:Vr(r)}}]:("name"in r&&(o=r.name),l=[{type:"function",function:{name:o,description:s,parameters:r}}]);const u=this.bindTools(l),c=ma.from(w=>{if(!w.tool_calls||w.tool_calls.length===0)throw new Error("No tool calls found in the response.");const y=w.tool_calls.find(p=>p.name===o);if(!y)throw new Error(`No tool call found with name ${o}.`);return y.args});if(!i)return u.pipe(c).withConfig({runName:"StructuredOutput"});const d=Yu.assign({parsed:(w,y)=>c.invoke(w.raw,y)}),h=Yu.assign({parsed:()=>null}),f=d.withFallbacks({fallbacks:[h]});return ur.from([{raw:u},f]).withConfig({runName:"StructuredOutputRunnable"})}}class a2 extends rt{parseResultWithPrompt(e,A,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,A){return typeof e=="string"?this._callWithConfig(async(r,n)=>this.parseResult([{text:r}],n==null?void 0:n.callbacks),e,{...A,runType:"parser"}):this._callWithConfig(async(r,n)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],n==null?void 0:n.callbacks),e,{...A,runType:"parser"})}}class _Q extends a2{parseResult(e,A){return this.parse(e[0].text,A)}async parseWithPrompt(e,A,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class pg extends Error{constructor(e,A,r,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=A,this.observation=r,this.sendToLLM=n,n&&(r===void 0||A===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");wE(this,"OUTPUT_PARSING_FAILURE")}}class i2 extends _Q{async*_transform(e){for await(const A of e)typeof A=="string"?yield this.parseResult([{text:A}]):yield this.parseResult([{message:A,text:this._baseMessageToString(A)}])}async*transform(e,A){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...A,runType:"parser"})}}class vQ extends i2{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let A,r;for await(const n of e){if(typeof n!="string"&&typeof n.content!="string")throw new Error("Cannot handle non-string output.");let s;if(sR(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");s=new zn({message:n,text:n.content})}else if(Pc(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");s=new zn({message:uR(n),text:n.content})}else s=new na({text:n});r===void 0?r=s:r=r.concat(s);const a=await this.parsePartialResult([r]);a!=null&&!bp(a,A)&&(this.diff?yield this._diff(A,a):yield a,A=a)}}getFormatInstructions(){return""}}class w_ extends _Q{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const A=EE(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,bE().describe(n)])));return new this(A)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Vr(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(n,s)=>`"${s.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await fQ(this.schema,JSON.parse(r))}catch(A){throw new pg(`Failed to parse. Text: "${e}". Error: ${A}`,e)}}}class y_ extends vQ{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,A){return this.diff?super._concatOutputChunks(e,A):A}_diff(e,A){if(A)return e?cL(e,A):[{op:"replace",path:"",value:A}]}async parsePartialResult(e){return nB(e[0].text)}async parse(e){return nB(e,JSON.parse)}getFormatInstructions(){return""}}function mg(t,e){if(t.function===void 0)return;let A;if(e!=null&&e.partial)try{A=Ym(t.function.arguments??"{}")}catch{return}else try{A=JSON.parse(t.function.arguments)}catch(n){throw new pg([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${n.message}`].join(`
`))}const r={name:t.function.name,args:A,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function o2(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Ip(t,e){var A,r;return{name:(A=t.function)==null?void 0:A.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class l2 extends vQ{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,A=!0){var a;const r=e[0].message;let n;if(co(r)&&((a=r.tool_calls)!=null&&a.length)?n=r.tool_calls.map(i=>{const{id:o,...l}=i;return this.returnId?{id:o,...l}:l}):r.additional_kwargs.tool_calls!==void 0&&(n=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(o=>mg(o,{returnId:this.returnId,partial:A}))),!n)return[];const s=[];for(const i of n)if(i!==void 0){const o={type:i.name,args:i.args,id:i.id};s.push(o)}return s}}class B_ extends l2{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const A=await w4(this.zodSchema,e);if(A.success)return A.data;throw new pg(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=A.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName);let n=r;if(r.length)return this.returnId||(n=r.map(s=>s.args)),this.returnSingle?n[0]:n}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let n=r;return r.length?(this.returnId||(n=r.map(a=>a.args)),this.returnSingle?this._validateResult(n[0]):await Promise.all(n.map(a=>this._validateResult(a)))):void 0}}function u2(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:A,azureOpenAIApiKey:r,azureOpenAIBasePath:n,baseURL:s,azureADTokenProvider:a,azureOpenAIEndpoint:i}=t;if((r||a)&&n&&e)return`${n}/${e}`;if((r||a)&&i&&e)return`${i}/openai/deployments/${e}`;if(r||a){if(!A)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${A}.openai.azure.com/openai/deployments/${e}`}return s}function c2(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function d2(t){return t!==void 0&&rt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function f2(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(xn(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function CQ(t){return f2(t)||d2(t)||c2(t)}function h2(t,e){return{name:t.name,description:t.description,parameters:Vr(t.schema)}}function p2(t,e){let A;return CQ(t)?A={type:"function",function:h2(t)}:A=t,A}const m2=Symbol("Let zodToJsonSchema decide on which parser to use"),__={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},g2=t=>typeof t=="string"?{...__,basePath:["#"],definitions:{},name:t}:{...__,basePath:["#"],definitions:{},...t},Sp=t=>"_def"in t?t._def:t;function w2(t){if(!t)return!0;for(const e in t)return!1;return!0}const y2=t=>{const e=g2(t),A=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:A,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,n])=>[Sp(n),{def:Sp(n),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function bQ(t,e,A,r){r!=null&&r.errorMessages&&A&&(t.errorMessage={...t.errorMessage,[e]:A})}function ve(t,e,A,r,n){t[e]=A,bQ(t,e,r,n)}function B2(){return{}}function _2(t,e){var r,n;const A={type:"array"};return((n=(r=t.type)==null?void 0:r._def)==null?void 0:n.typeName)!==x.ZodAny&&(A.items=ge(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&ve(A,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ve(A,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ve(A,"minItems",t.exactLength.value,t.exactLength.message,e),ve(A,"maxItems",t.exactLength.value,t.exactLength.message,e)),A}function v2(t,e){const A={type:"integer",format:"int64"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ve(A,"minimum",r.value,r.message,e):ve(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),ve(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ve(A,"maximum",r.value,r.message,e):ve(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),ve(A,"maximum",r.value,r.message,e));break;case"multipleOf":ve(A,"multipleOf",r.value,r.message,e);break}return A}function C2(){return{type:"boolean"}}function b2(t,e){return ge(t.type._def,e)}const E2=(t,e)=>ge(t.innerType._def,e);function EQ(t,e,A){const r=A??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,s)=>EQ(t,e,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Q2(t,e)}}const Q2=(t,e)=>{const A={type:"integer",format:"unix-time"};if(e.target==="openApi3")return A;for(const r of t.checks)switch(r.kind){case"min":ve(A,"minimum",r.value,r.message,e);break;case"max":ve(A,"maximum",r.value,r.message,e);break}return A};function U2(t,e){return{...ge(t.innerType._def,e),default:t.defaultValue()}}function F2(t,e,A){return e.effectStrategy==="input"?ge(t.schema._def,e,A):{}}function I2(t){return{type:"string",enum:[...t.values]}}const S2=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function x2(t,e){const A=[ge(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ge(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const n=[];return A.forEach(s=>{if(S2(s))n.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...o}=s;a=o}else r=void 0;n.push(a)}}),n.length?{allOf:n,...r}:void 0}function T2(t,e){const A=typeof t.value;return A!=="bigint"&&A!=="number"&&A!=="boolean"&&A!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:A==="bigint"?"integer":A,enum:[t.value]}:{type:A==="bigint"?"integer":A,const:t.value}}let Tf;const yn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Tf===void 0&&(Tf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Tf),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function QQ(t,e){const A={type:"string"};function r(n){return e.patternStrategy==="escape"?O2(n):n}if(t.checks)for(const n of t.checks)switch(n.kind){case"min":ve(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,n.value):n.value,n.message,e);break;case"max":ve(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":CA(A,"email",n.message,e);break;case"format:idn-email":CA(A,"idn-email",n.message,e);break;case"pattern:zod":bA(A,yn.email,n.message,e);break}break;case"url":CA(A,"uri",n.message,e);break;case"uuid":CA(A,"uuid",n.message,e);break;case"regex":bA(A,n.regex,n.message,e);break;case"cuid":bA(A,yn.cuid,n.message,e);break;case"cuid2":bA(A,yn.cuid2,n.message,e);break;case"startsWith":bA(A,RegExp(`^${r(n.value)}`),n.message,e);break;case"endsWith":bA(A,RegExp(`${r(n.value)}$`),n.message,e);break;case"datetime":CA(A,"date-time",n.message,e);break;case"date":CA(A,"date",n.message,e);break;case"time":CA(A,"time",n.message,e);break;case"duration":CA(A,"duration",n.message,e);break;case"length":ve(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,n.value):n.value,n.message,e),ve(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,n.value):n.value,n.message,e);break;case"includes":{bA(A,RegExp(r(n.value)),n.message,e);break}case"ip":{n.version!=="v6"&&CA(A,"ipv4",n.message,e),n.version!=="v4"&&CA(A,"ipv6",n.message,e);break}case"emoji":bA(A,yn.emoji,n.message,e);break;case"ulid":{bA(A,yn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{CA(A,"binary",n.message,e);break}case"contentEncoding:base64":{ve(A,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{bA(A,yn.base64,n.message,e);break}}break}case"nanoid":bA(A,yn.nanoid,n.message,e)}return A}const O2=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),CA=(t,e,A,r)=>{var n;t.format||(n=t.anyOf)!=null&&n.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...A&&r.errorMessages&&{errorMessage:{format:A}}})):ve(t,"format",e,A,r)},bA=(t,e,A,r)=>{var n;t.pattern||(n=t.allOf)!=null&&n.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:v_(e,r),...A&&r.errorMessages&&{errorMessage:{pattern:A}}})):ve(t,"pattern",v_(e,r),A,r)},v_=(t,e)=>{var l;const A=typeof t=="function"?t():t;if(!e.applyRegexFlags||!A.flags)return A.source;const r={i:A.flags.includes("i"),m:A.flags.includes("m"),s:A.flags.includes("s")},n=r.i?A.source.toLowerCase():A.source;let s="",a=!1,i=!1,o=!1;for(let u=0;u<n.length;u++){if(a){s+=n[u],a=!1;continue}if(r.i){if(i){if(n[u].match(/[a-z]/)){o?(s+=n[u],s+=`${n[u-2]}-${n[u]}`.toUpperCase(),o=!1):n[u+1]==="-"&&((l=n[u+2])!=null&&l.match(/[a-z]/))?(s+=n[u],o=!0):s+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){s+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){s+=i?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}s+=n[u],n[u]==="\\"?a=!0:i&&n[u]==="]"?i=!1:!i&&n[u]==="["&&(i=!0)}try{const u=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),A.source}return s};function UQ(t,e){var r,n,s,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===x.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((i,o)=>({...i,[o]:ge(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??{}}),{}),additionalProperties:!1};const A={type:"object",additionalProperties:ge(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return A;if(((n=t.keyType)==null?void 0:n._def.typeName)===x.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const i=Object.entries(QQ(t.keyType._def,e)).reduce((o,[l,u])=>l==="type"?o:{...o,[l]:u},{});return{...A,propertyNames:i}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===x.ZodEnum)return{...A,propertyNames:{enum:t.keyType._def.values}};return A}function k2(t,e){if(e.mapStrategy==="record")return UQ(t,e);const A=ge(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=ge(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[A,r],minItems:2,maxItems:2}}}function R2(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),n=Array.from(new Set(r.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:r}}function L2(){return{not:{}}}function P2(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const qu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function H2(t,e){if(e.target==="openApi3")return C_(t,e);const A=t.options instanceof Map?Array.from(t.options.values()):t.options;if(A.every(r=>r._def.typeName in qu&&(!r._def.checks||!r._def.checks.length))){const r=A.reduce((n,s)=>{const a=qu[s._def.typeName];return a&&!n.includes(a)?[...n,a]:n},[]);return{type:r.length>1?r:r[0]}}else if(A.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=A.reduce((n,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...n,a];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(r.length===A.length){const n=r.filter((s,a,i)=>i.indexOf(s)===a);return{type:n.length>1?n:n[0],enum:A.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(A.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:A.reduce((r,n)=>[...r,...n._def.values.filter(s=>!r.includes(s))],[])};return C_(t,e)}const C_=(t,e)=>{const A=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,n)=>ge(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return A.length?{anyOf:A}:void 0};function N2(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:qu[t.innerType._def.typeName],nullable:!0}:{type:[qu[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=ge(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const A=ge(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return A&&{anyOf:[A,{type:"null"}]}}function D2(t,e){const A={type:"number"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"int":A.type="integer",bQ(A,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ve(A,"minimum",r.value,r.message,e):ve(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),ve(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ve(A,"maximum",r.value,r.message,e):ve(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),ve(A,"maximum",r.value,r.message,e));break;case"multipleOf":ve(A,"multipleOf",r.value,r.message,e);break}return A}function M2(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":ge(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":ge(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function $2(t,e){const A={type:"object",...Object.entries(t.shape()).reduce((r,[n,s])=>{var o;if(s===void 0||s._def===void 0)return r;const a=[...e.currentPath,"properties",n],i=ge(s._def,{...e,currentPath:a,propertyPath:a});if(i===void 0)return r;if(e.openaiStrictMode&&s.isOptional()&&!s.isNullable()&&typeof((o=s._def)==null?void 0:o.defaultValue)>"u")throw new Error(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[n]:i},required:s.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,n]}},{properties:{},required:[]}),additionalProperties:M2(t,e)};return A.required.length||delete A.required,A}const j2=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return ge(t.innerType._def,{...e,currentPath:e.currentPath});const A=ge(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return A?{anyOf:[{not:{}},A]}:{}},K2=(t,e)=>{if(e.pipeStrategy==="input")return ge(t.in._def,e);if(e.pipeStrategy==="output")return ge(t.out._def,e);const A=ge(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=ge(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",A?"1":"0"]});return{allOf:[A,r].filter(n=>n!==void 0)}};function G2(t,e){return ge(t.type._def,e)}function V2(t,e){const r={type:"array",uniqueItems:!0,items:ge(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&ve(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ve(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function z2(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((A,r)=>ge(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[]),additionalItems:ge(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((A,r)=>ge(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[])}}function W2(){return{not:{}}}function J2(){return{}}const Z2=(t,e)=>ge(t.innerType._def,e);function ge(t,e,A=!1){var a;const r=e.seen.get(t);if(e.override){const i=(a=e.override)==null?void 0:a.call(e,t,e,r,A);if(i!==m2)return i}if(r&&!A){const i=X2(r,e);if(i!==void 0)return"$ref"in i&&e.seenRefs.add(i.$ref),i}const n={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,n);const s=q2(t,t.typeName,e,A);return s&&eD(t,e,s),n.jsonSchema=s,s}const X2=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const A=t.path.slice(e.basePath.length+1).join("_");return A!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[A]=t.def),{$ref:[...e.basePath,e.definitionPath,A].join("/")};case"relative":return{$ref:Y2(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Y2=(t,e)=>{let A=0;for(;A<t.length&&A<e.length&&t[A]===e[A];A++);return[(t.length-A).toString(),...e.slice(A)].join("/")},q2=(t,e,A,r)=>{switch(e){case x.ZodString:return QQ(t,A);case x.ZodNumber:return D2(t,A);case x.ZodObject:return $2(t,A);case x.ZodBigInt:return v2(t,A);case x.ZodBoolean:return C2();case x.ZodDate:return EQ(t,A);case x.ZodUndefined:return W2();case x.ZodNull:return P2(A);case x.ZodArray:return _2(t,A);case x.ZodUnion:case x.ZodDiscriminatedUnion:return H2(t,A);case x.ZodIntersection:return x2(t,A);case x.ZodTuple:return z2(t,A);case x.ZodRecord:return UQ(t,A);case x.ZodLiteral:return T2(t,A);case x.ZodEnum:return I2(t);case x.ZodNativeEnum:return R2(t);case x.ZodNullable:return N2(t,A);case x.ZodOptional:return j2(t,A);case x.ZodMap:return k2(t,A);case x.ZodSet:return V2(t,A);case x.ZodLazy:return ge(t.getter()._def,A);case x.ZodPromise:return G2(t,A);case x.ZodNaN:case x.ZodNever:return L2();case x.ZodEffects:return F2(t,A,r);case x.ZodAny:return B2();case x.ZodUnknown:return J2();case x.ZodDefault:return U2(t,A);case x.ZodBranded:return b2(t,A);case x.ZodReadonly:return Z2(t,A);case x.ZodCatch:return E2(t,A);case x.ZodPipeline:return K2(t,A);case x.ZodFunction:case x.ZodVoid:case x.ZodSymbol:return;default:return(n=>{})()}},eD=(t,e,A)=>(t.description&&(A.description=t.description,e.markdownDescription&&(A.markdownDescription=t.description)),A),tD=(t,e)=>{const A=y2(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,n=ge(t._def,r===void 0?A:{...A,currentPath:[...A.basePath,A.definitionPath,r]},!1)??{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(n.title=s);const a=(()=>{if(w2(A.definitions))return;const o={},l=new Set;for(let u=0;u<500;u++){const c=Object.entries(A.definitions).filter(([d])=>!l.has(d));if(c.length===0)break;for(const[d,h]of c)o[d]=ge(Sp(h),{...A,currentPath:[...A.basePath,A.definitionPath,d]},!0)??{},l.add(d)}return o})(),i=r===void 0?a?{...n,[A.definitionPath]:a}:n:A.nameStrategy==="duplicate-ref"?{...n,...a||A.seenRefs.size?{[A.definitionPath]:{...a,...A.seenRefs.size?{[r]:n}:void 0}}:void 0}:{$ref:[...A.$refStrategy==="relative"?[]:A.basePath,A.definitionPath,r].join("/"),[A.definitionPath]:{...a,[r]:n}};return A.target==="jsonSchema7"?i.$schema="http://json-schema.org/draft-07/schema#":A.target==="jsonSchema2019-09"&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),i};function AD(t,e){return tD(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function rD(t,e,A){return gk({type:"json_schema",json_schema:{...A,name:e,strict:!0,schema:AD(t,{name:e})}},r=>t.parse(JSON.parse(r)))}function vl(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function FQ(t){let e;return t.constructor.name===Ic.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Zt.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=vl(t,"INVALID_TOOL_RESULTS"):t.status===401?e=vl(t,"MODEL_AUTHENTICATION"):t.status===429?e=vl(t,"MODEL_RATE_LIMIT"):t.status===404?e=vl(t,"MODEL_NOT_FOUND"):e=t,e}function IQ(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function nD(t,e){const A={...t};return Object.defineProperties(A,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),A}function sD(t,e,A){if(tr(t))return rD(t,e,A);if(PA(t))return nD({type:"json_schema",json_schema:{...A,name:e,strict:!0,schema:Cp(t,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>sQ(t,JSON.parse(r)));throw new Error("Unsupported schema response format")}function aD(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function iD(t){const e=["namespace functions {",""];for(const A of t)A.description&&e.push(`// ${A.description}`),Object.keys(A.parameters.properties??{}).length>0?(e.push(`type ${A.name} = (_: {`),e.push(SQ(A.parameters,0)),e.push("}) => any;")):e.push(`type ${A.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function SQ(t,e){var r;const A=[];for(const[n,s]of Object.entries(t.properties??{}))s.description&&e<2&&A.push(`// ${s.description}`),(r=t.required)!=null&&r.includes(n)?A.push(`${n}: ${ec(s,e)},`):A.push(`${n}?: ${ec(s,e)},`);return A.map(n=>" ".repeat(e)+n).join(`
`)}function ec(t,e){if(aD(t))return t.anyOf.map(A=>ec(A,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(A=>`"${A}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(A=>`${A}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(A=>`${A}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",SQ(t,e+2),"}"].join(`
`);case"array":return t.items?`${ec(t.items,e)}[]`:"any[]";default:return""}}function oD(t,e){let A;return CQ(t)?A=p2(t):A=t,A.type==="function"&&(e==null?void 0:e.strict)!==void 0&&(A.function.strict=e.strict),A}function gg(t){return"type"in t&&t.type!=="function"&&t.type!=="custom"}function lD(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function uD(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function xQ(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function cD(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function dD(t){return t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function fD(t){const e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function hD(t){const e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}const fs="__openai_function_call_ids__";function ed(t){return t?!!(/^o\d/.test(t??"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function pD(t){return t!==void 0&&typeof t.schema=="object"}function mD(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function wg(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!fo.isInstance(t))throw new Error("Invalid generic chat message");return mD(t)}default:throw new Error(`Unknown message type: ${e}`)}}const TQ={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,A;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(A=t.metadata)!=null&&A.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=uB({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const A=e.mime_type||t.mime_type||"";let r;try{r=lB(A)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=lB(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,A,r,n,s,a,i,o,l,u;if(t.source_type==="url"){if(!uB({dataUrl:t.url}))throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(A=t.metadata)!=null&&A.name?{filename:((r=t.metadata)==null?void 0:r.filename)||((n=t.metadata)==null?void 0:n.name)}:{}}}}if(t.source_type==="base64")return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(s=t.metadata)!=null&&s.filename||(a=t.metadata)!=null&&a.name||(i=t.metadata)!=null&&i.title?{filename:((o=t.metadata)==null?void 0:o.filename)||((l=t.metadata)==null?void 0:l.name)||((u=t.metadata)==null?void 0:u.title)}:{}}};if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}};function b_(t,e){return t.flatMap(A=>{var a;let r=wg(A);r==="system"&&ed(e)&&(r="developer");const n=typeof A.content=="string"?A.content:A.content.map(i=>Gn(i)?mE(i,TQ):i),s={role:r,content:n};if(A.name!=null&&(s.name=A.name),A.additional_kwargs.function_call!=null&&(s.function_call=A.additional_kwargs.function_call,s.content=""),co(A)&&((a=A.tool_calls)!=null&&a.length)?(s.tool_calls=A.tool_calls.map(o2),s.content=""):(A.additional_kwargs.tool_calls!=null&&(s.tool_calls=A.additional_kwargs.tool_calls),A.tool_call_id!=null&&(s.tool_call_id=A.tool_call_id)),A.additional_kwargs.audio&&typeof A.additional_kwargs.audio=="object"&&"id"in A.additional_kwargs.audio){const i={role:"assistant",audio:{id:A.additional_kwargs.audio.id}};return[s,i]}return s})}class yg extends Lr{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","reasoningEffort","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model",reasoningEffort:"reasoning_effort"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","reasoningEffort","promptCacheKey","verbosity"]}getLsParams(e){const A=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:A.temperature??void 0,ls_max_tokens:A.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){var A,r;super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"promptCacheKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbosity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=(e==null?void 0:e.apiKey)??((A=e==null?void 0:e.configuration)==null?void 0:A.apiKey)??nn("OPENAI_API_KEY"),this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??nn("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=(e==null?void 0:e.reasoning)??(e==null?void 0:e.reasoningEffort)?{effort:e.reasoningEffort}:void 0,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.streaming=(e==null?void 0:e.streaming)??!1,this.streaming===!1&&(this.disableStreaming=!0),this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_getReasoningParams(e){if(!ed(this.model))return;let A;return this.reasoning!==void 0&&(A={...A,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(A={...A,...e.reasoning}),A}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&xn(e.json_schema.schema)?sD(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},n=u2(r),s={...this.clientConfig,baseURL:n,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new ue(s)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,A){return uD(e)?hD(e.metadata.customTool):BQ(e)?(A==null?void 0:A.strict)!==void 0?{...e,function:{...e.function,strict:A.strict}}:e:oD(e,A)}bindTools(e,A){let r;return(A==null?void 0:A.strict)!==void 0?r=A.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(n=>gg(n)?n:this._convertChatOpenAIToolToCompletionsTool(n,{strict:r})),...A})}async stream(e,A){return super.stream(e,this._combineCallOptions(A))}async invoke(e,A){return super.invoke(e,this._combineCallOptions(A))}_combineLLMOutput(...e){return e.reduce((A,r)=>(r&&r.tokenUsage&&(A.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,A.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,A.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),A),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let A=0,r=0,n=0;this.model==="gpt-3.5-turbo-0301"?(r=4,n=-1):(r=3,n=1);const s=await Promise.all(e.map(async a=>{var d,h,f,w,y,p;const i=await this.getNumTokens(a.content),o=await this.getNumTokens(wg(a)),l=a.name!==void 0?n+await this.getNumTokens(a.name):0;let u=i+r+o+l;const c=a;if(c._getType()==="function"&&(u-=2),(d=c.additional_kwargs)!=null&&d.function_call&&(u+=3),(h=c==null?void 0:c.additional_kwargs.function_call)!=null&&h.name&&(u+=await this.getNumTokens((f=c.additional_kwargs.function_call)==null?void 0:f.name)),(w=c.additional_kwargs.function_call)!=null&&w.arguments)try{u+=await this.getNumTokens(JSON.stringify(JSON.parse((y=c.additional_kwargs.function_call)==null?void 0:y.arguments)))}catch(m){console.error("Error parsing function arguments",m,JSON.stringify(c.additional_kwargs.function_call)),u+=await this.getNumTokens((p=c.additional_kwargs.function_call)==null?void 0:p.arguments)}return A+=u,u}));return A+=3,{totalCount:A,countPerMessage:s}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var n;return(n=r.message.additional_kwargs)!=null&&n.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,n)=>r+n,0)}async _getEstimatedTokenCountFromPrompt(e,A,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(A&&r!=="auto"){const s=iD(A);n+=await this.getNumTokens(s),n+=9}return A&&e.find(s=>s._getType()==="system")&&(n-=4),r==="none"?n+=1:typeof r=="object"&&(n+=await this.getNumTokens(r.name)+4),n}_getStructuredOutputMethod(e){const A={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((A==null?void 0:A.method)===void 0)return"jsonSchema"}else A.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return A.method}withStructuredOutput(e,A){let r,n,s,a;pD(e)?(r=e.schema,n=e.name,s=e.method,a=e.includeRaw):(r=e,n=A==null?void 0:A.name,s=A==null?void 0:A.method,a=A==null?void 0:A.includeRaw);let i,o;if((A==null?void 0:A.strict)!==void 0&&s==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(s=this._getStructuredOutputMethod({...A,method:s}),s==="jsonMode"){xn(r)?o=w_.fromZodSchema(r):o=new y_;const d=Vr(r);i=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:n??"extract",...d}}})}else if(s==="jsonSchema"){const d={name:n??"extract",description:dg(r),schema:r,strict:A==null?void 0:A.strict},h=Vr(d.schema);if(i=this.withConfig({response_format:{type:"json_schema",json_schema:d},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:d.name,description:d.description,...h}}}),xn(r)){const f=w_.fromZodSchema(r);o=ma.from(w=>"parsed"in w.additional_kwargs?w.additional_kwargs.parsed:f)}else o=new y_}else{let d=n??"extract";if(xn(r)){const h=Vr(r);i=this.withConfig({tools:[{type:"function",function:{name:d,description:h.description,parameters:h}}],tool_choice:{type:"function",function:{name:d}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:d,...h}},...(A==null?void 0:A.strict)!==void 0?{strict:A.strict}:{}}),o=new B_({returnSingle:!0,keyName:d,zodSchema:r})}else{let h;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(h=r,d=r.name):(d=r.title??d,h={name:d,description:r.description??"",parameters:r});const f=Vr(r);i=this.withConfig({tools:[{type:"function",function:h}],tool_choice:{type:"function",function:{name:d}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:d,...f}},...(A==null?void 0:A.strict)!==void 0?{strict:A.strict}:{}}),o=new B_({returnSingle:!0,keyName:d})}}if(!a)return i.pipe(o);const l=Yu.assign({parsed:(d,h)=>o.invoke(d.raw,h)}),u=Yu.assign({parsed:()=>null}),c=l.withFallbacks({fallbacks:[u]});return ur.from([{raw:i},c])}}class gD extends yg{invocationParams(e){var s;let A;(e==null?void 0:e.strict)!==void 0?A=e.strict:this.supportsStrictToolCalling!==void 0&&(A=this.supportsStrictToolCalling);const r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(s=e==null?void 0:e.tools)!=null&&s.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:A}):void 0,tool_choice:lD(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const a=IQ(e==null?void 0:e.tool_choice);if(typeof a=="object"&&"type"in a){if(a.type==="function")return{type:"function",name:a.function.name};if(a.type==="allowed_tools")return{type:"allowed_tools",mode:a.allowed_tools.mode,tools:a.allowed_tools.tools};if(a.type==="custom")return{type:"custom",name:a.custom.name}}})(),text:(()=>{if(e!=null&&e.text)return e.text;const a=this._getResponseFormat(e==null?void 0:e.response_format);return(a==null?void 0:a.type)==="json_schema"?a.json_schema.schema!=null?{format:{type:"json_schema",schema:a.json_schema.schema,description:a.json_schema.description,name:a.json_schema.name,strict:a.json_schema.strict},verbosity:e==null?void 0:e.verbosity}:void 0:{format:a,verbosity:e==null?void 0:e.verbosity}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},n=this._getReasoningParams(e);return n!==void 0&&(r.reasoning=n),r}async _generate(e,A){var n;const r=this.invocationParams(A);if(r.stream){const s=this._streamResponseChunks(e,A);let a;for await(const i of s)i.message.response_metadata={...i.generationInfo,...i.message.response_metadata},a=(a==null?void 0:a.concat(i))??i;return{generations:a?[a]:[],llmOutput:{estimatedTokenUsage:(n=a==null?void 0:a.message)==null?void 0:n.usage_metadata}}}else{const s=this._convertMessagesToResponsesParams(e),a=await this.completionWithRetry({input:s,...r,stream:!1},{signal:A==null?void 0:A.signal,...A==null?void 0:A.options});return{generations:[{text:a.output_text,message:this._convertResponsesMessageToBaseMessage(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(e,A,r){const n=await this.completionWithRetry({...this.invocationParams(A),input:this._convertMessagesToResponsesParams(e),stream:!0},A);for await(const s of n){const a=this._convertResponsesDeltaToBaseMessageChunk(s);a!=null&&(yield a,await(r==null?void 0:r.handleLLMNewToken(a.text||"",{prompt:A.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:a})))}}async completionWithRetry(e,A){return this.caller.call(async()=>{var n,s;const r=this._getClientOptions(A);try{return((s=(n=e.text)==null?void 0:n.format)==null?void 0:s.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,r):await this.client.responses.create(e,r)}catch(a){throw FQ(a)}})}_convertResponsesMessageToBaseMessage(e){if(e.error){const o=new Error(e.error.message);throw o.name=e.error.code,o}let A;const r=[],n=[],s=[],a={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},i={};for(const o of e.output)if(o.type==="message")A=o.id,r.push(...o.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(i.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(i.refusal=l.refusal,[]):l));else if(o.type==="function_call"){const l={function:{name:o.name,arguments:o.arguments},id:o.call_id};try{n.push(mg(l,{returnId:!0}))}catch(u){let c;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(c=u.message),s.push(Ip(l,c))}i[fs]??(i[fs]={}),o.id&&(i[fs][o.call_id]=o.id)}else if(o.type==="reasoning")i.reasoning=o;else if(o.type==="custom_tool_call"){const l=cD(o);l?n.push(l):s.push(Ip(o,"Malformed custom tool call"))}else i.tool_outputs??(i.tool_outputs=[]),i.tool_outputs.push(o);return new Xs({id:A,content:r,tool_calls:n,invalid_tool_calls:s,usage_metadata:e.usage,additional_kwargs:i,response_metadata:a})}_convertResponsesDeltaToBaseMessageChunk(e){var l,u;const A=[];let r={},n;const s=[],a={},i={};let o;if(e.type==="response.output_text.delta")A.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")A.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")o=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")s.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),i[fs]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))i.tool_outputs=[e.item];else if(e.type==="response.created")a.id=e.response.id,a.model_name=e.response.model,a.model=e.response.model;else if(e.type==="response.completed"){const c=this._convertResponsesMessageToBaseMessage(e.response);n=e.response.usage,((u=(l=e.response.text)==null?void 0:l.format)==null?void 0:u.type)==="json_schema"&&(i.parsed??(i.parsed=JSON.parse(c.text)));for(const[d,h]of Object.entries(e.response))d!=="id"&&(a[d]=h)}else if(e.type==="response.function_call_arguments.delta")s.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")r={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")i.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){const c=e.item.summary?e.item.summary.map((d,h)=>({...d,index:h})):void 0;i.reasoning={id:e.item.id,type:e.item.type,...c?{summary:c}:{}}}else if(e.type==="response.reasoning_summary_part.added")i.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else if(e.type==="response.reasoning_summary_text.delta")i.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new zn({text:A.map(c=>c.text).join(""),message:new ln({id:o,content:A,tool_call_chunks:s,usage_metadata:n,additional_kwargs:i,response_metadata:a}),generationInfo:r})}_convertMessagesToResponsesParams(e){return e.flatMap(A=>{var s,a,i,o;const r=A.additional_kwargs;let n=wg(A);if(n==="system"&&ed(this.model)&&(n="developer"),n==="function")throw new Error("Function messages are not supported in Responses API");if(n==="tool"){const l=A;return(r==null?void 0:r.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof l.content=="string")return{type:"computer_screenshot",image_url:l.content};if(Array.isArray(l.content)){const c=l.content.find(h=>h.type==="computer_screenshot");if(c)return c;const d=l.content.find(h=>h.type==="image_url");if(d)return{type:"computer_screenshot",image_url:typeof d.image_url=="string"?d.image_url:d.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:l.tool_call_id}:(s=l.metadata)!=null&&s.customTool?{type:"custom_tool_call_output",call_id:l.tool_call_id,output:l.content}:{type:"function_call_output",call_id:l.tool_call_id,id:(a=l.id)!=null&&a.startsWith("fc_")?l.id:void 0,output:typeof l.content!="string"?JSON.stringify(l.content):l.content}}if(n==="assistant"){if(!this.zdrEnabled&&A.response_metadata.output!=null&&Array.isArray(A.response_metadata.output)&&A.response_metadata.output.length>0&&A.response_metadata.output.every(f=>"type"in f))return A.response_metadata.output;const l=[];if(r!=null&&r.reasoning&&!this.zdrEnabled){const f=this._convertReasoningSummary(r.reasoning);l.push(f)}let{content:u}=A;r!=null&&r.refusal&&(typeof u=="string"&&(u=[{type:"output_text",text:u,annotations:[]}]),u=[...u,{type:"refusal",refusal:r.refusal}]),(typeof u=="string"||u.length>0)&&l.push({type:"message",role:"assistant",...A.id&&!this.zdrEnabled&&A.id.startsWith("msg_")?{id:A.id}:{},content:typeof u=="string"?u:u.flatMap(f=>f.type==="text"?{type:"output_text",text:f.text,annotations:f.annotations??[]}:f.type==="output_text"||f.type==="refusal"?f:[])});const c=r==null?void 0:r[fs];co(A)&&((i=A.tool_calls)!=null&&i.length)?l.push(...A.tool_calls.map(f=>dD(f)?{type:"custom_tool_call",id:f.call_id,call_id:f.id??"",input:f.args.input,name:f.name}:{type:"function_call",name:f.name,arguments:JSON.stringify(f.args),call_id:f.id,...this.zdrEnabled?{id:c==null?void 0:c[f.id]}:{}})):r!=null&&r.tool_calls&&l.push(...r.tool_calls.map(f=>({type:"function_call",name:f.function.name,call_id:f.id,arguments:f.function.arguments,...this.zdrEnabled?{id:c==null?void 0:c[f.id]}:{}})));const d=(o=A.response_metadata.output)!=null&&o.length?A.response_metadata.output:r.tool_outputs,h=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(d!=null){const f=d,w=f==null?void 0:f.filter(y=>h.includes(y.type));w.length>0&&l.push(...w)}return l}if(n==="user"||n==="system"||n==="developer"){if(typeof A.content=="string")return{type:"message",role:n,content:A.content};const l=[],u=A.content.flatMap(c=>(c.type==="mcp_approval_response"&&l.push({type:"mcp_approval_response",approval_request_id:c.approval_request_id,approve:c.approve}),Gn(c)?mE(c,TQ):c.type==="text"?{type:"input_text",text:c.text}:c.type==="image_url"?{type:"input_image",image_url:typeof c.image_url=="string"?c.image_url:c.image_url.url,detail:typeof c.image_url=="string"?"auto":c.image_url.detail}:c.type==="input_text"||c.type==="input_image"||c.type==="input_file"?c:[]));return u.length>0&&l.push({type:"message",role:n,content:u}),l}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${n}`),[]})}_convertReasoningSummary(e){const A=(e.summary.length>1?e.summary.reduce((r,n)=>{const s=r.at(-1);return s.index===n.index?s.text+=n.text:r.push(n),r},[{...e.summary[0]}]):e.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([n])=>n!=="index")));return{...e,summary:A}}_reduceChatOpenAITools(e,A){const r=[];for(const n of e)gg(n)?(n.type==="image_generation"&&(A!=null&&A.stream)&&(n.partial_images=1),r.push(n)):BQ(n)?r.push({type:"function",name:n.function.name,parameters:n.function.parameters,description:n.function.description,strict:(A==null?void 0:A.strict)??null}):xQ(n)&&r.push(fD(n));return r}}class wD extends yg{invocationParams(e,A){var i;let r;(e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let n={};(e==null?void 0:e.stream_options)!==void 0?n={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||A!=null&&A.streaming)&&(n={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(i=e==null?void 0:e.tools)!=null&&i.length?e.tools.map(o=>this._convertChatOpenAIToolToCompletionsTool(o,{strict:r})):void 0,tool_choice:IQ(e==null?void 0:e.tool_choice),response_format:this._getResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...n,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,verbosity:(e==null?void 0:e.verbosity)??this.verbosity};(e==null?void 0:e.prediction)!==void 0&&(s.prediction=e.prediction),this.service_tier!==void 0&&(s.service_tier=this.service_tier),(e==null?void 0:e.service_tier)!==void 0&&(s.service_tier=e.service_tier);const a=this._getReasoningParams(e);return a!==void 0&&a.effort!==void 0&&(s.reasoning_effort=a.effort),ed(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}async _generate(e,A,r){var i,o;const n={},s=this.invocationParams(A),a=b_(e,this.model);if(s.stream){const l=this._streamResponseChunks(e,A,r),u={};for await(const y of l){y.message.response_metadata={...y.generationInfo,...y.message.response_metadata};const p=((i=y.generationInfo)==null?void 0:i.completion)??0;u[p]===void 0?u[p]=y:u[p]=u[p].concat(y)}const c=Object.entries(u).sort(([y],[p])=>parseInt(y,10)-parseInt(p,10)).map(([y,p])=>p),{functions:d,function_call:h}=this.invocationParams(A),f=await this._getEstimatedTokenCountFromPrompt(e,d,h),w=await this._getNumTokensFromGenerations(c);return n.input_tokens=f,n.output_tokens=w,n.total_tokens=f+w,{generations:c,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}else{const l=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:A==null?void 0:A.signal,...A==null?void 0:A.options}),{completion_tokens:u,prompt_tokens:c,total_tokens:d,prompt_tokens_details:h,completion_tokens_details:f}=(l==null?void 0:l.usage)??{};u&&(n.output_tokens=(n.output_tokens??0)+u),c&&(n.input_tokens=(n.input_tokens??0)+c),d&&(n.total_tokens=(n.total_tokens??0)+d),((h==null?void 0:h.audio_tokens)!==null||(h==null?void 0:h.cached_tokens)!==null)&&(n.input_token_details={...(h==null?void 0:h.audio_tokens)!==null&&{audio:h==null?void 0:h.audio_tokens},...(h==null?void 0:h.cached_tokens)!==null&&{cache_read:h==null?void 0:h.cached_tokens}}),((f==null?void 0:f.audio_tokens)!==null||(f==null?void 0:f.reasoning_tokens)!==null)&&(n.output_token_details={...(f==null?void 0:f.audio_tokens)!==null&&{audio:f==null?void 0:f.audio_tokens},...(f==null?void 0:f.reasoning_tokens)!==null&&{reasoning:f==null?void 0:f.reasoning_tokens}});const w=[];for(const y of(l==null?void 0:l.choices)??[]){const m={text:((o=y.message)==null?void 0:o.content)??"",message:this._convertCompletionsMessageToBaseMessage(y.message??{role:"assistant"},l)};m.generationInfo={...y.finish_reason?{finish_reason:y.finish_reason}:{},...y.logprobs?{logprobs:y.logprobs}:{}},co(m.message)&&(m.message.usage_metadata=n),m.message=new Xs(Object.fromEntries(Object.entries(m.message).filter(([g])=>!g.startsWith("lc_")))),w.push(m)}return{generations:w,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async*_streamResponseChunks(e,A,r){var l,u,c,d,h,f,w,y,p,m;const n=b_(e,this.model),s={...this.invocationParams(A,{streaming:!0}),messages:n,stream:!0};let a;const i=await this.completionWithRetry(s,A);let o;for await(const g of i){const B=(l=g==null?void 0:g.choices)==null?void 0:l[0];if(g.usage&&(o=g.usage),!B)continue;const{delta:_}=B;if(!_)continue;const v=this._convertCompletionsDeltaToBaseMessageChunk(_,g,a);a=_.role??a;const C={prompt:A.promptIndex??0,completion:B.index??0};if(typeof v.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const E={...C};B.finish_reason!=null&&(E.finish_reason=B.finish_reason,E.system_fingerprint=g.system_fingerprint,E.model_name=g.model,E.service_tier=g.service_tier),this.logprobs&&(E.logprobs=B.logprobs);const I=new zn({message:v,text:v.content,generationInfo:E});yield I,await(r==null?void 0:r.handleLLMNewToken(I.text??"",C,void 0,void 0,void 0,{chunk:I}))}if(o){const g={...((u=o.prompt_tokens_details)==null?void 0:u.audio_tokens)!==null&&{audio:(c=o.prompt_tokens_details)==null?void 0:c.audio_tokens},...((d=o.prompt_tokens_details)==null?void 0:d.cached_tokens)!==null&&{cache_read:(h=o.prompt_tokens_details)==null?void 0:h.cached_tokens}},B={...((f=o.completion_tokens_details)==null?void 0:f.audio_tokens)!==null&&{audio:(w=o.completion_tokens_details)==null?void 0:w.audio_tokens},...((y=o.completion_tokens_details)==null?void 0:y.reasoning_tokens)!==null&&{reasoning:(p=o.completion_tokens_details)==null?void 0:p.reasoning_tokens}};yield new zn({message:new ln({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(g).length>0&&{input_token_details:g},...Object.keys(B).length>0&&{output_token_details:B}}}),text:""})}if((m=A.signal)!=null&&m.aborted)throw new Error("AbortError")}async completionWithRetry(e,A){const r=this._getClientOptions(A),n=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(async()=>{try{return n&&!e.stream?await this.client.chat.completions.parse(e,r):await this.client.chat.completions.create(e,r)}catch(s){throw FQ(s)}})}_convertCompletionsMessageToBaseMessage(e,A){const r=e.tool_calls;switch(e.role){case"assistant":{const n=[],s=[];for(const o of r??[])try{n.push(mg(o,{returnId:!0}))}catch(l){s.push(Ip(o,l.message))}const a={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(a.__raw_response=A);const i={model_name:A.model,...A.system_fingerprint?{usage:{...A.usage},system_fingerprint:A.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new Xs({content:e.content||"",tool_calls:n,invalid_tool_calls:s,additional_kwargs:a,response_metadata:i,id:A.id})}default:return new fo(e.content||"",e.role??"unknown")}}_convertCompletionsDeltaToBaseMessageChunk(e,A,r){var o,l;const n=e.role??r,s=e.content??"";let a;e.function_call?a={function_call:e.function_call}:e.tool_calls?a={tool_calls:e.tool_calls}:a={},this.__includeRawResponse&&(a.__raw_response=A),e.audio&&(a.audio={...e.audio,index:A.choices[0].index});const i={usage:{...A.usage}};if(n==="user")return new Dc({content:s,response_metadata:i});if(n==="assistant"){const u=[];if(Array.isArray(e.tool_calls))for(const c of e.tool_calls)u.push({name:(o=c.function)==null?void 0:o.name,args:(l=c.function)==null?void 0:l.arguments,id:c.id,index:c.index,type:"tool_call_chunk"});return new ln({content:s,tool_call_chunks:u,additional_kwargs:a,id:A.id,response_metadata:i})}else return n==="system"?new zi({content:s,response_metadata:i}):n==="developer"?new zi({content:s,response_metadata:i,additional_kwargs:{__openai_role__:"developer"}}):n==="function"?new Nc({content:s,additional_kwargs:a,name:e.name,response_metadata:i}):n==="tool"?new qm({content:s,additional_kwargs:a,tool_call_id:e.tool_call_id,response_metadata:i}):new Hc({content:s,role:n,response_metadata:i})}}class Bg extends yg{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??!1,this.responses=(e==null?void 0:e.responses)??new gD(e),this.completions=(e==null?void 0:e.completions)??new wD(e)}_useResponsesApi(e){var s,a,i,o;const A=(s=e==null?void 0:e.tools)==null?void 0:s.some(gg),r=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((a=e==null?void 0:e.reasoning)==null?void 0:a.summary)!=null||((i=this.reasoning)==null?void 0:i.summary)!=null,n=(o=e==null?void 0:e.tools)==null?void 0:o.some(xQ);return this.useResponsesApi||A||r||n}getLsParams(e){const A=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(A):this.completions.getLsParams(A)}invocationParams(e){const A=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(A):this.completions.invocationParams(A)}async _generate(e,A,r){return this._useResponsesApi(A)?this.responses._generate(e,A):this.completions._generate(e,A,r)}async*_streamResponseChunks(e,A,r){if(this._useResponsesApi(A)){yield*this.responses._streamResponseChunks(e,this._combineCallOptions(A),r);return}yield*this.completions._streamResponseChunks(e,this._combineCallOptions(A),r)}withConfig(e){const A=new Bg(this.fields);return A.defaultOptions={...this.defaultOptions,...e},A}}const _g="ai-hud:default-chatbot:history:";function yD(t){return`${_g}${t}`}function Oa(t){try{typeof window<"u"&&window.localStorage.removeItem(yD(t))}catch{}}function BD(){try{if(typeof window>"u")return;const t=[];for(let e=0;e<window.localStorage.length;e++){const A=window.localStorage.key(e);A&&A.startsWith(_g)&&t.push(A)}t.forEach(e=>window.localStorage.removeItem(e))}catch{}}async function _D(t){return new Promise((e,A)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=A,r.readAsDataURL(t)})}const Fr=({model:t="gpt-4o-mini",placeholderApiKey:e,systemPrompt:A="You are a helpful assistant.",welcome:r="Hi! How can I help you today?",className:n,style:s,conversationId:a,context:i,contextImages:o,inputPlaceholder:l,inputValue:u,tools:c,toolMaxIterations:d=3})=>{const f=(U=>{if(U&&U!=="REPLACE_WITH_YOUR_OPENAI_API_KEY")return U;try{const R=globalThis||{};if(typeof R.AI_HUD_OPENAI_API_KEY=="string"&&R.AI_HUD_OPENAI_API_KEY)return R.AI_HUD_OPENAI_API_KEY;if(typeof R.__AI_HUD_OPENAI_API_KEY__=="string"&&R.__AI_HUD_OPENAI_API_KEY__)return R.__AI_HUD_OPENAI_API_KEY__}catch{}try{const R=globalThis.process;if(R&&R.env&&typeof R.env.AI_HUD_OPENAI_API_KEY=="string")return R.env.AI_HUD_OPENAI_API_KEY}catch{}return null})(e),w=fe.useRef(null);if(!a&&!w.current){const U=(()=>{try{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID()}catch{}return`conv_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`})();w.current=U}const y=a??w.current,p=`${_g}${y}`,[m,g]=fe.useState(()=>{try{const U=typeof window<"u"?window.localStorage.getItem(p):null;if(U){const R=JSON.parse(U);if(Array.isArray(R))return R}}catch{}return[{id:"welcome",role:"assistant",text:r}]}),[B,_]=fe.useState(()=>typeof u=="string"?u:""),[v,C]=fe.useState([]),[E,I]=fe.useState(!1),L=fe.useRef(null),$=fe.useCallback(()=>{var U;(U=L.current)==null||U.scrollIntoView({behavior:"smooth"})},[]),se=fe.useCallback(U=>U?U.replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\times/g,"").replace(/\\n/g,`
`):"",[]),{toolSchemas:z,toolExecutors:O}=fe.useMemo(()=>{if(!Array.isArray(c))return{toolSchemas:[],toolExecutors:{}};const U=c.map(T=>({type:"function",function:{name:T.function.name,description:T.function.description??"",parameters:T.function.parameters??{type:"object",properties:{}}}})),R={};for(const T of c)R[T.function.name]=async G=>await T.execute(G);return{toolSchemas:U,toolExecutors:R}},[c]),k=async U=>{const R=Array.from(U.target.files||[]);if(R.length===0)return;const T=await Promise.all(R.map(_D));C(G=>[...G,...T]),U.target.value=""},D=U=>{C(R=>R.filter((T,G)=>G!==U))},H=fe.useCallback((U,R)=>{var G;const T=[];if(A&&T.push({role:"system",content:A}),typeof i<"u"){let j="";try{j=JSON.stringify(i)}catch{j=String(i)}T.push({role:"system",content:`Context: ${j}`})}if(Array.isArray(o)&&o.length>0){const j=o.filter(X=>typeof X=="string"&&(X.startsWith("data:image/")||X.startsWith("http")));if(j.length>0){const X=[{type:"text",text:"Context images"},...j.map(de=>({type:"image_url",image_url:{url:de}}))];T.push({role:"user",content:X})}}for(const j of U)if(j.role==="assistant")T.push({role:"assistant",content:j.text||""});else if((((G=j.images)==null?void 0:G.length)||0)>0){const X=[{type:"text",text:j.text||""},...j.images.map(de=>({type:"image_url",image_url:{url:de}}))];T.push({role:"user",content:X})}else T.push({role:"user",content:j.text||""});if(R)if(R.images.length>0){const j=[{type:"text",text:R.text},...R.images.map(X=>({type:"image_url",image_url:{url:X}}))];T.push({role:"user",content:j})}else T.push({role:"user",content:R.text});return console.log("result",T),T},[A,i]),F=fe.useCallback(async()=>{var T,G;const U=B.trim();if(!U&&v.length===0)return;const R={id:String(Date.now()),role:"user",text:U||void 0,images:v.length?v:void 0};g(j=>[...j,R]),_(""),C([]),I(!0);try{let j=[];const X=H(m,{text:R.text||"",images:R.images||[]});for(const wA of X)if(wA.role==="system")j.push(new ip(wA.content));else if(wA.role==="assistant")j.push(new Xs(wA.content));else if(wA.role==="user"){const ga=wA.content;Array.isArray(ga)?j.push(new Ys({content:ga})):j.push(new Ys(wA.content))}const de=new Bg({modelName:t,temperature:.7,apiKey:f??void 0}),He=z.length>0?de.bind({tools:z}):de;let gA=await He.invoke(j),Zn=0;for(;Zn<d&&Array.isArray(gA.tool_calls)&&gA.tool_calls.length>0&&z.length>0;){const wA=gA.tool_calls,ga=[];for(const wa of wA){const Xn=wa.name??((T=wa.function)==null?void 0:T.name),go=wa.args??((G=wa.function)==null?void 0:G.arguments);let Yn=go;if(typeof go=="string")try{Yn=JSON.parse(go)}catch{Yn=go}const vg=Xn?O[Xn]:void 0;let _r=`Tool '${Xn}' not found`;try{vg&&(_r=await vg(Yn))}catch(qn){_r=`Error from tool '${Xn}': ${(qn==null?void 0:qn.message)||String(qn)}`}g(qn=>[...qn,{id:`${Date.now()}_${Xn}`,role:"tool",text:`Called ${Xn} with ${typeof Yn=="string"?Yn:JSON.stringify(Yn)}
 ${typeof _r=="string"?_r:JSON.stringify(_r)}`}]),ga.push(new gE({tool_call_id:wa.id,content:typeof _r=="string"?_r:JSON.stringify(_r)}))}j=[...j,gA,...ga],gA=await He.invoke(j),Zn+=1}const gn=typeof gA.content=="string"?gA.content:JSON.stringify(gA.content),td={id:String(Date.now()+1),role:"assistant",text:typeof gn=="string"?gn:String(gn)};g(wA=>[...wA,td]),setTimeout($,0)}catch(j){const X={id:String(Date.now()+1),role:"assistant",text:`Error: ${(j==null?void 0:j.message)||"Failed to contact OpenAI"}`};g(de=>[...de,X])}finally{I(!1)}},[H,B,m,v,e,t,$]),S=fe.useMemo(()=>(B.trim().length>0||v.length>0)&&!E,[B,v.length,E]);return fe.useEffect(()=>{try{typeof window<"u"&&window.localStorage.setItem(p,JSON.stringify(m))}catch{}},[m,p]),fe.useEffect(()=>()=>{if(!a)try{typeof window<"u"&&window.localStorage.removeItem(p)}catch{}},[a,p]),Q.jsxs("div",{className:n,style:{display:"flex",flexDirection:"column",height:"100%",...s},children:[Q.jsxs("div",{style:{flex:1,overflow:"auto",padding:12,background:"#ffffff"},children:[m.map(U=>Q.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:U.role==="user"?"flex-end":"flex-start"},children:Q.jsxs("div",{style:{maxWidth:"80%",padding:"8px 10px",borderRadius:10,border:U.role==="tool"?"1px dashed rgba(0,0,0,0.2)":"1px solid rgba(0,0,0,0.06)",background:U.role==="user"?"#111827":U.role==="tool"?"#fff7ed":"#f3f4f6",color:U.role==="user"?"#ffffff":"#111827",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[U.role==="assistant"?se(U.text):U.text,U.images&&U.images.length>0&&Q.jsx("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:U.images.map((R,T)=>Q.jsx("img",{src:R,alt:"upload",style:{width:96,height:72,objectFit:"cover",borderRadius:8,border:"1px solid rgba(0,0,0,0.06)"}},T))})]})},U.id)),Q.jsx("div",{ref:L})]}),Q.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(0,0,0,0.06)",background:"#fafafa"},children:[Q.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[Q.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k,style:{display:"none"},id:"ai-hud-chatbot-file"}),Q.jsx("label",{htmlFor:"ai-hud-chatbot-file",children:Q.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:36,height:36,border:"1px solid rgba(0,0,0,0.08)",borderRadius:8,background:"white",cursor:"pointer"},children:Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Q.jsx("path",{d:"M18.5 12.5l-5 5-3-3-5 5"}),Q.jsx("path",{d:"M20 7a4 4 0 0 0-8 0v10a4 4 0 0 0 8 0Z"})]})})}),Q.jsx("input",{value:B,onChange:U=>_(U.target.value),placeholder:l??"Type a message...",onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),S&&F())},style:{flex:1,height:36,border:"1px solid rgba(0,0,0,0.15)",borderRadius:8,padding:"0 10px"}}),Q.jsx("button",{type:"button",disabled:!S,onClick:()=>void F(),style:{height:36,padding:"0 12px",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:S?"#111827":"#e5e7eb",color:S?"#ffffff":"#9ca3af",cursor:S?"pointer":"not-allowed"},children:"Send"})]}),v.length>0&&Q.jsx("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:v.map((U,R)=>Q.jsxs("div",{style:{position:"relative"},children:[Q.jsx("img",{src:U,alt:"selected",style:{width:64,height:48,objectFit:"cover",borderRadius:6,border:"1px solid rgba(0,0,0,0.06)"}}),Q.jsx("button",{type:"button",onClick:()=>D(R),"aria-label":"Remove image",style:{position:"absolute",top:-6,right:-6,width:20,height:20,borderRadius:9999,border:"1px solid rgba(0,0,0,0.08)",background:"white",cursor:"pointer"},children:""})]},R))})]})]})};function vD(){const[t,e]=fe.useState(()=>{try{return window.AI_HUD_OPENAI_API_KEY||""}catch{return""}});return fe.useEffect(()=>{try{window.AI_HUD_OPENAI_API_KEY=t||void 0}catch{}},[t]),Q.jsxs("div",{className:"container",children:[Q.jsxs("h1",{className:"mb-2",children:[Q.jsx("code",{children:"<ChatEnabled>"})," examples"]}),Q.jsx("p",{className:"text-muted",children:"Chat with any/all components"}),Q.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h3",{children:"Key"})}),Q.jsxs("div",{className:"col-12 col-md",children:[Q.jsx("label",{htmlFor:"openai-key",style:{fontSize:14,color:"#374151"},children:"OpenAI API key:"}),Q.jsx("input",{id:"openai-key",type:"password",value:t,onChange:A=>e(A.target.value),placeholder:"sk-...",className:"form-control d-inline-block",style:{maxWidth:360}}),Q.jsx("button",{onClick:()=>e(""),className:"btn btn-outline-secondary ms-2",children:"Clear"})]})]}),Q.jsxs("div",{className:"row gy-2 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h3",{children:"Clear Conversations"})}),Q.jsx("div",{className:"col-12 col-md",children:Q.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[Q.jsx("button",{onClick:()=>Oa("example-left"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot"'}),Q.jsx("button",{onClick:()=>Oa("example-auto"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot with auto position"'}),Q.jsx("button",{onClick:()=>Oa("example-context"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot with context"'}),Q.jsx("button",{onClick:()=>Oa("example-logo"),className:"btn btn-outline-secondary",children:'Clear "Visual context (as image) - text"'}),Q.jsx("button",{onClick:()=>Oa("example-red"),className:"btn btn-outline-secondary",children:'Clear "Visual context (as image) - plot"'}),Q.jsx("button",{onClick:()=>BD(),className:"btn btn-danger",children:"Clear all"})]})})]}),Q.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h2",{children:"Button"})}),Q.jsx("div",{className:"col-12 col-md",children:Q.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Hover (default)"}),Q.jsx(jt,{onClick:()=>console.log("Chat clicked (hover)"),position:"top-right",offset:10,children:Q.jsx("div",{className:"card",children:"Hover me"})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Always visible"}),Q.jsx(jt,{trigger:"always",buttonSize:44,zIndex:20,onClick:()=>console.log("Chat clicked (always)"),children:Q.jsx("div",{className:"card",children:"Always visible"})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Custom button"}),Q.jsx(jt,{renderButton:A=>Q.jsx("button",{...A,style:{...A.style,background:"#111827",color:"white"},children:"Chat"}),onClick:()=>console.log("Chat clicked (custom)"),position:"bottom-right",children:Q.jsx("div",{className:"card",children:"Custom button"})})]})]})})]}),Q.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h2",{children:"Window"})}),Q.jsx("div",{className:"col-12 col-md",children:Q.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Floating window"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Chat (custom JSX context)",position:"bottom-right",width:360,height:420,draggable:!1},windowContent:Q.jsxs("div",{style:{padding:12},children:[Q.jsx("p",{style:{margin:0},children:"Hello! This is a floating window."}),Q.jsx("p",{style:{marginTop:8,color:"#6b7280"},children:"Replace this with your chat UI."})]}),children:Q.jsx("div",{className:"card",children:"Open window"})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Chat (Left and draggable)",position:"bottom-left",width:360,height:420},windowContent:Q.jsx(Fr,{conversationId:"example-left",placeholderApiKey:t}),children:Q.jsx("div",{className:"card",children:Q.jsxs("span",{children:["Open window",Q.jsx("br",{}),"(remembers conversation)"]})})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot with auto position"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Chat (Auto)",position:"auto",width:360,height:420},windowContent:Q.jsx(Fr,{conversationId:"example-auto",placeholderApiKey:t}),children:Q.jsxs("div",{className:"card",children:["Open window",Q.jsx("br",{}),"(remembers conversation)"]})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot without conversationId"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Chat (Closing clears conversation)",position:"auto",width:360,height:420},windowContent:Q.jsx(Fr,{placeholderApiKey:t}),children:Q.jsxs("div",{className:"card",children:["Open window twice",Q.jsx("br",{}),"(doesn't remember conversation)"]})})]})]})})]}),Q.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h2",{children:"Context"})}),Q.jsx("div",{className:"col-12 col-md",children:Q.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot with context"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Chat with Context",position:"auto",width:360,height:420},windowContent:Q.jsx(Fr,{conversationId:"example-context",context:{userId:123,plan:"pro",features:["analytics","exports"],locale:"en-US"},systemPrompt:"You are a helpful assistant. Use the provided context when relevant.",welcome:"Ask me about what context I have.",placeholderApiKey:t,inputValue:"What context do you have?"}),children:Q.jsxs("div",{className:"card",children:["Open window (context)",Q.jsx("br",{}),Q.jsx("br",{}),Q.jsxs("div",{children:["Context passed: ",Q.jsx("br",{}),Q.jsx("code",{children:'userId: 123, plan: "pro", features: ["analytics", "exports"], locale: "en-US"'})]})]})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot with visual context"}),Q.jsx(jt,{openWindowOnClick:!0,position:"top-left",windowProps:{title:"Visual context (as image)",position:"auto",width:360,height:420,sendComponentImageAsContext:!0},windowContent:Q.jsx(Fr,{conversationId:"example-red",welcome:"I can see the component's content, ask me anything about it.",inputValue:"Which number is in red color?",placeholderApiKey:t}),children:Q.jsxs("span",{children:["24 and ",Q.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"18"})," are my favorite numbers."]})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"DefaultChatbot with visual context"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Visual context (as image)",position:"auto",width:360,height:420,sendComponentImageAsContext:!0},windowContent:Q.jsx(Fr,{conversationId:"example-logo",welcome:"I can see the component's content, ask me anything about it.",inputValue:"What is this plot about?",placeholderApiKey:t}),children:Q.jsx("img",{height:"220px",width:"275px",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Price-Earnings_Ratios_as_a_Predictor_of_Twenty-Year_Returns_%28Shiller_Data%29.png/760px-Price-Earnings_Ratios_as_a_Predictor_of_Twenty-Year_Returns_%28Shiller_Data%29.png",alt:"placeholder"})})]})]})})]}),Q.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[Q.jsx("div",{className:"col-12 col-md-2",children:Q.jsx("h2",{children:"Tool(s) calling"})}),Q.jsx("div",{className:"col-12 col-md",children:Q.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Calculator tool"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Tools: Calculator",position:"auto",width:360,height:420},windowContent:Q.jsx(Fr,{conversationId:"example-tools-calc",placeholderApiKey:t,systemPrompt:"You can use a calculator tool to compute expressions when needed.",inputPlaceholder:"Ask: what is (23*7 + 42)/5?",inputValue:"What is (23*7 + 42)/5?",tools:[{type:"function",function:{name:"calculator",description:"Evaluate a basic arithmetic expression like '2 + 2 * 3'",parameters:{type:"object",properties:{expression:{type:"string",description:"Math expression to evaluate"}},required:["expression"]}},async execute(A){const r=typeof A=="string"?A:(A==null?void 0:A.expression)??"";try{const n=Function(`"use strict"; return (${r})`)();return String(n)}catch(n){return`calc error: ${(n==null?void 0:n.message)||String(n)}`}}}]}),children:Q.jsx("div",{className:"card",children:"Open window (tools)"})})]}),Q.jsxs("div",{className:"example-container",children:[Q.jsx("h3",{children:"Calculator & jokes tool"}),Q.jsx(jt,{openWindowOnClick:!0,windowProps:{title:"Tools: Calculator + Jokes",position:"auto",width:360,height:420},windowContent:Q.jsx(Fr,{conversationId:"example-tools-2",placeholderApiKey:t,systemPrompt:"You can use a calculator tool to compute expressions when needed.",inputPlaceholder:"Ask: Repeat a joke 1+2 number of times. Use the calculator tool to find the mathematical answer.",inputValue:"Repeat a joke 1+2 number of times. Use the calculator tool to find the mathematical answer.",tools:[{type:"function",function:{name:"calculator",description:"Evaluate a basic arithmetic expression like '2 + 2 * 3'",parameters:{type:"object",properties:{expression:{type:"string",description:"Math expression to evaluate"}},required:["expression"]}},async execute(A){const r=typeof A=="string"?A:(A==null?void 0:A.expression)??"";try{const n=Function(`"use strict"; return (${r})`)();return String(n)}catch(n){return`calc error: ${(n==null?void 0:n.message)||String(n)}`}}},{type:"function",function:{name:"joke-generator",description:"Tells a joke",parameters:{type:"object",properties:{},required:[]}},async execute(A){try{const r=Function('"use strict"; return ("Why did the chicken cross the road? To get to the other side.")')();return String(r)}catch(r){return`joke error: ${(r==null?void 0:r.message)||String(r)}`}}}]}),children:Q.jsx("div",{className:"card",children:"Open window (tools)"})})]})]})})]})]})}const CD=document.getElementById("root");P0(CD).render(Q.jsx(vD,{}));
