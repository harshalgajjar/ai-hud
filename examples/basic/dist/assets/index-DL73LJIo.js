var TQ=Object.defineProperty;var OQ=(t,e,A)=>e in t?TQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A;var _r=(t,e,A)=>OQ(t,typeof e!="symbol"?e+"":e,A);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();function tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}},Ac={},E_={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),kQ=Symbol.for("react.portal"),RQ=Symbol.for("react.fragment"),LQ=Symbol.for("react.strict_mode"),PQ=Symbol.for("react.profiler"),HQ=Symbol.for("react.provider"),NQ=Symbol.for("react.context"),DQ=Symbol.for("react.forward_ref"),$Q=Symbol.for("react.suspense"),MQ=Symbol.for("react.memo"),jQ=Symbol.for("react.lazy"),vg=Symbol.iterator;function KQ(t){return t===null||typeof t!="object"?null:(t=vg&&t[vg]||t["@@iterator"],typeof t=="function"?t:null)}var Q_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U_=Object.assign,F_={};function ra(t,e,A){this.props=t,this.context=e,this.refs=F_,this.updater=A||Q_}ra.prototype.isReactComponent={};ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I_(){}I_.prototype=ra.prototype;function Sp(t,e,A){this.props=t,this.context=e,this.refs=F_,this.updater=A||Q_}var xp=Sp.prototype=new I_;xp.constructor=Sp;U_(xp,ra.prototype);xp.isPureReactComponent=!0;var Cg=Array.isArray,S_=Object.prototype.hasOwnProperty,Tp={current:null},x_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,A){var r,n={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)S_.call(e,r)&&!x_.hasOwnProperty(r)&&(n[r]=e[r]);var i=arguments.length-2;if(i===1)n.children=A;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];n.children=o}if(t&&t.defaultProps)for(r in i=t.defaultProps,i)n[r]===void 0&&(n[r]=i[r]);return{$$typeof:eo,type:t,key:s,ref:a,props:n,_owner:Tp.current}}function GQ(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Op(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function VQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(A){return e[A]})}var bg=/\/+/g;function td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VQ(""+t.key):e.toString(36)}function Cl(t,e,A,r,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eo:case kQ:a=!0}}if(a)return a=t,n=n(a),t=r===""?"."+td(a,0):r,Cg(n)?(A="",t!=null&&(A=t.replace(bg,"$&/")+"/"),Cl(n,e,A,"",function(l){return l})):n!=null&&(Op(n)&&(n=GQ(n,A+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(bg,"$&/")+"/")+t)),e.push(n)),1;if(a=0,r=r===""?".":r+":",Cg(t))for(var i=0;i<t.length;i++){s=t[i];var o=r+td(s,i);a+=Cl(s,e,A,o,n)}else if(o=KQ(t),typeof o=="function")for(t=o.call(t),i=0;!(s=t.next()).done;)s=s.value,o=r+td(s,i++),a+=Cl(s,e,A,o,n);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wo(t,e,A){if(t==null)return t;var r=[],n=0;return Cl(t,r,"","",function(s){return e.call(A,s,n++)}),r}function zQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(A){(t._status===0||t._status===-1)&&(t._status=1,t._result=A)},function(A){(t._status===0||t._status===-1)&&(t._status=2,t._result=A)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},bl={transition:null},WQ={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:bl,ReactCurrentOwner:Tp};function O_(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:wo,forEach:function(t,e,A){wo(t,function(){e.apply(this,arguments)},A)},count:function(t){var e=0;return wo(t,function(){e++}),e},toArray:function(t){return wo(t,function(e){return e})||[]},only:function(t){if(!Op(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=ra;le.Fragment=RQ;le.Profiler=PQ;le.PureComponent=Sp;le.StrictMode=LQ;le.Suspense=$Q;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WQ;le.act=O_;le.cloneElement=function(t,e,A){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U_({},t.props),n=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Tp.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(o in e)S_.call(e,o)&&!x_.hasOwnProperty(o)&&(r[o]=e[o]===void 0&&i!==void 0?i[o]:e[o])}var o=arguments.length-2;if(o===1)r.children=A;else if(1<o){i=Array(o);for(var l=0;l<o;l++)i[l]=arguments[l+2];r.children=i}return{$$typeof:eo,type:t.type,key:n,ref:s,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:NQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HQ,_context:t},t.Consumer=t};le.createElement=T_;le.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:DQ,render:t}};le.isValidElement=Op;le.lazy=function(t){return{$$typeof:jQ,_payload:{_status:-1,_result:t},_init:zQ}};le.memo=function(t,e){return{$$typeof:MQ,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};le.unstable_act=O_;le.useCallback=function(t,e){return Ft.current.useCallback(t,e)};le.useContext=function(t){return Ft.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};le.useEffect=function(t,e){return Ft.current.useEffect(t,e)};le.useId=function(){return Ft.current.useId()};le.useImperativeHandle=function(t,e,A){return Ft.current.useImperativeHandle(t,e,A)};le.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Ft.current.useMemo(t,e)};le.useReducer=function(t,e,A){return Ft.current.useReducer(t,e,A)};le.useRef=function(t){return Ft.current.useRef(t)};le.useState=function(t){return Ft.current.useState(t)};le.useSyncExternalStore=function(t,e,A){return Ft.current.useSyncExternalStore(t,e,A)};le.useTransition=function(){return Ft.current.useTransition()};le.version="18.3.1";E_.exports=le;var de=E_.exports;const Ad=tc(de);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JQ=de,ZQ=Symbol.for("react.element"),XQ=Symbol.for("react.fragment"),YQ=Object.prototype.hasOwnProperty,qQ=JQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eU={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,A){var r,n={},s=null,a=null;A!==void 0&&(s=""+A),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)YQ.call(e,r)&&!eU.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:ZQ,type:t,key:s,ref:a,props:n,_owner:qQ.current}}Ac.Fragment=XQ;Ac.jsx=k_;Ac.jsxs=k_;b_.exports=Ac;var U=b_.exports,R_={exports:{}},AA={},L_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,b){var I=F.length;F.push(b);e:for(;0<I;){var P=I-1>>>1,k=F[P];if(0<n(k,b))F[P]=b,F[I]=k,I=P;else break e}}function A(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var b=F[0],I=F.pop();if(I!==b){F[0]=I;e:for(var P=0,k=F.length,H=k>>>1;P<H;){var X=2*(P+1)-1,q=F[X],be=X+1,Ee=F[be];if(0>n(q,I))be<k&&0>n(Ee,q)?(F[P]=Ee,F[be]=I,P=be):(F[P]=q,F[X]=I,P=X);else if(be<k&&0>n(Ee,I))F[P]=Ee,F[be]=I,P=be;else break e}}return b}function n(F,b){var I=F.sortIndex-b.sortIndex;return I!==0?I:F.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();t.unstable_now=function(){return a.now()-i}}var o=[],l=[],u=1,c=null,d=3,h=!1,f=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var b=A(l);b!==null;){if(b.callback===null)r(l);else if(b.startTime<=F)r(l),b.sortIndex=b.expirationTime,e(o,b);else break;b=A(l)}}function B(F){if(w=!1,g(F),!f)if(A(o)!==null)f=!0,$(_);else{var b=A(l);b!==null&&N(B,b.startTime-F)}}function _(F,b){f=!1,w&&(w=!1,p(Q),Q=-1),h=!0;var I=d;try{for(g(b),c=A(o);c!==null&&(!(c.expirationTime>b)||F&&!j());){var P=c.callback;if(typeof P=="function"){c.callback=null,d=c.priorityLevel;var k=P(c.expirationTime<=b);b=t.unstable_now(),typeof k=="function"?c.callback=k:c===A(o)&&r(o),g(b)}else r(o);c=A(o)}if(c!==null)var H=!0;else{var X=A(l);X!==null&&N(B,X.startTime-b),H=!1}return H}finally{c=null,d=I,h=!1}}var v=!1,C=null,Q=-1,S=5,R=-1;function j(){return!(t.unstable_now()-R<S)}function ne(){if(C!==null){var F=t.unstable_now();R=F;var b=!0;try{b=C(!0,F)}finally{b?z():(v=!1,C=null)}}else v=!1}var z;if(typeof m=="function")z=function(){m(ne)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,O=T.port2;T.port1.onmessage=ne,z=function(){O.postMessage(null)}}else z=function(){y(ne,0)};function $(F){C=F,v||(v=!0,z())}function N(F,b){Q=y(function(){F(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,$(_))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return A(o)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var b=3;break;default:b=d}var I=d;d=b;try{return F()}finally{d=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,b){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var I=d;d=F;try{return b()}finally{d=I}},t.unstable_scheduleCallback=function(F,b,I){var P=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?P+I:P):I=P,F){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=I+k,F={id:u++,callback:b,priorityLevel:F,startTime:I,expirationTime:k,sortIndex:-1},I>P?(F.sortIndex=I,e(l,F),A(o)===null&&F===A(l)&&(w?(p(Q),Q=-1):w=!0,N(B,I-P))):(F.sortIndex=k,e(o,F),f||h||(f=!0,$(_))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var b=d;return function(){var I=d;d=b;try{return F.apply(this,arguments)}finally{d=I}}}})(P_);L_.exports=P_;var tU=L_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AU=de,Yt=tU;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,A=1;A<arguments.length;A++)e+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H_=new Set,Qi={};function zn(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(Qi[t]=e,t=0;t<e.length;t++)H_.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tf=Object.prototype.hasOwnProperty,rU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eg={},Qg={};function nU(t){return Tf.call(Qg,t)?!0:Tf.call(Eg,t)?!1:rU.test(t)?Qg[t]=!0:(Eg[t]=!0,!1)}function sU(t,e,A,r){if(A!==null&&A.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:A!==null?!A.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aU(t,e,A,r){if(e===null||typeof e>"u"||sU(t,e,A,r))return!0;if(r)return!1;if(A!==null)switch(A.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,A,r,n,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=A,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var kp=/[\-:]([a-z])/g;function Rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kp,Rp);ct[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kp,Rp);ct[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kp,Rp);ct[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lp(t,e,A,r){var n=ct.hasOwnProperty(e)?ct[e]:null;(n!==null?n.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aU(e,A,n,r)&&(A=null),r||n===null?nU(e)&&(A===null?t.removeAttribute(e):t.setAttribute(e,""+A)):n.mustUseProperty?t[n.propertyName]=A===null?n.type===3?!1:"":A:(e=n.attributeName,r=n.attributeNamespace,A===null?t.removeAttribute(e):(n=n.type,A=n===3||n===4&&A===!0?"":""+A,r?t.setAttributeNS(r,e,A):t.setAttribute(e,A))))}var yr=AU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yo=Symbol.for("react.element"),ws=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Of=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),Hp=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),$_=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,rd;function ka(t){if(rd===void 0)try{throw Error()}catch(A){var e=A.stack.trim().match(/\n( *(at )?)/);rd=e&&e[1]||""}return`
`+rd+t}var nd=!1;function sd(t,e){if(!t||nd)return"";nd=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,i=s.length-1;1<=a&&0<=i&&n[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(n[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||n[a]!==s[i]){var o=`
`+n[a].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=a&&0<=i);break}}}finally{nd=!1,Error.prepareStackTrace=A}return(t=t?t.displayName||t.name:"")?ka(t):""}function iU(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=sd(t.type,!1),t;case 11:return t=sd(t.type.render,!1),t;case 1:return t=sd(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ys:return"Fragment";case ws:return"Portal";case Of:return"Profiler";case Pp:return"StrictMode";case kf:return"Suspense";case Rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D_:return(t.displayName||"Context")+".Consumer";case N_:return(t._context.displayName||"Context")+".Provider";case Hp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Np:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function oU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===Pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lU(t){var e=M_(t)?"checked":"value",A=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var n=A.get,s=A.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:A.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=lU(t))}function j_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var A=e.getValue(),r="";return t&&(r=M_(t)?t.checked?"true":"false":t.value),t=r,t!==A?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pf(t,e){var A=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??t._wrapperState.initialChecked})}function Fg(t,e){var A=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;A=nn(e.value!=null?e.value:A),t._wrapperState={initialChecked:r,initialValue:A,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function K_(t,e){e=e.checked,e!=null&&Lp(t,"checked",e,!1)}function Hf(t,e){K_(t,e);var A=nn(e.value),r=e.type;if(A!=null)r==="number"?(A===0&&t.value===""||t.value!=A)&&(t.value=""+A):t.value!==""+A&&(t.value=""+A);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nf(t,e.type,A):e.hasOwnProperty("defaultValue")&&Nf(t,e.type,nn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ig(t,e,A){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,A||e===t.value||(t.value=e),t.defaultValue=e}A=t.name,A!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,A!==""&&(t.name=A)}function Nf(t,e,A){(e!=="number"||Jl(t.ownerDocument)!==t)&&(A==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+A&&(t.defaultValue=""+A))}var Ra=Array.isArray;function ks(t,e,A,r){if(t=t.options,e){e={};for(var n=0;n<A.length;n++)e["$"+A[n]]=!0;for(A=0;A<t.length;A++)n=e.hasOwnProperty("$"+t[A].value),t[A].selected!==n&&(t[A].selected=n),n&&r&&(t[A].defaultSelected=!0)}else{for(A=""+nn(A),e=null,n=0;n<t.length;n++){if(t[n].value===A){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Df(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,e){var A=e.value;if(A==null){if(A=e.children,e=e.defaultValue,A!=null){if(e!=null)throw Error(L(92));if(Ra(A)){if(1<A.length)throw Error(L(93));A=A[0]}e=A}e==null&&(e=""),A=e}t._wrapperState={initialValue:nn(A)}}function G_(t,e){var A=nn(e.value),r=nn(e.defaultValue);A!=null&&(A=""+A,A!==t.value&&(t.value=A),e.defaultValue==null&&t.defaultValue!==A&&(t.defaultValue=A)),r!=null&&(t.defaultValue=""+r)}function xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _o,z_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,A,r,n){MSApp.execUnsafeLocalFunction(function(){return t(e,A,r,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_o.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ui(t,e){if(e){var A=t.firstChild;if(A&&A===t.lastChild&&A.nodeType===3){A.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uU=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){uU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function W_(t,e,A){return e==null||typeof e=="boolean"||e===""?"":A||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function J_(t,e){t=t.style;for(var A in e)if(e.hasOwnProperty(A)){var r=A.indexOf("--")===0,n=W_(A,e[A],r);A==="float"&&(A="cssFloat"),r?t.setProperty(A,n):t[A]=n}}var cU=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(t,e){if(e){if(cU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function jf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=null;function Dp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gf=null,Rs=null,Ls=null;function Tg(t){if(t=ro(t)){if(typeof Gf!="function")throw Error(L(280));var e=t.stateNode;e&&(e=ic(e),Gf(t.stateNode,t.type,e))}}function Z_(t){Rs?Ls?Ls.push(t):Ls=[t]:Rs=t}function X_(){if(Rs){var t=Rs,e=Ls;if(Ls=Rs=null,Tg(t),e)for(t=0;t<e.length;t++)Tg(e[t])}}function Y_(t,e){return t(e)}function q_(){}var ad=!1;function ev(t,e,A){if(ad)return t(e,A);ad=!0;try{return Y_(t,e,A)}finally{ad=!1,(Rs!==null||Ls!==null)&&(q_(),X_())}}function Fi(t,e){var A=t.stateNode;if(A===null)return null;var r=ic(A);if(r===null)return null;A=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(A&&typeof A!="function")throw Error(L(231,e,typeof A));return A}var Vf=!1;if(fr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Vf=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Vf=!1}function dU(t,e,A,r,n,s,a,i,o){var l=Array.prototype.slice.call(arguments,3);try{e.apply(A,l)}catch(u){this.onError(u)}}var ni=!1,Zl=null,Xl=!1,zf=null,fU={onError:function(t){ni=!0,Zl=t}};function hU(t,e,A,r,n,s,a,i,o){ni=!1,Zl=null,dU.apply(fU,arguments)}function pU(t,e,A,r,n,s,a,i,o){if(hU.apply(this,arguments),ni){if(ni){var l=Zl;ni=!1,Zl=null}else throw Error(L(198));Xl||(Xl=!0,zf=l)}}function Wn(t){var e=t,A=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(A=e.return),t=e.return;while(t)}return e.tag===3?A:null}function tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Og(t){if(Wn(t)!==t)throw Error(L(188))}function mU(t){var e=t.alternate;if(!e){if(e=Wn(t),e===null)throw Error(L(188));return e!==t?null:t}for(var A=t,r=e;;){var n=A.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){A=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===A)return Og(n),t;if(s===r)return Og(n),e;s=s.sibling}throw Error(L(188))}if(A.return!==r.return)A=n,r=s;else{for(var a=!1,i=n.child;i;){if(i===A){a=!0,A=n,r=s;break}if(i===r){a=!0,r=n,A=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===A){a=!0,A=s,r=n;break}if(i===r){a=!0,r=s,A=n;break}i=i.sibling}if(!a)throw Error(L(189))}}if(A.alternate!==r)throw Error(L(190))}if(A.tag!==3)throw Error(L(188));return A.stateNode.current===A?t:e}function Av(t){return t=mU(t),t!==null?rv(t):null}function rv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rv(t);if(e!==null)return e;t=t.sibling}return null}var nv=Yt.unstable_scheduleCallback,kg=Yt.unstable_cancelCallback,gU=Yt.unstable_shouldYield,wU=Yt.unstable_requestPaint,He=Yt.unstable_now,yU=Yt.unstable_getCurrentPriorityLevel,$p=Yt.unstable_ImmediatePriority,sv=Yt.unstable_UserBlockingPriority,Yl=Yt.unstable_NormalPriority,BU=Yt.unstable_LowPriority,av=Yt.unstable_IdlePriority,rc=null,WA=null;function _U(t){if(WA&&typeof WA.onCommitFiberRoot=="function")try{WA.onCommitFiberRoot(rc,t,void 0,(t.current.flags&128)===128)}catch{}}var IA=Math.clz32?Math.clz32:bU,vU=Math.log,CU=Math.LN2;function bU(t){return t>>>=0,t===0?32:31-(vU(t)/CU|0)|0}var vo=64,Co=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var A=t.pendingLanes;if(A===0)return 0;var r=0,n=t.suspendedLanes,s=t.pingedLanes,a=A&268435455;if(a!==0){var i=a&~n;i!==0?r=La(i):(s&=a,s!==0&&(r=La(s)))}else a=A&~n,a!==0?r=La(a):s!==0&&(r=La(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&n)&&(n=r&-r,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(r&4&&(r|=A&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)A=31-IA(e),n=1<<A,r|=t[A],e&=~n;return r}function EU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QU(t,e){for(var A=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-IA(s),i=1<<a,o=n[a];o===-1?(!(i&A)||i&r)&&(n[a]=EU(i,e)):o<=e&&(t.expiredLanes|=i),s&=~i}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iv(){var t=vo;return vo<<=1,!(vo&4194240)&&(vo=64),t}function id(t){for(var e=[],A=0;31>A;A++)e.push(t);return e}function to(t,e,A){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-IA(e),t[e]=A}function UU(t,e){var A=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<A;){var n=31-IA(A),s=1<<n;e[n]=0,r[n]=-1,t[n]=-1,A&=~s}}function Mp(t,e){var A=t.entangledLanes|=e;for(t=t.entanglements;A;){var r=31-IA(A),n=1<<r;n&e|t[r]&e&&(t[r]|=e),A&=~n}}var ve=0;function ov(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lv,jp,uv,cv,dv,Jf=!1,bo=[],Vr=null,zr=null,Wr=null,Ii=new Map,Si=new Map,Lr=[],FU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rg(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Si.delete(e.pointerId)}}function _a(t,e,A,r,n,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:A,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},e!==null&&(e=ro(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function IU(t,e,A,r,n){switch(e){case"focusin":return Vr=_a(Vr,t,e,A,r,n),!0;case"dragenter":return zr=_a(zr,t,e,A,r,n),!0;case"mouseover":return Wr=_a(Wr,t,e,A,r,n),!0;case"pointerover":var s=n.pointerId;return Ii.set(s,_a(Ii.get(s)||null,t,e,A,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Si.set(s,_a(Si.get(s)||null,t,e,A,r,n)),!0}return!1}function fv(t){var e=bn(t.target);if(e!==null){var A=Wn(e);if(A!==null){if(e=A.tag,e===13){if(e=tv(A),e!==null){t.blockedOn=e,dv(t.priority,function(){uv(A)});return}}else if(e===3&&A.stateNode.current.memoizedState.isDehydrated){t.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}t.blockedOn=null}function El(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var A=Zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(A===null){A=t.nativeEvent;var r=new A.constructor(A.type,A);Kf=r,A.target.dispatchEvent(r),Kf=null}else return e=ro(A),e!==null&&jp(e),t.blockedOn=A,!1;e.shift()}return!0}function Lg(t,e,A){El(t)&&A.delete(e)}function SU(){Jf=!1,Vr!==null&&El(Vr)&&(Vr=null),zr!==null&&El(zr)&&(zr=null),Wr!==null&&El(Wr)&&(Wr=null),Ii.forEach(Lg),Si.forEach(Lg)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,Jf||(Jf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,SU)))}function xi(t){function e(n){return va(n,t)}if(0<bo.length){va(bo[0],t);for(var A=1;A<bo.length;A++){var r=bo[A];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&va(Vr,t),zr!==null&&va(zr,t),Wr!==null&&va(Wr,t),Ii.forEach(e),Si.forEach(e),A=0;A<Lr.length;A++)r=Lr[A],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(A=Lr[0],A.blockedOn===null);)fv(A),A.blockedOn===null&&Lr.shift()}var Ps=yr.ReactCurrentBatchConfig,eu=!0;function xU(t,e,A,r){var n=ve,s=Ps.transition;Ps.transition=null;try{ve=1,Kp(t,e,A,r)}finally{ve=n,Ps.transition=s}}function TU(t,e,A,r){var n=ve,s=Ps.transition;Ps.transition=null;try{ve=4,Kp(t,e,A,r)}finally{ve=n,Ps.transition=s}}function Kp(t,e,A,r){if(eu){var n=Zf(t,e,A,r);if(n===null)gd(t,e,r,tu,A),Rg(t,r);else if(IU(n,t,e,A,r))r.stopPropagation();else if(Rg(t,r),e&4&&-1<FU.indexOf(t)){for(;n!==null;){var s=ro(n);if(s!==null&&lv(s),s=Zf(t,e,A,r),s===null&&gd(t,e,r,tu,A),s===n)break;n=s}n!==null&&r.stopPropagation()}else gd(t,e,r,null,A)}}var tu=null;function Zf(t,e,A,r){if(tu=null,t=Dp(r),t=bn(t),t!==null)if(e=Wn(t),e===null)t=null;else if(A=e.tag,A===13){if(t=tv(e),t!==null)return t;t=null}else if(A===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tu=t,null}function hv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yU()){case $p:return 1;case sv:return 4;case Yl:case BU:return 16;case av:return 536870912;default:return 16}default:return 16}}var Hr=null,Gp=null,Ql=null;function pv(){if(Ql)return Ql;var t,e=Gp,A=e.length,r,n="value"in Hr?Hr.value:Hr.textContent,s=n.length;for(t=0;t<A&&e[t]===n[t];t++);var a=A-t;for(r=1;r<=a&&e[A-r]===n[s-r];r++);return Ql=n.slice(t,1<r?1-r:void 0)}function Ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eo(){return!0}function Pg(){return!1}function rA(t){function e(A,r,n,s,a){this._reactName=A,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(A=t[i],this[i]=A?A(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eo:Pg,this.isPropagationStopped=Pg,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vp=rA(na),Ao=ke({},na,{view:0,detail:0}),OU=rA(Ao),od,ld,Ca,nc=ke({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(od=t.screenX-Ca.screenX,ld=t.screenY-Ca.screenY):ld=od=0,Ca=t),od)},movementY:function(t){return"movementY"in t?t.movementY:ld}}),Hg=rA(nc),kU=ke({},nc,{dataTransfer:0}),RU=rA(kU),LU=ke({},Ao,{relatedTarget:0}),ud=rA(LU),PU=ke({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),HU=rA(PU),NU=ke({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DU=rA(NU),$U=ke({},na,{data:0}),Ng=rA($U),MU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KU[t])?!!e[t]:!1}function zp(){return GU}var VU=ke({},Ao,{key:function(t){if(t.key){var e=MU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zp,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zU=rA(VU),WU=ke({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=rA(WU),JU=ke({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zp}),ZU=rA(JU),XU=ke({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),YU=rA(XU),qU=ke({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eF=rA(qU),tF=[9,13,27,32],Wp=fr&&"CompositionEvent"in window,si=null;fr&&"documentMode"in document&&(si=document.documentMode);var AF=fr&&"TextEvent"in window&&!si,mv=fr&&(!Wp||si&&8<si&&11>=si),$g=" ",Mg=!1;function gv(t,e){switch(t){case"keyup":return tF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function rF(t,e){switch(t){case"compositionend":return wv(e);case"keypress":return e.which!==32?null:(Mg=!0,$g);case"textInput":return t=e.data,t===$g&&Mg?null:t;default:return null}}function nF(t,e){if(Bs)return t==="compositionend"||!Wp&&gv(t,e)?(t=pv(),Ql=Gp=Hr=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mv&&e.locale!=="ko"?null:e.data;default:return null}}var sF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sF[t.type]:e==="textarea"}function yv(t,e,A,r){Z_(r),e=Au(e,"onChange"),0<e.length&&(A=new Vp("onChange","change",null,A,r),t.push({event:A,listeners:e}))}var ai=null,Ti=null;function aF(t){Sv(t,0)}function sc(t){var e=Cs(t);if(j_(e))return t}function iF(t,e){if(t==="change")return e}var Bv=!1;if(fr){var cd;if(fr){var dd="oninput"in document;if(!dd){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),dd=typeof Kg.oninput=="function"}cd=dd}else cd=!1;Bv=cd&&(!document.documentMode||9<document.documentMode)}function Gg(){ai&&(ai.detachEvent("onpropertychange",_v),Ti=ai=null)}function _v(t){if(t.propertyName==="value"&&sc(Ti)){var e=[];yv(e,Ti,t,Dp(t)),ev(aF,e)}}function oF(t,e,A){t==="focusin"?(Gg(),ai=e,Ti=A,ai.attachEvent("onpropertychange",_v)):t==="focusout"&&Gg()}function lF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(Ti)}function uF(t,e){if(t==="click")return sc(e)}function cF(t,e){if(t==="input"||t==="change")return sc(e)}function dF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TA=typeof Object.is=="function"?Object.is:dF;function Oi(t,e){if(TA(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var A=Object.keys(t),r=Object.keys(e);if(A.length!==r.length)return!1;for(r=0;r<A.length;r++){var n=A[r];if(!Tf.call(e,n)||!TA(t[n],e[n]))return!1}return!0}function Vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,e){var A=Vg(t);t=0;for(var r;A;){if(A.nodeType===3){if(r=t+A.textContent.length,t<=e&&r>=e)return{node:A,offset:e-t};t=r}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=Vg(A)}}function vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cv(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var A=typeof e.contentWindow.location.href=="string"}catch{A=!1}if(A)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fF(t){var e=Cv(),A=t.focusedElem,r=t.selectionRange;if(e!==A&&A&&A.ownerDocument&&vv(A.ownerDocument.documentElement,A)){if(r!==null&&Jp(A)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in A)A.selectionStart=e,A.selectionEnd=Math.min(t,A.value.length);else if(t=(e=A.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=A.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!t.extend&&s>r&&(n=r,r=s,s=n),n=zg(A,s);var a=zg(A,r);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=A;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<e.length;A++)t=e[A],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hF=fr&&"documentMode"in document&&11>=document.documentMode,_s=null,Xf=null,ii=null,Yf=!1;function Wg(t,e,A){var r=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Yf||_s==null||_s!==Jl(r)||(r=_s,"selectionStart"in r&&Jp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ii&&Oi(ii,r)||(ii=r,r=Au(Xf,"onSelect"),0<r.length&&(e=new Vp("onSelect","select",null,e,A),t.push({event:e,listeners:r}),e.target=_s)))}function Qo(t,e){var A={};return A[t.toLowerCase()]=e.toLowerCase(),A["Webkit"+t]="webkit"+e,A["Moz"+t]="moz"+e,A}var vs={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},fd={},bv={};fr&&(bv=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function ac(t){if(fd[t])return fd[t];if(!vs[t])return t;var e=vs[t],A;for(A in e)if(e.hasOwnProperty(A)&&A in bv)return fd[t]=e[A];return t}var Ev=ac("animationend"),Qv=ac("animationiteration"),Uv=ac("animationstart"),Fv=ac("transitionend"),Iv=new Map,Jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(t,e){Iv.set(t,e),zn(e,[t])}for(var hd=0;hd<Jg.length;hd++){var pd=Jg[hd],pF=pd.toLowerCase(),mF=pd[0].toUpperCase()+pd.slice(1);fn(pF,"on"+mF)}fn(Ev,"onAnimationEnd");fn(Qv,"onAnimationIteration");fn(Uv,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(Fv,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Zg(t,e,A){var r=t.type||"unknown-event";t.currentTarget=A,pU(r,e,void 0,t),t.currentTarget=null}function Sv(t,e){e=(e&4)!==0;for(var A=0;A<t.length;A++){var r=t[A],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var i=r[a],o=i.instance,l=i.currentTarget;if(i=i.listener,o!==s&&n.isPropagationStopped())break e;Zg(n,i,l),s=o}else for(a=0;a<r.length;a++){if(i=r[a],o=i.instance,l=i.currentTarget,i=i.listener,o!==s&&n.isPropagationStopped())break e;Zg(n,i,l),s=o}}}if(Xl)throw t=zf,Xl=!1,zf=null,t}function Fe(t,e){var A=e[rh];A===void 0&&(A=e[rh]=new Set);var r=t+"__bubble";A.has(r)||(xv(e,t,2,!1),A.add(r))}function md(t,e,A){var r=0;e&&(r|=4),xv(A,t,r,e)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function ki(t){if(!t[Uo]){t[Uo]=!0,H_.forEach(function(A){A!=="selectionchange"&&(gF.has(A)||md(A,!1,t),md(A,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uo]||(e[Uo]=!0,md("selectionchange",!1,e))}}function xv(t,e,A,r){switch(hv(e)){case 1:var n=xU;break;case 4:n=TU;break;default:n=Kp}A=n.bind(null,e,A,t),n=void 0,!Vf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(e,A,{capture:!0,passive:n}):t.addEventListener(e,A,!0):n!==void 0?t.addEventListener(e,A,{passive:n}):t.addEventListener(e,A,!1)}function gd(t,e,A,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===n||i.nodeType===8&&i.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var o=a.tag;if((o===3||o===4)&&(o=a.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;a=a.return}for(;i!==null;){if(a=bn(i),a===null)return;if(o=a.tag,o===5||o===6){r=s=a;continue e}i=i.parentNode}}r=r.return}ev(function(){var l=s,u=Dp(A),c=[];e:{var d=Iv.get(t);if(d!==void 0){var h=Vp,f=t;switch(t){case"keypress":if(Ul(A)===0)break e;case"keydown":case"keyup":h=zU;break;case"focusin":f="focus",h=ud;break;case"focusout":f="blur",h=ud;break;case"beforeblur":case"afterblur":h=ud;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=RU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ZU;break;case Ev:case Qv:case Uv:h=HU;break;case Fv:h=YU;break;case"scroll":h=OU;break;case"wheel":h=eF;break;case"copy":case"cut":case"paste":h=DU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Dg}var w=(e&4)!==0,y=!w&&t==="scroll",p=w?d!==null?d+"Capture":null:d;w=[];for(var m=l,g;m!==null;){g=m;var B=g.stateNode;if(g.tag===5&&B!==null&&(g=B,p!==null&&(B=Fi(m,p),B!=null&&w.push(Ri(m,B,g)))),y)break;m=m.return}0<w.length&&(d=new h(d,f,null,A,u),c.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&A!==Kf&&(f=A.relatedTarget||A.fromElement)&&(bn(f)||f[hr]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=A.relatedTarget||A.toElement,h=l,f=f?bn(f):null,f!==null&&(y=Wn(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=l),h!==f)){if(w=Hg,B="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=Dg,B="onPointerLeave",p="onPointerEnter",m="pointer"),y=h==null?d:Cs(h),g=f==null?d:Cs(f),d=new w(B,m+"leave",h,A,u),d.target=y,d.relatedTarget=g,B=null,bn(u)===l&&(w=new w(p,m+"enter",f,A,u),w.target=g,w.relatedTarget=y,B=w),y=B,h&&f)t:{for(w=h,p=f,m=0,g=w;g;g=Yn(g))m++;for(g=0,B=p;B;B=Yn(B))g++;for(;0<m-g;)w=Yn(w),m--;for(;0<g-m;)p=Yn(p),g--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=Yn(w),p=Yn(p)}w=null}else w=null;h!==null&&Xg(c,d,h,w,!1),f!==null&&y!==null&&Xg(c,y,f,w,!0)}}e:{if(d=l?Cs(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var _=iF;else if(jg(d))if(Bv)_=cF;else{_=lF;var v=oF}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=uF);if(_&&(_=_(t,l))){yv(c,_,A,u);break e}v&&v(t,d,l),t==="focusout"&&(v=d._wrapperState)&&v.controlled&&d.type==="number"&&Nf(d,"number",d.value)}switch(v=l?Cs(l):window,t){case"focusin":(jg(v)||v.contentEditable==="true")&&(_s=v,Xf=l,ii=null);break;case"focusout":ii=Xf=_s=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,Wg(c,A,u);break;case"selectionchange":if(hF)break;case"keydown":case"keyup":Wg(c,A,u)}var C;if(Wp)e:{switch(t){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Bs?gv(t,A)&&(Q="onCompositionEnd"):t==="keydown"&&A.keyCode===229&&(Q="onCompositionStart");Q&&(mv&&A.locale!=="ko"&&(Bs||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Bs&&(C=pv()):(Hr=u,Gp="value"in Hr?Hr.value:Hr.textContent,Bs=!0)),v=Au(l,Q),0<v.length&&(Q=new Ng(Q,t,null,A,u),c.push({event:Q,listeners:v}),C?Q.data=C:(C=wv(A),C!==null&&(Q.data=C)))),(C=AF?rF(t,A):nF(t,A))&&(l=Au(l,"onBeforeInput"),0<l.length&&(u=new Ng("onBeforeInput","beforeinput",null,A,u),c.push({event:u,listeners:l}),u.data=C))}Sv(c,e)})}function Ri(t,e,A){return{instance:t,listener:e,currentTarget:A}}function Au(t,e){for(var A=e+"Capture",r=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Fi(t,A),s!=null&&r.unshift(Ri(t,s,n)),s=Fi(t,e),s!=null&&r.push(Ri(t,s,n))),t=t.return}return r}function Yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xg(t,e,A,r,n){for(var s=e._reactName,a=[];A!==null&&A!==r;){var i=A,o=i.alternate,l=i.stateNode;if(o!==null&&o===r)break;i.tag===5&&l!==null&&(i=l,n?(o=Fi(A,s),o!=null&&a.unshift(Ri(A,o,i))):n||(o=Fi(A,s),o!=null&&a.push(Ri(A,o,i)))),A=A.return}a.length!==0&&t.push({event:e,listeners:a})}var wF=/\r\n?/g,yF=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(wF,`
`).replace(yF,"")}function Fo(t,e,A){if(e=Yg(e),Yg(t)!==e&&A)throw Error(L(425))}function ru(){}var qf=null,eh=null;function th(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ah=typeof setTimeout=="function"?setTimeout:void 0,BF=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,_F=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(vF)}:Ah;function vF(t){setTimeout(function(){throw t})}function wd(t,e){var A=e,r=0;do{var n=A.nextSibling;if(t.removeChild(A),n&&n.nodeType===8)if(A=n.data,A==="/$"){if(r===0){t.removeChild(n),xi(e);return}r--}else A!=="$"&&A!=="$?"&&A!=="$!"||r++;A=n}while(A);xi(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ew(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="$"||A==="$!"||A==="$?"){if(e===0)return t;e--}else A==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),KA="__reactFiber$"+sa,Li="__reactProps$"+sa,hr="__reactContainer$"+sa,rh="__reactEvents$"+sa,CF="__reactListeners$"+sa,bF="__reactHandles$"+sa;function bn(t){var e=t[KA];if(e)return e;for(var A=t.parentNode;A;){if(e=A[hr]||A[KA]){if(A=e.alternate,e.child!==null||A!==null&&A.child!==null)for(t=ew(t);t!==null;){if(A=t[KA])return A;t=ew(t)}return e}t=A,A=t.parentNode}return null}function ro(t){return t=t[KA]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function ic(t){return t[Li]||null}var nh=[],bs=-1;function hn(t){return{current:t}}function Ie(t){0>bs||(t.current=nh[bs],nh[bs]=null,bs--)}function Ue(t,e){bs++,nh[bs]=t.current,t.current=e}var sn={},yt=hn(sn),Ht=hn(!1),Pn=sn;function Ms(t,e){var A=t.type.contextTypes;if(!A)return sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in A)n[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Nt(t){return t=t.childContextTypes,t!=null}function nu(){Ie(Ht),Ie(yt)}function tw(t,e,A){if(yt.current!==sn)throw Error(L(168));Ue(yt,e),Ue(Ht,A)}function Tv(t,e,A){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return A;r=r.getChildContext();for(var n in r)if(!(n in e))throw Error(L(108,oU(t)||"Unknown",n));return ke({},A,r)}function su(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sn,Pn=yt.current,Ue(yt,t),Ue(Ht,Ht.current),!0}function Aw(t,e,A){var r=t.stateNode;if(!r)throw Error(L(169));A?(t=Tv(t,e,Pn),r.__reactInternalMemoizedMergedChildContext=t,Ie(Ht),Ie(yt),Ue(yt,t)):Ie(Ht),Ue(Ht,A)}var ar=null,oc=!1,yd=!1;function Ov(t){ar===null?ar=[t]:ar.push(t)}function EF(t){oc=!0,Ov(t)}function pn(){if(!yd&&ar!==null){yd=!0;var t=0,e=ve;try{var A=ar;for(ve=1;t<A.length;t++){var r=A[t];do r=r(!0);while(r!==null)}ar=null,oc=!1}catch(n){throw ar!==null&&(ar=ar.slice(t+1)),nv($p,pn),n}finally{ve=e,yd=!1}}return null}var Es=[],Qs=0,au=null,iu=0,iA=[],oA=0,Hn=null,ir=1,or="";function yn(t,e){Es[Qs++]=iu,Es[Qs++]=au,au=t,iu=e}function kv(t,e,A){iA[oA++]=ir,iA[oA++]=or,iA[oA++]=Hn,Hn=t;var r=ir;t=or;var n=32-IA(r)-1;r&=~(1<<n),A+=1;var s=32-IA(e)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,ir=1<<32-IA(e)+n|A<<n|r,or=s+t}else ir=1<<s|A<<n|r,or=t}function Zp(t){t.return!==null&&(yn(t,1),kv(t,1,0))}function Xp(t){for(;t===au;)au=Es[--Qs],Es[Qs]=null,iu=Es[--Qs],Es[Qs]=null;for(;t===Hn;)Hn=iA[--oA],iA[oA]=null,or=iA[--oA],iA[oA]=null,ir=iA[--oA],iA[oA]=null}var Xt=null,Jt=null,xe=!1,FA=null;function Rv(t,e){var A=uA(5,null,null,0);A.elementType="DELETED",A.stateNode=e,A.return=t,e=t.deletions,e===null?(t.deletions=[A],t.flags|=16):e.push(A)}function rw(t,e){switch(t.tag){case 5:var A=t.type;return e=e.nodeType!==1||A.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Jt=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(A=Hn!==null?{id:ir,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:A,retryLane:1073741824},A=uA(18,null,null,0),A.stateNode=e,A.return=t,t.child=A,Xt=t,Jt=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ah(t){if(xe){var e=Jt;if(e){var A=e;if(!rw(t,e)){if(sh(t))throw Error(L(418));e=Jr(A.nextSibling);var r=Xt;e&&rw(t,e)?Rv(r,A):(t.flags=t.flags&-4097|2,xe=!1,Xt=t)}}else{if(sh(t))throw Error(L(418));t.flags=t.flags&-4097|2,xe=!1,Xt=t}}}function nw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Io(t){if(t!==Xt)return!1;if(!xe)return nw(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!th(t.type,t.memoizedProps)),e&&(e=Jt)){if(sh(t))throw Lv(),Error(L(418));for(;e;)Rv(t,e),e=Jr(e.nextSibling)}if(nw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var A=t.data;if(A==="/$"){if(e===0){Jt=Jr(t.nextSibling);break e}e--}else A!=="$"&&A!=="$!"&&A!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Xt?Jr(t.stateNode.nextSibling):null;return!0}function Lv(){for(var t=Jt;t;)t=Jr(t.nextSibling)}function js(){Jt=Xt=null,xe=!1}function Yp(t){FA===null?FA=[t]:FA.push(t)}var QF=yr.ReactCurrentBatchConfig;function ba(t,e,A){if(t=A.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(L(309));var r=A.stateNode}if(!r)throw Error(L(147,t));var n=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var i=n.refs;a===null?delete i[s]:i[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!A._owner)throw Error(L(290,t))}return t}function So(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sw(t){var e=t._init;return e(t._payload)}function Pv(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function A(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function n(p,m){return p=qr(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function i(p,m,g,B){return m===null||m.tag!==6?(m=Qd(g,p.mode,B),m.return=p,m):(m=n(m,g),m.return=p,m)}function o(p,m,g,B){var _=g.type;return _===ys?u(p,m,g.props.children,B,g.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sr&&sw(_)===m.type)?(B=n(m,g.props),B.ref=ba(p,m,g),B.return=p,B):(B=kl(g.type,g.key,g.props,null,p.mode,B),B.ref=ba(p,m,g),B.return=p,B)}function l(p,m,g,B){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Ud(g,p.mode,B),m.return=p,m):(m=n(m,g.children||[]),m.return=p,m)}function u(p,m,g,B,_){return m===null||m.tag!==7?(m=On(g,p.mode,B,_),m.return=p,m):(m=n(m,g),m.return=p,m)}function c(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Qd(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case yo:return g=kl(m.type,m.key,m.props,null,p.mode,g),g.ref=ba(p,null,m),g.return=p,g;case ws:return m=Ud(m,p.mode,g),m.return=p,m;case Sr:var B=m._init;return c(p,B(m._payload),g)}if(Ra(m)||ya(m))return m=On(m,p.mode,g,null),m.return=p,m;So(p,m)}return null}function d(p,m,g,B){var _=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return _!==null?null:i(p,m,""+g,B);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case yo:return g.key===_?o(p,m,g,B):null;case ws:return g.key===_?l(p,m,g,B):null;case Sr:return _=g._init,d(p,m,_(g._payload),B)}if(Ra(g)||ya(g))return _!==null?null:u(p,m,g,B,null);So(p,g)}return null}function h(p,m,g,B,_){if(typeof B=="string"&&B!==""||typeof B=="number")return p=p.get(g)||null,i(m,p,""+B,_);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case yo:return p=p.get(B.key===null?g:B.key)||null,o(m,p,B,_);case ws:return p=p.get(B.key===null?g:B.key)||null,l(m,p,B,_);case Sr:var v=B._init;return h(p,m,g,v(B._payload),_)}if(Ra(B)||ya(B))return p=p.get(g)||null,u(m,p,B,_,null);So(m,B)}return null}function f(p,m,g,B){for(var _=null,v=null,C=m,Q=m=0,S=null;C!==null&&Q<g.length;Q++){C.index>Q?(S=C,C=null):S=C.sibling;var R=d(p,C,g[Q],B);if(R===null){C===null&&(C=S);break}t&&C&&R.alternate===null&&e(p,C),m=s(R,m,Q),v===null?_=R:v.sibling=R,v=R,C=S}if(Q===g.length)return A(p,C),xe&&yn(p,Q),_;if(C===null){for(;Q<g.length;Q++)C=c(p,g[Q],B),C!==null&&(m=s(C,m,Q),v===null?_=C:v.sibling=C,v=C);return xe&&yn(p,Q),_}for(C=r(p,C);Q<g.length;Q++)S=h(C,p,Q,g[Q],B),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?Q:S.key),m=s(S,m,Q),v===null?_=S:v.sibling=S,v=S);return t&&C.forEach(function(j){return e(p,j)}),xe&&yn(p,Q),_}function w(p,m,g,B){var _=ya(g);if(typeof _!="function")throw Error(L(150));if(g=_.call(g),g==null)throw Error(L(151));for(var v=_=null,C=m,Q=m=0,S=null,R=g.next();C!==null&&!R.done;Q++,R=g.next()){C.index>Q?(S=C,C=null):S=C.sibling;var j=d(p,C,R.value,B);if(j===null){C===null&&(C=S);break}t&&C&&j.alternate===null&&e(p,C),m=s(j,m,Q),v===null?_=j:v.sibling=j,v=j,C=S}if(R.done)return A(p,C),xe&&yn(p,Q),_;if(C===null){for(;!R.done;Q++,R=g.next())R=c(p,R.value,B),R!==null&&(m=s(R,m,Q),v===null?_=R:v.sibling=R,v=R);return xe&&yn(p,Q),_}for(C=r(p,C);!R.done;Q++,R=g.next())R=h(C,p,Q,R.value,B),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?Q:R.key),m=s(R,m,Q),v===null?_=R:v.sibling=R,v=R);return t&&C.forEach(function(ne){return e(p,ne)}),xe&&yn(p,Q),_}function y(p,m,g,B){if(typeof g=="object"&&g!==null&&g.type===ys&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case yo:e:{for(var _=g.key,v=m;v!==null;){if(v.key===_){if(_=g.type,_===ys){if(v.tag===7){A(p,v.sibling),m=n(v,g.props.children),m.return=p,p=m;break e}}else if(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sr&&sw(_)===v.type){A(p,v.sibling),m=n(v,g.props),m.ref=ba(p,v,g),m.return=p,p=m;break e}A(p,v);break}else e(p,v);v=v.sibling}g.type===ys?(m=On(g.props.children,p.mode,B,g.key),m.return=p,p=m):(B=kl(g.type,g.key,g.props,null,p.mode,B),B.ref=ba(p,m,g),B.return=p,p=B)}return a(p);case ws:e:{for(v=g.key;m!==null;){if(m.key===v)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){A(p,m.sibling),m=n(m,g.children||[]),m.return=p,p=m;break e}else{A(p,m);break}else e(p,m);m=m.sibling}m=Ud(g,p.mode,B),m.return=p,p=m}return a(p);case Sr:return v=g._init,y(p,m,v(g._payload),B)}if(Ra(g))return f(p,m,g,B);if(ya(g))return w(p,m,g,B);So(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(A(p,m.sibling),m=n(m,g),m.return=p,p=m):(A(p,m),m=Qd(g,p.mode,B),m.return=p,p=m),a(p)):A(p,m)}return y}var Ks=Pv(!0),Hv=Pv(!1),ou=hn(null),lu=null,Us=null,qp=null;function em(){qp=Us=lu=null}function tm(t){var e=ou.current;Ie(ou),t._currentValue=e}function ih(t,e,A){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===A)break;t=t.return}}function Hs(t,e){lu=t,qp=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function hA(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(lu===null)throw Error(L(308));Us=t,lu.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var En=null;function Am(t){En===null?En=[t]:En.push(t)}function Nv(t,e,A,r){var n=e.interleaved;return n===null?(A.next=A,Am(e)):(A.next=n.next,n.next=A),e.interleaved=A,pr(t,r)}function pr(t,e){t.lanes|=e;var A=t.alternate;for(A!==null&&(A.lanes|=e),A=t,t=t.return;t!==null;)t.childLanes|=e,A=t.alternate,A!==null&&(A.childLanes|=e),A=t,t=t.return;return A.tag===3?A.stateNode:null}var xr=!1;function rm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,A){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var n=r.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),r.pending=e,pr(t,A)}return n=r.interleaved,n===null?(e.next=e,Am(r)):(e.next=n.next,n.next=e),r.interleaved=e,pr(t,A)}function Fl(t,e,A){if(e=e.updateQueue,e!==null&&(e=e.shared,(A&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,A|=r,e.lanes=A,Mp(t,A)}}function aw(t,e){var A=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,A===r)){var n=null,s=null;if(A=A.firstBaseUpdate,A!==null){do{var a={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};s===null?n=s=a:s=s.next=a,A=A.next}while(A!==null);s===null?n=s=e:s=s.next=e}else n=s=e;A={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=A;return}t=A.lastBaseUpdate,t===null?A.firstBaseUpdate=e:t.next=e,A.lastBaseUpdate=e}function uu(t,e,A,r){var n=t.updateQueue;xr=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,i=n.shared.pending;if(i!==null){n.shared.pending=null;var o=i,l=o.next;o.next=null,a===null?s=l:a.next=l,a=o;var u=t.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==a&&(i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=o))}if(s!==null){var c=n.baseState;a=0,u=l=o=null,i=s;do{var d=i.lane,h=i.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=t,w=i;switch(d=e,h=A,w.tag){case 1:if(f=w.payload,typeof f=="function"){c=f.call(h,c,d);break e}c=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=w.payload,d=typeof f=="function"?f.call(h,c,d):f,d==null)break e;c=ke({},c,d);break e;case 2:xr=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,d=n.effects,d===null?n.effects=[i]:d.push(i))}else h={eventTime:h,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(l=u=h,o=c):u=u.next=h,a|=d;if(i=i.next,i===null){if(i=n.shared.pending,i===null)break;d=i,i=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(u===null&&(o=c),n.baseState=o,n.firstBaseUpdate=l,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);Dn|=a,t.lanes=a,t.memoizedState=c}}function iw(t,e,A){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(n!==null){if(r.callback=null,r=A,typeof n!="function")throw Error(L(191,n));n.call(r)}}}var no={},JA=hn(no),Pi=hn(no),Hi=hn(no);function Qn(t){if(t===no)throw Error(L(174));return t}function nm(t,e){switch(Ue(Hi,e),Ue(Pi,t),Ue(JA,no),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$f(e,t)}Ie(JA),Ue(JA,e)}function Gs(){Ie(JA),Ie(Pi),Ie(Hi)}function $v(t){Qn(Hi.current);var e=Qn(JA.current),A=$f(e,t.type);e!==A&&(Ue(Pi,t),Ue(JA,A))}function sm(t){Pi.current===t&&(Ie(JA),Ie(Pi))}var Te=hn(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var A=e.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=[];function am(){for(var t=0;t<Bd.length;t++)Bd[t]._workInProgressVersionPrimary=null;Bd.length=0}var Il=yr.ReactCurrentDispatcher,_d=yr.ReactCurrentBatchConfig,Nn=0,Oe=null,ze=null,et=null,du=!1,oi=!1,Ni=0,UF=0;function ft(){throw Error(L(321))}function im(t,e){if(e===null)return!1;for(var A=0;A<e.length&&A<t.length;A++)if(!TA(t[A],e[A]))return!1;return!0}function om(t,e,A,r,n,s){if(Nn=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?xF:TF,t=A(r,n),oi){s=0;do{if(oi=!1,Ni=0,25<=s)throw Error(L(301));s+=1,et=ze=null,e.updateQueue=null,Il.current=OF,t=A(r,n)}while(oi)}if(Il.current=fu,e=ze!==null&&ze.next!==null,Nn=0,et=ze=Oe=null,du=!1,e)throw Error(L(300));return t}function lm(){var t=Ni!==0;return Ni=0,t}function MA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Oe.memoizedState=et=t:et=et.next=t,et}function pA(){if(ze===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=et===null?Oe.memoizedState:et.next;if(e!==null)et=e,ze=t;else{if(t===null)throw Error(L(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},et===null?Oe.memoizedState=et=t:et=et.next=t}return et}function Di(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=pA(),A=e.queue;if(A===null)throw Error(L(311));A.lastRenderedReducer=t;var r=ze,n=r.baseQueue,s=A.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,A.pending=null}if(n!==null){s=n.next,r=r.baseState;var i=a=null,o=null,l=s;do{var u=l.lane;if((Nn&u)===u)o!==null&&(o=o.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var c={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};o===null?(i=o=c,a=r):o=o.next=c,Oe.lanes|=u,Dn|=u}l=l.next}while(l!==null&&l!==s);o===null?a=r:o.next=i,TA(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=o,A.lastRenderedState=r}if(t=A.interleaved,t!==null){n=t;do s=n.lane,Oe.lanes|=s,Dn|=s,n=n.next;while(n!==t)}else n===null&&(A.lanes=0);return[e.memoizedState,A.dispatch]}function Cd(t){var e=pA(),A=e.queue;if(A===null)throw Error(L(311));A.lastRenderedReducer=t;var r=A.dispatch,n=A.pending,s=e.memoizedState;if(n!==null){A.pending=null;var a=n=n.next;do s=t(s,a.action),a=a.next;while(a!==n);TA(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),A.lastRenderedState=s}return[s,r]}function Mv(){}function jv(t,e){var A=Oe,r=pA(),n=e(),s=!TA(r.memoizedState,n);if(s&&(r.memoizedState=n,Lt=!0),r=r.queue,um(Vv.bind(null,A,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(A.flags|=2048,$i(9,Gv.bind(null,A,r,n,e),void 0,null),At===null)throw Error(L(349));Nn&30||Kv(A,e,n)}return n}function Kv(t,e,A){t.flags|=16384,t={getSnapshot:e,value:A},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(A=e.stores,A===null?e.stores=[t]:A.push(t))}function Gv(t,e,A,r){e.value=A,e.getSnapshot=r,zv(e)&&Wv(t)}function Vv(t,e,A){return A(function(){zv(e)&&Wv(t)})}function zv(t){var e=t.getSnapshot;t=t.value;try{var A=e();return!TA(t,A)}catch{return!0}}function Wv(t){var e=pr(t,1);e!==null&&SA(e,t,1,-1)}function ow(t){var e=MA();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:t},e.queue=t,t=t.dispatch=SF.bind(null,Oe,t),[e.memoizedState,t]}function $i(t,e,A,r){return t={tag:t,create:e,destroy:A,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(A=e.lastEffect,A===null?e.lastEffect=t.next=t:(r=A.next,A.next=t,t.next=r,e.lastEffect=t)),t}function Jv(){return pA().memoizedState}function Sl(t,e,A,r){var n=MA();Oe.flags|=t,n.memoizedState=$i(1|e,A,void 0,r===void 0?null:r)}function lc(t,e,A,r){var n=pA();r=r===void 0?null:r;var s=void 0;if(ze!==null){var a=ze.memoizedState;if(s=a.destroy,r!==null&&im(r,a.deps)){n.memoizedState=$i(e,A,s,r);return}}Oe.flags|=t,n.memoizedState=$i(1|e,A,s,r)}function lw(t,e){return Sl(8390656,8,t,e)}function um(t,e){return lc(2048,8,t,e)}function Zv(t,e){return lc(4,2,t,e)}function Xv(t,e){return lc(4,4,t,e)}function Yv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qv(t,e,A){return A=A!=null?A.concat([t]):null,lc(4,4,Yv.bind(null,e,t),A)}function cm(){}function e0(t,e){var A=pA();e=e===void 0?null:e;var r=A.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(A.memoizedState=[t,e],t)}function t0(t,e){var A=pA();e=e===void 0?null:e;var r=A.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(t=t(),A.memoizedState=[t,e],t)}function A0(t,e,A){return Nn&21?(TA(A,e)||(A=iv(),Oe.lanes|=A,Dn|=A,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=A)}function FF(t,e){var A=ve;ve=A!==0&&4>A?A:4,t(!0);var r=_d.transition;_d.transition={};try{t(!1),e()}finally{ve=A,_d.transition=r}}function r0(){return pA().memoizedState}function IF(t,e,A){var r=Yr(t);if(A={lane:r,action:A,hasEagerState:!1,eagerState:null,next:null},n0(t))s0(e,A);else if(A=Nv(t,e,A,r),A!==null){var n=Qt();SA(A,t,r,n),a0(A,e,r)}}function SF(t,e,A){var r=Yr(t),n={lane:r,action:A,hasEagerState:!1,eagerState:null,next:null};if(n0(t))s0(e,n);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,i=s(a,A);if(n.hasEagerState=!0,n.eagerState=i,TA(i,a)){var o=e.interleaved;o===null?(n.next=n,Am(e)):(n.next=o.next,o.next=n),e.interleaved=n;return}}catch{}finally{}A=Nv(t,e,n,r),A!==null&&(n=Qt(),SA(A,t,r,n),a0(A,e,r))}}function n0(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function s0(t,e){oi=du=!0;var A=t.pending;A===null?e.next=e:(e.next=A.next,A.next=e),t.pending=e}function a0(t,e,A){if(A&4194240){var r=e.lanes;r&=t.pendingLanes,A|=r,e.lanes=A,Mp(t,A)}}var fu={readContext:hA,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},xF={readContext:hA,useCallback:function(t,e){return MA().memoizedState=[t,e===void 0?null:e],t},useContext:hA,useEffect:lw,useImperativeHandle:function(t,e,A){return A=A!=null?A.concat([t]):null,Sl(4194308,4,Yv.bind(null,e,t),A)},useLayoutEffect:function(t,e){return Sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sl(4,2,t,e)},useMemo:function(t,e){var A=MA();return e=e===void 0?null:e,t=t(),A.memoizedState=[t,e],t},useReducer:function(t,e,A){var r=MA();return e=A!==void 0?A(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IF.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=MA();return t={current:t},e.memoizedState=t},useState:ow,useDebugValue:cm,useDeferredValue:function(t){return MA().memoizedState=t},useTransition:function(){var t=ow(!1),e=t[0];return t=FF.bind(null,t[1]),MA().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,A){var r=Oe,n=MA();if(xe){if(A===void 0)throw Error(L(407));A=A()}else{if(A=e(),At===null)throw Error(L(349));Nn&30||Kv(r,e,A)}n.memoizedState=A;var s={value:A,getSnapshot:e};return n.queue=s,lw(Vv.bind(null,r,s,t),[t]),r.flags|=2048,$i(9,Gv.bind(null,r,s,A,e),void 0,null),A},useId:function(){var t=MA(),e=At.identifierPrefix;if(xe){var A=or,r=ir;A=(r&~(1<<32-IA(r)-1)).toString(32)+A,e=":"+e+"R"+A,A=Ni++,0<A&&(e+="H"+A.toString(32)),e+=":"}else A=UF++,e=":"+e+"r"+A.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TF={readContext:hA,useCallback:e0,useContext:hA,useEffect:um,useImperativeHandle:qv,useInsertionEffect:Zv,useLayoutEffect:Xv,useMemo:t0,useReducer:vd,useRef:Jv,useState:function(){return vd(Di)},useDebugValue:cm,useDeferredValue:function(t){var e=pA();return A0(e,ze.memoizedState,t)},useTransition:function(){var t=vd(Di)[0],e=pA().memoizedState;return[t,e]},useMutableSource:Mv,useSyncExternalStore:jv,useId:r0,unstable_isNewReconciler:!1},OF={readContext:hA,useCallback:e0,useContext:hA,useEffect:um,useImperativeHandle:qv,useInsertionEffect:Zv,useLayoutEffect:Xv,useMemo:t0,useReducer:Cd,useRef:Jv,useState:function(){return Cd(Di)},useDebugValue:cm,useDeferredValue:function(t){var e=pA();return ze===null?e.memoizedState=t:A0(e,ze.memoizedState,t)},useTransition:function(){var t=Cd(Di)[0],e=pA().memoizedState;return[t,e]},useMutableSource:Mv,useSyncExternalStore:jv,useId:r0,unstable_isNewReconciler:!1};function EA(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var A in t)e[A]===void 0&&(e[A]=t[A]);return e}return e}function oh(t,e,A,r){e=t.memoizedState,A=A(r,e),A=A==null?e:ke({},e,A),t.memoizedState=A,t.lanes===0&&(t.updateQueue.baseState=A)}var uc={isMounted:function(t){return(t=t._reactInternals)?Wn(t)===t:!1},enqueueSetState:function(t,e,A){t=t._reactInternals;var r=Qt(),n=Yr(t),s=ur(r,n);s.payload=e,A!=null&&(s.callback=A),e=Zr(t,s,n),e!==null&&(SA(e,t,n,r),Fl(e,t,n))},enqueueReplaceState:function(t,e,A){t=t._reactInternals;var r=Qt(),n=Yr(t),s=ur(r,n);s.tag=1,s.payload=e,A!=null&&(s.callback=A),e=Zr(t,s,n),e!==null&&(SA(e,t,n,r),Fl(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var A=Qt(),r=Yr(t),n=ur(A,r);n.tag=2,e!=null&&(n.callback=e),e=Zr(t,n,r),e!==null&&(SA(e,t,r,A),Fl(e,t,r))}};function uw(t,e,A,r,n,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Oi(A,r)||!Oi(n,s):!0}function i0(t,e,A){var r=!1,n=sn,s=e.contextType;return typeof s=="object"&&s!==null?s=hA(s):(n=Nt(e)?Pn:yt.current,r=e.contextTypes,s=(r=r!=null)?Ms(t,n):sn),e=new e(A,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function cw(t,e,A,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(A,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(A,r),e.state!==t&&uc.enqueueReplaceState(e,e.state,null)}function lh(t,e,A,r){var n=t.stateNode;n.props=A,n.state=t.memoizedState,n.refs={},rm(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=hA(s):(s=Nt(e)?Pn:yt.current,n.context=Ms(t,s)),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oh(t,e,s,A),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&uc.enqueueReplaceState(n,n.state,null),uu(t,A,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var A="",r=e;do A+=iU(r),r=r.return;while(r);var n=A}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n,digest:null}}function bd(t,e,A){return{value:t,source:null,stack:A??null,digest:e??null}}function uh(t,e){try{console.error(e.value)}catch(A){setTimeout(function(){throw A})}}var kF=typeof WeakMap=="function"?WeakMap:Map;function o0(t,e,A){A=ur(-1,A),A.tag=3,A.payload={element:null};var r=e.value;return A.callback=function(){pu||(pu=!0,Bh=r),uh(t,e)},A}function l0(t,e,A){A=ur(-1,A),A.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;A.payload=function(){return r(n)},A.callback=function(){uh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(A.callback=function(){uh(t,e),typeof r!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),A}function dw(t,e,A){var r=t.pingCache;if(r===null){r=t.pingCache=new kF;var n=new Set;r.set(e,n)}else n=r.get(e),n===void 0&&(n=new Set,r.set(e,n));n.has(A)||(n.add(A),t=WF.bind(null,t,e,A),e.then(t,t))}function fw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hw(t,e,A,r,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(e=ur(-1,1),e.tag=2,Zr(A,e,1))),A.lanes|=1),t)}var RF=yr.ReactCurrentOwner,Lt=!1;function bt(t,e,A,r){e.child=t===null?Hv(e,null,A,r):Ks(e,t.child,A,r)}function pw(t,e,A,r,n){A=A.render;var s=e.ref;return Hs(e,n),r=om(t,e,A,r,s,n),A=lm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,mr(t,e,n)):(xe&&A&&Zp(e),e.flags|=1,bt(t,e,r,n),e.child)}function mw(t,e,A,r,n){if(t===null){var s=A.type;return typeof s=="function"&&!ym(s)&&s.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(e.tag=15,e.type=s,u0(t,e,s,r,n)):(t=kl(A.type,null,r,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&n)){var a=s.memoizedProps;if(A=A.compare,A=A!==null?A:Oi,A(a,r)&&t.ref===e.ref)return mr(t,e,n)}return e.flags|=1,t=qr(s,r),t.ref=e.ref,t.return=e,e.child=t}function u0(t,e,A,r,n){if(t!==null){var s=t.memoizedProps;if(Oi(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&n)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,mr(t,e,n)}return ch(t,e,A,r,n)}function c0(t,e,A){var r=e.pendingProps,n=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Is,Wt),Wt|=A;else{if(!(A&1073741824))return t=s!==null?s.baseLanes|A:A,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(Is,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:A,Ue(Is,Wt),Wt|=r}else s!==null?(r=s.baseLanes|A,e.memoizedState=null):r=A,Ue(Is,Wt),Wt|=r;return bt(t,e,n,A),e.child}function d0(t,e){var A=e.ref;(t===null&&A!==null||t!==null&&t.ref!==A)&&(e.flags|=512,e.flags|=2097152)}function ch(t,e,A,r,n){var s=Nt(A)?Pn:yt.current;return s=Ms(e,s),Hs(e,n),A=om(t,e,A,r,s,n),r=lm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,mr(t,e,n)):(xe&&r&&Zp(e),e.flags|=1,bt(t,e,A,n),e.child)}function gw(t,e,A,r,n){if(Nt(A)){var s=!0;su(e)}else s=!1;if(Hs(e,n),e.stateNode===null)xl(t,e),i0(e,A,r),lh(e,A,r,n),r=!0;else if(t===null){var a=e.stateNode,i=e.memoizedProps;a.props=i;var o=a.context,l=A.contextType;typeof l=="object"&&l!==null?l=hA(l):(l=Nt(A)?Pn:yt.current,l=Ms(e,l));var u=A.getDerivedStateFromProps,c=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||o!==l)&&cw(e,a,r,l),xr=!1;var d=e.memoizedState;a.state=d,uu(e,r,a,n),o=e.memoizedState,i!==r||d!==o||Ht.current||xr?(typeof u=="function"&&(oh(e,A,u,r),o=e.memoizedState),(i=xr||uw(e,A,i,r,d,o,l))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=o),a.props=r,a.state=o,a.context=l,r=i):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Dv(t,e),i=e.memoizedProps,l=e.type===e.elementType?i:EA(e.type,i),a.props=l,c=e.pendingProps,d=a.context,o=A.contextType,typeof o=="object"&&o!==null?o=hA(o):(o=Nt(A)?Pn:yt.current,o=Ms(e,o));var h=A.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==c||d!==o)&&cw(e,a,r,o),xr=!1,d=e.memoizedState,a.state=d,uu(e,r,a,n);var f=e.memoizedState;i!==c||d!==f||Ht.current||xr?(typeof h=="function"&&(oh(e,A,h,r),f=e.memoizedState),(l=xr||uw(e,A,l,r,d,f,o)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,o)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=o,r=l):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return dh(t,e,A,r,s,n)}function dh(t,e,A,r,n,s){d0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return n&&Aw(e,A,!1),mr(t,e,s);r=e.stateNode,RF.current=e;var i=a&&typeof A.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,i,s)):bt(t,e,i,s),e.memoizedState=r.state,n&&Aw(e,A,!0),e.child}function f0(t){var e=t.stateNode;e.pendingContext?tw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tw(t,e.context,!1),nm(t,e.containerInfo)}function ww(t,e,A,r,n){return js(),Yp(n),e.flags|=256,bt(t,e,A,r),e.child}var fh={dehydrated:null,treeContext:null,retryLane:0};function hh(t){return{baseLanes:t,cachePool:null,transitions:null}}function h0(t,e,A){var r=e.pendingProps,n=Te.current,s=!1,a=(e.flags&128)!==0,i;if((i=a)||(i=t!==null&&t.memoizedState===null?!1:(n&2)!==0),i?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ue(Te,n&1),t===null)return ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=fc(a,r,0,null),t=On(t,r,A,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hh(A),e.memoizedState=fh,t):dm(e,a));if(n=t.memoizedState,n!==null&&(i=n.dehydrated,i!==null))return LF(t,e,a,r,i,n,A);if(s){s=r.fallback,a=e.mode,n=t.child,i=n.sibling;var o={mode:"hidden",children:r.children};return!(a&1)&&e.child!==n?(r=e.child,r.childLanes=0,r.pendingProps=o,e.deletions=null):(r=qr(n,o),r.subtreeFlags=n.subtreeFlags&14680064),i!==null?s=qr(i,s):(s=On(s,a,A,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?hh(A):{baseLanes:a.baseLanes|A,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~A,e.memoizedState=fh,r}return s=t.child,t=s.sibling,r=qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=A),r.return=e,r.sibling=null,t!==null&&(A=e.deletions,A===null?(e.deletions=[t],e.flags|=16):A.push(t)),e.child=r,e.memoizedState=null,r}function dm(t,e){return e=fc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xo(t,e,A,r){return r!==null&&Yp(r),Ks(e,t.child,null,A),t=dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LF(t,e,A,r,n,s,a){if(A)return e.flags&256?(e.flags&=-257,r=bd(Error(L(422))),xo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,n=e.mode,r=fc({mode:"visible",children:r.children},n,0,null),s=On(s,n,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ks(e,t.child,null,a),e.child.memoizedState=hh(a),e.memoizedState=fh,s);if(!(e.mode&1))return xo(t,e,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error(L(419)),r=bd(s,r,void 0),xo(t,e,a,r)}if(i=(a&t.childLanes)!==0,Lt||i){if(r=At,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,pr(t,n),SA(r,t,n,-1))}return wm(),r=bd(Error(L(421))),xo(t,e,a,r)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=JF.bind(null,t),n._reactRetry=e,null):(t=s.treeContext,Jt=Jr(n.nextSibling),Xt=e,xe=!0,FA=null,t!==null&&(iA[oA++]=ir,iA[oA++]=or,iA[oA++]=Hn,ir=t.id,or=t.overflow,Hn=e),e=dm(e,r.children),e.flags|=4096,e)}function yw(t,e,A){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ih(t.return,e,A)}function Ed(t,e,A,r,n){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:A,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=A,s.tailMode=n)}function p0(t,e,A){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(bt(t,e,r.children,A),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yw(t,A,e);else if(t.tag===19)yw(t,A,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Te,r),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(A=e.child,n=null;A!==null;)t=A.alternate,t!==null&&cu(t)===null&&(n=A),A=A.sibling;A=n,A===null?(n=e.child,e.child=null):(n=A.sibling,A.sibling=null),Ed(e,!1,n,A,s);break;case"backwards":for(A=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&cu(t)===null){e.child=n;break}t=n.sibling,n.sibling=A,A=n,n=t}Ed(e,!0,A,null,s);break;case"together":Ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,A){if(t!==null&&(e.dependencies=t.dependencies),Dn|=e.lanes,!(A&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,A=qr(t,t.pendingProps),e.child=A,A.return=e;t.sibling!==null;)t=t.sibling,A=A.sibling=qr(t,t.pendingProps),A.return=e;A.sibling=null}return e.child}function PF(t,e,A){switch(e.tag){case 3:f0(e),js();break;case 5:$v(e);break;case 1:Nt(e.type)&&su(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;Ue(ou,r._currentValue),r._currentValue=n;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Te,Te.current&1),e.flags|=128,null):A&e.child.childLanes?h0(t,e,A):(Ue(Te,Te.current&1),t=mr(t,e,A),t!==null?t.sibling:null);Ue(Te,Te.current&1);break;case 19:if(r=(A&e.childLanes)!==0,t.flags&128){if(r)return p0(t,e,A);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ue(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,c0(t,e,A)}return mr(t,e,A)}var m0,ph,g0,w0;m0=function(t,e){for(var A=e.child;A!==null;){if(A.tag===5||A.tag===6)t.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break;for(;A.sibling===null;){if(A.return===null||A.return===e)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};ph=function(){};g0=function(t,e,A,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,Qn(JA.current);var s=null;switch(A){case"input":n=Pf(t,n),r=Pf(t,r),s=[];break;case"select":n=ke({},n,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":n=Df(t,n),r=Df(t,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ru)}Mf(A,r);var a;A=null;for(l in n)if(!r.hasOwnProperty(l)&&n.hasOwnProperty(l)&&n[l]!=null)if(l==="style"){var i=n[l];for(a in i)i.hasOwnProperty(a)&&(A||(A={}),A[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qi.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var o=r[l];if(i=n!=null?n[l]:void 0,r.hasOwnProperty(l)&&o!==i&&(o!=null||i!=null))if(l==="style")if(i){for(a in i)!i.hasOwnProperty(a)||o&&o.hasOwnProperty(a)||(A||(A={}),A[a]="");for(a in o)o.hasOwnProperty(a)&&i[a]!==o[a]&&(A||(A={}),A[a]=o[a])}else A||(s||(s=[]),s.push(l,A)),A=o;else l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(s=s||[]).push(l,o)):l==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(l,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(l)?(o!=null&&l==="onScroll"&&Fe("scroll",t),s||i===o||(s=[])):(s=s||[]).push(l,o))}A&&(s=s||[]).push("style",A);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};w0=function(t,e,A,r){A!==r&&(e.flags|=4)};function Ea(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var A=null;e!==null;)e.alternate!==null&&(A=e),e=e.sibling;A===null?t.tail=null:A.sibling=null;break;case"collapsed":A=t.tail;for(var r=null;A!==null;)A.alternate!==null&&(r=A),A=A.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,A=0,r=0;if(e)for(var n=t.child;n!==null;)A|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)A|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=A,e}function HF(t,e,A){var r=e.pendingProps;switch(Xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Nt(e.type)&&nu(),ht(e),null;case 3:return r=e.stateNode,Gs(),Ie(Ht),Ie(yt),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Io(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,FA!==null&&(Ch(FA),FA=null))),ph(t,e),ht(e),null;case 5:sm(e);var n=Qn(Hi.current);if(A=e.type,t!==null&&e.stateNode!=null)g0(t,e,A,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return ht(e),null}if(t=Qn(JA.current),Io(e)){r=e.stateNode,A=e.type;var s=e.memoizedProps;switch(r[KA]=e,r[Li]=s,t=(e.mode&1)!==0,A){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(n=0;n<Pa.length;n++)Fe(Pa[n],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fg(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":Sg(r,s),Fe("invalid",r)}Mf(A,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,i,t),n=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,i,t),n=["children",""+i]):Qi.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Fe("scroll",r)}switch(A){case"input":Bo(r),Ig(r,s,!0);break;case"textarea":Bo(r),xg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ru)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(A)),t==="http://www.w3.org/1999/xhtml"?A==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(A,{is:r.is}):(t=a.createElement(A),A==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,A),t[KA]=e,t[Li]=r,m0(t,e,!1,!1),e.stateNode=t;e:{switch(a=jf(A,r),A){case"dialog":Fe("cancel",t),Fe("close",t),n=r;break;case"iframe":case"object":case"embed":Fe("load",t),n=r;break;case"video":case"audio":for(n=0;n<Pa.length;n++)Fe(Pa[n],t);n=r;break;case"source":Fe("error",t),n=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),n=r;break;case"details":Fe("toggle",t),n=r;break;case"input":Fg(t,r),n=Pf(t,r),Fe("invalid",t);break;case"option":n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=ke({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":Sg(t,r),n=Df(t,r),Fe("invalid",t);break;default:n=r}Mf(A,n),i=n;for(s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="style"?J_(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&z_(t,o)):s==="children"?typeof o=="string"?(A!=="textarea"||o!=="")&&Ui(t,o):typeof o=="number"&&Ui(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qi.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Fe("scroll",t):o!=null&&Lp(t,s,o,a))}switch(A){case"input":Bo(t),Ig(t,r,!1);break;case"textarea":Bo(t),xg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ks(t,!!r.multiple,s,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=ru)}switch(A){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)w0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(A=Qn(Hi.current),Qn(JA.current),Io(e)){if(r=e.stateNode,A=e.memoizedProps,r[KA]=e,(s=r.nodeValue!==A)&&(t=Xt,t!==null))switch(t.tag){case 3:Fo(r.nodeValue,A,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fo(r.nodeValue,A,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(A.nodeType===9?A:A.ownerDocument).createTextNode(r),r[KA]=e,e.stateNode=r}return ht(e),null;case 13:if(Ie(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Jt!==null&&e.mode&1&&!(e.flags&128))Lv(),js(),e.flags|=98560,s=!1;else if(s=Io(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[KA]=e}else js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else FA!==null&&(Ch(FA),FA=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=A,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Ze===0&&(Ze=3):wm())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Gs(),ph(t,e),t===null&&ki(e.stateNode.containerInfo),ht(e),null;case 10:return tm(e.type._context),ht(e),null;case 17:return Nt(e.type)&&nu(),ht(e),null;case 19:if(Ie(Te),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Ea(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cu(t),a!==null){for(e.flags|=128,Ea(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=A,A=e.child;A!==null;)s=A,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),A=A.sibling;return Ue(Te,Te.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>zs&&(e.flags|=128,r=!0,Ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=cu(a),t!==null){if(e.flags|=128,r=!0,A=t.updateQueue,A!==null&&(e.updateQueue=A,e.flags|=4),Ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!xe)return ht(e),null}else 2*He()-s.renderingStartTime>zs&&A!==1073741824&&(e.flags|=128,r=!0,Ea(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(A=s.last,A!==null?A.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,A=Te.current,Ue(Te,r?A&1|2:A&1),e):(ht(e),null);case 22:case 23:return gm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function NF(t,e){switch(Xp(e),e.tag){case 1:return Nt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),Ie(Ht),Ie(yt),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sm(e),null;case 13:if(Ie(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Te),null;case 4:return Gs(),null;case 10:return tm(e.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var To=!1,gt=!1,DF=typeof WeakSet=="function"?WeakSet:Set,W=null;function Fs(t,e){var A=t.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(r){Re(t,e,r)}else A.current=null}function mh(t,e,A){try{A()}catch(r){Re(t,e,r)}}var Bw=!1;function $F(t,e){if(qf=eu,t=Cv(),Jp(t)){if("selectionStart"in t)var A={start:t.selectionStart,end:t.selectionEnd};else e:{A=(A=t.ownerDocument)&&A.defaultView||window;var r=A.getSelection&&A.getSelection();if(r&&r.rangeCount!==0){A=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{A.nodeType,s.nodeType}catch{A=null;break e}var a=0,i=-1,o=-1,l=0,u=0,c=t,d=null;t:for(;;){for(var h;c!==A||n!==0&&c.nodeType!==3||(i=a+n),c!==s||r!==0&&c.nodeType!==3||(o=a+r),c.nodeType===3&&(a+=c.nodeValue.length),(h=c.firstChild)!==null;)d=c,c=h;for(;;){if(c===t)break t;if(d===A&&++l===n&&(i=a),d===s&&++u===r&&(o=a),(h=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=h}A=i===-1||o===-1?null:{start:i,end:o}}else A=null}A=A||{start:0,end:0}}else A=null;for(eh={focusedElem:t,selectionRange:A},eu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var w=f.memoizedProps,y=f.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:EA(e.type,w),y);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(B){Re(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return f=Bw,Bw=!1,f}function li(t,e,A){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var s=n.destroy;n.destroy=void 0,s!==void 0&&mh(e,A,s)}n=n.next}while(n!==r)}}function cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var A=e=e.next;do{if((A.tag&t)===t){var r=A.create;A.destroy=r()}A=A.next}while(A!==e)}}function gh(t){var e=t.ref;if(e!==null){var A=t.stateNode;switch(t.tag){case 5:t=A;break;default:t=A}typeof e=="function"?e(t):e.current=t}}function y0(t){var e=t.alternate;e!==null&&(t.alternate=null,y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[KA],delete e[Li],delete e[rh],delete e[CF],delete e[bF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B0(t){return t.tag===5||t.tag===3||t.tag===4}function _w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wh(t,e,A){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?A.nodeType===8?A.parentNode.insertBefore(t,e):A.insertBefore(t,e):(A.nodeType===8?(e=A.parentNode,e.insertBefore(t,A)):(e=A,e.appendChild(t)),A=A._reactRootContainer,A!=null||e.onclick!==null||(e.onclick=ru));else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,A),t=t.sibling;t!==null;)wh(t,e,A),t=t.sibling}function yh(t,e,A){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?A.insertBefore(t,e):A.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yh(t,e,A),t=t.sibling;t!==null;)yh(t,e,A),t=t.sibling}var st=null,UA=!1;function vr(t,e,A){for(A=A.child;A!==null;)_0(t,e,A),A=A.sibling}function _0(t,e,A){if(WA&&typeof WA.onCommitFiberUnmount=="function")try{WA.onCommitFiberUnmount(rc,A)}catch{}switch(A.tag){case 5:gt||Fs(A,e);case 6:var r=st,n=UA;st=null,vr(t,e,A),st=r,UA=n,st!==null&&(UA?(t=st,A=A.stateNode,t.nodeType===8?t.parentNode.removeChild(A):t.removeChild(A)):st.removeChild(A.stateNode));break;case 18:st!==null&&(UA?(t=st,A=A.stateNode,t.nodeType===8?wd(t.parentNode,A):t.nodeType===1&&wd(t,A),xi(t)):wd(st,A.stateNode));break;case 4:r=st,n=UA,st=A.stateNode.containerInfo,UA=!0,vr(t,e,A),st=r,UA=n;break;case 0:case 11:case 14:case 15:if(!gt&&(r=A.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&mh(A,e,a),n=n.next}while(n!==r)}vr(t,e,A);break;case 1:if(!gt&&(Fs(A,e),r=A.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=A.memoizedProps,r.state=A.memoizedState,r.componentWillUnmount()}catch(i){Re(A,e,i)}vr(t,e,A);break;case 21:vr(t,e,A);break;case 22:A.mode&1?(gt=(r=gt)||A.memoizedState!==null,vr(t,e,A),gt=r):vr(t,e,A);break;default:vr(t,e,A)}}function vw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var A=t.stateNode;A===null&&(A=t.stateNode=new DF),e.forEach(function(r){var n=ZF.bind(null,t,r);A.has(r)||(A.add(r),r.then(n,n))})}}function wA(t,e){var A=e.deletions;if(A!==null)for(var r=0;r<A.length;r++){var n=A[r];try{var s=t,a=e,i=a;e:for(;i!==null;){switch(i.tag){case 5:st=i.stateNode,UA=!1;break e;case 3:st=i.stateNode.containerInfo,UA=!0;break e;case 4:st=i.stateNode.containerInfo,UA=!0;break e}i=i.return}if(st===null)throw Error(L(160));_0(s,a,n),st=null,UA=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(l){Re(n,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v0(e,t),e=e.sibling}function v0(t,e){var A=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wA(e,t),PA(t),r&4){try{li(3,t,t.return),cc(3,t)}catch(w){Re(t,t.return,w)}try{li(5,t,t.return)}catch(w){Re(t,t.return,w)}}break;case 1:wA(e,t),PA(t),r&512&&A!==null&&Fs(A,A.return);break;case 5:if(wA(e,t),PA(t),r&512&&A!==null&&Fs(A,A.return),t.flags&32){var n=t.stateNode;try{Ui(n,"")}catch(w){Re(t,t.return,w)}}if(r&4&&(n=t.stateNode,n!=null)){var s=t.memoizedProps,a=A!==null?A.memoizedProps:s,i=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&K_(n,s),jf(i,a);var l=jf(i,s);for(a=0;a<o.length;a+=2){var u=o[a],c=o[a+1];u==="style"?J_(n,c):u==="dangerouslySetInnerHTML"?z_(n,c):u==="children"?Ui(n,c):Lp(n,u,c,l)}switch(i){case"input":Hf(n,s);break;case"textarea":G_(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ks(n,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ks(n,!!s.multiple,s.defaultValue,!0):ks(n,!!s.multiple,s.multiple?[]:"",!1))}n[Li]=s}catch(w){Re(t,t.return,w)}}break;case 6:if(wA(e,t),PA(t),r&4){if(t.stateNode===null)throw Error(L(162));n=t.stateNode,s=t.memoizedProps;try{n.nodeValue=s}catch(w){Re(t,t.return,w)}}break;case 3:if(wA(e,t),PA(t),r&4&&A!==null&&A.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(w){Re(t,t.return,w)}break;case 4:wA(e,t),PA(t);break;case 13:wA(e,t),PA(t),n=t.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(pm=He())),r&4&&vw(t);break;case 22:if(u=A!==null&&A.memoizedState!==null,t.mode&1?(gt=(l=gt)||u,wA(e,t),gt=l):wA(e,t),PA(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(W=t,u=t.child;u!==null;){for(c=W=u;W!==null;){switch(d=W,h=d.child,d.tag){case 0:case 11:case 14:case 15:li(4,d,d.return);break;case 1:Fs(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){r=d,A=d.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(w){Re(r,A,w)}}break;case 5:Fs(d,d.return);break;case 22:if(d.memoizedState!==null){bw(c);continue}}h!==null?(h.return=d,W=h):bw(c)}u=u.sibling}e:for(u=null,c=t;;){if(c.tag===5){if(u===null){u=c;try{n=c.stateNode,l?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=c.stateNode,o=c.memoizedProps.style,a=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=W_("display",a))}catch(w){Re(t,t.return,w)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(w){Re(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:wA(e,t),PA(t),r&4&&vw(t);break;case 21:break;default:wA(e,t),PA(t)}}function PA(t){var e=t.flags;if(e&2){try{e:{for(var A=t.return;A!==null;){if(B0(A)){var r=A;break e}A=A.return}throw Error(L(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Ui(n,""),r.flags&=-33);var s=_w(t);yh(t,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,i=_w(t);wh(t,i,a);break;default:throw Error(L(161))}}catch(o){Re(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MF(t,e,A){W=t,C0(t)}function C0(t,e,A){for(var r=(t.mode&1)!==0;W!==null;){var n=W,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||To;if(!a){var i=n.alternate,o=i!==null&&i.memoizedState!==null||gt;i=To;var l=gt;if(To=a,(gt=o)&&!l)for(W=n;W!==null;)a=W,o=a.child,a.tag===22&&a.memoizedState!==null?Ew(n):o!==null?(o.return=a,W=o):Ew(n);for(;s!==null;)W=s,C0(s),s=s.sibling;W=n,To=i,gt=l}Cw(t)}else n.subtreeFlags&8772&&s!==null?(s.return=n,W=s):Cw(t)}}function Cw(t){for(;W!==null;){var e=W;if(e.flags&8772){var A=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(A===null)r.componentDidMount();else{var n=e.elementType===e.type?A.memoizedProps:EA(e.type,A.memoizedProps);r.componentDidUpdate(n,A.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iw(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(A=null,e.child!==null)switch(e.child.tag){case 5:A=e.child.stateNode;break;case 1:A=e.child.stateNode}iw(e,a,A)}break;case 5:var i=e.stateNode;if(A===null&&e.flags&4){A=i;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&A.focus();break;case"img":o.src&&(A.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&xi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}gt||e.flags&512&&gh(e)}catch(d){Re(e,e.return,d)}}if(e===t){W=null;break}if(A=e.sibling,A!==null){A.return=e.return,W=A;break}W=e.return}}function bw(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var A=e.sibling;if(A!==null){A.return=e.return,W=A;break}W=e.return}}function Ew(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var A=e.return;try{cc(4,e)}catch(o){Re(e,A,o)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var n=e.return;try{r.componentDidMount()}catch(o){Re(e,n,o)}}var s=e.return;try{gh(e)}catch(o){Re(e,s,o)}break;case 5:var a=e.return;try{gh(e)}catch(o){Re(e,a,o)}}}catch(o){Re(e,e.return,o)}if(e===t){W=null;break}var i=e.sibling;if(i!==null){i.return=e.return,W=i;break}W=e.return}}var jF=Math.ceil,hu=yr.ReactCurrentDispatcher,fm=yr.ReactCurrentOwner,fA=yr.ReactCurrentBatchConfig,fe=0,At=null,Me=null,ut=0,Wt=0,Is=hn(0),Ze=0,Mi=null,Dn=0,dc=0,hm=0,ui=null,kt=null,pm=0,zs=1/0,sr=null,pu=!1,Bh=null,Xr=null,Oo=!1,Nr=null,mu=0,ci=0,_h=null,Tl=-1,Ol=0;function Qt(){return fe&6?He():Tl!==-1?Tl:Tl=He()}function Yr(t){return t.mode&1?fe&2&&ut!==0?ut&-ut:QF.transition!==null?(Ol===0&&(Ol=iv()),Ol):(t=ve,t!==0||(t=window.event,t=t===void 0?16:hv(t.type)),t):1}function SA(t,e,A,r){if(50<ci)throw ci=0,_h=null,Error(L(185));to(t,A,r),(!(fe&2)||t!==At)&&(t===At&&(!(fe&2)&&(dc|=A),Ze===4&&Pr(t,ut)),Dt(t,r),A===1&&fe===0&&!(e.mode&1)&&(zs=He()+500,oc&&pn()))}function Dt(t,e){var A=t.callbackNode;QU(t,e);var r=ql(t,t===At?ut:0);if(r===0)A!==null&&kg(A),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(A!=null&&kg(A),e===1)t.tag===0?EF(Qw.bind(null,t)):Ov(Qw.bind(null,t)),_F(function(){!(fe&6)&&pn()}),A=null;else{switch(ov(r)){case 1:A=$p;break;case 4:A=sv;break;case 16:A=Yl;break;case 536870912:A=av;break;default:A=Yl}A=x0(A,b0.bind(null,t))}t.callbackPriority=e,t.callbackNode=A}}function b0(t,e){if(Tl=-1,Ol=0,fe&6)throw Error(L(327));var A=t.callbackNode;if(Ns()&&t.callbackNode!==A)return null;var r=ql(t,t===At?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gu(t,r);else{e=r;var n=fe;fe|=2;var s=Q0();(At!==t||ut!==e)&&(sr=null,zs=He()+500,Tn(t,e));do try{VF();break}catch(i){E0(t,i)}while(!0);em(),hu.current=s,fe=n,Me!==null?e=0:(At=null,ut=0,e=Ze)}if(e!==0){if(e===2&&(n=Wf(t),n!==0&&(r=n,e=vh(t,n))),e===1)throw A=Mi,Tn(t,0),Pr(t,r),Dt(t,He()),A;if(e===6)Pr(t,r);else{if(n=t.current.alternate,!(r&30)&&!KF(n)&&(e=gu(t,r),e===2&&(s=Wf(t),s!==0&&(r=s,e=vh(t,s))),e===1))throw A=Mi,Tn(t,0),Pr(t,r),Dt(t,He()),A;switch(t.finishedWork=n,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Bn(t,kt,sr);break;case 3:if(Pr(t,r),(r&130023424)===r&&(e=pm+500-He(),10<e)){if(ql(t,0)!==0)break;if(n=t.suspendedLanes,(n&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Ah(Bn.bind(null,t,kt,sr),e);break}Bn(t,kt,sr);break;case 4:if(Pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,n=-1;0<r;){var a=31-IA(r);s=1<<a,a=e[a],a>n&&(n=a),r&=~s}if(r=n,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jF(r/1960))-r,10<r){t.timeoutHandle=Ah(Bn.bind(null,t,kt,sr),r);break}Bn(t,kt,sr);break;case 5:Bn(t,kt,sr);break;default:throw Error(L(329))}}}return Dt(t,He()),t.callbackNode===A?b0.bind(null,t):null}function vh(t,e){var A=ui;return t.current.memoizedState.isDehydrated&&(Tn(t,e).flags|=256),t=gu(t,e),t!==2&&(e=kt,kt=A,e!==null&&Ch(e)),t}function Ch(t){kt===null?kt=t:kt.push.apply(kt,t)}function KF(t){for(var e=t;;){if(e.flags&16384){var A=e.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var r=0;r<A.length;r++){var n=A[r],s=n.getSnapshot;n=n.value;try{if(!TA(s(),n))return!1}catch{return!1}}}if(A=e.child,e.subtreeFlags&16384&&A!==null)A.return=e,e=A;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e){for(e&=~hm,e&=~dc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var A=31-IA(e),r=1<<A;t[A]=-1,e&=~r}}function Qw(t){if(fe&6)throw Error(L(327));Ns();var e=ql(t,0);if(!(e&1))return Dt(t,He()),null;var A=gu(t,e);if(t.tag!==0&&A===2){var r=Wf(t);r!==0&&(e=r,A=vh(t,r))}if(A===1)throw A=Mi,Tn(t,0),Pr(t,e),Dt(t,He()),A;if(A===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bn(t,kt,sr),Dt(t,He()),null}function mm(t,e){var A=fe;fe|=1;try{return t(e)}finally{fe=A,fe===0&&(zs=He()+500,oc&&pn())}}function $n(t){Nr!==null&&Nr.tag===0&&!(fe&6)&&Ns();var e=fe;fe|=1;var A=fA.transition,r=ve;try{if(fA.transition=null,ve=1,t)return t()}finally{ve=r,fA.transition=A,fe=e,!(fe&6)&&pn()}}function gm(){Wt=Is.current,Ie(Is)}function Tn(t,e){t.finishedWork=null,t.finishedLanes=0;var A=t.timeoutHandle;if(A!==-1&&(t.timeoutHandle=-1,BF(A)),Me!==null)for(A=Me.return;A!==null;){var r=A;switch(Xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:Gs(),Ie(Ht),Ie(yt),am();break;case 5:sm(r);break;case 4:Gs();break;case 13:Ie(Te);break;case 19:Ie(Te);break;case 10:tm(r.type._context);break;case 22:case 23:gm()}A=A.return}if(At=t,Me=t=qr(t.current,null),ut=Wt=e,Ze=0,Mi=null,hm=dc=Dn=0,kt=ui=null,En!==null){for(e=0;e<En.length;e++)if(A=En[e],r=A.interleaved,r!==null){A.interleaved=null;var n=r.next,s=A.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}A.pending=r}En=null}return t}function E0(t,e){do{var A=Me;try{if(em(),Il.current=fu,du){for(var r=Oe.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}du=!1}if(Nn=0,et=ze=Oe=null,oi=!1,Ni=0,fm.current=null,A===null||A.return===null){Ze=1,Mi=e,Me=null;break}e:{var s=t,a=A.return,i=A,o=e;if(e=ut,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var l=o,u=i,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=fw(a);if(h!==null){h.flags&=-257,hw(h,a,i,s,e),h.mode&1&&dw(s,l,e),e=h,o=l;var f=e.updateQueue;if(f===null){var w=new Set;w.add(o),e.updateQueue=w}else f.add(o);break e}else{if(!(e&1)){dw(s,l,e),wm();break e}o=Error(L(426))}}else if(xe&&i.mode&1){var y=fw(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),hw(y,a,i,s,e),Yp(Vs(o,i));break e}}s=o=Vs(o,i),Ze!==4&&(Ze=2),ui===null?ui=[s]:ui.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=o0(s,o,e);aw(s,p);break e;case 1:i=o;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xr===null||!Xr.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var B=l0(s,i,e);aw(s,B);break e}}s=s.return}while(s!==null)}F0(A)}catch(_){e=_,Me===A&&A!==null&&(Me=A=A.return);continue}break}while(!0)}function Q0(){var t=hu.current;return hu.current=fu,t===null?fu:t}function wm(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),At===null||!(Dn&268435455)&&!(dc&268435455)||Pr(At,ut)}function gu(t,e){var A=fe;fe|=2;var r=Q0();(At!==t||ut!==e)&&(sr=null,Tn(t,e));do try{GF();break}catch(n){E0(t,n)}while(!0);if(em(),fe=A,hu.current=r,Me!==null)throw Error(L(261));return At=null,ut=0,Ze}function GF(){for(;Me!==null;)U0(Me)}function VF(){for(;Me!==null&&!gU();)U0(Me)}function U0(t){var e=S0(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?F0(t):Me=e,fm.current=null}function F0(t){var e=t;do{var A=e.alternate;if(t=e.return,e.flags&32768){if(A=NF(A,e),A!==null){A.flags&=32767,Me=A;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Me=null;return}}else if(A=HF(A,e,Wt),A!==null){Me=A;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Ze===0&&(Ze=5)}function Bn(t,e,A){var r=ve,n=fA.transition;try{fA.transition=null,ve=1,zF(t,e,A,r)}finally{fA.transition=n,ve=r}return null}function zF(t,e,A,r){do Ns();while(Nr!==null);if(fe&6)throw Error(L(327));A=t.finishedWork;var n=t.finishedLanes;if(A===null)return null;if(t.finishedWork=null,t.finishedLanes=0,A===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=A.lanes|A.childLanes;if(UU(t,s),t===At&&(Me=At=null,ut=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||Oo||(Oo=!0,x0(Yl,function(){return Ns(),null})),s=(A.flags&15990)!==0,A.subtreeFlags&15990||s){s=fA.transition,fA.transition=null;var a=ve;ve=1;var i=fe;fe|=4,fm.current=null,$F(t,A),v0(A,t),fF(eh),eu=!!qf,eh=qf=null,t.current=A,MF(A),wU(),fe=i,ve=a,fA.transition=s}else t.current=A;if(Oo&&(Oo=!1,Nr=t,mu=n),s=t.pendingLanes,s===0&&(Xr=null),_U(A.stateNode),Dt(t,He()),e!==null)for(r=t.onRecoverableError,A=0;A<e.length;A++)n=e[A],r(n.value,{componentStack:n.stack,digest:n.digest});if(pu)throw pu=!1,t=Bh,Bh=null,t;return mu&1&&t.tag!==0&&Ns(),s=t.pendingLanes,s&1?t===_h?ci++:(ci=0,_h=t):ci=0,pn(),null}function Ns(){if(Nr!==null){var t=ov(mu),e=fA.transition,A=ve;try{if(fA.transition=null,ve=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,mu=0,fe&6)throw Error(L(331));var n=fe;for(fe|=4,W=t.current;W!==null;){var s=W,a=s.child;if(W.flags&16){var i=s.deletions;if(i!==null){for(var o=0;o<i.length;o++){var l=i[o];for(W=l;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:li(8,u,s)}var c=u.child;if(c!==null)c.return=u,W=c;else for(;W!==null;){u=W;var d=u.sibling,h=u.return;if(y0(u),u===l){W=null;break}if(d!==null){d.return=h,W=d;break}W=h}}}var f=s.alternate;if(f!==null){var w=f.child;if(w!==null){f.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}W=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,W=a;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:li(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,W=p;break e}W=s.return}}var m=t.current;for(W=m;W!==null;){a=W;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,W=g;else e:for(a=m;W!==null;){if(i=W,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:cc(9,i)}}catch(_){Re(i,i.return,_)}if(i===a){W=null;break e}var B=i.sibling;if(B!==null){B.return=i.return,W=B;break e}W=i.return}}if(fe=n,pn(),WA&&typeof WA.onPostCommitFiberRoot=="function")try{WA.onPostCommitFiberRoot(rc,t)}catch{}r=!0}return r}finally{ve=A,fA.transition=e}}return!1}function Uw(t,e,A){e=Vs(A,e),e=o0(t,e,1),t=Zr(t,e,1),e=Qt(),t!==null&&(to(t,1,e),Dt(t,e))}function Re(t,e,A){if(t.tag===3)Uw(t,t,A);else for(;e!==null;){if(e.tag===3){Uw(e,t,A);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xr===null||!Xr.has(r))){t=Vs(A,t),t=l0(e,t,1),e=Zr(e,t,1),t=Qt(),e!==null&&(to(e,1,t),Dt(e,t));break}}e=e.return}}function WF(t,e,A){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&A,At===t&&(ut&A)===A&&(Ze===4||Ze===3&&(ut&130023424)===ut&&500>He()-pm?Tn(t,0):hm|=A),Dt(t,e)}function I0(t,e){e===0&&(t.mode&1?(e=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):e=1);var A=Qt();t=pr(t,e),t!==null&&(to(t,e,A),Dt(t,A))}function JF(t){var e=t.memoizedState,A=0;e!==null&&(A=e.retryLane),I0(t,A)}function ZF(t,e){var A=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;n!==null&&(A=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),I0(t,A)}var S0;S0=function(t,e,A){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Lt=!0;else{if(!(t.lanes&A)&&!(e.flags&128))return Lt=!1,PF(t,e,A);Lt=!!(t.flags&131072)}else Lt=!1,xe&&e.flags&1048576&&kv(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var n=Ms(e,yt.current);Hs(e,A),n=om(null,e,r,t,n,A);var s=lm();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,su(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,rm(e),n.updater=uc,e.stateNode=n,n._reactInternals=e,lh(e,r,t,A),e=dh(null,e,r,!0,s,A)):(e.tag=0,xe&&s&&Zp(e),bt(null,e,n,A),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,n=r._init,r=n(r._payload),e.type=r,n=e.tag=YF(r),t=EA(r,t),n){case 0:e=ch(null,e,r,t,A);break e;case 1:e=gw(null,e,r,t,A);break e;case 11:e=pw(null,e,r,t,A);break e;case 14:e=mw(null,e,r,EA(r.type,t),A);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:EA(r,n),ch(t,e,r,n,A);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:EA(r,n),gw(t,e,r,n,A);case 3:e:{if(f0(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,n=s.element,Dv(t,e),uu(e,r,null,A);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=Vs(Error(L(423)),e),e=ww(t,e,r,A,n);break e}else if(r!==n){n=Vs(Error(L(424)),e),e=ww(t,e,r,A,n);break e}else for(Jt=Jr(e.stateNode.containerInfo.firstChild),Xt=e,xe=!0,FA=null,A=Hv(e,null,r,A),e.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(js(),r===n){e=mr(t,e,A);break e}bt(t,e,r,A)}e=e.child}return e;case 5:return $v(e),t===null&&ah(e),r=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,a=n.children,th(r,n)?a=null:s!==null&&th(r,s)&&(e.flags|=32),d0(t,e),bt(t,e,a,A),e.child;case 6:return t===null&&ah(e),null;case 13:return h0(t,e,A);case 4:return nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ks(e,null,r,A):bt(t,e,r,A),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:EA(r,n),pw(t,e,r,n,A);case 7:return bt(t,e,e.pendingProps,A),e.child;case 8:return bt(t,e,e.pendingProps.children,A),e.child;case 12:return bt(t,e,e.pendingProps.children,A),e.child;case 10:e:{if(r=e.type._context,n=e.pendingProps,s=e.memoizedProps,a=n.value,Ue(ou,r._currentValue),r._currentValue=a,s!==null)if(TA(s.value,a)){if(s.children===n.children&&!Ht.current){e=mr(t,e,A);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var o=i.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=ur(-1,A&-A),o.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?o.next=o:(o.next=u.next,u.next=o),l.pending=o}}s.lanes|=A,o=s.alternate,o!==null&&(o.lanes|=A),ih(s.return,A,e),i.lanes|=A;break}o=o.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=A,i=a.alternate,i!==null&&(i.lanes|=A),ih(a,A,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}bt(t,e,n.children,A),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,Hs(e,A),n=hA(n),r=r(n),e.flags|=1,bt(t,e,r,A),e.child;case 14:return r=e.type,n=EA(r,e.pendingProps),n=EA(r.type,n),mw(t,e,r,n,A);case 15:return u0(t,e,e.type,e.pendingProps,A);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:EA(r,n),xl(t,e),e.tag=1,Nt(r)?(t=!0,su(e)):t=!1,Hs(e,A),i0(e,r,n),lh(e,r,n,A),dh(null,e,r,!0,t,A);case 19:return p0(t,e,A);case 22:return c0(t,e,A)}throw Error(L(156,e.tag))};function x0(t,e){return nv(t,e)}function XF(t,e,A,r){this.tag=t,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uA(t,e,A,r){return new XF(t,e,A,r)}function ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YF(t){if(typeof t=="function")return ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hp)return 11;if(t===Np)return 14}return 2}function qr(t,e){var A=t.alternate;return A===null?(A=uA(t.tag,e,t.key,t.mode),A.elementType=t.elementType,A.type=t.type,A.stateNode=t.stateNode,A.alternate=t,t.alternate=A):(A.pendingProps=e,A.type=t.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=t.flags&14680064,A.childLanes=t.childLanes,A.lanes=t.lanes,A.child=t.child,A.memoizedProps=t.memoizedProps,A.memoizedState=t.memoizedState,A.updateQueue=t.updateQueue,e=t.dependencies,A.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},A.sibling=t.sibling,A.index=t.index,A.ref=t.ref,A}function kl(t,e,A,r,n,s){var a=2;if(r=t,typeof t=="function")ym(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ys:return On(A.children,n,s,e);case Pp:a=8,n|=8;break;case Of:return t=uA(12,A,e,n|2),t.elementType=Of,t.lanes=s,t;case kf:return t=uA(13,A,e,n),t.elementType=kf,t.lanes=s,t;case Rf:return t=uA(19,A,e,n),t.elementType=Rf,t.lanes=s,t;case $_:return fc(A,n,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N_:a=10;break e;case D_:a=9;break e;case Hp:a=11;break e;case Np:a=14;break e;case Sr:a=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=uA(a,A,e,n),e.elementType=t,e.type=r,e.lanes=s,e}function On(t,e,A,r){return t=uA(7,t,r,e),t.lanes=A,t}function fc(t,e,A,r){return t=uA(22,t,r,e),t.elementType=$_,t.lanes=A,t.stateNode={isHidden:!1},t}function Qd(t,e,A){return t=uA(6,t,null,e),t.lanes=A,t}function Ud(t,e,A){return e=uA(4,t.children!==null?t.children:[],t.key,e),e.lanes=A,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qF(t,e,A,r,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Bm(t,e,A,r,n,s,a,i,o){return t=new qF(t,e,A,i,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=uA(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},rm(s),t}function eI(t,e,A){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:A}}function T0(t){if(!t)return sn;t=t._reactInternals;e:{if(Wn(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var A=t.type;if(Nt(A))return Tv(t,A,e)}return e}function O0(t,e,A,r,n,s,a,i,o){return t=Bm(A,r,!0,t,n,s,a,i,o),t.context=T0(null),A=t.current,r=Qt(),n=Yr(A),s=ur(r,n),s.callback=e??null,Zr(A,s,n),t.current.lanes=n,to(t,n,r),Dt(t,r),t}function hc(t,e,A,r){var n=e.current,s=Qt(),a=Yr(n);return A=T0(A),e.context===null?e.context=A:e.pendingContext=A,e=ur(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zr(n,e,a),t!==null&&(SA(t,n,a,s),Fl(t,n,a)),a}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var A=t.retryLane;t.retryLane=A!==0&&A<e?A:e}}function _m(t,e){Fw(t,e),(t=t.alternate)&&Fw(t,e)}function tI(){return null}var k0=typeof reportError=="function"?reportError:function(t){console.error(t)};function vm(t){this._internalRoot=t}pc.prototype.render=vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));hc(t,e,null,null)};pc.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$n(function(){hc(null,t,null,null)}),e[hr]=null}};function pc(t){this._internalRoot=t}pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=cv();t={blockedOn:null,target:t,priority:e};for(var A=0;A<Lr.length&&e!==0&&e<Lr[A].priority;A++);Lr.splice(A,0,t),A===0&&fv(t)}};function Cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iw(){}function AI(t,e,A,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var l=wu(a);s.call(l)}}var a=O0(e,r,t,0,null,!1,!1,"",Iw);return t._reactRootContainer=a,t[hr]=a.current,ki(t.nodeType===8?t.parentNode:t),$n(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof r=="function"){var i=r;r=function(){var l=wu(o);i.call(l)}}var o=Bm(t,0,!1,null,null,!1,!1,"",Iw);return t._reactRootContainer=o,t[hr]=o.current,ki(t.nodeType===8?t.parentNode:t),$n(function(){hc(e,o,A,r)}),o}function gc(t,e,A,r,n){var s=A._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var i=n;n=function(){var o=wu(a);i.call(o)}}hc(e,a,t,n)}else a=AI(A,e,t,n,r);return wu(a)}lv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var A=La(e.pendingLanes);A!==0&&(Mp(e,A|1),Dt(e,He()),!(fe&6)&&(zs=He()+500,pn()))}break;case 13:$n(function(){var r=pr(t,1);if(r!==null){var n=Qt();SA(r,t,1,n)}}),_m(t,1)}};jp=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var A=Qt();SA(e,t,134217728,A)}_m(t,134217728)}};uv=function(t){if(t.tag===13){var e=Yr(t),A=pr(t,e);if(A!==null){var r=Qt();SA(A,t,e,r)}_m(t,e)}};cv=function(){return ve};dv=function(t,e){var A=ve;try{return ve=t,e()}finally{ve=A}};Gf=function(t,e,A){switch(e){case"input":if(Hf(t,A),e=A.name,A.type==="radio"&&e!=null){for(A=t;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<A.length;e++){var r=A[e];if(r!==t&&r.form===t.form){var n=ic(r);if(!n)throw Error(L(90));j_(r),Hf(r,n)}}}break;case"textarea":G_(t,A);break;case"select":e=A.value,e!=null&&ks(t,!!A.multiple,e,!1)}};Y_=mm;q_=$n;var rI={usingClientEntryPoint:!1,Events:[ro,Cs,ic,Z_,X_,mm]},Qa={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nI={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Av(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||tI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ko.isDisabled&&ko.supportsFiber)try{rc=ko.inject(nI),WA=ko}catch{}}AA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;AA.createPortal=function(t,e){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cm(e))throw Error(L(200));return eI(t,e,null,A)};AA.createRoot=function(t,e){if(!Cm(t))throw Error(L(299));var A=!1,r="",n=k0;return e!=null&&(e.unstable_strictMode===!0&&(A=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Bm(t,1,!1,null,null,A,!1,r,n),t[hr]=e.current,ki(t.nodeType===8?t.parentNode:t),new vm(e)};AA.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Av(e),t=t===null?null:t.stateNode,t};AA.flushSync=function(t){return $n(t)};AA.hydrate=function(t,e,A){if(!mc(e))throw Error(L(200));return gc(null,t,e,!0,A)};AA.hydrateRoot=function(t,e,A){if(!Cm(t))throw Error(L(405));var r=A!=null&&A.hydratedSources||null,n=!1,s="",a=k0;if(A!=null&&(A.unstable_strictMode===!0&&(n=!0),A.identifierPrefix!==void 0&&(s=A.identifierPrefix),A.onRecoverableError!==void 0&&(a=A.onRecoverableError)),e=O0(e,null,t,1,A??null,n,!1,s,a),t[hr]=e.current,ki(t),r)for(t=0;t<r.length;t++)A=r[t],n=A._getVersion,n=n(A._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[A,n]:e.mutableSourceEagerHydrationData.push(A,n);return new pc(e)};AA.render=function(t,e,A){if(!mc(e))throw Error(L(200));return gc(null,t,e,!1,A)};AA.unmountComponentAtNode=function(t){if(!mc(t))throw Error(L(40));return t._reactRootContainer?($n(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};AA.unstable_batchedUpdates=mm;AA.unstable_renderSubtreeIntoContainer=function(t,e,A,r){if(!mc(A))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return gc(t,e,A,!1,r)};AA.version="18.3.1-next-f1338f8080-20240426";function R0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R0)}catch(t){console.error(t)}}R0(),R_.exports=AA;var sI=R_.exports,L0,Sw=sI;L0=Sw.createRoot,Sw.hydrateRoot;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bh=function(t,e){return bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(A[n]=r[n])},bh(t,e)};function kA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bh(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Eh=function(){return Eh=Object.assign||function(e){for(var A,r=1,n=arguments.length;r<n;r++){A=arguments[r];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},Eh.apply(this,arguments)};function Ct(t,e,A,r){function n(s){return s instanceof A?s:new A(function(a){a(s)})}return new(A||(A=Promise))(function(s,a){function i(u){try{l(r.next(u))}catch(c){a(c)}}function o(u){try{l(r.throw(u))}catch(c){a(c)}}function l(u){u.done?s(u.value):n(u.value).then(i,o)}l((r=r.apply(t,[])).next())})}function pt(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(l){return function(u){return o([l,u])}}function o(l){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return A.label++,{value:l[1],done:!1};case 5:A.label++,n=l[1],l=[0];continue;case 7:l=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){A=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){A.label=l[1];break}if(l[0]===6&&A.label<s[1]){A.label=s[1],s=l;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(l);break}s[2]&&A.ops.pop(),A.trys.pop();continue}l=e.call(t,A)}catch(u){l=[6,u],n=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ro(t,e,A){if(arguments.length===2)for(var r=0,n=e.length,s;r<n;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var gr=function(){function t(e,A,r,n){this.left=e,this.top=A,this.width=r,this.height=n}return t.prototype.add=function(e,A,r,n){return new t(this.left+e,this.top+A,this.width+r,this.height+n)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var r=Array.from(A).find(function(n){return n.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),wc=function(t,e){return gr.fromClientRect(t,e.getBoundingClientRect())},aI=function(t){var e=t.body,A=t.documentElement;if(!e||!A)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,A.scrollWidth),Math.max(e.offsetWidth,A.offsetWidth),Math.max(e.clientWidth,A.clientWidth)),n=Math.max(Math.max(e.scrollHeight,A.scrollHeight),Math.max(e.offsetHeight,A.offsetHeight),Math.max(e.clientHeight,A.clientHeight));return new gr(0,0,r,n)},yc=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},Pe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var a=t[n];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},xw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lo=0;Lo<xw.length;Lo++)iI[xw.charCodeAt(Lo)]=Lo;var Tw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ha=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Po=0;Po<Tw.length;Po++)Ha[Tw.charCodeAt(Po)]=Po;var oI=function(t){var e=t.length*.75,A=t.length,r,n=0,s,a,i,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<A;r+=4)s=Ha[t.charCodeAt(r)],a=Ha[t.charCodeAt(r+1)],i=Ha[t.charCodeAt(r+2)],o=Ha[t.charCodeAt(r+3)],u[n++]=s<<2|a>>4,u[n++]=(a&15)<<4|i>>2,u[n++]=(i&3)<<6|o&63;return l},lI=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},uI=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},kn=5,bm=11,Fd=2,cI=bm-kn,P0=65536>>kn,dI=1<<kn,Id=dI-1,fI=1024>>kn,hI=P0+fI,pI=hI,mI=32,gI=pI+mI,wI=65536>>bm,yI=1<<cI,BI=yI-1,Ow=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},_I=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},vI=function(t,e){var A=oI(t),r=Array.isArray(A)?uI(A):new Uint32Array(A),n=Array.isArray(A)?lI(A):new Uint16Array(A),s=24,a=Ow(n,s/2,r[4]/2),i=r[5]===2?Ow(n,(s+r[4])/2):_I(r,Math.ceil((s+r[4])/4));return new CI(r[0],r[1],r[2],r[3],a,i)},CI=function(){function t(e,A,r,n,s,a){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=a}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>kn],A=(A<<Fd)+(e&Id),this.data[A];if(e<=65535)return A=this.index[P0+(e-55296>>kn)],A=(A<<Fd)+(e&Id),this.data[A];if(e<this.highStart)return A=gI-wI+(e>>bm),A=this.index[A],A+=e>>kn&BI,A=this.index[A],A=(A<<Fd)+(e&Id),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),kw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ho=0;Ho<kw.length;Ho++)bI[kw.charCodeAt(Ho)]=Ho;var EI="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Rw=50,QI=1,H0=2,N0=3,UI=4,FI=5,Lw=7,D0=8,Pw=9,Dr=10,Qh=11,Hw=12,Uh=13,II=14,Na=15,Fh=16,No=17,Ua=18,SI=19,Nw=20,Ih=21,Fa=22,Sd=23,qn=24,Mt=25,Da=26,$a=27,es=28,xI=29,vn=30,TI=31,Do=32,$o=33,Sh=34,xh=35,Th=36,ji=37,Oh=38,Rl=39,Ll=40,xd=41,$0=42,OI=43,kI=[9001,65288],M0="!",ce="×",Mo="÷",kh=vI(EI),tr=[vn,Th],Rh=[QI,H0,N0,FI],j0=[Dr,D0],Dw=[$a,Da],RI=Rh.concat(j0),$w=[Oh,Rl,Ll,Sh,xh],LI=[Na,Uh],PI=function(t,e){e===void 0&&(e="strict");var A=[],r=[],n=[];return t.forEach(function(s,a){var i=kh.get(s);if(i>Rw?(n.push(!0),i-=Rw):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(a),A.push(Fh);if(i===UI||i===Qh){if(a===0)return r.push(a),A.push(vn);var o=A[a-1];return RI.indexOf(o)===-1?(r.push(r[a-1]),A.push(o)):(r.push(a),A.push(vn))}if(r.push(a),i===TI)return A.push(e==="strict"?Ih:ji);if(i===$0||i===xI)return A.push(vn);if(i===OI)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(ji):A.push(vn);A.push(i)}),[r,A,n]},Td=function(t,e,A,r){var n=r[A];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=A;s<=r.length;){s++;var a=r[s];if(a===e)return!0;if(a!==Dr)break}if(n===Dr)for(var s=A;s>0;){s--;var i=r[s];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var o=A;o<=r.length;){o++;var a=r[o];if(a===e)return!0;if(a!==Dr)break}if(i!==Dr)break}return!1},Mw=function(t,e){for(var A=t;A>=0;){var r=e[A];if(r===Dr)A--;else return r}return 0},HI=function(t,e,A,r,n){if(A[r]===0)return ce;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return ce;var a=s-1,i=s+1,o=e[s],l=a>=0?e[a]:0,u=e[i];if(o===H0&&u===N0)return ce;if(Rh.indexOf(o)!==-1)return M0;if(Rh.indexOf(u)!==-1||j0.indexOf(u)!==-1)return ce;if(Mw(s,e)===D0)return Mo;if(kh.get(t[s])===Qh||(o===Do||o===$o)&&kh.get(t[i])===Qh||o===Lw||u===Lw||o===Pw||[Dr,Uh,Na].indexOf(o)===-1&&u===Pw||[No,Ua,SI,qn,es].indexOf(u)!==-1||Mw(s,e)===Fa||Td(Sd,Fa,s,e)||Td([No,Ua],Ih,s,e)||Td(Hw,Hw,s,e))return ce;if(o===Dr)return Mo;if(o===Sd||u===Sd)return ce;if(u===Fh||o===Fh)return Mo;if([Uh,Na,Ih].indexOf(u)!==-1||o===II||l===Th&&LI.indexOf(o)!==-1||o===es&&u===Th||u===Nw||tr.indexOf(u)!==-1&&o===Mt||tr.indexOf(o)!==-1&&u===Mt||o===$a&&[ji,Do,$o].indexOf(u)!==-1||[ji,Do,$o].indexOf(o)!==-1&&u===Da||tr.indexOf(o)!==-1&&Dw.indexOf(u)!==-1||Dw.indexOf(o)!==-1&&tr.indexOf(u)!==-1||[$a,Da].indexOf(o)!==-1&&(u===Mt||[Fa,Na].indexOf(u)!==-1&&e[i+1]===Mt)||[Fa,Na].indexOf(o)!==-1&&u===Mt||o===Mt&&[Mt,es,qn].indexOf(u)!==-1)return ce;if([Mt,es,qn,No,Ua].indexOf(u)!==-1)for(var c=s;c>=0;){var d=e[c];if(d===Mt)return ce;if([es,qn].indexOf(d)!==-1)c--;else break}if([$a,Da].indexOf(u)!==-1)for(var c=[No,Ua].indexOf(o)!==-1?a:s;c>=0;){var d=e[c];if(d===Mt)return ce;if([es,qn].indexOf(d)!==-1)c--;else break}if(Oh===o&&[Oh,Rl,Sh,xh].indexOf(u)!==-1||[Rl,Sh].indexOf(o)!==-1&&[Rl,Ll].indexOf(u)!==-1||[Ll,xh].indexOf(o)!==-1&&u===Ll||$w.indexOf(o)!==-1&&[Nw,Da].indexOf(u)!==-1||$w.indexOf(u)!==-1&&o===$a||tr.indexOf(o)!==-1&&tr.indexOf(u)!==-1||o===qn&&tr.indexOf(u)!==-1||tr.concat(Mt).indexOf(o)!==-1&&u===Fa&&kI.indexOf(t[i])===-1||tr.concat(Mt).indexOf(u)!==-1&&o===Ua)return ce;if(o===xd&&u===xd){for(var h=A[s],f=1;h>0&&(h--,e[h]===xd);)f++;if(f%2!==0)return ce}return o===Do&&u===$o?ce:Mo},NI=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=PI(t,e.lineBreak),r=A[0],n=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(i){return[Mt,vn,$0].indexOf(i)!==-1?ji:i}));var a=e.wordBreak==="keep-all"?s.map(function(i,o){return i&&t[o]>=19968&&t[o]<=40959}):void 0;return[r,n,a]},DI=function(){function t(e,A,r,n){this.codePoints=e,this.required=A===M0,this.start=r,this.end=n}return t.prototype.slice=function(){return Pe.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),$I=function(t,e){var A=yc(t),r=NI(A,e),n=r[0],s=r[1],a=r[2],i=A.length,o=0,l=0;return{next:function(){if(l>=i)return{done:!0,value:null};for(var u=ce;l<i&&(u=HI(A,s,n,++l,a))===ce;);if(u!==ce||l===i){var c=new DI(A,u,o,l);return o=l,{value:c,done:!1}}return{done:!0,value:null}}}},MI=1,jI=2,so=4,jw=8,yu=10,Kw=47,di=92,KI=9,GI=32,jo=34,Ia=61,VI=35,zI=36,WI=37,Ko=39,Go=40,Sa=41,JI=95,Tt=45,ZI=33,XI=60,YI=62,qI=64,eS=91,tS=93,AS=61,rS=123,Vo=63,nS=125,Gw=124,sS=126,aS=128,Vw=65533,Od=42,Un=43,iS=44,oS=58,lS=59,Ki=46,uS=0,cS=8,dS=11,fS=14,hS=31,pS=127,HA=-1,K0=48,G0=97,V0=101,mS=102,gS=117,wS=122,z0=65,W0=69,J0=70,yS=85,BS=90,mt=function(t){return t>=K0&&t<=57},_S=function(t){return t>=55296&&t<=57343},ts=function(t){return mt(t)||t>=z0&&t<=J0||t>=G0&&t<=mS},vS=function(t){return t>=G0&&t<=wS},CS=function(t){return t>=z0&&t<=BS},bS=function(t){return vS(t)||CS(t)},ES=function(t){return t>=aS},zo=function(t){return t===yu||t===KI||t===GI},Bu=function(t){return bS(t)||ES(t)||t===JI},zw=function(t){return Bu(t)||mt(t)||t===Tt},QS=function(t){return t>=uS&&t<=cS||t===dS||t>=fS&&t<=hS||t===pS},Tr=function(t,e){return t!==di?!1:e!==yu},Wo=function(t,e,A){return t===Tt?Bu(e)||Tr(e,A):Bu(t)?!0:!!(t===di&&Tr(t,e))},kd=function(t,e,A){return t===Un||t===Tt?mt(e)?!0:e===Ki&&mt(A):mt(t===Ki?e:t)},US=function(t){var e=0,A=1;(t[e]===Un||t[e]===Tt)&&(t[e]===Tt&&(A=-1),e++);for(var r=[];mt(t[e]);)r.push(t[e++]);var n=r.length?parseInt(Pe.apply(void 0,r),10):0;t[e]===Ki&&e++;for(var s=[];mt(t[e]);)s.push(t[e++]);var a=s.length,i=a?parseInt(Pe.apply(void 0,s),10):0;(t[e]===W0||t[e]===V0)&&e++;var o=1;(t[e]===Un||t[e]===Tt)&&(t[e]===Tt&&(o=-1),e++);for(var l=[];mt(t[e]);)l.push(t[e++]);var u=l.length?parseInt(Pe.apply(void 0,l),10):0;return A*(n+i*Math.pow(10,-a))*Math.pow(10,o*u)},FS={type:2},IS={type:3},SS={type:4},xS={type:13},TS={type:8},OS={type:21},kS={type:9},RS={type:10},LS={type:11},PS={type:12},HS={type:14},Jo={type:23},NS={type:1},DS={type:25},$S={type:24},MS={type:26},jS={type:27},KS={type:28},GS={type:29},VS={type:31},Lh={type:32},Z0=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(yc(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Lh;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case jo:return this.consumeStringToken(jo);case VI:var A=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(zw(A)||Tr(r,n)){var s=Wo(A,r,n)?jI:MI,a=this.consumeName();return{type:5,value:a,flags:s}}break;case zI:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),xS;break;case Ko:return this.consumeStringToken(Ko);case Go:return FS;case Sa:return IS;case Od:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),HS;break;case Un:if(kd(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case iS:return SS;case Tt:var i=e,o=this.peekCodePoint(0),l=this.peekCodePoint(1);if(kd(i,o,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Wo(i,o,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===Tt&&l===YI)return this.consumeCodePoint(),this.consumeCodePoint(),$S;break;case Ki:if(kd(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Kw:if(this.peekCodePoint(0)===Od)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Od&&(u=this.consumeCodePoint(),u===Kw))return this.consumeToken();if(u===HA)return this.consumeToken()}break;case oS:return MS;case lS:return jS;case XI:if(this.peekCodePoint(0)===ZI&&this.peekCodePoint(1)===Tt&&this.peekCodePoint(2)===Tt)return this.consumeCodePoint(),this.consumeCodePoint(),DS;break;case qI:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Wo(c,d,h)){var a=this.consumeName();return{type:7,value:a}}break;case eS:return KS;case di:if(Tr(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case tS:return GS;case AS:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),TS;break;case rS:return LS;case nS:return PS;case gS:case yS:var f=this.peekCodePoint(0),w=this.peekCodePoint(1);return f===Un&&(ts(w)||w===Vo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Gw:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),kS;if(this.peekCodePoint(0)===Gw)return this.consumeCodePoint(),OS;break;case sS:if(this.peekCodePoint(0)===Ia)return this.consumeCodePoint(),RS;break;case HA:return Lh}return zo(e)?(this.consumeWhiteSpace(),VS):mt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Bu(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Pe(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();ts(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var r=!1;A===Vo&&e.length<6;)e.push(A),A=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(Pe.apply(void 0,e.map(function(o){return o===Vo?K0:o})),16),s=parseInt(Pe.apply(void 0,e.map(function(o){return o===Vo?J0:o})),16);return{type:30,start:n,end:s}}var a=parseInt(Pe.apply(void 0,e),16);if(this.peekCodePoint(0)===Tt&&ts(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var i=[];ts(A)&&i.length<6;)i.push(A),A=this.consumeCodePoint();var s=parseInt(Pe.apply(void 0,i),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Go?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Go?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===HA)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===Ko||A===jo){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===HA||this.peekCodePoint(0)===Sa)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Jo)}for(;;){var n=this.consumeCodePoint();if(n===HA||n===Sa)return{type:22,value:Pe.apply(void 0,e)};if(zo(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===HA||this.peekCodePoint(0)===Sa?(this.consumeCodePoint(),{type:22,value:Pe.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Jo);if(n===jo||n===Ko||n===Go||QS(n))return this.consumeBadUrlRemnants(),Jo;if(n===di)if(Tr(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Jo;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;zo(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Sa||e===HA)return;Tr(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,r="";e>0;){var n=Math.min(A,e);r+=Pe.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var A="",r=0;do{var n=this._value[r];if(n===HA||n===void 0||n===e)return A+=this.consumeStringSlice(r),{type:0,value:A};if(n===yu)return this._value.splice(0,r),NS;if(n===di){var s=this._value[r+1];s!==HA&&s!==void 0&&(s===yu?(A+=this.consumeStringSlice(r),r=-1,this._value.shift()):Tr(n,s)&&(A+=this.consumeStringSlice(r),A+=Pe(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=so,r=this.peekCodePoint(0);for((r===Un||r===Tt)&&e.push(this.consumeCodePoint());mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===Ki&&mt(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=jw;mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===W0||r===V0)&&((n===Un||n===Tt)&&mt(s)||mt(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=jw;mt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[US(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],r=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Wo(n,s,a)){var i=this.consumeName();return{type:15,number:A,flags:r,unit:i}}return n===WI?(this.consumeCodePoint(),{type:16,number:A,flags:r}):{type:17,number:A,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ts(e)){for(var A=Pe(e);ts(this.peekCodePoint(0))&&A.length<6;)A+=Pe(this.consumeCodePoint());zo(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(A,16);return r===0||_S(r)||r>1114111?Vw:r}return e===HA?Vw:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(zw(A))e+=Pe(A);else if(Tr(A,this.peekCodePoint(0)))e+=Pe(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),X0=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new Z0;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||WS(r,e))return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Lh:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ao=function(t){return t.type===15},aa=function(t){return t.type===17},Ce=function(t){return t.type===20},zS=function(t){return t.type===0},Ph=function(t,e){return Ce(t)&&t.value===e},Y0=function(t){return t.type!==31},Ws=function(t){return t.type!==31&&t.type!==4},YA=function(t){var e=[],A=[];return t.forEach(function(r){if(r.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}r.type!==31&&A.push(r)}),A.length&&e.push(A),e},WS=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},an=function(t){return t.type===17||t.type===15},$e=function(t){return t.type===16||an(t)},q0=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},lt={type:17,number:0,flags:so},Em={type:16,number:50,flags:so},$r={type:16,number:100,flags:so},Ma=function(t,e,A){var r=t[0],n=t[1];return[Qe(r,e),Qe(typeof n<"u"?n:r,A)]},Qe=function(t,e){if(t.type===16)return t.number/100*e;if(ao(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},eC="deg",tC="grad",AC="rad",rC="turn",Bc={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case eC:return Math.PI*e.number/180;case tC:return Math.PI/200*e.number;case AC:return e.number;case rC:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},nC=function(t){return t.type===15&&(t.unit===eC||t.unit===tC||t.unit===AC||t.unit===rC)},sC=function(t){var e=t.filter(Ce).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[lt,lt];case"to top":case"bottom":return cA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[lt,$r];case"to right":case"left":return cA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$r,$r];case"to bottom":case"top":return cA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$r,lt];case"to left":case"right":return cA(270)}return 0},cA=function(t){return Math.PI*t/180},en={name:"color",parse:function(t,e){if(e.type===18){var A=JS[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3);return Mr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return Mr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6);return Mr(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return Mr(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var i=cr[e.value.toUpperCase()];if(typeof i<"u")return i}return cr.TRANSPARENT}},tn=function(t){return(255&t)===0},Ye=function(t){var e=255&t,A=255&t>>8,r=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+r+","+A+","+e/255+")":"rgb("+n+","+r+","+A+")"},Mr=function(t,e,A,r){return(t<<24|e<<16|A<<8|Math.round(r*255)<<0)>>>0},Ww=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},Jw=function(t,e){var A=e.filter(Ws);if(A.length===3){var r=A.map(Ww),n=r[0],s=r[1],a=r[2];return Mr(n,s,a,1)}if(A.length===4){var i=A.map(Ww),n=i[0],s=i[1],a=i[2],o=i[3];return Mr(n,s,a,o)}return 0};function Rd(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var Zw=function(t,e){var A=e.filter(Ws),r=A[0],n=A[1],s=A[2],a=A[3],i=(r.type===17?cA(r.number):Bc.parse(t,r))/(Math.PI*2),o=$e(n)?n.number/100:0,l=$e(s)?s.number/100:0,u=typeof a<"u"&&$e(a)?Qe(a,1):1;if(o===0)return Mr(l*255,l*255,l*255,1);var c=l<=.5?l*(o+1):l+o-l*o,d=l*2-c,h=Rd(d,c,i+1/3),f=Rd(d,c,i),w=Rd(d,c,i-1/3);return Mr(h*255,f*255,w*255,u)},JS={hsl:Zw,hsla:Zw,rgb:Jw,rgba:Jw},fi=function(t,e){return en.parse(t,X0.create(e).parseComponentValue())},cr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ZS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(Ce(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},XS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_c=function(t,e){var A=en.parse(t,e[0]),r=e[1];return r&&$e(r)?{color:A,stop:r}:{color:A,stop:null}},Xw=function(t,e){var A=t[0],r=t[t.length-1];A.stop===null&&(A.stop=lt),r.stop===null&&(r.stop=$r);for(var n=[],s=0,a=0;a<t.length;a++){var i=t[a].stop;if(i!==null){var o=Qe(i,e);o>s?n.push(o):n.push(s),s=o}else n.push(null)}for(var l=null,a=0;a<n.length;a++){var u=n[a];if(u===null)l===null&&(l=a);else if(l!==null){for(var c=a-l,d=n[l-1],h=(u-d)/(c+1),f=1;f<=c;f++)n[l+f-1]=h*f;l=null}}return t.map(function(w,y){var p=w.color;return{color:p,stop:Math.max(Math.min(1,n[y]/e),0)}})},YS=function(t,e,A){var r=e/2,n=A/2,s=Qe(t[0],e)-r,a=n-Qe(t[1],A);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},qS=function(t,e,A){var r=typeof t=="number"?t:YS(t,e,A),n=Math.abs(e*Math.sin(r))+Math.abs(A*Math.cos(r)),s=e/2,a=A/2,i=n/2,o=Math.sin(r-Math.PI/2)*i,l=Math.cos(r-Math.PI/2)*i;return[n,s-l,s+l,a-o,a+o]},bA=function(t,e){return Math.sqrt(t*t+e*e)},Yw=function(t,e,A,r,n){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(a,i){var o=i[0],l=i[1],u=bA(A-o,r-l);return(n?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:i,optimumDistance:u}:a},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},ex=function(t,e,A,r,n){var s=0,a=0;switch(t.size){case 0:t.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(A),Math.abs(A-n)));break;case 2:if(t.shape===0)s=a=Math.min(bA(e,A),bA(e,A-n),bA(e-r,A),bA(e-r,A-n));else if(t.shape===1){var i=Math.min(Math.abs(A),Math.abs(A-n))/Math.min(Math.abs(e),Math.abs(e-r)),o=Yw(r,n,e,A,!0),l=o[0],u=o[1];s=bA(l-e,(u-A)/i),a=i*s}break;case 1:t.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(A),Math.abs(A-n)));break;case 3:if(t.shape===0)s=a=Math.max(bA(e,A),bA(e,A-n),bA(e-r,A),bA(e-r,A-n));else if(t.shape===1){var i=Math.max(Math.abs(A),Math.abs(A-n))/Math.max(Math.abs(e),Math.abs(e-r)),c=Yw(r,n,e,A,!1),l=c[0],u=c[1];s=bA(l-e,(u-A)/i),a=i*s}break}return Array.isArray(t.size)&&(s=Qe(t.size[0],r),a=t.size.length===2?Qe(t.size[1],n):s),[s,a]},tx=function(t,e){var A=cA(180),r=[];return YA(e).forEach(function(n,s){if(s===0){var a=n[0];if(a.type===20&&a.value==="to"){A=sC(n);return}else if(nC(a)){A=Bc.parse(t,a);return}}var i=_c(t,n);r.push(i)}),{angle:A,stops:r,type:1}},Zo=function(t,e){var A=cA(180),r=[];return YA(e).forEach(function(n,s){if(s===0){var a=n[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){A=sC(n);return}else if(nC(a)){A=(Bc.parse(t,a)+cA(270))%cA(360);return}}var i=_c(t,n);r.push(i)}),{angle:A,stops:r,type:1}},Ax=function(t,e){var A=cA(180),r=[],n=1,s=0,a=3,i=[];return YA(e).forEach(function(o,l){var u=o[0];if(l===0){if(Ce(u)&&u.value==="linear"){n=1;return}else if(Ce(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var c=en.parse(t,u.values[0]);r.push({stop:lt,color:c})}else if(u.name==="to"){var c=en.parse(t,u.values[0]);r.push({stop:$r,color:c})}else if(u.name==="color-stop"){var d=u.values.filter(Ws);if(d.length===2){var c=en.parse(t,d[1]),h=d[0];aa(h)&&r.push({stop:{type:16,number:h.number*100,flags:h.flags},color:c})}}}}),n===1?{angle:(A+cA(180))%cA(360),stops:r,type:n}:{size:a,shape:s,stops:r,position:i,type:n}},aC="closest-side",iC="farthest-side",oC="closest-corner",lC="farthest-corner",uC="circle",cC="ellipse",dC="cover",fC="contain",rx=function(t,e){var A=0,r=3,n=[],s=[];return YA(e).forEach(function(a,i){var o=!0;if(i===0){var l=!1;o=a.reduce(function(c,d){if(l)if(Ce(d))switch(d.value){case"center":return s.push(Em),c;case"top":case"left":return s.push(lt),c;case"right":case"bottom":return s.push($r),c}else($e(d)||an(d))&&s.push(d);else if(Ce(d))switch(d.value){case uC:return A=0,!1;case cC:return A=1,!1;case"at":return l=!0,!1;case aC:return r=0,!1;case dC:case iC:return r=1,!1;case fC:case oC:return r=2,!1;case lC:return r=3,!1}else if(an(d)||$e(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return c},o)}if(o){var u=_c(t,a);n.push(u)}}),{size:r,shape:A,stops:n,position:s,type:2}},Xo=function(t,e){var A=0,r=3,n=[],s=[];return YA(e).forEach(function(a,i){var o=!0;if(i===0?o=a.reduce(function(u,c){if(Ce(c))switch(c.value){case"center":return s.push(Em),!1;case"top":case"left":return s.push(lt),!1;case"right":case"bottom":return s.push($r),!1}else if($e(c)||an(c))return s.push(c),!1;return u},o):i===1&&(o=a.reduce(function(u,c){if(Ce(c))switch(c.value){case uC:return A=0,!1;case cC:return A=1,!1;case fC:case aC:return r=0,!1;case iC:return r=1,!1;case oC:return r=2,!1;case dC:case lC:return r=3,!1}else if(an(c)||$e(c))return Array.isArray(r)||(r=[]),r.push(c),!1;return u},o)),o){var l=_c(t,a);n.push(l)}}),{size:r,shape:A,stops:n,position:s,type:2}},nx=function(t){return t.type===1},sx=function(t){return t.type===2},Qm={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var r=hC[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function ax(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!hC[t.name])}var hC={"linear-gradient":tx,"-moz-linear-gradient":Zo,"-ms-linear-gradient":Zo,"-o-linear-gradient":Zo,"-webkit-linear-gradient":Zo,"radial-gradient":rx,"-moz-radial-gradient":Xo,"-ms-radial-gradient":Xo,"-o-radial-gradient":Xo,"-webkit-radial-gradient":Xo,"-webkit-gradient":Ax},ix={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(r){return Ws(r)&&ax(r)}).map(function(r){return Qm.parse(t,r)})}},ox={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(Ce(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},lx={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return YA(e).map(function(A){return A.filter($e)}).map(q0)}},ux={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return YA(e).map(function(A){return A.filter(Ce).map(function(r){return r.value}).join(" ")}).map(cx)}},cx=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ds;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Ds||(Ds={}));var dx={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return YA(e).map(function(A){return A.filter(fx)})}},fx=function(t){return Ce(t)||$e(t)},vc=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},hx=vc("top"),px=vc("right"),mx=vc("bottom"),gx=vc("left"),Cc=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return q0(A.filter($e))}}},wx=Cc("top-left"),yx=Cc("top-right"),Bx=Cc("bottom-right"),_x=Cc("bottom-left"),bc=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},vx=bc("top"),Cx=bc("right"),bx=bc("bottom"),Ex=bc("left"),Ec=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ao(A)?A.number:0}}},Qx=Ec("top"),Ux=Ec("right"),Fx=Ec("bottom"),Ix=Ec("left"),Sx={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xx={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Tx={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ce).reduce(function(A,r){return A|Ox(r.value)},0)}},Ox=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},kx={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Rx={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},_u;(function(t){t.NORMAL="normal",t.STRICT="strict"})(_u||(_u={}));var Lx={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return _u.STRICT;case"normal":default:return _u.NORMAL}}},Px={name:"line-height",initialValue:"normal",prefix:!1,type:4},qw=function(t,e){return Ce(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:$e(t)?Qe(t,e):e},Hx={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Qm.parse(t,e)}},Nx={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Hh={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Qc=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Dx=Qc("top"),$x=Qc("right"),Mx=Qc("bottom"),jx=Qc("left"),Kx={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ce).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Gx={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Uc=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Vx=Uc("top"),zx=Uc("right"),Wx=Uc("bottom"),Jx=Uc("left"),Zx={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Xx={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Yx={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ph(e[0],"none")?[]:YA(e).map(function(A){for(var r={color:cr.TRANSPARENT,offsetX:lt,offsetY:lt,blur:lt},n=0,s=0;s<A.length;s++){var a=A[s];an(a)?(n===0?r.offsetX=a:n===1?r.offsetY=a:r.blur=a,n++):r.color=en.parse(t,a)}return r})}},qx={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},e1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=r1[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},t1=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},A1=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),A=e[0],r=e[1];e[2],e[3];var n=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],i=e[13];return e[14],e[15],e.length===16?[A,r,n,s,a,i]:null},r1={matrix:t1,matrix3d:A1},ey={type:16,number:50,flags:so},n1=[ey,ey],s1={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter($e);return A.length!==2?n1:[A[0],A[1]]}},a1={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},hi;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(hi||(hi={}));var i1={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return hi.BREAK_ALL;case"keep-all":return hi.KEEP_ALL;case"normal":default:return hi.NORMAL}}},o1={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(aa(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},pC={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},l1={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return aa(e)?e.number:1}},u1={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},c1={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ce).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},d1={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:A.push(n.value);break;case 17:A.push(n.number.toString());break;case 4:r.push(A.join(" ")),A.length=0;break}}),A.length&&r.push(A.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},f1={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},h1={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(aa(e))return e.number;if(Ce(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},p1={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ce).map(function(A){return A.value})}},m1={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},We=function(t,e){return(t&e)!==0},g1={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e}},w1={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;for(var r=[],n=e.filter(Y0),s=0;s<n.length;s++){var a=n[s],i=n[s+1];if(a.type===20){var o=i&&aa(i)?i.number:1;r.push({counter:a.value,increment:o})}}return r}},y1={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var A=[],r=e.filter(Y0),n=0;n<r.length;n++){var s=r[n],a=r[n+1];if(Ce(s)&&s.value!=="none"){var i=a&&aa(a)?a.number:0;A.push({counter:s.value,reset:i})}}return A}},B1={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ao).map(function(A){return pC.parse(t,A)})}},_1={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;var r=[],n=e.filter(zS);if(n.length%2!==0)return null;for(var s=0;s<n.length;s+=2){var a=n[s].value,i=n[s+1].value;r.push({open:a,close:i})}return r}},ty=function(t,e,A){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?A?r.open:r.close:""},v1={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ph(e[0],"none")?[]:YA(e).map(function(A){for(var r={color:255,offsetX:lt,offsetY:lt,blur:lt,spread:lt,inset:!1},n=0,s=0;s<A.length;s++){var a=A[s];Ph(a,"inset")?r.inset=!0:an(a)?(n===0?r.offsetX=a:n===1?r.offsetY=a:n===2?r.blur=a:r.spread=a,n++):r.color=en.parse(t,a)}return r})}},C1={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],r=[];return e.filter(Ce).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),A.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},b1={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},E1={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ao(e)?e.number:0}},Q1=function(){function t(e,A){var r,n;this.animationDuration=V(e,B1,A.animationDuration),this.backgroundClip=V(e,ZS,A.backgroundClip),this.backgroundColor=V(e,XS,A.backgroundColor),this.backgroundImage=V(e,ix,A.backgroundImage),this.backgroundOrigin=V(e,ox,A.backgroundOrigin),this.backgroundPosition=V(e,lx,A.backgroundPosition),this.backgroundRepeat=V(e,ux,A.backgroundRepeat),this.backgroundSize=V(e,dx,A.backgroundSize),this.borderTopColor=V(e,hx,A.borderTopColor),this.borderRightColor=V(e,px,A.borderRightColor),this.borderBottomColor=V(e,mx,A.borderBottomColor),this.borderLeftColor=V(e,gx,A.borderLeftColor),this.borderTopLeftRadius=V(e,wx,A.borderTopLeftRadius),this.borderTopRightRadius=V(e,yx,A.borderTopRightRadius),this.borderBottomRightRadius=V(e,Bx,A.borderBottomRightRadius),this.borderBottomLeftRadius=V(e,_x,A.borderBottomLeftRadius),this.borderTopStyle=V(e,vx,A.borderTopStyle),this.borderRightStyle=V(e,Cx,A.borderRightStyle),this.borderBottomStyle=V(e,bx,A.borderBottomStyle),this.borderLeftStyle=V(e,Ex,A.borderLeftStyle),this.borderTopWidth=V(e,Qx,A.borderTopWidth),this.borderRightWidth=V(e,Ux,A.borderRightWidth),this.borderBottomWidth=V(e,Fx,A.borderBottomWidth),this.borderLeftWidth=V(e,Ix,A.borderLeftWidth),this.boxShadow=V(e,v1,A.boxShadow),this.color=V(e,Sx,A.color),this.direction=V(e,xx,A.direction),this.display=V(e,Tx,A.display),this.float=V(e,kx,A.cssFloat),this.fontFamily=V(e,d1,A.fontFamily),this.fontSize=V(e,f1,A.fontSize),this.fontStyle=V(e,m1,A.fontStyle),this.fontVariant=V(e,p1,A.fontVariant),this.fontWeight=V(e,h1,A.fontWeight),this.letterSpacing=V(e,Rx,A.letterSpacing),this.lineBreak=V(e,Lx,A.lineBreak),this.lineHeight=V(e,Px,A.lineHeight),this.listStyleImage=V(e,Hx,A.listStyleImage),this.listStylePosition=V(e,Nx,A.listStylePosition),this.listStyleType=V(e,Hh,A.listStyleType),this.marginTop=V(e,Dx,A.marginTop),this.marginRight=V(e,$x,A.marginRight),this.marginBottom=V(e,Mx,A.marginBottom),this.marginLeft=V(e,jx,A.marginLeft),this.opacity=V(e,l1,A.opacity);var s=V(e,Kx,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=V(e,Gx,A.overflowWrap),this.paddingTop=V(e,Vx,A.paddingTop),this.paddingRight=V(e,zx,A.paddingRight),this.paddingBottom=V(e,Wx,A.paddingBottom),this.paddingLeft=V(e,Jx,A.paddingLeft),this.paintOrder=V(e,C1,A.paintOrder),this.position=V(e,Xx,A.position),this.textAlign=V(e,Zx,A.textAlign),this.textDecorationColor=V(e,u1,(r=A.textDecorationColor)!==null&&r!==void 0?r:A.color),this.textDecorationLine=V(e,c1,(n=A.textDecorationLine)!==null&&n!==void 0?n:A.textDecoration),this.textShadow=V(e,Yx,A.textShadow),this.textTransform=V(e,qx,A.textTransform),this.transform=V(e,e1,A.transform),this.transformOrigin=V(e,s1,A.transformOrigin),this.visibility=V(e,a1,A.visibility),this.webkitTextStrokeColor=V(e,b1,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=V(e,E1,A.webkitTextStrokeWidth),this.wordBreak=V(e,i1,A.wordBreak),this.zIndex=V(e,o1,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return tn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return We(this.display,4)||We(this.display,33554432)||We(this.display,268435456)||We(this.display,536870912)||We(this.display,67108864)||We(this.display,134217728)},t}(),U1=function(){function t(e,A){this.content=V(e,g1,A.content),this.quotes=V(e,_1,A.quotes)}return t}(),Ay=function(){function t(e,A){this.counterIncrement=V(e,w1,A.counterIncrement),this.counterReset=V(e,y1,A.counterReset)}return t}(),V=function(t,e,A){var r=new Z0,n=A!==null&&typeof A<"u"?A.toString():e.initialValue;r.write(n);var s=new X0(r.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(t,Ce(a)?a.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Bc.parse(t,s.parseComponentValue());case"color":return en.parse(t,s.parseComponentValue());case"image":return Qm.parse(t,s.parseComponentValue());case"length":var i=s.parseComponentValue();return an(i)?i:lt;case"length-percentage":var o=s.parseComponentValue();return $e(o)?o:lt;case"time":return pC.parse(t,s.parseComponentValue())}break}},F1="data-html2canvas-debug",I1=function(t){var e=t.getAttribute(F1);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Nh=function(t,e){var A=I1(t);return A===1||e===A},qA=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Nh(A,3))debugger;this.styles=new Q1(e,window.getComputedStyle(A,null)),Mh(A)&&(this.styles.animationDuration.some(function(r){return r>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=wc(this.context,A),Nh(A,4)&&(this.flags|=16)}return t}(),S1="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ry="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ja=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yo=0;Yo<ry.length;Yo++)ja[ry.charCodeAt(Yo)]=Yo;var x1=function(t){var e=t.length*.75,A=t.length,r,n=0,s,a,i,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<A;r+=4)s=ja[t.charCodeAt(r)],a=ja[t.charCodeAt(r+1)],i=ja[t.charCodeAt(r+2)],o=ja[t.charCodeAt(r+3)],u[n++]=s<<2|a>>4,u[n++]=(a&15)<<4|i>>2,u[n++]=(i&3)<<6|o&63;return l},T1=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},O1=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},Rn=5,Um=11,Ld=2,k1=Um-Rn,mC=65536>>Rn,R1=1<<Rn,Pd=R1-1,L1=1024>>Rn,P1=mC+L1,H1=P1,N1=32,D1=H1+N1,$1=65536>>Um,M1=1<<k1,j1=M1-1,ny=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},K1=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},G1=function(t,e){var A=x1(t),r=Array.isArray(A)?O1(A):new Uint32Array(A),n=Array.isArray(A)?T1(A):new Uint16Array(A),s=24,a=ny(n,s/2,r[4]/2),i=r[5]===2?ny(n,(s+r[4])/2):K1(r,Math.ceil((s+r[4])/4));return new V1(r[0],r[1],r[2],r[3],a,i)},V1=function(){function t(e,A,r,n,s,a){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=a}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>Rn],A=(A<<Ld)+(e&Pd),this.data[A];if(e<=65535)return A=this.index[mC+(e-55296>>Rn)],A=(A<<Ld)+(e&Pd),this.data[A];if(e<this.highStart)return A=D1-$1+(e>>Um),A=this.index[A],A+=e>>Rn&j1,A=this.index[A],A=(A<<Ld)+(e&Pd),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qo=0;qo<sy.length;qo++)z1[sy.charCodeAt(qo)]=qo;var W1=1,Hd=2,Nd=3,ay=4,iy=5,J1=7,oy=8,Dd=9,$d=10,ly=11,uy=12,cy=13,dy=14,Md=15,Z1=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},X1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var a=t[n];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Y1=G1(S1),sA="×",jd="÷",q1=function(t){return Y1.get(t)},eT=function(t,e,A){var r=A-2,n=e[r],s=e[A-1],a=e[A];if(s===Hd&&a===Nd)return sA;if(s===Hd||s===Nd||s===ay||a===Hd||a===Nd||a===ay)return jd;if(s===oy&&[oy,Dd,ly,uy].indexOf(a)!==-1||(s===ly||s===Dd)&&(a===Dd||a===$d)||(s===uy||s===$d)&&a===$d||a===cy||a===iy||a===J1||s===W1)return sA;if(s===cy&&a===dy){for(;n===iy;)n=e[--r];if(n===dy)return sA}if(s===Md&&a===Md){for(var i=0;n===Md;)i++,n=e[--r];if(i%2===0)return sA}return jd},tT=function(t){var e=Z1(t),A=e.length,r=0,n=0,s=e.map(q1);return{next:function(){if(r>=A)return{done:!0,value:null};for(var a=sA;r<A&&(a=eT(e,s,++r))===sA;);if(a!==sA||r===A){var i=X1.apply(null,e.slice(n,r));return n=r,{value:i,done:!1}}return{done:!0,value:null}}}},AT=function(t){for(var e=tT(t),A=[],r;!(r=e.next()).done;)r.value&&A.push(r.value.slice());return A},rT=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),A.selectNode(r);var n=A.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===e)return!0}}return!1},nT=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=yc(r.data).map(function(o){return Pe(o)}),s=0,a={},i=n.every(function(o,l){A.setStart(r,s),A.setEnd(r,s+o.length);var u=A.getBoundingClientRect();s+=o.length;var c=u.x>a.x||u.y>a.y;return a=u,l===0?!0:c});return t.body.removeChild(e),i},sT=function(){return typeof new Image().crossOrigin<"u"},aT=function(){return typeof new XMLHttpRequest().responseType=="string"},iT=function(t){var e=new Image,A=t.createElement("canvas"),r=A.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},fy=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},oT=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,A,A);var n=new Image,s=e.toDataURL();n.src=s;var a=Dh(A,A,0,0,n);return r.fillStyle="red",r.fillRect(0,0,A,A),hy(a).then(function(i){r.drawImage(i,0,0);var o=r.getImageData(0,0,A,A).data;r.fillStyle="red",r.fillRect(0,0,A,A);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=A+"px",fy(o)?hy(Dh(A,A,0,0,l)):Promise.reject(!1)}).then(function(i){return r.drawImage(i,0,0),fy(r.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Dh=function(t,e,A,r,n){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),i=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",A.toString()),i.setAttributeNS(null,"y",r.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(i),i.appendChild(n),a},hy=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){return e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ot={get SUPPORT_RANGE_BOUNDS(){var t=rT(document);return Object.defineProperty(ot,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ot.SUPPORT_RANGE_BOUNDS&&nT(document);return Object.defineProperty(ot,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=iT(document);return Object.defineProperty(ot,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?oT(document):Promise.resolve(!1);return Object.defineProperty(ot,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=sT();return Object.defineProperty(ot,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=aT();return Object.defineProperty(ot,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ot,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ot,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},pi=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),lT=function(t,e,A,r){var n=dT(e,A),s=[],a=0;return n.forEach(function(i){if(A.textDecorationLine.length||i.trim().length>0)if(ot.SUPPORT_RANGE_BOUNDS){var o=py(r,a,i.length).getClientRects();if(o.length>1){var l=Fm(i),u=0;l.forEach(function(d){s.push(new pi(d,gr.fromDOMRectList(t,py(r,u+a,d.length).getClientRects()))),u+=d.length})}else s.push(new pi(i,gr.fromDOMRectList(t,o)))}else{var c=r.splitText(i.length);s.push(new pi(i,uT(t,r))),r=c}else ot.SUPPORT_RANGE_BOUNDS||(r=r.splitText(i.length));a+=i.length}),s},uT=function(t,e){var A=e.ownerDocument;if(A){var r=A.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var s=wc(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return gr.EMPTY},py=function(t,e,A){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,e),n.setEnd(t,e+A),n},Fm=function(t){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return AT(t)},cT=function(t,e){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(r){return r.segment})}return hT(t,e)},dT=function(t,e){return e.letterSpacing!==0?Fm(t):cT(t,e)},fT=[32,160,4961,65792,65793,4153,4241],hT=function(t,e){for(var A=$I(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,s=function(){if(n.value){var a=n.value.slice(),i=yc(a),o="";i.forEach(function(l){fT.indexOf(l)===-1?o+=Pe(l):(o.length&&r.push(o),r.push(Pe(l)),o="")}),o.length&&r.push(o)}};!(n=A.next()).done;)s();return r},pT=function(){function t(e,A,r){this.text=mT(A.data,r.textTransform),this.textBounds=lT(e,this.text,r,A)}return t}(),mT=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(gT,wT);case 2:return t.toUpperCase();default:return t}},gT=/(^|\s|:|-|\(|\))([a-z])/g,wT=function(t,e,A){return t.length>0?e+A.toUpperCase():t},gC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e}(qA),wC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e}(qA),yC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=new XMLSerializer,a=wc(A,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(qA),BC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(qA),$h=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e}(qA),yT=[{type:15,flags:0,unit:"px",number:3}],BT=[{type:16,flags:0,number:50}],_T=function(t){return t.width>t.height?new gr(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new gr(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},vT=function(t){var e=t.type===CT?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},vu="checkbox",Cu="radio",CT="password",my=707406591,Im=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=vT(r),(n.type===vu||n.type===Cu)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=_T(n.bounds)),n.type){case vu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=yT;break;case Cu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=BT;break}return n}return e}(qA),_C=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return e}(qA),vC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(qA),CC=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=EC(A,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?fi(A,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):cr.TRANSPARENT,a=r.contentWindow.document.body?fi(A,getComputedStyle(r.contentWindow.document.body).backgroundColor):cr.TRANSPARENT;n.backgroundColor=tn(s)?tn(a)?n.styles.backgroundColor:a:s}}catch{}return n}return e}(qA),bT=["OL","UL","MENU"],Pl=function(t,e,A,r){for(var n=e.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,QC(n)&&n.data.trim().length>0)A.textNodes.push(new pT(t,n,A.styles));else if(Ss(n))if(SC(n)&&n.assignedNodes)n.assignedNodes().forEach(function(i){return Pl(t,i,A,r)});else{var a=bC(t,n);a.styles.isVisible()&&(ET(n,a,r)?a.flags|=4:QT(a.styles)&&(a.flags|=2),bT.indexOf(n.tagName)!==-1&&(a.flags|=8),A.elements.push(a),n.slot,n.shadowRoot?Pl(t,n.shadowRoot,a,r):!bu(n)&&!UC(n)&&!Eu(n)&&Pl(t,n,a,r))}},bC=function(t,e){return jh(e)?new gC(t,e):FC(e)?new wC(t,e):UC(e)?new yC(t,e):UT(e)?new BC(t,e):FT(e)?new $h(t,e):IT(e)?new Im(t,e):Eu(e)?new _C(t,e):bu(e)?new vC(t,e):IC(e)?new CC(t,e):new qA(t,e)},EC=function(t,e){var A=bC(t,e);return A.flags|=4,Pl(t,e,A,A),A},ET=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Sm(t)&&A.styles.isTransparent()},QT=function(t){return t.isPositioned()||t.isFloating()},QC=function(t){return t.nodeType===Node.TEXT_NODE},Ss=function(t){return t.nodeType===Node.ELEMENT_NODE},Mh=function(t){return Ss(t)&&typeof t.style<"u"&&!Hl(t)},Hl=function(t){return typeof t.className=="object"},UT=function(t){return t.tagName==="LI"},FT=function(t){return t.tagName==="OL"},IT=function(t){return t.tagName==="INPUT"},ST=function(t){return t.tagName==="HTML"},UC=function(t){return t.tagName==="svg"},Sm=function(t){return t.tagName==="BODY"},FC=function(t){return t.tagName==="CANVAS"},gy=function(t){return t.tagName==="VIDEO"},jh=function(t){return t.tagName==="IMG"},IC=function(t){return t.tagName==="IFRAME"},wy=function(t){return t.tagName==="STYLE"},xT=function(t){return t.tagName==="SCRIPT"},bu=function(t){return t.tagName==="TEXTAREA"},Eu=function(t){return t.tagName==="SELECT"},SC=function(t){return t.tagName==="SLOT"},yy=function(t){return t.tagName.indexOf("-")>0},TT=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},t.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},t.prototype.pop=function(e){var A=this;e.forEach(function(r){return A.counters[r].pop()})},t.prototype.parse=function(e){var A=this,r=e.counterIncrement,n=e.counterReset,s=!0;r!==null&&r.forEach(function(i){var o=A.counters[i.counter];o&&i.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=i.increment)});var a=[];return s&&n.forEach(function(i){var o=A.counters[i.counter];a.push(i.counter),o||(o=A.counters[i.counter]=[]),o.push(i.reset)}),a},t}(),By={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},_y={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},OT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},kT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},As=function(t,e,A,r,n,s){return t<e||t>A?Gi(t,n,s.length>0):r.integers.reduce(function(a,i,o){for(;t>=i;)t-=i,a+=r.values[o];return a},"")+s},xC=function(t,e,A,r){var n="";do A||t--,n=r(t)+n,t/=e;while(t*e>=e);return n},Le=function(t,e,A,r,n){var s=A-e+1;return(t<0?"-":"")+(xC(Math.abs(t),s,r,function(a){return Pe(Math.floor(a%s)+e)})+n)},gn=function(t,e,A){A===void 0&&(A=". ");var r=e.length;return xC(Math.abs(t),r,!1,function(n){return e[Math.floor(n%r)]})+A},ds=1,Fr=2,Ir=4,Ka=8,Ar=function(t,e,A,r,n,s){if(t<-9999||t>9999)return Gi(t,4,n.length>0);var a=Math.abs(t),i=n;if(a===0)return e[0]+i;for(var o=0;a>0&&o<=4;o++){var l=a%10;l===0&&We(s,ds)&&i!==""?i=e[l]+i:l>1||l===1&&o===0||l===1&&o===1&&We(s,Fr)||l===1&&o===1&&We(s,Ir)&&t>100||l===1&&o>1&&We(s,Ka)?i=e[l]+(o>0?A[o-1]:"")+i:l===1&&o>0&&(i=A[o-1]+i),a=Math.floor(a/10)}return(t<0?r:"")+i},vy="十百千萬",Cy="拾佰仟萬",by="マイナス",Kd="마이너스",Gi=function(t,e,A){var r=A?". ":"",n=A?"、":"",s=A?", ":"",a=A?" ":"";switch(e){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var i=Le(t,48,57,!0,r);return i.length<4?"0"+i:i;case 4:return gn(t,"〇一二三四五六七八九",n);case 6:return As(t,1,3999,By,3,r).toLowerCase();case 7:return As(t,1,3999,By,3,r);case 8:return Le(t,945,969,!1,r);case 9:return Le(t,97,122,!1,r);case 10:return Le(t,65,90,!1,r);case 11:return Le(t,1632,1641,!0,r);case 12:case 49:return As(t,1,9999,_y,3,r);case 35:return As(t,1,9999,_y,3,r).toLowerCase();case 13:return Le(t,2534,2543,!0,r);case 14:case 30:return Le(t,6112,6121,!0,r);case 15:return gn(t,"子丑寅卯辰巳午未申酉戌亥",n);case 16:return gn(t,"甲乙丙丁戊己庚辛壬癸",n);case 17:case 48:return Ar(t,"零一二三四五六七八九",vy,"負",n,Fr|Ir|Ka);case 47:return Ar(t,"零壹貳參肆伍陸柒捌玖",Cy,"負",n,ds|Fr|Ir|Ka);case 42:return Ar(t,"零一二三四五六七八九",vy,"负",n,Fr|Ir|Ka);case 41:return Ar(t,"零壹贰叁肆伍陆柒捌玖",Cy,"负",n,ds|Fr|Ir|Ka);case 26:return Ar(t,"〇一二三四五六七八九","十百千万",by,n,0);case 25:return Ar(t,"零壱弐参四伍六七八九","拾百千万",by,n,ds|Fr|Ir);case 31:return Ar(t,"영일이삼사오육칠팔구","십백천만",Kd,s,ds|Fr|Ir);case 33:return Ar(t,"零一二三四五六七八九","十百千萬",Kd,s,0);case 32:return Ar(t,"零壹貳參四五六七八九","拾百千",Kd,s,ds|Fr|Ir);case 18:return Le(t,2406,2415,!0,r);case 20:return As(t,1,19999,kT,3,r);case 21:return Le(t,2790,2799,!0,r);case 22:return Le(t,2662,2671,!0,r);case 22:return As(t,1,10999,OT,3,r);case 23:return gn(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return gn(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Le(t,3302,3311,!0,r);case 28:return gn(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",n);case 29:return gn(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",n);case 34:return Le(t,3792,3801,!0,r);case 37:return Le(t,6160,6169,!0,r);case 38:return Le(t,4160,4169,!0,r);case 39:return Le(t,2918,2927,!0,r);case 40:return Le(t,1776,1785,!0,r);case 43:return Le(t,3046,3055,!0,r);case 44:return Le(t,3174,3183,!0,r);case 45:return Le(t,3664,3673,!0,r);case 46:return Le(t,3872,3881,!0,r);case 3:default:return Le(t,48,57,!0,r)}},TC="data-html2canvas-ignore",Ey=function(){function t(e,A,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=A,this.counters=new TT,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,A){var r=this,n=RT(e,A);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,i=n.contentWindow,o=i.document,l=HT(n).then(function(){return Ct(r,void 0,void 0,function(){var u,c;return pt(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(MT),i&&(i.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==A.top||i.scrollX!==A.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-A.left,i.scrollY-A.top,0,0))),u=this.options.onclone,c=this.clonedReferenceElement,typeof c>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,PT(o)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(o,c)}).then(function(){return n})]:[2,n]}})})});return o.open(),o.write(DT(document.doctype)+"<html></html>"),$T(this.referenceElement.ownerDocument,s,a),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),l},t.prototype.createElementClone=function(e){if(Nh(e,2))debugger;if(FC(e))return this.createCanvasClone(e);if(gy(e))return this.createVideoClone(e);if(wy(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return jh(A)&&(jh(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),A.loading==="lazy"&&(A.loading="eager")),yy(A)?this.createCustomElementClone(A):A},t.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return Gd(e.style,A),A},t.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var r=[].slice.call(A.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),n=e.cloneNode(!1);return n.textContent=r,n}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var s=e.getContext("2d"),a=n.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var i=(A=e.getContext("webgl2"))!==null&&A!==void 0?A:e.getContext("webgl");if(i){var o=i.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},t.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var r=A.getContext("2d");try{return r&&(r.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||r.getImageData(0,0,A.width,A.height)),A}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},t.prototype.appendChildNode=function(e,A,r){(!Ss(A)||!xT(A)&&!A.hasAttribute(TC)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(A)))&&(!this.options.copyStyles||!Ss(A)||!wy(A))&&e.appendChild(this.cloneNode(A,r))},t.prototype.cloneChildNodes=function(e,A,r){for(var n=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Ss(s)&&SC(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(i){return n.appendChildNode(A,i,r)})}else this.appendChildNode(A,s,r)},t.prototype.cloneNode=function(e,A){if(QC(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Ss(e)&&(Mh(e)||Hl(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var s=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),i=r.getComputedStyle(e,":after");this.referenceElement===e&&Mh(n)&&(this.clonedReferenceElement=n),Sm(n)&&GT(n);var o=this.counters.parse(new Ay(this.context,s)),l=this.resolvePseudoContent(e,n,a,mi.BEFORE);yy(e)&&(A=!0),gy(e)||this.cloneChildNodes(e,n,A),l&&n.insertBefore(l,n.firstChild);var u=this.resolvePseudoContent(e,n,i,mi.AFTER);return u&&n.appendChild(u),this.counters.pop(o),(s&&(this.options.copyStyles||Hl(e))&&!IC(e)||A)&&Gd(s,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(bu(e)||Eu(e))&&(bu(n)||Eu(n))&&(n.value=e.value),n}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,A,r,n){var s=this;if(r){var a=r.content,i=A.ownerDocument;if(!(!i||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Ay(this.context,r));var o=new U1(this.context,r),l=i.createElement("html2canvaspseudoelement");Gd(r,l),o.content.forEach(function(c){if(c.type===0)l.appendChild(i.createTextNode(c.value));else if(c.type===22){var d=i.createElement("img");d.src=c.value,d.style.opacity="1",l.appendChild(d)}else if(c.type===18){if(c.name==="attr"){var h=c.values.filter(Ce);h.length&&l.appendChild(i.createTextNode(e.getAttribute(h[0].value)||""))}else if(c.name==="counter"){var f=c.values.filter(Ws),w=f[0],y=f[1];if(w&&Ce(w)){var p=s.counters.getCounterValue(w.value),m=y&&Ce(y)?Hh.parse(s.context,y.value):3;l.appendChild(i.createTextNode(Gi(p,m,!1)))}}else if(c.name==="counters"){var g=c.values.filter(Ws),w=g[0],B=g[1],y=g[2];if(w&&Ce(w)){var _=s.counters.getCounterValues(w.value),v=y&&Ce(y)?Hh.parse(s.context,y.value):3,C=B&&B.type===0?B.value:"",Q=_.map(function(j){return Gi(j,v,!1)}).join(C);l.appendChild(i.createTextNode(Q))}}}else if(c.type===20)switch(c.value){case"open-quote":l.appendChild(i.createTextNode(ty(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(ty(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(c.value))}}),l.className=Kh+" "+Gh;var u=n===mi.BEFORE?" "+Kh:" "+Gh;return Hl(A)?A.className.baseValue+=u:A.className+=u,l}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),mi;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(mi||(mi={}));var RT=function(t,e){var A=t.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=e.width.toString(),A.height=e.height.toString(),A.scrolling="no",A.setAttribute(TC,"true"),t.body.appendChild(A),A},LT=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},PT=function(t){return Promise.all([].slice.call(t.images,0).map(LT))},HT=function(t){return new Promise(function(e,A){var r=t.contentWindow;if(!r)return A("No window assigned for iframe");var n=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},NT=["all","d","content"],Gd=function(t,e){for(var A=t.length-1;A>=0;A--){var r=t.item(A);NT.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},DT=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},$T=function(t,e,A){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||A!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,A)},MT=function(t){var e=t[0],A=t[1],r=t[2];e.scrollLeft=A,e.scrollTop=r},jT=":before",KT=":after",Kh="___html2canvas___pseudoelement_before",Gh="___html2canvas___pseudoelement_after",Qy=`{
    content: "" !important;
    display: none !important;
}`,GT=function(t){VT(t,"."+Kh+jT+Qy+`
         .`+Gh+KT+Qy)},VT=function(t,e){var A=t.ownerDocument;if(A){var r=A.createElement("style");r.textContent=e,t.appendChild(r)}},OC=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),zT=function(){function t(e,A){this.context=e,this._options=A,this._cache={}}return t.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)||(zd(e)||XT(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),A},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ct(this,void 0,void 0,function(){var A,r,n,s,a=this;return pt(this,function(i){switch(i.label){case 0:return A=OC.isSameOrigin(e),r=!Vd(e)&&this._options.useCORS===!0&&ot.SUPPORT_CORS_IMAGES&&!A,n=!Vd(e)&&!A&&!zd(e)&&typeof this._options.proxy=="string"&&ot.SUPPORT_CORS_XHR&&!r,!A&&this._options.allowTaint===!1&&!Vd(e)&&!zd(e)&&!n&&!r?[2]:(s=e,n?[4,this.proxy(s)]:[3,2]);case 1:s=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,l){var u=new Image;u.onload=function(){return o(u)},u.onerror=l,(YT(s)||r)&&(u.crossOrigin="anonymous"),u.src=s,u.complete===!0&&setTimeout(function(){return o(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var A=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(s,a){var i=ot.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(i==="text")s(o.response);else{var c=new FileReader;c.addEventListener("load",function(){return s(c.result)},!1),c.addEventListener("error",function(d){return a(d)},!1),c.readAsDataURL(o.response)}else a("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=a;var l=r.indexOf("?")>-1?"&":"?";if(o.open("GET",""+r+l+"url="+encodeURIComponent(e)+"&responseType="+i),i!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=i),A._options.imageTimeout){var u=A._options.imageTimeout;o.timeout=u,o.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+n)}}o.send()})},t}(),WT=/^data:image\/svg\+xml/i,JT=/^data:image\/.*;base64,/i,ZT=/^data:image\/.*/i,XT=function(t){return ot.SUPPORT_SVG_DRAWING||!qT(t)},Vd=function(t){return ZT.test(t)},YT=function(t){return JT.test(t)},zd=function(t){return t.substr(0,4)==="blob"},qT=function(t){return t.substr(-3).toLowerCase()==="svg"||WT.test(t)},K=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),rs=function(t,e,A){return new K(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},el=function(){function t(e,A,r,n){this.type=1,this.start=e,this.startControl=A,this.endControl=r,this.end=n}return t.prototype.subdivide=function(e,A){var r=rs(this.start,this.startControl,e),n=rs(this.startControl,this.endControl,e),s=rs(this.endControl,this.end,e),a=rs(r,n,e),i=rs(n,s,e),o=rs(a,i,e);return A?new t(this.start,r,a,o):new t(o,i,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),lA=function(t){return t.type===1},eO=function(){function t(e){var A=e.styles,r=e.bounds,n=Ma(A.borderTopLeftRadius,r.width,r.height),s=n[0],a=n[1],i=Ma(A.borderTopRightRadius,r.width,r.height),o=i[0],l=i[1],u=Ma(A.borderBottomRightRadius,r.width,r.height),c=u[0],d=u[1],h=Ma(A.borderBottomLeftRadius,r.width,r.height),f=h[0],w=h[1],y=[];y.push((s+o)/r.width),y.push((f+c)/r.width),y.push((a+w)/r.height),y.push((l+d)/r.height);var p=Math.max.apply(Math,y);p>1&&(s/=p,a/=p,o/=p,l/=p,c/=p,d/=p,f/=p,w/=p);var m=r.width-o,g=r.height-d,B=r.width-c,_=r.height-w,v=A.borderTopWidth,C=A.borderRightWidth,Q=A.borderBottomWidth,S=A.borderLeftWidth,R=Qe(A.paddingTop,e.bounds.width),j=Qe(A.paddingRight,e.bounds.width),ne=Qe(A.paddingBottom,e.bounds.width),z=Qe(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Se(r.left+S/3,r.top+v/3,s-S/3,a-v/3,ge.TOP_LEFT):new K(r.left+S/3,r.top+v/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Se(r.left+m,r.top+v/3,o-C/3,l-v/3,ge.TOP_RIGHT):new K(r.left+r.width-C/3,r.top+v/3),this.bottomRightBorderDoubleOuterBox=c>0||d>0?Se(r.left+B,r.top+g,c-C/3,d-Q/3,ge.BOTTOM_RIGHT):new K(r.left+r.width-C/3,r.top+r.height-Q/3),this.bottomLeftBorderDoubleOuterBox=f>0||w>0?Se(r.left+S/3,r.top+_,f-S/3,w-Q/3,ge.BOTTOM_LEFT):new K(r.left+S/3,r.top+r.height-Q/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Se(r.left+S*2/3,r.top+v*2/3,s-S*2/3,a-v*2/3,ge.TOP_LEFT):new K(r.left+S*2/3,r.top+v*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Se(r.left+m,r.top+v*2/3,o-C*2/3,l-v*2/3,ge.TOP_RIGHT):new K(r.left+r.width-C*2/3,r.top+v*2/3),this.bottomRightBorderDoubleInnerBox=c>0||d>0?Se(r.left+B,r.top+g,c-C*2/3,d-Q*2/3,ge.BOTTOM_RIGHT):new K(r.left+r.width-C*2/3,r.top+r.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=f>0||w>0?Se(r.left+S*2/3,r.top+_,f-S*2/3,w-Q*2/3,ge.BOTTOM_LEFT):new K(r.left+S*2/3,r.top+r.height-Q*2/3),this.topLeftBorderStroke=s>0||a>0?Se(r.left+S/2,r.top+v/2,s-S/2,a-v/2,ge.TOP_LEFT):new K(r.left+S/2,r.top+v/2),this.topRightBorderStroke=s>0||a>0?Se(r.left+m,r.top+v/2,o-C/2,l-v/2,ge.TOP_RIGHT):new K(r.left+r.width-C/2,r.top+v/2),this.bottomRightBorderStroke=c>0||d>0?Se(r.left+B,r.top+g,c-C/2,d-Q/2,ge.BOTTOM_RIGHT):new K(r.left+r.width-C/2,r.top+r.height-Q/2),this.bottomLeftBorderStroke=f>0||w>0?Se(r.left+S/2,r.top+_,f-S/2,w-Q/2,ge.BOTTOM_LEFT):new K(r.left+S/2,r.top+r.height-Q/2),this.topLeftBorderBox=s>0||a>0?Se(r.left,r.top,s,a,ge.TOP_LEFT):new K(r.left,r.top),this.topRightBorderBox=o>0||l>0?Se(r.left+m,r.top,o,l,ge.TOP_RIGHT):new K(r.left+r.width,r.top),this.bottomRightBorderBox=c>0||d>0?Se(r.left+B,r.top+g,c,d,ge.BOTTOM_RIGHT):new K(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=f>0||w>0?Se(r.left,r.top+_,f,w,ge.BOTTOM_LEFT):new K(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||a>0?Se(r.left+S,r.top+v,Math.max(0,s-S),Math.max(0,a-v),ge.TOP_LEFT):new K(r.left+S,r.top+v),this.topRightPaddingBox=o>0||l>0?Se(r.left+Math.min(m,r.width-C),r.top+v,m>r.width+C?0:Math.max(0,o-C),Math.max(0,l-v),ge.TOP_RIGHT):new K(r.left+r.width-C,r.top+v),this.bottomRightPaddingBox=c>0||d>0?Se(r.left+Math.min(B,r.width-S),r.top+Math.min(g,r.height-Q),Math.max(0,c-C),Math.max(0,d-Q),ge.BOTTOM_RIGHT):new K(r.left+r.width-C,r.top+r.height-Q),this.bottomLeftPaddingBox=f>0||w>0?Se(r.left+S,r.top+Math.min(_,r.height-Q),Math.max(0,f-S),Math.max(0,w-Q),ge.BOTTOM_LEFT):new K(r.left+S,r.top+r.height-Q),this.topLeftContentBox=s>0||a>0?Se(r.left+S+z,r.top+v+R,Math.max(0,s-(S+z)),Math.max(0,a-(v+R)),ge.TOP_LEFT):new K(r.left+S+z,r.top+v+R),this.topRightContentBox=o>0||l>0?Se(r.left+Math.min(m,r.width+S+z),r.top+v+R,m>r.width+S+z?0:o-S+z,l-(v+R),ge.TOP_RIGHT):new K(r.left+r.width-(C+j),r.top+v+R),this.bottomRightContentBox=c>0||d>0?Se(r.left+Math.min(B,r.width-(S+z)),r.top+Math.min(g,r.height+v+R),Math.max(0,c-(C+j)),d-(Q+ne),ge.BOTTOM_RIGHT):new K(r.left+r.width-(C+j),r.top+r.height-(Q+ne)),this.bottomLeftContentBox=f>0||w>0?Se(r.left+S+z,r.top+_,Math.max(0,f-(S+z)),w-(Q+ne),ge.BOTTOM_LEFT):new K(r.left+S+z,r.top+r.height-(Q+ne))}return t}(),ge;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ge||(ge={}));var Se=function(t,e,A,r,n){var s=4*((Math.sqrt(2)-1)/3),a=A*s,i=r*s,o=t+A,l=e+r;switch(n){case ge.TOP_LEFT:return new el(new K(t,l),new K(t,l-i),new K(o-a,e),new K(o,e));case ge.TOP_RIGHT:return new el(new K(t,e),new K(t+a,e),new K(o,l-i),new K(o,l));case ge.BOTTOM_RIGHT:return new el(new K(o,e),new K(o,e+i),new K(t+a,l),new K(t,l));case ge.BOTTOM_LEFT:default:return new el(new K(o,l),new K(o-a,l),new K(t,e+i),new K(t,e))}},Qu=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},tO=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Uu=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},AO=function(){function t(e,A,r){this.offsetX=e,this.offsetY=A,this.matrix=r,this.type=0,this.target=6}return t}(),tl=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),rO=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),nO=function(t){return t.type===0},kC=function(t){return t.type===1},sO=function(t){return t.type===2},Uy=function(t,e){return t.length===e.length?t.some(function(A,r){return A===e[r]}):!1},aO=function(t,e,A,r,n){return t.map(function(s,a){switch(a){case 0:return s.add(e,A);case 1:return s.add(e+r,A);case 2:return s.add(e+r,A+n);case 3:return s.add(e,A+n)}return s})},RC=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),LC=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new eO(this.container),this.container.styles.opacity<1&&this.effects.push(new rO(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new AO(r,n,s))}if(this.container.styles.overflowX!==0){var a=Qu(this.curves),i=Uu(this.curves);Uy(a,i)?this.effects.push(new tl(a,6)):(this.effects.push(new tl(a,2)),this.effects.push(new tl(i,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(o){return!kC(o)});if(A||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),A=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=Qu(r.curves),i=Uu(r.curves);Uy(a,i)||n.unshift(new tl(i,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(o){return We(o.target,e)})},t}(),Vh=function(t,e,A,r){t.container.elements.forEach(function(n){var s=We(n.flags,4),a=We(n.flags,2),i=new LC(n,t);We(n.styles.display,2048)&&r.push(i);var o=We(n.flags,8)?[]:r;if(s||a){var l=s||n.styles.isPositioned()?A:e,u=new RC(i);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var c=n.styles.zIndex.order;if(c<0){var d=0;l.negativeZIndex.some(function(f,w){return c>f.element.container.styles.zIndex.order?(d=w,!1):d>0}),l.negativeZIndex.splice(d,0,u)}else if(c>0){var h=0;l.positiveZIndex.some(function(f,w){return c>=f.element.container.styles.zIndex.order?(h=w+1,!1):h>0}),l.positiveZIndex.splice(h,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);Vh(i,u,s?u:A,o)}else n.styles.isInlineLevel()?e.inlineLevel.push(i):e.nonInlineLevel.push(i),Vh(i,e,A,o);We(n.flags,8)&&PC(n,o)})},PC=function(t,e){for(var A=t instanceof $h?t.start:1,r=t instanceof $h?t.reversed:!1,n=0;n<e.length;n++){var s=e[n];s.container instanceof BC&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=Gi(A,s.container.styles.listStyleType,!0),A+=r?-1:1}},iO=function(t){var e=new LC(t,null),A=new RC(e),r=[];return Vh(e,A,A,r),PC(e.container,r),A},Fy=function(t,e){switch(e){case 0:return dA(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return dA(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return dA(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return dA(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},oO=function(t,e){switch(e){case 0:return dA(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return dA(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return dA(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return dA(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},lO=function(t,e){switch(e){case 0:return dA(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return dA(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return dA(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return dA(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},uO=function(t,e){switch(e){case 0:return Al(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Al(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Al(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Al(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Al=function(t,e){var A=[];return lA(t)?A.push(t.subdivide(.5,!1)):A.push(t),lA(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},dA=function(t,e,A,r){var n=[];return lA(t)?n.push(t.subdivide(.5,!1)):n.push(t),lA(A)?n.push(A.subdivide(.5,!0)):n.push(A),lA(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),lA(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},HC=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Fu=function(t){var e=t.styles,A=t.bounds,r=Qe(e.paddingLeft,A.width),n=Qe(e.paddingRight,A.width),s=Qe(e.paddingTop,A.width),a=Qe(e.paddingBottom,A.width);return A.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+s+a))},cO=function(t,e){return t===0?e.bounds:t===2?Fu(e):HC(e)},dO=function(t,e){return t===0?e.bounds:t===2?Fu(e):HC(e)},Wd=function(t,e,A){var r=cO(fs(t.styles.backgroundOrigin,e),t),n=dO(fs(t.styles.backgroundClip,e),t),s=fO(fs(t.styles.backgroundSize,e),A,r),a=s[0],i=s[1],o=Ma(fs(t.styles.backgroundPosition,e),r.width-a,r.height-i),l=hO(fs(t.styles.backgroundRepeat,e),o,s,r,n),u=Math.round(r.left+o[0]),c=Math.round(r.top+o[1]);return[l,u,c,a,i]},ns=function(t){return Ce(t)&&t.value===Ds.AUTO},rl=function(t){return typeof t=="number"},fO=function(t,e,A){var r=e[0],n=e[1],s=e[2],a=t[0],i=t[1];if(!a)return[0,0];if($e(a)&&i&&$e(i))return[Qe(a,A.width),Qe(i,A.height)];var o=rl(s);if(Ce(a)&&(a.value===Ds.CONTAIN||a.value===Ds.COVER)){if(rl(s)){var l=A.width/A.height;return l<s!=(a.value===Ds.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=rl(r),c=rl(n),d=u||c;if(ns(a)&&(!i||ns(i))){if(u&&c)return[r,n];if(!o&&!d)return[A.width,A.height];if(d&&o){var h=u?r:n*s,f=c?n:r/s;return[h,f]}var w=u?r:A.width,y=c?n:A.height;return[w,y]}if(o){var p=0,m=0;return $e(a)?p=Qe(a,A.width):$e(i)&&(m=Qe(i,A.height)),ns(a)?p=m*s:(!i||ns(i))&&(m=p/s),[p,m]}var g=null,B=null;if($e(a)?g=Qe(a,A.width):i&&$e(i)&&(B=Qe(i,A.height)),g!==null&&(!i||ns(i))&&(B=u&&c?g/r*n:A.height),B!==null&&ns(a)&&(g=u&&c?B/n*r:A.width),g!==null&&B!==null)return[g,B];throw new Error("Unable to calculate background-size for element")},fs=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},hO=function(t,e,A,r,n){var s=e[0],a=e[1],i=A[0],o=A[1];switch(t){case 2:return[new K(Math.round(r.left),Math.round(r.top+a)),new K(Math.round(r.left+r.width),Math.round(r.top+a)),new K(Math.round(r.left+r.width),Math.round(o+r.top+a)),new K(Math.round(r.left),Math.round(o+r.top+a))];case 3:return[new K(Math.round(r.left+s),Math.round(r.top)),new K(Math.round(r.left+s+i),Math.round(r.top)),new K(Math.round(r.left+s+i),Math.round(r.height+r.top)),new K(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new K(Math.round(r.left+s),Math.round(r.top+a)),new K(Math.round(r.left+s+i),Math.round(r.top+a)),new K(Math.round(r.left+s+i),Math.round(r.top+a+o)),new K(Math.round(r.left+s),Math.round(r.top+a+o))];default:return[new K(Math.round(n.left),Math.round(n.top)),new K(Math.round(n.left+n.width),Math.round(n.top)),new K(Math.round(n.left+n.width),Math.round(n.height+n.top)),new K(Math.round(n.left),Math.round(n.height+n.top))]}},pO="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Iy="Hidden Text",mO=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),n.src=pO,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Iy)),r.appendChild(s),r.appendChild(n);var i=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Iy)),r.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:i,middle:o}},t.prototype.getMetrics=function(e,A){var r=e+" "+A;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,A)),this._data[r]},t}(),NC=function(){function t(e,A){this.context=e,this.options=A}return t}(),gO=1e4,wO=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new mO(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(A){for(var r=this;this._activeEffects.length;)this.popEffect();A.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(A){this.ctx.save(),sO(A)&&(this.ctx.globalAlpha=A.opacity),nO(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),kC(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return Ct(this,void 0,void 0,function(){var r;return pt(this,function(n){switch(n.label){case 0:return r=A.element.container.styles,r.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return Ct(this,void 0,void 0,function(){return pt(this,function(r){switch(r.label){case 0:if(We(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(A)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,r,n){var s=this;if(r===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+n);else{var a=Fm(A.text);a.reduce(function(i,o){return s.ctx.fillText(o,i,A.bounds.top+n),i+s.ctx.measureText(o).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var r=A.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),n=CO(A.fontFamily).join(", "),s=ao(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,r,A.fontWeight,s,n].join(" "),n,s]},e.prototype.renderTextNode=function(A,r){return Ct(this,void 0,void 0,function(){var n,s,a,i,o,l,u,c,d=this;return pt(this,function(h){return n=this.createFontStyle(r),s=n[0],a=n[1],i=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(a,i),l=o.baseline,u=o.middle,c=r.paintOrder,A.textBounds.forEach(function(f){c.forEach(function(w){switch(w){case 0:d.ctx.fillStyle=Ye(r.color),d.renderTextWithLetterSpacing(f,r.letterSpacing,l);var y=r.textShadow;y.length&&f.text.trim().length&&(y.slice(0).reverse().forEach(function(p){d.ctx.shadowColor=Ye(p.color),d.ctx.shadowOffsetX=p.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=p.offsetY.number*d.options.scale,d.ctx.shadowBlur=p.blur.number,d.renderTextWithLetterSpacing(f,r.letterSpacing,l)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=Ye(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(p){switch(p){case 1:d.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top+l),f.bounds.width,1);break;case 2:d.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top),f.bounds.width,1);break;case 3:d.ctx.fillRect(f.bounds.left,Math.ceil(f.bounds.top+u),f.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&f.text.trim().length&&(d.ctx.strokeStyle=Ye(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(f.text,f.bounds.left,f.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,r,n){if(n&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=Fu(A),a=Uu(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o,m,m,l,u,c,d,B,h,f,_,w,y,p,m,g,B,_;return pt(this,function(v){switch(v.label){case 0:this.applyEffects(A.getEffects(4)),r=A.container,n=A.curves,s=r.styles,a=0,i=r.textNodes,v.label=1;case 1:return a<i.length?(o=i[a],[4,this.renderTextNode(o,s)]):[3,4];case 2:v.sent(),v.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof gC))return[3,8];v.label=5;case 5:return v.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return m=v.sent(),this.renderReplacedElement(r,n,m),[3,8];case 7:return v.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof wC&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof yC))return[3,12];v.label=9;case 9:return v.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return m=v.sent(),this.renderReplacedElement(r,n,m),[3,12];case 11:return v.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof CC&&r.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,l.render(r.tree)]):[3,14];case 13:u=v.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),v.label=14;case 14:if(r instanceof Im&&(c=Math.min(r.bounds.width,r.bounds.height),r.type===vu?r.checked&&(this.ctx.save(),this.path([new K(r.bounds.left+c*.39363,r.bounds.top+c*.79),new K(r.bounds.left+c*.16,r.bounds.top+c*.5549),new K(r.bounds.left+c*.27347,r.bounds.top+c*.44071),new K(r.bounds.left+c*.39694,r.bounds.top+c*.5649),new K(r.bounds.left+c*.72983,r.bounds.top+c*.23),new K(r.bounds.left+c*.84,r.bounds.top+c*.34085),new K(r.bounds.left+c*.39363,r.bounds.top+c*.79)]),this.ctx.fillStyle=Ye(my),this.ctx.fill(),this.ctx.restore()):r.type===Cu&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+c/2,r.bounds.top+c/2,c/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ye(my),this.ctx.fill(),this.ctx.restore())),yO(r)&&r.value.length){switch(d=this.createFontStyle(s),B=d[0],h=d[1],f=this.fontMetrics.getMetrics(B,h).baseline,this.ctx.font=B,this.ctx.fillStyle=Ye(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_O(r.styles.textAlign),_=Fu(r),w=0,r.styles.textAlign){case 1:w+=_.width/2;break;case 2:w+=_.width;break}y=_.add(w,0,0,-_.height/2+1),this.ctx.save(),this.path([new K(_.left,_.top),new K(_.left+_.width,_.top),new K(_.left+_.width,_.top+_.height),new K(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pi(r.value,y),s.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!We(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(p=r.styles.listStyleImage,p.type!==0)return[3,18];m=void 0,g=p.url,v.label=15;case 15:return v.trys.push([15,17,,18]),[4,this.context.cache.match(g)];case 16:return m=v.sent(),this.ctx.drawImage(m,r.bounds.left-(m.width+10),r.bounds.top),[3,18];case 17:return v.sent(),this.context.logger.error("Error loading list-style-image "+g),[3,18];case 18:return[3,20];case 19:A.listValue&&r.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Ye(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new gr(r.bounds.left,r.bounds.top+Qe(r.styles.paddingTop,r.bounds.width),r.bounds.width,qw(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pi(A.listValue,_),s.letterSpacing,qw(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),v.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return Ct(this,void 0,void 0,function(){var r,n,p,s,a,p,i,o,p,l,u,p,c,d,p,h,f,p,w,y,p;return pt(this,function(m){switch(m.label){case 0:if(We(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:m.sent(),r=0,n=A.negativeZIndex,m.label=2;case 2:return r<n.length?(p=n[r],[4,this.renderStack(p)]):[3,5];case 3:m.sent(),m.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:m.sent(),s=0,a=A.nonInlineLevel,m.label=7;case 7:return s<a.length?(p=a[s],[4,this.renderNode(p)]):[3,10];case 8:m.sent(),m.label=9;case 9:return s++,[3,7];case 10:i=0,o=A.nonPositionedFloats,m.label=11;case 11:return i<o.length?(p=o[i],[4,this.renderStack(p)]):[3,14];case 12:m.sent(),m.label=13;case 13:return i++,[3,11];case 14:l=0,u=A.nonPositionedInlineLevel,m.label=15;case 15:return l<u.length?(p=u[l],[4,this.renderStack(p)]):[3,18];case 16:m.sent(),m.label=17;case 17:return l++,[3,15];case 18:c=0,d=A.inlineLevel,m.label=19;case 19:return c<d.length?(p=d[c],[4,this.renderNode(p)]):[3,22];case 20:m.sent(),m.label=21;case 21:return c++,[3,19];case 22:h=0,f=A.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return h<f.length?(p=f[h],[4,this.renderStack(p)]):[3,26];case 24:m.sent(),m.label=25;case 25:return h++,[3,23];case 26:w=0,y=A.positiveZIndex,m.label=27;case 27:return w<y.length?(p=y[w],[4,this.renderStack(p)]):[3,30];case 28:m.sent(),m.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var r=this;A.forEach(function(n,s){var a=lA(n)?n.start:n;s===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),lA(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(A,r,n,s){this.path(A),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},e.prototype.resizeImage=function(A,r,n){var s;if(A.width===r&&A.height===n)return A;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,i=a.createElement("canvas");i.width=Math.max(1,r),i.height=Math.max(1,n);var o=i.getContext("2d");return o.drawImage(A,0,0,A.width,A.height,0,0,r,n),i},e.prototype.renderBackgroundImage=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o;return pt(this,function(l){switch(l.label){case 0:r=A.styles.backgroundImage.length-1,n=function(u){var c,d,h,R,$,N,z,T,Q,f,R,$,N,z,T,w,y,p,m,g,B,_,v,C,Q,S,R,j,ne,z,T,O,$,N,F,b,I,P,k,H,X,q;return pt(this,function(be){switch(be.label){case 0:if(u.type!==0)return[3,5];c=void 0,d=u.url,be.label=1;case 1:return be.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return c=be.sent(),[3,4];case 3:return be.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return c&&(h=Wd(A,r,[c.width,c.height,c.width/c.height]),R=h[0],$=h[1],N=h[2],z=h[3],T=h[4],Q=s.ctx.createPattern(s.resizeImage(c,z,T),"repeat"),s.renderRepeat(R,Q,$,N)),[3,6];case 5:nx(u)?(f=Wd(A,r,[null,null,null]),R=f[0],$=f[1],N=f[2],z=f[3],T=f[4],w=qS(u.angle,z,T),y=w[0],p=w[1],m=w[2],g=w[3],B=w[4],_=document.createElement("canvas"),_.width=z,_.height=T,v=_.getContext("2d"),C=v.createLinearGradient(p,g,m,B),Xw(u.stops,y).forEach(function(Ee){return C.addColorStop(Ee.stop,Ye(Ee.color))}),v.fillStyle=C,v.fillRect(0,0,z,T),z>0&&T>0&&(Q=s.ctx.createPattern(_,"repeat"),s.renderRepeat(R,Q,$,N))):sx(u)&&(S=Wd(A,r,[null,null,null]),R=S[0],j=S[1],ne=S[2],z=S[3],T=S[4],O=u.position.length===0?[Em]:u.position,$=Qe(O[0],z),N=Qe(O[O.length-1],T),F=ex(u,$,N,z,T),b=F[0],I=F[1],b>0&&I>0&&(P=s.ctx.createRadialGradient(j+$,ne+N,0,j+$,ne+N,b),Xw(u.stops,b*2).forEach(function(Ee){return P.addColorStop(Ee.stop,Ye(Ee.color))}),s.path(R),s.ctx.fillStyle=P,b!==I?(k=A.bounds.left+.5*A.bounds.width,H=A.bounds.top+.5*A.bounds.height,X=I/b,q=1/X,s.ctx.save(),s.ctx.translate(k,H),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-k,-H),s.ctx.fillRect(j,q*(ne-H)+H,z,T*q),s.ctx.restore()):s.ctx.fill())),be.label=6;case 6:return r--,[2]}})},s=this,a=0,i=A.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<i.length?(o=i[a],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,r,n){return Ct(this,void 0,void 0,function(){return pt(this,function(s){return this.path(Fy(n,r)),this.ctx.fillStyle=Ye(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,r,n,s){return Ct(this,void 0,void 0,function(){var a,i;return pt(this,function(o){switch(o.label){case 0:return r<3?[4,this.renderSolidBorder(A,n,s)]:[3,2];case 1:return o.sent(),[2];case 2:return a=oO(s,n),this.path(a),this.ctx.fillStyle=Ye(A),this.ctx.fill(),i=lO(s,n),this.path(i),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return Ct(this,void 0,void 0,function(){var r,n,s,a,i,o,l,u,c=this;return pt(this,function(d){switch(d.label){case 0:return this.applyEffects(A.getEffects(2)),r=A.container.styles,n=!tn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=BO(fs(r.backgroundClip,0),A.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),tn(r.backgroundColor)||(this.ctx.fillStyle=Ye(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(h){c.ctx.save();var f=Qu(A.curves),w=h.inset?0:gO,y=aO(f,-w+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(c.path(f),c.ctx.clip(),c.mask(y)):(c.mask(f),c.ctx.clip(),c.path(y)),c.ctx.shadowOffsetX=h.offsetX.number+w,c.ctx.shadowOffsetY=h.offsetY.number,c.ctx.shadowColor=Ye(h.color),c.ctx.shadowBlur=h.blur.number,c.ctx.fillStyle=h.inset?Ye(h.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),d.label=2;case 2:i=0,o=0,l=s,d.label=3;case 3:return o<l.length?(u=l[o],u.style!==0&&!tn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,i,A.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,i,A.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,i,A.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,i,A.curves)];case 10:d.sent(),d.label=11;case 11:i++,d.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,r,n,s,a){return Ct(this,void 0,void 0,function(){var i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,v,_,v;return pt(this,function(C){return this.ctx.save(),i=uO(s,n),o=Fy(s,n),a===2&&(this.path(o),this.ctx.clip()),lA(o[0])?(l=o[0].start.x,u=o[0].start.y):(l=o[0].x,u=o[0].y),lA(o[1])?(c=o[1].end.x,d=o[1].end.y):(c=o[1].x,d=o[1].y),n===0||n===2?h=Math.abs(l-c):h=Math.abs(u-d),this.ctx.beginPath(),a===3?this.formatPath(i):this.formatPath(o.slice(0,2)),f=r<3?r*3:r*2,w=r<3?r*2:r,a===3&&(f=r,w=r),y=!0,h<=f*2?y=!1:h<=f*2+w?(p=h/(2*f+w),f*=p,w*=p):(m=Math.floor((h+w)/(f+w)),g=(h-m*f)/(m-1),B=(h-(m+1)*f)/m,w=B<=0||Math.abs(w-g)<Math.abs(w-B)?g:B),y&&(a===3?this.ctx.setLineDash([0,f+w]):this.ctx.setLineDash([f,w])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Ye(A),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(lA(o[0])&&(_=o[3],v=o[0],this.ctx.beginPath(),this.formatPath([new K(_.end.x,_.end.y),new K(v.start.x,v.start.y)]),this.ctx.stroke()),lA(o[1])&&(_=o[1],v=o[2],this.ctx.beginPath(),this.formatPath([new K(_.end.x,_.end.y),new K(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return Ct(this,void 0,void 0,function(){var r;return pt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ye(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=iO(A),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(NC),yO=function(t){return t instanceof vC||t instanceof _C?!0:t instanceof Im&&t.type!==Cu&&t.type!==vu},BO=function(t,e){switch(t){case 0:return Qu(e);case 2:return tO(e);case 1:default:return Uu(e)}},_O=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vO=["-apple-system","system-ui"],CO=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return vO.indexOf(e)===-1}):t},bO=function(t){kA(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(A){return Ct(this,void 0,void 0,function(){var r,n;return pt(this,function(s){switch(s.label){case 0:return r=Dh(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,EO(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ye(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(NC),EO=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},QO=function(){function t(e){var A=e.id,r=e.enabled;this.id=A,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ro([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ro([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),UO=function(){function t(e,A){var r;this.windowBounds=A,this.instanceName="#"+t.instanceCount++,this.logger=new QO({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new zT(this,e)}return t.instanceCount=1,t}(),FO=function(t,e){return e===void 0&&(e={}),IO(t,e)};typeof window<"u"&&OC.setContext(window);var IO=function(t,e){return Ct(void 0,void 0,void 0,function(){var A,r,n,s,a,i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,C,v,C,Q,S,R,j,ne,z,T,O,$,N,F,b,I,P,k,H,X;return pt(this,function(q){switch(q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(A=t.ownerDocument,!A)throw new Error("Element is not attached to a Document");if(r=A.defaultView,!r)throw new Error("Document is not attached to a Window");return n={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(R=e.useCORS)!==null&&R!==void 0?R:!1},s=Eh({logging:(j=e.logging)!==null&&j!==void 0?j:!0,cache:e.cache},n),a={windowWidth:(ne=e.windowWidth)!==null&&ne!==void 0?ne:r.innerWidth,windowHeight:(z=e.windowHeight)!==null&&z!==void 0?z:r.innerHeight,scrollX:(T=e.scrollX)!==null&&T!==void 0?T:r.pageXOffset,scrollY:(O=e.scrollY)!==null&&O!==void 0?O:r.pageYOffset},i=new gr(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),o=new UO(s,i),l=($=e.foreignObjectRendering)!==null&&$!==void 0?$:!1,u={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},o.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),c=new Ey(o,t,u),d=c.clonedReferenceElement,d?[4,c.toIFrame(A,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=q.sent(),f=Sm(d)||ST(d)?aI(d.ownerDocument):wc(o,d),w=f.width,y=f.height,p=f.left,m=f.top,g=SO(o,d,e.backgroundColor),B={canvas:e.canvas,backgroundColor:g,scale:(b=(F=e.scale)!==null&&F!==void 0?F:r.devicePixelRatio)!==null&&b!==void 0?b:1,x:((I=e.x)!==null&&I!==void 0?I:0)+p,y:((P=e.y)!==null&&P!==void 0?P:0)+m,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(w),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(y)},l?(o.logger.debug("Document cloned, using foreign object rendering"),C=new bO(o,B),[4,C.render(d)]):[3,3];case 2:return _=q.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+p+","+m+" with size "+w+"x"+y+" using computed rendering"),o.logger.debug("Starting DOM parsing"),v=EC(o,d),g===v.styles.backgroundColor&&(v.styles.backgroundColor=cr.TRANSPARENT),o.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),C=new wO(o,B),[4,C.render(v)];case 4:_=q.sent(),q.label=5;case 5:return(!((X=e.removeContainer)!==null&&X!==void 0)||X)&&(Ey.destroy(h)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,_]}})})},SO=function(t,e,A){var r=e.ownerDocument,n=r.documentElement?fi(t,getComputedStyle(r.documentElement).backgroundColor):cr.TRANSPARENT,s=r.body?fi(t,getComputedStyle(r.body).backgroundColor):cr.TRANSPARENT,a=typeof A=="string"?fi(t,A):A===null?cr.TRANSPARENT:4294967295;return e===r.documentElement?tn(n)?tn(s)?a:s:n:a};function Ae(t,e,A,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,A),A}function E(t,e,A,r){if(A==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?r:A==="a"?r.call(t):r?r.value:e.get(t)}let DC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return DC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),A=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^A()&15>>+r/4).toString(16))};function zh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Wh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class te extends Error{}class dt extends te{constructor(e,A,r,n){super(`${dt.makeMessage(e,A,r)}`),this.status=e,this.headers=n,this.requestID=n==null?void 0:n.get("x-request-id"),this.error=A;const s=A;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,A,r){const n=A!=null&&A.message?typeof A.message=="string"?A.message:JSON.stringify(A.message):A?JSON.stringify(A):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,A,r,n){if(!e||!n)return new Fc({message:r,cause:Wh(A)});const s=A==null?void 0:A.error;return e===400?new $C(e,s,r,n):e===401?new MC(e,s,r,n):e===403?new jC(e,s,r,n):e===404?new KC(e,s,r,n):e===409?new GC(e,s,r,n):e===422?new VC(e,s,r,n):e===429?new zC(e,s,r,n):e>=500?new WC(e,s,r,n):new dt(e,s,r,n)}}class Zt extends dt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fc extends dt{constructor({message:e,cause:A}){super(void 0,void 0,e||"Connection error.",void 0),A&&(this.cause=A)}}class Ic extends Fc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $C extends dt{}class MC extends dt{}class jC extends dt{}class KC extends dt{}class GC extends dt{}class VC extends dt{}class zC extends dt{}class WC extends dt{}class JC extends te{constructor(){super("Could not parse response content as the length limit was reached")}}class ZC extends te{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ga extends Error{constructor(e){super(e)}}const xO=/^[a-z][a-z0-9+.-]*:/i,TO=t=>xO.test(t);let Ot=t=>(Ot=Array.isArray,Ot(t)),Sy=Ot;function OO(t){return typeof t!="object"?{}:t??{}}function kO(t){if(!t)return!0;for(const e in t)return!1;return!0}function RO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const LO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new te(`${t} must be an integer`);if(e<0)throw new te(`${t} must be a positive integer`);return e},PO=t=>{try{return JSON.parse(t)}catch{return}},io=t=>new Promise(e=>setTimeout(e,t)),hs="5.12.2",HO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function NO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const DO=()=>{var A;const t=NO();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hs,"X-Stainless-OS":Ty(Deno.build.os),"X-Stainless-Arch":xy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((A=Deno.version)==null?void 0:A.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hs,"X-Stainless-OS":Ty(globalThis.process.platform??"unknown"),"X-Stainless-Arch":xy(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=$O();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $O(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:A}of t){const r=A.exec(navigator.userAgent);if(r){const n=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${n}.${s}.${a}`}}}return null}const xy=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ty=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Oy;const MO=()=>Oy??(Oy=DO());function jO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function XC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function YC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return XC({start(){},async pull(A){const{done:r,value:n}=await e.next();r?A.close():A.enqueue(n)},async cancel(){var A;await((A=e.return)==null?void 0:A.call(e))}})}function qC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const A=await e.read();return A!=null&&A.done&&e.releaseLock(),A}catch(A){throw e.releaseLock(),A}},async return(){const A=e.cancel();return e.releaseLock(),await A,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function KO(t){var r,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(r=t[Symbol.asyncIterator]()).return)==null?void 0:n.call(r));return}const e=t.getReader(),A=e.cancel();e.releaseLock(),await A}const GO=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),eb="RFC3986",tb=t=>String(t),ky={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:tb},VO="RFC1738";let Jh=(t,e)=>(Jh=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Jh(t,e));const NA=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Zd=1024,zO=(t,e,A,r,n)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),A==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(i){return"%26%23"+parseInt(i.slice(2),16)+"%3B"});let a="";for(let i=0;i<s.length;i+=Zd){const o=s.length>=Zd?s.slice(i,i+Zd):s,l=[];for(let u=0;u<o.length;++u){let c=o.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||n===VO&&(c===40||c===41)){l[l.length]=o.charAt(u);continue}if(c<128){l[l.length]=NA[c];continue}if(c<2048){l[l.length]=NA[192|c>>6]+NA[128|c&63];continue}if(c<55296||c>=57344){l[l.length]=NA[224|c>>12]+NA[128|c>>6&63]+NA[128|c&63];continue}u+=1,c=65536+((c&1023)<<10|o.charCodeAt(u)&1023),l[l.length]=NA[240|c>>18]+NA[128|c>>12&63]+NA[128|c>>6&63]+NA[128|c&63]}a+=l.join("")}return a};function WO(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Ry(t,e){if(Ot(t)){const A=[];for(let r=0;r<t.length;r+=1)A.push(e(t[r]));return A}return e(t)}const Ab={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},rb=function(t,e){Array.prototype.push.apply(t,Ot(e)?e:[e])};let Ly;const Ve={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:zO,encodeValuesOnly:!1,format:eb,formatter:tb,indices:!1,serializeDate(t){return(Ly??(Ly=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function JO(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Xd={};function nb(t,e,A,r,n,s,a,i,o,l,u,c,d,h,f,w,y,p){let m=t,g=p,B=0,_=!1;for(;(g=g.get(Xd))!==void 0&&!_;){const R=g.get(t);if(B+=1,typeof R<"u"){if(R===B)throw new RangeError("Cyclic object value");_=!0}typeof g.get(Xd)>"u"&&(B=0)}if(typeof l=="function"?m=l(e,m):m instanceof Date?m=d==null?void 0:d(m):A==="comma"&&Ot(m)&&(m=Ry(m,function(R){return R instanceof Date?d==null?void 0:d(R):R})),m===null){if(s)return o&&!w?o(e,Ve.encoder,y,"key",h):e;m=""}if(JO(m)||WO(m)){if(o){const R=w?e:o(e,Ve.encoder,y,"key",h);return[(f==null?void 0:f(R))+"="+(f==null?void 0:f(o(m,Ve.encoder,y,"value",h)))]}return[(f==null?void 0:f(e))+"="+(f==null?void 0:f(String(m)))]}const v=[];if(typeof m>"u")return v;let C;if(A==="comma"&&Ot(m))w&&o&&(m=Ry(m,o)),C=[{value:m.length>0?m.join(",")||null:void 0}];else if(Ot(l))C=l;else{const R=Object.keys(m);C=u?R.sort(u):R}const Q=i?String(e).replace(/\./g,"%2E"):String(e),S=r&&Ot(m)&&m.length===1?Q+"[]":Q;if(n&&Ot(m)&&m.length===0)return S+"[]";for(let R=0;R<C.length;++R){const j=C[R],ne=typeof j=="object"&&typeof j.value<"u"?j.value:m[j];if(a&&ne===null)continue;const z=c&&i?j.replace(/\./g,"%2E"):j,T=Ot(m)?typeof A=="function"?A(S,z):S:S+(c?"."+z:"["+z+"]");p.set(t,B);const O=new WeakMap;O.set(Xd,p),rb(v,nb(ne,T,A,r,n,s,a,i,A==="comma"&&w&&Ot(m)?null:o,l,u,c,d,h,f,w,y,O))}return v}function ZO(t=Ve){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ve.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let A=eb;if(typeof t.format<"u"){if(!Jh(ky,t.format))throw new TypeError("Unknown format option provided.");A=t.format}const r=ky[A];let n=Ve.filter;(typeof t.filter=="function"||Ot(t.filter))&&(n=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in Ab?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Ve.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ve.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ve.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ve.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ve.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ve.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ve.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ve.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ve.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ve.encodeValuesOnly,filter:n,format:A,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ve.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ve.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ve.strictNullHandling}}function XO(t,e={}){let A=t;const r=ZO(e);let n,s;typeof r.filter=="function"?(s=r.filter,A=s("",A)):Ot(r.filter)&&(s=r.filter,n=s);const a=[];if(typeof A!="object"||A===null)return"";const i=Ab[r.arrayFormat],o=i==="comma"&&r.commaRoundTrip;n||(n=Object.keys(A)),r.sort&&n.sort(r.sort);const l=new WeakMap;for(let d=0;d<n.length;++d){const h=n[d];r.skipNulls&&A[h]===null||rb(a,nb(A[h],h,i,o,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}const u=a.join(r.delimiter);let c=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),u.length>0?c+u:""}function YO(t){let e=0;for(const n of t)e+=n.length;const A=new Uint8Array(e);let r=0;for(const n of t)A.set(n,r),r+=n.length;return A}let Py;function xm(t){let e;return(Py??(e=new globalThis.TextEncoder,Py=e.encode.bind(e)))(t)}let Hy;function Ny(t){let e;return(Hy??(e=new globalThis.TextDecoder,Hy=e.decode.bind(e)))(t)}var jt,Kt;class Sc{constructor(){jt.set(this,void 0),Kt.set(this,void 0),Ae(this,jt,new Uint8Array),Ae(this,Kt,null)}decode(e){if(e==null)return[];const A=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xm(e):e;Ae(this,jt,YO([E(this,jt,"f"),A]));const r=[];let n;for(;(n=qO(E(this,jt,"f"),E(this,Kt,"f")))!=null;){if(n.carriage&&E(this,Kt,"f")==null){Ae(this,Kt,n.index);continue}if(E(this,Kt,"f")!=null&&(n.index!==E(this,Kt,"f")+1||n.carriage)){r.push(Ny(E(this,jt,"f").subarray(0,E(this,Kt,"f")-1))),Ae(this,jt,E(this,jt,"f").subarray(E(this,Kt,"f"))),Ae(this,Kt,null);continue}const s=E(this,Kt,"f")!==null?n.preceding-1:n.preceding,a=Ny(E(this,jt,"f").subarray(0,s));r.push(a),Ae(this,jt,E(this,jt,"f").subarray(n.index)),Ae(this,Kt,null)}return r}flush(){return E(this,jt,"f").length?this.decode(`
`):[]}}jt=new WeakMap,Kt=new WeakMap;Sc.NEWLINE_CHARS=new Set([`
`,"\r"]);Sc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qO(t,e){for(let n=e??0;n<t.length;n++){if(t[n]===10)return{preceding:n,index:n+1,carriage:!1};if(t[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function ek(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Iu={off:0,error:200,warn:300,info:400,debug:500},Dy=(t,e,A)=>{if(t){if(RO(Iu,t))return t;at(A).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Iu))}`)}};function Va(){}function nl(t,e,A){return!e||Iu[t]>Iu[A]?Va:e[t].bind(e)}const tk={error:Va,warn:Va,info:Va,debug:Va};let $y=new WeakMap;function at(t){const e=t.logger,A=t.logLevel??"off";if(!e)return tk;const r=$y.get(e);if(r&&r[0]===A)return r[1];const n={error:nl("error",e,A),warn:nl("warn",e,A),info:nl("info",e,A),debug:nl("debug",e,A)};return $y.set(e,[A,n]),n}const _n=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,A])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":A]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var xa;class VA{constructor(e,A,r){this.iterator=e,xa.set(this,void 0),this.controller=A,Ae(this,xa,r)}static fromSSEResponse(e,A,r){let n=!1;const s=r?at(r):console;async function*a(){if(n)throw new te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of Ak(e,A))if(!i){if(o.data.startsWith("[DONE]")){i=!0;continue}if(o.event===null||!o.event.startsWith("thread.")){let l;try{l=JSON.parse(o.data)}catch(u){throw s.error("Could not parse message into JSON:",o.data),s.error("From chunk:",o.raw),u}if(l&&l.error)throw new dt(void 0,l.error,void 0,e.headers);yield l}else{let l;try{l=JSON.parse(o.data)}catch(u){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),u}if(o.event=="error")throw new dt(void 0,l.error,l.message,void 0);yield{event:o.event,data:l}}}i=!0}catch(o){if(zh(o))return;throw o}finally{i||A.abort()}}return new VA(a,A,r)}static fromReadableStream(e,A,r){let n=!1;async function*s(){const i=new Sc,o=qC(e);for await(const l of o)for(const u of i.decode(l))yield u;for(const l of i.flush())yield l}async function*a(){if(n)throw new te("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of s())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(zh(o))return;throw o}finally{i||A.abort()}}return new VA(a,A,r)}[(xa=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],A=[],r=this.iterator(),n=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),A.push(a)}return s.shift()}});return[new VA(()=>n(e),this.controller,E(this,xa,"f")),new VA(()=>n(A),this.controller,E(this,xa,"f"))]}toReadableStream(){const e=this;let A;return XC({async start(){A=e[Symbol.asyncIterator]()},async pull(r){try{const{value:n,done:s}=await A.next();if(s)return r.close();const a=xm(JSON.stringify(n)+`
`);r.enqueue(a)}catch(n){r.error(n)}},async cancel(){var r;await((r=A.return)==null?void 0:r.call(A))}})}}async function*Ak(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new te("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new te("Attempted to iterate over a response with no body");const A=new nk,r=new Sc,n=qC(t.body);for await(const s of rk(n))for(const a of r.decode(s)){const i=A.decode(a);i&&(yield i)}for(const s of r.flush()){const a=A.decode(s);a&&(yield a)}}async function*rk(t){let e=new Uint8Array;for await(const A of t){if(A==null)continue;const r=A instanceof ArrayBuffer?new Uint8Array(A):typeof A=="string"?xm(A):A;let n=new Uint8Array(e.length+r.length);n.set(e),n.set(r,e.length),e=n;let s;for(;(s=ek(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class nk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[A,r,n]=sk(e,":");return n.startsWith(" ")&&(n=n.substring(1)),A==="event"?this.event=n:A==="data"&&this.data.push(n),null}}function sk(t,e){const A=t.indexOf(e);return A!==-1?[t.substring(0,A),e,t.substring(A+e.length)]:[t,"",""]}async function sb(t,e){const{response:A,requestLogID:r,retryOfRequestLogID:n,startTime:s}=e,a=await(async()=>{var c;if(e.options.stream)return at(t).debug("response",A.status,A.url,A.headers,A.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(A,e.controller,t):VA.fromSSEResponse(A,e.controller,t);if(A.status===204)return null;if(e.options.__binaryResponse)return A;const i=A.headers.get("content-type"),o=(c=i==null?void 0:i.split(";")[0])==null?void 0:c.trim();if((o==null?void 0:o.includes("application/json"))||(o==null?void 0:o.endsWith("+json"))){const d=await A.json();return ab(d,A)}return await A.text()})();return at(t).debug(`[${r}] response parsed`,_n({retryOfRequestLogID:n,url:A.url,status:A.status,body:a,durationMs:Date.now()-s})),a}function ab(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var za;class xc extends Promise{constructor(e,A,r=sb){super(n=>{n(null)}),this.responsePromise=A,this.parseResponse=r,za.set(this,void 0),Ae(this,za,e)}_thenUnwrap(e){return new xc(E(this,za,"f"),this.responsePromise,async(A,r)=>ab(e(await this.parseResponse(A,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,A]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:A,request_id:A.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(E(this,za,"f"),e))),this.parsedPromise}then(e,A){return this.parse().then(e,A)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}za=new WeakMap;var sl;class ib{constructor(e,A,r,n){sl.set(this,void 0),Ae(this,sl,e),this.options=n,this.response=A,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new te("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await E(this,sl,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(sl=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const A of e.getPaginatedItems())yield A}}class ak extends xc{constructor(e,A,r){super(e,A,async(n,s)=>new r(n,s.response,await sb(n,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const A of e)yield A}}class Tc extends ib{constructor(e,A,r,n){super(e,A,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class je extends ib{constructor(e,A,r,n){super(e,A,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),A=(r=e[e.length-1])==null?void 0:r.id;return A?{...this.options,query:{...OO(this.options.query),after:A}}:null}}const ob=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,A=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(A?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function gi(t,e,A){return ob(),new File(t,e??"unknown_file",A)}function Nl(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const lb=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Mn=async(t,e)=>({...t,body:await ok(t.body,e)}),My=new WeakMap;function ik(t){const e=typeof t=="function"?t:t.fetch,A=My.get(e);if(A)return A;const r=(async()=>{try{const n="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new n(s).text()}catch{return!0}})();return My.set(e,r),r}const ok=async(t,e)=>{if(!await ik(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const A=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,n])=>Zh(A,r,n))),A},lk=t=>t instanceof Blob&&"name"in t,Zh=async(t,e,A)=>{if(A!==void 0){if(A==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof A=="string"||typeof A=="number"||typeof A=="boolean")t.append(e,String(A));else if(A instanceof Response)t.append(e,gi([await A.blob()],Nl(A)));else if(lb(A))t.append(e,gi([await new Response(YC(A)).blob()],Nl(A)));else if(lk(A))t.append(e,A,Nl(A));else if(Array.isArray(A))await Promise.all(A.map(r=>Zh(t,e+"[]",r)));else if(typeof A=="object")await Promise.all(Object.entries(A).map(([r,n])=>Zh(t,`${e}[${r}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${A} instead`)}},ub=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",uk=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ub(t),ck=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function dk(t,e,A){if(ob(),t=await t,uk(t))return t instanceof File?t:gi([await t.arrayBuffer()],t.name);if(ck(t)){const n=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),gi(await Xh(n),e,A)}const r=await Xh(t);if(e||(e=Nl(t)),!(A!=null&&A.type)){const n=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof n=="string"&&(A={...A,type:n})}return gi(r,e,A)}async function Xh(t){var A;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(ub(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(lb(t))for await(const r of t)e.push(...await Xh(r));else{const r=(A=t==null?void 0:t.constructor)==null?void 0:A.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${fk(t)}`)}return e}function fk(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(A=>`"${A}"`).join(", ")}]`}class re{constructor(e){this._client=e}}function cb(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const jy=Object.freeze(Object.create(null)),hk=(t=cb)=>function(A,...r){if(A.length===1)return A[0];let n=!1;const s=[],a=A.reduce((u,c,d)=>{var w;/[?#]/.test(c)&&(n=!0);const h=r[d];let f=(n?encodeURIComponent:t)(""+h);return d!==r.length&&(h==null||typeof h=="object"&&h.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??jy)??jy))==null?void 0:w.toString))&&(f=h+"",s.push({start:u.length+c.length,length:f.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),u+c+(d===r.length?"":f)},""),i=a.split(/[?#]/,1)[0],o=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;(l=o.exec(i))!==null;)s.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(s.sort((u,c)=>u.start-c.start),s.length>0){let u=0;const c=s.reduce((d,h)=>{const f=" ".repeat(h.start-u),w="^".repeat(h.length);return u=h.start+h.length,d+f+w},"");throw new te(`Path parameters result in path with invalid segments:
${s.map(d=>d.error).join(`
`)}
${a}
${c}`)}return a},M=hk(cb);let db=class extends re{list(e,A={},r){return this._client.getAPIList(M`/chat/completions/${e}/messages`,je,{query:A,...r})}};function Su(t){return t!==void 0&&"function"in t&&t.function!==void 0}function pk(t,e){const A={...t};return Object.defineProperties(A,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),A}function Tm(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function oo(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function mk(t,e){return!e||!fb(e)?{...t,choices:t.choices.map(A=>(hb(A.message.tool_calls),{...A,message:{...A.message,parsed:null,...A.message.tool_calls?{tool_calls:A.message.tool_calls}:void 0}}))}:Om(t,e)}function Om(t,e){const A=t.choices.map(r=>{var n;if(r.finish_reason==="length")throw new JC;if(r.finish_reason==="content_filter")throw new ZC;return hb(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((n=r.message.tool_calls)==null?void 0:n.map(s=>wk(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?gk(e,r.message.content):null}}});return{...t,choices:A}}function gk(t,e){var A,r;return((A=t.response_format)==null?void 0:A.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function wk(t,e){var r;const A=(r=t.tools)==null?void 0:r.find(n=>{var s;return Su(n)&&((s=n.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:oo(A)?A.$parseRaw(e.function.arguments):A!=null&&A.function.strict?JSON.parse(e.function.arguments):null}}}function yk(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const A=(r=t.tools)==null?void 0:r.find(n=>{var s;return Su(n)&&((s=n.function)==null?void 0:s.name)===e.function.name});return Su(A)&&(oo(A)||(A==null?void 0:A.function.strict)||!1)}function fb(t){var e;return Tm(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(A=>oo(A)||A.type==="function"&&A.function.strict===!0))??!1}function hb(t){for(const e of t||[])if(e.type!=="function")throw new te(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Bk(t){for(const e of t??[]){if(e.type!=="function")throw new te(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new te(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const xu=t=>(t==null?void 0:t.role)==="assistant",pb=t=>(t==null?void 0:t.role)==="tool";var Yh,Dl,$l,Wa,Ja,Ml,Za,nr,Xa,Tu,Ou,ps,mb;class km{constructor(){Yh.add(this),this.controller=new AbortController,Dl.set(this,void 0),$l.set(this,()=>{}),Wa.set(this,()=>{}),Ja.set(this,void 0),Ml.set(this,()=>{}),Za.set(this,()=>{}),nr.set(this,{}),Xa.set(this,!1),Tu.set(this,!1),Ou.set(this,!1),ps.set(this,!1),Ae(this,Dl,new Promise((e,A)=>{Ae(this,$l,e,"f"),Ae(this,Wa,A,"f")})),Ae(this,Ja,new Promise((e,A)=>{Ae(this,Ml,e,"f"),Ae(this,Za,A,"f")})),E(this,Dl,"f").catch(()=>{}),E(this,Ja,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},E(this,Yh,"m",mb).bind(this))},0)}_connected(){this.ended||(E(this,$l,"f").call(this),this._emit("connect"))}get ended(){return E(this,Xa,"f")}get errored(){return E(this,Tu,"f")}get aborted(){return E(this,Ou,"f")}abort(){this.controller.abort()}on(e,A){return(E(this,nr,"f")[e]||(E(this,nr,"f")[e]=[])).push({listener:A}),this}off(e,A){const r=E(this,nr,"f")[e];if(!r)return this;const n=r.findIndex(s=>s.listener===A);return n>=0&&r.splice(n,1),this}once(e,A){return(E(this,nr,"f")[e]||(E(this,nr,"f")[e]=[])).push({listener:A,once:!0}),this}emitted(e){return new Promise((A,r)=>{Ae(this,ps,!0),e!=="error"&&this.once("error",r),this.once(e,A)})}async done(){Ae(this,ps,!0),await E(this,Ja,"f")}_emit(e,...A){if(E(this,Xa,"f"))return;e==="end"&&(Ae(this,Xa,!0),E(this,Ml,"f").call(this));const r=E(this,nr,"f")[e];if(r&&(E(this,nr,"f")[e]=r.filter(n=>!n.once),r.forEach(({listener:n})=>n(...A))),e==="abort"){const n=A[0];!E(this,ps,"f")&&!(r!=null&&r.length)&&Promise.reject(n),E(this,Wa,"f").call(this,n),E(this,Za,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=A[0];!E(this,ps,"f")&&!(r!=null&&r.length)&&Promise.reject(n),E(this,Wa,"f").call(this,n),E(this,Za,"f").call(this,n),this._emit("end")}}_emitFinal(){}}Dl=new WeakMap,$l=new WeakMap,Wa=new WeakMap,Ja=new WeakMap,Ml=new WeakMap,Za=new WeakMap,nr=new WeakMap,Xa=new WeakMap,Tu=new WeakMap,Ou=new WeakMap,ps=new WeakMap,Yh=new WeakSet,mb=function(e){if(Ae(this,Tu,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Zt),e instanceof Zt)return Ae(this,Ou,!0),this._emit("abort",e);if(e instanceof te)return this._emit("error",e);if(e instanceof Error){const A=new te(e.message);return A.cause=e,this._emit("error",A)}return this._emit("error",new te(String(e)))};function _k(t){return typeof t.parse=="function"}var vt,qh,ku,ep,tp,Ap,gb,wb;const vk=10;class yb extends km{constructor(){super(...arguments),vt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const A=(r=e.choices[0])==null?void 0:r.message;return A&&this._addMessage(A),e}_addMessage(e,A=!0){if("content"in e||(e.content=null),this.messages.push(e),A){if(this._emit("message",e),pb(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(xu(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new te("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),E(this,vt,"m",qh).call(this)}async finalMessage(){return await this.done(),E(this,vt,"m",ku).call(this)}async finalFunctionToolCall(){return await this.done(),E(this,vt,"m",ep).call(this)}async finalFunctionToolCallResult(){return await this.done(),E(this,vt,"m",tp).call(this)}async totalUsage(){return await this.done(),E(this,vt,"m",Ap).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const A=E(this,vt,"m",ku).call(this);A&&this._emit("finalMessage",A);const r=E(this,vt,"m",qh).call(this);r&&this._emit("finalContent",r);const n=E(this,vt,"m",ep).call(this);n&&this._emit("finalFunctionToolCall",n);const s=E(this,vt,"m",tp).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",E(this,vt,"m",Ap).call(this))}async _createChatCompletion(e,A,r){const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),E(this,vt,"m",gb).call(this,A);const s=await e.chat.completions.create({...A,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Om(s,A))}async _runChatCompletion(e,A,r){for(const n of A.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,A,r)}async _runTools(e,A,r){var h,f,w;const n="tool",{tool_choice:s="auto",stream:a,...i}=A,o=typeof s!="string"&&s.type==="function"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:l=vk}=r||{},u=A.tools.map(y=>{if(oo(y)){if(!y.$callback)throw new te("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),c={};for(const y of u)y.type==="function"&&(c[y.function.name||y.function.function.name]=y.function);const d="tools"in A?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of A.messages)this._addMessage(y,!1);for(let y=0;y<l;++y){const m=(f=(await this._createChatCompletion(e,{...i,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!m)throw new te("missing message in ChatCompletion response");if(!((w=m.tool_calls)!=null&&w.length))return;for(const g of m.tool_calls){if(g.type!=="function")continue;const B=g.id,{name:_,arguments:v}=g.function,C=c[_];if(C){if(o&&o!==_){const j=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:B,content:j});continue}}else{const j=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(c).map(ne=>JSON.stringify(ne)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:B,content:j});continue}let Q;try{Q=_k(C)?await C.parse(v):v}catch(j){const ne=j instanceof Error?j.message:String(j);this._addMessage({role:n,tool_call_id:B,content:ne});continue}const S=await C.function(Q,this),R=E(this,vt,"m",wb).call(this,S);if(this._addMessage({role:n,tool_call_id:B,content:R}),o)return}}}}vt=new WeakSet,qh=function(){return E(this,vt,"m",ku).call(this).content??null},ku=function(){let e=this.messages.length;for(;e-- >0;){const A=this.messages[e];if(xu(A))return{...A,content:A.content??null,refusal:A.refusal??null}}throw new te("stream ended without producing a ChatCompletionMessage with role=assistant")},ep=function(){var e,A;for(let r=this.messages.length-1;r>=0;r--){const n=this.messages[r];if(xu(n)&&((e=n==null?void 0:n.tool_calls)!=null&&e.length))return(A=n.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:A.function}},tp=function(){for(let e=this.messages.length-1;e>=0;e--){const A=this.messages[e];if(pb(A)&&A.content!=null&&typeof A.content=="string"&&this.messages.some(r=>{var n;return r.role==="assistant"&&((n=r.tool_calls)==null?void 0:n.some(s=>s.type==="function"&&s.id===A.tool_call_id))}))return A.content}},Ap=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:A}of this._chatCompletions)A&&(e.completion_tokens+=A.completion_tokens,e.prompt_tokens+=A.prompt_tokens,e.total_tokens+=A.total_tokens);return e},gb=function(e){if(e.n!=null&&e.n>1)throw new te("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},wb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Rm extends yb{static runTools(e,A,r){const n=new Rm,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,A,s)),n}_addMessage(e,A=!0){super._addMessage(e,A),xu(e)&&e.content&&this._emit("content",e.content)}}const Bb=1,_b=2,vb=4,Cb=8,bb=16,Eb=32,Qb=64,Ub=128,Fb=256,Ib=Ub|Fb,Sb=bb|Eb|Ib|Qb,xb=Bb|_b|Sb,Tb=vb|Cb,Ck=xb|Tb,qe={STR:Bb,NUM:_b,ARR:vb,OBJ:Cb,NULL:bb,BOOL:Eb,NAN:Qb,INFINITY:Ub,MINUS_INFINITY:Fb,INF:Ib,SPECIAL:Sb,ATOM:xb,COLLECTION:Tb,ALL:Ck};class bk extends Error{}class Ek extends Error{}function Qk(t,e=qe.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Uk(t.trim(),e)}const Uk=(t,e)=>{const A=t.length;let r=0;const n=d=>{throw new bk(`${d} at position ${r}`)},s=d=>{throw new Ek(`${d} at position ${r}`)},a=()=>(c(),r>=A&&n("Unexpected end of input"),t[r]==='"'?i():t[r]==="{"?o():t[r]==="["?l():t.substring(r,r+4)==="null"||qe.NULL&e&&A-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||qe.BOOL&e&&A-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||qe.BOOL&e&&A-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||qe.INFINITY&e&&A-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||qe.MINUS_INFINITY&e&&1<A-r&&A-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||qe.NAN&e&&A-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):u()),i=()=>{const d=r;let h=!1;for(r++;r<A&&(t[r]!=='"'||h&&t[r-1]==="\\");)h=t[r]==="\\"?!h:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(d,++r-Number(h)))}catch(f){s(String(f))}else if(qe.STR&e)try{return JSON.parse(t.substring(d,r-Number(h))+'"')}catch{return JSON.parse(t.substring(d,t.lastIndexOf("\\"))+'"')}n("Unterminated string literal")},o=()=>{r++,c();const d={};try{for(;t[r]!=="}";){if(c(),r>=A&&qe.OBJ&e)return d;const h=i();c(),r++;try{const f=a();Object.defineProperty(d,h,{value:f,writable:!0,enumerable:!0,configurable:!0})}catch(f){if(qe.OBJ&e)return d;throw f}c(),t[r]===","&&r++}}catch{if(qe.OBJ&e)return d;n("Expected '}' at end of object")}return r++,d},l=()=>{r++;const d=[];try{for(;t[r]!=="]";)d.push(a()),c(),t[r]===","&&r++}catch{if(qe.ARR&e)return d;n("Expected ']' at end of array")}return r++,d},u=()=>{if(r===0){t==="-"&&qe.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(t)}catch(h){if(qe.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(h))}}const d=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==A&&!(qe.NUM&e)&&n("Unterminated number literal");try{return JSON.parse(t.substring(d,r))}catch{t.substring(d,r)==="-"&&qe.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(t.substring(d,t.lastIndexOf("e")))}catch(f){s(String(f))}}},c=()=>{for(;r<A&&` 
\r	`.includes(t[r]);)r++};return a()},Ky=t=>Qk(t,qe.ALL^qe.NUM);var Ke,rr,ss,Cr,Yd,al,qd,ef,tf,il,Af,Gy;class Vi extends yb{constructor(e){super(),Ke.add(this),rr.set(this,void 0),ss.set(this,void 0),Cr.set(this,void 0),Ae(this,rr,e),Ae(this,ss,[])}get currentChatCompletionSnapshot(){return E(this,Cr,"f")}static fromReadableStream(e){const A=new Vi(null);return A._run(()=>A._fromReadableStream(e)),A}static createChatCompletion(e,A,r){const n=new Vi(A);return n._run(()=>n._runChatCompletion(e,{...A,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,A,r){var a;super._createChatCompletion;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),E(this,Ke,"m",Yd).call(this);const s=await e.chat.completions.create({...A,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const i of s)E(this,Ke,"m",qd).call(this,i);if((a=s.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(E(this,Ke,"m",il).call(this))}async _fromReadableStream(e,A){var a;const r=A==null?void 0:A.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),E(this,Ke,"m",Yd).call(this),this._connected();const n=VA.fromReadableStream(e,this.controller);let s;for await(const i of n)s&&s!==i.id&&this._addChatCompletion(E(this,Ke,"m",il).call(this)),E(this,Ke,"m",qd).call(this,i),s=i.id;if((a=n.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(E(this,Ke,"m",il).call(this))}[(rr=new WeakMap,ss=new WeakMap,Cr=new WeakMap,Ke=new WeakSet,Yd=function(){this.ended||Ae(this,Cr,void 0)},al=function(A){let r=E(this,ss,"f")[A.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},E(this,ss,"f")[A.index]=r,r)},qd=function(A){var n,s,a,i,o,l,u,c,d,h,f,w,y,p,m;if(this.ended)return;const r=E(this,Ke,"m",Gy).call(this,A);this._emit("chunk",A,r);for(const g of A.choices){const B=r.choices[g.index];g.delta.content!=null&&((n=B.message)==null?void 0:n.role)==="assistant"&&((s=B.message)!=null&&s.content)&&(this._emit("content",g.delta.content,B.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:B.message.content,parsed:B.message.parsed})),g.delta.refusal!=null&&((a=B.message)==null?void 0:a.role)==="assistant"&&((i=B.message)!=null&&i.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:B.message.refusal}),((o=g.logprobs)==null?void 0:o.content)!=null&&((l=B.message)==null?void 0:l.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=g.logprobs)==null?void 0:u.content,snapshot:((c=B.logprobs)==null?void 0:c.content)??[]}),((d=g.logprobs)==null?void 0:d.refusal)!=null&&((h=B.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(f=g.logprobs)==null?void 0:f.refusal,snapshot:((w=B.logprobs)==null?void 0:w.refusal)??[]});const _=E(this,Ke,"m",al).call(this,B);B.finish_reason&&(E(this,Ke,"m",tf).call(this,B),_.current_tool_call_index!=null&&E(this,Ke,"m",ef).call(this,B,_.current_tool_call_index));for(const v of g.delta.tool_calls??[])_.current_tool_call_index!==v.index&&(E(this,Ke,"m",tf).call(this,B),_.current_tool_call_index!=null&&E(this,Ke,"m",ef).call(this,B,_.current_tool_call_index)),_.current_tool_call_index=v.index;for(const v of g.delta.tool_calls??[]){const C=(y=B.message.tool_calls)==null?void 0:y[v.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(p=C.function)==null?void 0:p.name,index:v.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((m=v.function)==null?void 0:m.arguments)??""}):(C==null||C.type,void 0))}}},ef=function(A,r){var a,i,o;if(E(this,Ke,"m",al).call(this,A).done_tool_calls.has(r))return;const s=(a=A.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const l=(o=(i=E(this,rr,"f"))==null?void 0:i.tools)==null?void 0:o.find(u=>Su(u)&&u.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:oo(l)?l.$parseRaw(s.function.arguments):l!=null&&l.function.strict?JSON.parse(s.function.arguments):null})}else s.type},tf=function(A){var n,s;const r=E(this,Ke,"m",al).call(this,A);if(A.message.content&&!r.content_done){r.content_done=!0;const a=E(this,Ke,"m",Af).call(this);this._emit("content.done",{content:A.message.content,parsed:a?a.$parseRaw(A.message.content):null})}A.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:A.message.refusal})),(n=A.logprobs)!=null&&n.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:A.logprobs.content})),(s=A.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:A.logprobs.refusal}))},il=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");const A=E(this,Cr,"f");if(!A)throw new te("request ended without sending any chunks");return Ae(this,Cr,void 0),Ae(this,ss,[]),Fk(A,E(this,rr,"f"))},Af=function(){var r;const A=(r=E(this,rr,"f"))==null?void 0:r.response_format;return Tm(A)?A:null},Gy=function(A){var r,n,s,a;let i=E(this,Cr,"f");const{choices:o,...l}=A;i?Object.assign(i,l):i=Ae(this,Cr,{...l,choices:[]});for(const{delta:u,finish_reason:c,index:d,logprobs:h=null,...f}of A.choices){let w=i.choices[d];if(w||(w=i.choices[d]={finish_reason:c,index:d,message:{},logprobs:h,...f}),h)if(!w.logprobs)w.logprobs=Object.assign({},h);else{const{content:v,refusal:C,...Q}=h;Object.assign(w.logprobs,Q),v&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...v)),C&&((n=w.logprobs).refusal??(n.refusal=[]),w.logprobs.refusal.push(...C))}if(c&&(w.finish_reason=c,E(this,rr,"f")&&fb(E(this,rr,"f")))){if(c==="length")throw new JC;if(c==="content_filter")throw new ZC}if(Object.assign(w,f),!u)continue;const{content:y,refusal:p,function_call:m,role:g,tool_calls:B,..._}=u;if(Object.assign(w.message,_),p&&(w.message.refusal=(w.message.refusal||"")+p),g&&(w.message.role=g),m&&(w.message.function_call?(m.name&&(w.message.function_call.name=m.name),m.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=m.arguments)):w.message.function_call=m),y&&(w.message.content=(w.message.content||"")+y,!w.message.refusal&&E(this,Ke,"m",Af).call(this)&&(w.message.parsed=Ky(w.message.content))),B){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:v,id:C,type:Q,function:S,...R}of B){const j=(a=w.message.tool_calls)[v]??(a[v]={});Object.assign(j,R),C&&(j.id=C),Q&&(j.type=Q),S&&(j.function??(j.function={name:S.name??"",arguments:""})),S!=null&&S.name&&(j.function.name=S.name),S!=null&&S.arguments&&(j.function.arguments+=S.arguments,yk(E(this,rr,"f"),j)&&(j.function.parsed_arguments=Ky(j.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("chunk",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new VA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Fk(t,e){const{id:A,choices:r,created:n,model:s,system_fingerprint:a,...i}=t,o={...i,id:A,choices:r.map(({message:l,finish_reason:u,index:c,logprobs:d,...h})=>{if(!u)throw new te(`missing finish_reason for choice ${c}`);const{content:f=null,function_call:w,tool_calls:y,...p}=l,m=l.role;if(!m)throw new te(`missing role for choice ${c}`);if(w){const{arguments:g,name:B}=w;if(g==null)throw new te(`missing function_call.arguments for choice ${c}`);if(!B)throw new te(`missing function_call.name for choice ${c}`);return{...h,message:{content:f,function_call:{arguments:g,name:B},role:m,refusal:l.refusal??null},finish_reason:u,index:c,logprobs:d}}return y?{...h,index:c,finish_reason:u,logprobs:d,message:{...p,role:m,content:f,refusal:l.refusal??null,tool_calls:y.map((g,B)=>{const{function:_,type:v,id:C,...Q}=g,{arguments:S,name:R,...j}=_||{};if(C==null)throw new te(`missing choices[${c}].tool_calls[${B}].id
${ol(t)}`);if(v==null)throw new te(`missing choices[${c}].tool_calls[${B}].type
${ol(t)}`);if(R==null)throw new te(`missing choices[${c}].tool_calls[${B}].function.name
${ol(t)}`);if(S==null)throw new te(`missing choices[${c}].tool_calls[${B}].function.arguments
${ol(t)}`);return{...Q,id:C,type:v,function:{...j,name:R,arguments:S}}})}}:{...h,message:{...p,content:f,role:m,refusal:l.refusal??null},finish_reason:u,index:c,logprobs:d}}),created:n,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return mk(o,e)}function ol(t){return JSON.stringify(t)}class Ru extends Vi{static fromReadableStream(e){const A=new Ru(null);return A._run(()=>A._fromReadableStream(e)),A}static runTools(e,A,r){const n=new Ru(A),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,A,s)),n}}let Lm=class extends re{constructor(){super(...arguments),this.messages=new db(this._client)}create(e,A){return this._client.post("/chat/completions",{body:e,...A,stream:e.stream??!1})}retrieve(e,A){return this._client.get(M`/chat/completions/${e}`,A)}update(e,A,r){return this._client.post(M`/chat/completions/${e}`,{body:A,...r})}list(e={},A){return this._client.getAPIList("/chat/completions",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/chat/completions/${e}`,A)}parse(e,A){return Bk(e.tools),this._client.chat.completions.create(e,{...A,headers:{...A==null?void 0:A.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Om(r,e))}runTools(e,A){return e.stream?Ru.runTools(this._client,e,A):Rm.runTools(this._client,e,A)}stream(e,A){return Vi.createChatCompletion(this._client,e,A)}};Lm.Messages=db;class Pm extends re{constructor(){super(...arguments),this.completions=new Lm(this._client)}}Pm.Completions=Lm;const Ob=Symbol("brand.privateNullableHeaders");function*Ik(t){if(!t)return;if(Ob in t){const{values:r,nulls:n}=t;yield*r.entries();for(const s of n)yield[s,null];return}let e=!1,A;t instanceof Headers?A=t.entries():Sy(t)?A=t:(e=!0,A=Object.entries(t??{}));for(let r of A){const n=r[0];if(typeof n!="string")throw new TypeError("expected header name to be a string");const s=Sy(r[1])?r[1]:[r[1]];let a=!1;for(const i of s)i!==void 0&&(e&&!a&&(a=!0,yield[n,null]),yield[n,i])}}const ee=t=>{const e=new Headers,A=new Set;for(const r of t){const n=new Set;for(const[s,a]of Ik(r)){const i=s.toLowerCase();n.has(i)||(e.delete(s),n.add(i)),a===null?(e.delete(s),A.add(i)):(e.append(s,a),A.delete(i))}}return{[Ob]:!0,values:e,nulls:A}};class kb extends re{create(e,A){return this._client.post("/audio/speech",{body:e,...A,headers:ee([{Accept:"application/octet-stream"},A==null?void 0:A.headers]),__binaryResponse:!0})}}class Rb extends re{create(e,A){return this._client.post("/audio/transcriptions",Mn({body:e,...A,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Lb extends re{create(e,A){return this._client.post("/audio/translations",Mn({body:e,...A,__metadata:{model:e.model}},this._client))}}class lo extends re{constructor(){super(...arguments),this.transcriptions=new Rb(this._client),this.translations=new Lb(this._client),this.speech=new kb(this._client)}}lo.Transcriptions=Rb;lo.Translations=Lb;lo.Speech=kb;class Pb extends re{create(e,A){return this._client.post("/batches",{body:e,...A})}retrieve(e,A){return this._client.get(M`/batches/${e}`,A)}list(e={},A){return this._client.getAPIList("/batches",je,{query:e,...A})}cancel(e,A){return this._client.post(M`/batches/${e}/cancel`,A)}}class Hb extends re{create(e,A){return this._client.post("/assistants",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/assistants/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/assistants/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},A){return this._client.getAPIList("/assistants",je,{query:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}delete(e,A){return this._client.delete(M`/assistants/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Nb extends re{create(e,A){return this._client.post("/realtime/sessions",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Db extends re{create(e,A){return this._client.post("/realtime/transcription_sessions",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}}class Oc extends re{constructor(){super(...arguments),this.sessions=new Nb(this._client),this.transcriptionSessions=new Db(this._client)}}Oc.Sessions=Nb;Oc.TranscriptionSessions=Db;class $b extends re{create(e,A,r){return this._client.post(M`/threads/${e}/messages`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{thread_id:n}=A;return this._client.get(M`/threads/${n}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/messages/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/threads/${e}/messages`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A,r){const{thread_id:n}=A;return this._client.delete(M`/threads/${n}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Mb extends re{retrieve(e,A,r){const{thread_id:n,run_id:s,...a}=A;return this._client.get(M`/threads/${n}/runs/${s}/steps/${e}`,{query:a,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A,r){const{thread_id:n,...s}=A;return this._client.getAPIList(M`/threads/${n}/runs/${e}/steps`,je,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Sk=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),A=e.length,r=new Uint8Array(A);for(let n=0;n<A;n++)r[n]=e.charCodeAt(n);return Array.from(new Float32Array(r.buffer))}};var rf={};const as=t=>{var e,A,r,n;if(typeof globalThis.process<"u")return((e=rf==null?void 0:rf[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(n=(r=(A=globalThis.Deno.env)==null?void 0:A.get)==null?void 0:r.call(A,t))==null?void 0:n.trim()};var it,Fn,rp,jA,jl,QA,In,xs,Cn,Lu,zt,Kl,Gl,wi,Ya,qa,Vy,zy,Wy,Jy,Zy,Xy,Yy;class yi extends km{constructor(){super(...arguments),it.add(this),rp.set(this,[]),jA.set(this,{}),jl.set(this,{}),QA.set(this,void 0),In.set(this,void 0),xs.set(this,void 0),Cn.set(this,void 0),Lu.set(this,void 0),zt.set(this,void 0),Kl.set(this,void 0),Gl.set(this,void 0),wi.set(this,void 0)}[(rp=new WeakMap,jA=new WeakMap,jl=new WeakMap,QA=new WeakMap,In=new WeakMap,xs=new WeakMap,Cn=new WeakMap,Lu=new WeakMap,zt=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,wi=new WeakMap,it=new WeakSet,Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("event",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const A=new Fn;return A._run(()=>A._fromReadableStream(e)),A}async _fromReadableStream(e,A){var s;const r=A==null?void 0:A.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=VA.fromReadableStream(e,this.controller);for await(const a of n)E(this,it,"m",Ya).call(this,a);if((s=n.controller.signal)!=null&&s.aborted)throw new Zt;return this._addRun(E(this,it,"m",qa).call(this))}toReadableStream(){return new VA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,A,r,n){const s=new Fn;return s._run(()=>s._runToolAssistantStream(e,A,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,A,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.submitToolOutputs(A,a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)E(this,it,"m",Ya).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Zt;return this._addRun(E(this,it,"m",qa).call(this))}static createThreadAssistantStream(e,A,r){const n=new Fn;return n._run(()=>n._threadAssistantStream(e,A,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,A,r,n){const s=new Fn;return s._run(()=>s._runAssistantStream(e,A,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return E(this,Kl,"f")}currentRun(){return E(this,Gl,"f")}currentMessageSnapshot(){return E(this,QA,"f")}currentRunStepSnapshot(){return E(this,wi,"f")}async finalRunSteps(){return await this.done(),Object.values(E(this,jA,"f"))}async finalMessages(){return await this.done(),Object.values(E(this,jl,"f"))}async finalRun(){if(await this.done(),!E(this,In,"f"))throw Error("Final run was not received.");return E(this,In,"f")}async _createThreadAssistantStream(e,A,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const s={...A,stream:!0},a=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const o of a)E(this,it,"m",Ya).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new Zt;return this._addRun(E(this,it,"m",qa).call(this))}async _createAssistantStream(e,A,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.create(A,a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)E(this,it,"m",Ya).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Zt;return this._addRun(E(this,it,"m",qa).call(this))}static accumulateDelta(e,A){for(const[r,n]of Object.entries(A)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let s=e[r];if(s==null){e[r]=n;continue}if(r==="index"||r==="type"){e[r]=n;continue}if(typeof s=="string"&&typeof n=="string")s+=n;else if(typeof s=="number"&&typeof n=="number")s+=n;else if(Jd(s)&&Jd(n))s=this.accumulateDelta(s,n);else if(Array.isArray(s)&&Array.isArray(n)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...n);continue}for(const a of n){if(!Jd(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const i=a.index;if(i==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof i!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${i}`);const o=s[i];o==null?s.push(a):s[i]=this.accumulateDelta(o,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,A,r){return await this._createThreadAssistantStream(A,e,r)}async _runAssistantStream(e,A,r,n){return await this._createAssistantStream(A,e,r,n)}async _runToolAssistantStream(e,A,r,n){return await this._createToolAssistantStream(A,e,r,n)}}Fn=yi,Ya=function(e){if(!this.ended)switch(Ae(this,Kl,e),E(this,it,"m",Wy).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":E(this,it,"m",Yy).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":E(this,it,"m",zy).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":E(this,it,"m",Vy).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},qa=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");if(!E(this,In,"f"))throw Error("Final run has not been received");return E(this,In,"f")},Vy=function(e){const[A,r]=E(this,it,"m",Zy).call(this,e,E(this,QA,"f"));Ae(this,QA,A),E(this,jl,"f")[A.id]=A;for(const n of r){const s=A.content[n.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,A),e.data.delta.content)for(const n of e.data.delta.content){if(n.type=="text"&&n.text){let s=n.text,a=A.content[n.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=E(this,xs,"f")){if(E(this,Cn,"f"))switch(E(this,Cn,"f").type){case"text":this._emit("textDone",E(this,Cn,"f").text,E(this,QA,"f"));break;case"image_file":this._emit("imageFileDone",E(this,Cn,"f").image_file,E(this,QA,"f"));break}Ae(this,xs,n.index)}Ae(this,Cn,A.content[n.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(E(this,xs,"f")!==void 0){const n=e.data.content[E(this,xs,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,E(this,QA,"f"));break;case"text":this._emit("textDone",n.text,E(this,QA,"f"));break}}E(this,QA,"f")&&this._emit("messageDone",e.data),Ae(this,QA,void 0)}},zy=function(e){const A=E(this,it,"m",Jy).call(this,e);switch(Ae(this,wi,A),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&A.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==E(this,Lu,"f")?this._emit("toolCallDelta",s,A.step_details.tool_calls[s.index]):(E(this,zt,"f")&&this._emit("toolCallDone",E(this,zt,"f")),Ae(this,Lu,s.index),Ae(this,zt,A.step_details.tool_calls[s.index]),E(this,zt,"f")&&this._emit("toolCallCreated",E(this,zt,"f")));this._emit("runStepDelta",e.data.delta,A);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ae(this,wi,void 0),e.data.step_details.type=="tool_calls"&&E(this,zt,"f")&&(this._emit("toolCallDone",E(this,zt,"f")),Ae(this,zt,void 0)),this._emit("runStepDone",e.data,A);break}},Wy=function(e){E(this,rp,"f").push(e),this._emit("event",e)},Jy=function(e){switch(e.event){case"thread.run.step.created":return E(this,jA,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let A=E(this,jA,"f")[e.data.id];if(!A)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const n=Fn.accumulateDelta(A,r.delta);E(this,jA,"f")[e.data.id]=n}return E(this,jA,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":E(this,jA,"f")[e.data.id]=e.data;break}if(E(this,jA,"f")[e.data.id])return E(this,jA,"f")[e.data.id];throw new Error("No snapshot available")},Zy=function(e,A){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!A)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(const s of n.delta.content)if(s.index in A.content){let a=A.content[s.index];A.content[s.index]=E(this,it,"m",Xy).call(this,s,a)}else A.content[s.index]=s,r.push(s);return[A,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(A)return[A,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Xy=function(e,A){return Fn.accumulateDelta(A,e)},Yy=function(e){switch(Ae(this,Gl,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ae(this,In,e.data),E(this,zt,"f")&&(this._emit("toolCallDone",E(this,zt,"f")),Ae(this,zt,void 0));break}};let Hm=class extends re{constructor(){super(...arguments),this.steps=new Mb(this._client)}create(e,A,r){const{include:n,...s}=A;return this._client.post(M`/threads/${e}/runs`,{query:{include:n},body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:A.stream??!1})}retrieve(e,A,r){const{thread_id:n}=A;return this._client.get(M`/threads/${n}/runs/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/runs/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/threads/${e}/runs`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,A,r){const{thread_id:n}=A;return this._client.post(M`/threads/${n}/runs/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,A,r){return yi.createAssistantStream(e,this._client.beta.threads.runs,A,r)}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(e,A,{...r,headers:{...r==null?void 0:r.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,A,r){return yi.createAssistantStream(e,this._client.beta.threads.runs,A,r)}submitToolOutputs(e,A,r){const{thread_id:n,...s}=A;return this._client.post(M`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:A.stream??!1})}async submitToolOutputsAndPoll(e,A,r){const n=await this.submitToolOutputs(e,A,r);return await this.poll(n.id,A,r)}submitToolOutputsStream(e,A,r){return yi.createToolAssistantStream(e,this._client.beta.threads.runs,A,r)}};Hm.Steps=Mb;class kc extends re{constructor(){super(...arguments),this.runs=new Hm(this._client),this.messages=new $b(this._client)}create(e={},A){return this._client.post("/threads",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/threads/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/threads/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A){return this._client.delete(M`/threads/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}createAndRun(e,A){return this._client.post("/threads/runs",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers]),stream:e.stream??!1})}async createAndRunPoll(e,A){const r=await this.createAndRun(e,A);return await this.runs.poll(r.id,{thread_id:r.thread_id},A)}createAndRunStream(e,A){return yi.createThreadAssistantStream(e,this._client.beta.threads,A)}}kc.Runs=Hm;kc.Messages=$b;class uo extends re{constructor(){super(...arguments),this.realtime=new Oc(this._client),this.assistants=new Hb(this._client),this.threads=new kc(this._client)}}uo.Realtime=Oc;uo.Assistants=Hb;uo.Threads=kc;class jb extends re{create(e,A){return this._client.post("/completions",{body:e,...A,stream:e.stream??!1})}}class Kb extends re{retrieve(e,A,r){const{container_id:n}=A;return this._client.get(M`/containers/${n}/files/${e}/content`,{...r,headers:ee([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let Nm=class extends re{constructor(){super(...arguments),this.content=new Kb(this._client)}create(e,A,r){return this._client.post(M`/containers/${e}/files`,Mn({body:A,...r},this._client))}retrieve(e,A,r){const{container_id:n}=A;return this._client.get(M`/containers/${n}/files/${e}`,r)}list(e,A={},r){return this._client.getAPIList(M`/containers/${e}/files`,je,{query:A,...r})}delete(e,A,r){const{container_id:n}=A;return this._client.delete(M`/containers/${n}/files/${e}`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}};Nm.Content=Kb;class Dm extends re{constructor(){super(...arguments),this.files=new Nm(this._client)}create(e,A){return this._client.post("/containers",{body:e,...A})}retrieve(e,A){return this._client.get(M`/containers/${e}`,A)}list(e={},A){return this._client.getAPIList("/containers",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/containers/${e}`,{...A,headers:ee([{Accept:"*/*"},A==null?void 0:A.headers])})}}Dm.Files=Nm;class Gb extends re{create(e,A){const r=!!e.encoding_format;let n=r?e.encoding_format:"base64";r&&at(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:n},...A});return r?s:(at(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(i=>{const o=i.embedding;i.embedding=Sk(o)}),a)))}}class Vb extends re{retrieve(e,A,r){const{eval_id:n,run_id:s}=A;return this._client.get(M`/evals/${n}/runs/${s}/output_items/${e}`,r)}list(e,A,r){const{eval_id:n,...s}=A;return this._client.getAPIList(M`/evals/${n}/runs/${e}/output_items`,je,{query:s,...r})}}class $m extends re{constructor(){super(...arguments),this.outputItems=new Vb(this._client)}create(e,A,r){return this._client.post(M`/evals/${e}/runs`,{body:A,...r})}retrieve(e,A,r){const{eval_id:n}=A;return this._client.get(M`/evals/${n}/runs/${e}`,r)}list(e,A={},r){return this._client.getAPIList(M`/evals/${e}/runs`,je,{query:A,...r})}delete(e,A,r){const{eval_id:n}=A;return this._client.delete(M`/evals/${n}/runs/${e}`,r)}cancel(e,A,r){const{eval_id:n}=A;return this._client.post(M`/evals/${n}/runs/${e}`,r)}}$m.OutputItems=Vb;class Mm extends re{constructor(){super(...arguments),this.runs=new $m(this._client)}create(e,A){return this._client.post("/evals",{body:e,...A})}retrieve(e,A){return this._client.get(M`/evals/${e}`,A)}update(e,A,r){return this._client.post(M`/evals/${e}`,{body:A,...r})}list(e={},A){return this._client.getAPIList("/evals",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/evals/${e}`,A)}}Mm.Runs=$m;let zb=class extends re{create(e,A){return this._client.post("/files",Mn({body:e,...A},this._client))}retrieve(e,A){return this._client.get(M`/files/${e}`,A)}list(e={},A){return this._client.getAPIList("/files",je,{query:e,...A})}delete(e,A){return this._client.delete(M`/files/${e}`,A)}content(e,A){return this._client.get(M`/files/${e}/content`,{...A,headers:ee([{Accept:"application/binary"},A==null?void 0:A.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:A=5e3,maxWait:r=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!n.has(a.status);)if(await io(A),a=await this.retrieve(e),Date.now()-s>r)throw new Ic({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class Wb extends re{}let Jb=class extends re{run(e,A){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...A})}validate(e,A){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...A})}};class jm extends re{constructor(){super(...arguments),this.graders=new Jb(this._client)}}jm.Graders=Jb;class Zb extends re{create(e,A,r){return this._client.getAPIList(M`/fine_tuning/checkpoints/${e}/permissions`,Tc,{body:A,method:"post",...r})}retrieve(e,A={},r){return this._client.get(M`/fine_tuning/checkpoints/${e}/permissions`,{query:A,...r})}delete(e,A,r){const{fine_tuned_model_checkpoint:n}=A;return this._client.delete(M`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}}let Km=class extends re{constructor(){super(...arguments),this.permissions=new Zb(this._client)}};Km.Permissions=Zb;class Xb extends re{list(e,A={},r){return this._client.getAPIList(M`/fine_tuning/jobs/${e}/checkpoints`,je,{query:A,...r})}}class Gm extends re{constructor(){super(...arguments),this.checkpoints=new Xb(this._client)}create(e,A){return this._client.post("/fine_tuning/jobs",{body:e,...A})}retrieve(e,A){return this._client.get(M`/fine_tuning/jobs/${e}`,A)}list(e={},A){return this._client.getAPIList("/fine_tuning/jobs",je,{query:e,...A})}cancel(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/cancel`,A)}listEvents(e,A={},r){return this._client.getAPIList(M`/fine_tuning/jobs/${e}/events`,je,{query:A,...r})}pause(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/pause`,A)}resume(e,A){return this._client.post(M`/fine_tuning/jobs/${e}/resume`,A)}}Gm.Checkpoints=Xb;class ia extends re{constructor(){super(...arguments),this.methods=new Wb(this._client),this.jobs=new Gm(this._client),this.checkpoints=new Km(this._client),this.alpha=new jm(this._client)}}ia.Methods=Wb;ia.Jobs=Gm;ia.Checkpoints=Km;ia.Alpha=jm;class Yb extends re{}class Vm extends re{constructor(){super(...arguments),this.graderModels=new Yb(this._client)}}Vm.GraderModels=Yb;class qb extends re{createVariation(e,A){return this._client.post("/images/variations",Mn({body:e,...A},this._client))}edit(e,A){return this._client.post("/images/edits",Mn({body:e,...A,stream:e.stream??!1},this._client))}generate(e,A){return this._client.post("/images/generations",{body:e,...A,stream:e.stream??!1})}}class eE extends re{retrieve(e,A){return this._client.get(M`/models/${e}`,A)}list(e){return this._client.getAPIList("/models",Tc,e)}delete(e,A){return this._client.delete(M`/models/${e}`,A)}}class tE extends re{create(e,A){return this._client.post("/moderations",{body:e,...A})}}function xk(t,e){return!e||!Ok(e)?{...t,output_parsed:null,output:t.output.map(A=>A.type==="function_call"?{...A,parsed_arguments:null}:A.type==="message"?{...A,content:A.content.map(r=>({...r,parsed:null}))}:A)}:AE(t,e)}function AE(t,e){const A=t.output.map(n=>{if(n.type==="function_call")return{...n,parsed_arguments:Lk(e,n)};if(n.type==="message"){const s=n.content.map(a=>a.type==="output_text"?{...a,parsed:Tk(e,a.text)}:a);return{...n,content:s}}return n}),r=Object.assign({},t,{output:A});return Object.getOwnPropertyDescriptor(t,"output_text")||np(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const n of r.output)if(n.type==="message"){for(const s of n.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Tk(t,e){var A,r,n,s;return((r=(A=t.text)==null?void 0:A.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((n=t.text)==null?void 0:n.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Ok(t){var e;return!!Tm((e=t.text)==null?void 0:e.format)}function kk(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Rk(t,e){return t.find(A=>A.type==="function"&&A.name===e)}function Lk(t,e){const A=Rk(t.tools??[],e.name);return{...e,...e,parsed_arguments:kk(A)?A.$parseRaw(e.arguments):A!=null&&A.strict?JSON.parse(e.arguments):null}}function np(t){const e=[];for(const A of t.output)if(A.type==="message")for(const r of A.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var is,ll,br,ul,qy,eB,tB,AB;class zm extends km{constructor(e){super(),is.add(this),ll.set(this,void 0),br.set(this,void 0),ul.set(this,void 0),Ae(this,ll,e)}static createResponse(e,A,r){const n=new zm(A);return n._run(()=>n._createOrRetrieveResponse(e,A,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,A,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),E(this,is,"m",qy).call(this);let s,a=null;"response_id"in A?(s=await e.responses.retrieve(A.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=A.starting_after??null):s=await e.responses.create({...A,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of s)E(this,is,"m",eB).call(this,o,a);if((i=s.controller.signal)!=null&&i.aborted)throw new Zt;return E(this,is,"m",tB).call(this)}[(ll=new WeakMap,br=new WeakMap,ul=new WeakMap,is=new WeakSet,qy=function(){this.ended||Ae(this,br,void 0)},eB=function(A,r){if(this.ended)return;const n=(a,i)=>{(r==null||i.sequence_number>r)&&this._emit(a,i)},s=E(this,is,"m",AB).call(this,A);switch(n("event",A),A.type){case"response.output_text.delta":{const a=s.output[A.output_index];if(!a)throw new te(`missing output at index ${A.output_index}`);if(a.type==="message"){const i=a.content[A.content_index];if(!i)throw new te(`missing content at index ${A.content_index}`);if(i.type!=="output_text")throw new te(`expected content to be 'output_text', got ${i.type}`);n("response.output_text.delta",{...A,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const a=s.output[A.output_index];if(!a)throw new te(`missing output at index ${A.output_index}`);a.type==="function_call"&&n("response.function_call_arguments.delta",{...A,snapshot:a.arguments});break}default:n(A.type,A);break}},tB=function(){if(this.ended)throw new te("stream has ended, this shouldn't happen");const A=E(this,br,"f");if(!A)throw new te("request ended without sending any events");Ae(this,br,void 0);const r=Pk(A,E(this,ll,"f"));return Ae(this,ul,r),r},AB=function(A){let r=E(this,br,"f");if(!r){if(A.type!=="response.created")throw new te(`When snapshot hasn't been set yet, expected 'response.created' event, got ${A.type}`);return r=Ae(this,br,A.response),r}switch(A.type){case"response.output_item.added":{r.output.push(A.item);break}case"response.content_part.added":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);n.type==="message"&&n.content.push(A.part);break}case"response.output_text.delta":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);if(n.type==="message"){const s=n.content[A.content_index];if(!s)throw new te(`missing content at index ${A.content_index}`);if(s.type!=="output_text")throw new te(`expected content to be 'output_text', got ${s.type}`);s.text+=A.delta}break}case"response.function_call_arguments.delta":{const n=r.output[A.output_index];if(!n)throw new te(`missing output at index ${A.output_index}`);n.type==="function_call"&&(n.arguments+=A.delta);break}case"response.completed":{Ae(this,br,A.response);break}}return r},Symbol.asyncIterator)](){const e=[],A=[];let r=!1;return this.on("event",n=>{const s=A.shift();s?s.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of A)n.resolve(void 0);A.length=0}),this.on("abort",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),this.on("error",n=>{r=!0;for(const s of A)s.reject(n);A.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>A.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=E(this,ul,"f");if(!e)throw new te("stream ended without producing a ChatCompletion");return e}}function Pk(t,e){return xk(t,e)}class rE extends re{list(e,A={},r){return this._client.getAPIList(M`/responses/${e}/input_items`,je,{query:A,...r})}}class Wm extends re{constructor(){super(...arguments),this.inputItems=new rE(this._client)}create(e,A){return this._client.post("/responses",{body:e,...A,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&np(r),r))}retrieve(e,A={},r){return this._client.get(M`/responses/${e}`,{query:A,...r,stream:(A==null?void 0:A.stream)??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&np(n),n))}delete(e,A){return this._client.delete(M`/responses/${e}`,{...A,headers:ee([{Accept:"*/*"},A==null?void 0:A.headers])})}parse(e,A){return this._client.responses.create(e,A)._thenUnwrap(r=>AE(r,e))}stream(e,A){return zm.createResponse(this._client,e,A)}cancel(e,A){return this._client.post(M`/responses/${e}/cancel`,A)}}Wm.InputItems=rE;class nE extends re{create(e,A,r){return this._client.post(M`/uploads/${e}/parts`,Mn({body:A,...r},this._client))}}class Jm extends re{constructor(){super(...arguments),this.parts=new nE(this._client)}create(e,A){return this._client.post("/uploads",{body:e,...A})}cancel(e,A){return this._client.post(M`/uploads/${e}/cancel`,A)}complete(e,A,r){return this._client.post(M`/uploads/${e}/complete`,{body:A,...r})}}Jm.Parts=nE;const Hk=async t=>{const e=await Promise.allSettled(t),A=e.filter(n=>n.status==="rejected");if(A.length){for(const n of A)console.error(n.reason);throw new Error(`${A.length} promise(s) failed - see the above errors`)}const r=[];for(const n of e)n.status==="fulfilled"&&r.push(n.value);return r};class sE extends re{create(e,A,r){return this._client.post(M`/vector_stores/${e}/file_batches`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{vector_store_id:n}=A;return this._client.get(M`/vector_stores/${n}/file_batches/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,A,r){const{vector_store_id:n}=A;return this._client.post(M`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A);return await this.poll(e,n.id,r)}listFiles(e,A,r){const{vector_store_id:n,...s}=A;return this._client.getAPIList(M`/vector_stores/${n}/file_batches/${e}/files`,je,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(A,{vector_store_id:e},{...r,headers:n}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:A,fileIds:r=[]},n){if(A==null||A.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(n==null?void 0:n.maxConcurrency)??5,a=Math.min(s,A.length),i=this._client,o=A.values(),l=[...r];async function u(d){for(let h of d){const f=await i.files.create({file:h,purpose:"assistants"},n);l.push(f.id)}}const c=Array(a).fill(o).map(u);return await Hk(c),await this.createAndPoll(e,{file_ids:l})}}class aE extends re{create(e,A,r){return this._client.post(M`/vector_stores/${e}/files`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,A,r){const{vector_store_id:n}=A;return this._client.get(M`/vector_stores/${n}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,A,r){const{vector_store_id:n,...s}=A;return this._client.post(M`/vector_stores/${n}/files/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,A={},r){return this._client.getAPIList(M`/vector_stores/${e}/files`,je,{query:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,A,r){const{vector_store_id:n}=A;return this._client.delete(M`/vector_stores/${n}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,A,r){const n=await this.create(e,A,r);return await this.poll(e,n.id,r)}async poll(e,A,r){var s;const n=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const a=await this.retrieve(A,{vector_store_id:e},{...r,headers:n}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await io(o);break;case"failed":case"completed":return i}}}async upload(e,A,r){const n=await this._client.files.create({file:A,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,A,r){const n=await this.upload(e,A,r);return await this.poll(e,n.id,r)}content(e,A,r){const{vector_store_id:n}=A;return this._client.getAPIList(M`/vector_stores/${n}/files/${e}/content`,Tc,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Rc extends re{constructor(){super(...arguments),this.files=new aE(this._client),this.fileBatches=new sE(this._client)}create(e,A){return this._client.post("/vector_stores",{body:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}retrieve(e,A){return this._client.get(M`/vector_stores/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}update(e,A,r){return this._client.post(M`/vector_stores/${e}`,{body:A,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},A){return this._client.getAPIList("/vector_stores",je,{query:e,...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}delete(e,A){return this._client.delete(M`/vector_stores/${e}`,{...A,headers:ee([{"OpenAI-Beta":"assistants=v2"},A==null?void 0:A.headers])})}search(e,A,r){return this._client.getAPIList(M`/vector_stores/${e}/search`,Tc,{body:A,method:"post",...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Rc.Files=aE;Rc.FileBatches=sE;var ms,iE,Vl;class oE extends re{constructor(){super(...arguments),ms.add(this)}async unwrap(e,A,r=this._client.webhookSecret,n=300){return await this.verifySignature(e,A,r,n),JSON.parse(e)}async verifySignature(e,A,r=this._client.webhookSecret,n=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");E(this,ms,"m",iE).call(this,r);const s=ee([A]).values,a=E(this,ms,"m",Vl).call(this,s,"webhook-signature"),i=E(this,ms,"m",Vl).call(this,s,"webhook-timestamp"),o=E(this,ms,"m",Vl).call(this,s,"webhook-id"),l=parseInt(i,10);if(isNaN(l))throw new Ga("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-l>n)throw new Ga("Webhook timestamp is too old");if(l>u+n)throw new Ga("Webhook timestamp is too new");const c=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),d=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),h=o?`${o}.${i}.${e}`:`${i}.${e}`,f=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of c)try{const y=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",f,y,new TextEncoder().encode(h)))return}catch{continue}throw new Ga("The given webhook signature does not match the expected signature")}}ms=new WeakSet,iE=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Vl=function(e,A){if(!e)throw new Error("Headers are required");const r=e.get(A);if(r==null)throw new Error(`Missing required header: ${A}`);return r};var sp,Zm,zl,lE;let ue=class{constructor({baseURL:e=as("OPENAI_BASE_URL"),apiKey:A=as("OPENAI_API_KEY"),organization:r=as("OPENAI_ORG_ID")??null,project:n=as("OPENAI_PROJECT_ID")??null,webhookSecret:s=as("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(sp.add(this),zl.set(this,void 0),this.completions=new jb(this),this.chat=new Pm(this),this.embeddings=new Gb(this),this.files=new zb(this),this.images=new qb(this),this.audio=new lo(this),this.moderations=new tE(this),this.models=new eE(this),this.fineTuning=new ia(this),this.graders=new Vm(this),this.vectorStores=new Rc(this),this.webhooks=new oE(this),this.beta=new uo(this),this.batches=new Pb(this),this.uploads=new Jm(this),this.responses=new Wm(this),this.evals=new Mm(this),this.containers=new Dm(this),A===void 0)throw new te("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:A,organization:r,project:n,webhookSecret:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&HO())throw new te(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=i.baseURL,this.timeout=i.timeout??Zm.DEFAULT_TIMEOUT,this.logger=i.logger??console;const o="warn";this.logLevel=o,this.logLevel=Dy(i.logLevel,"ClientOptions.logLevel",this)??Dy(as("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??o,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??2,this.fetch=i.fetch??jO(),Ae(this,zl,GO),this._options=i,this.apiKey=A,this.organization=r,this.project=n,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:A}){}async authHeaders(e){return ee([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return XO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${hs}`}defaultIdempotencyKey(){return`stainless-node-retry-${DC()}`}makeStatusError(e,A,r,n){return dt.generate(e,A,r,n)}buildURL(e,A,r){const n=!E(this,sp,"m",lE).call(this)&&r||this.baseURL,s=TO(e)?new URL(e):new URL(n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return kO(a)||(A={...a,...A}),typeof A=="object"&&A&&!Array.isArray(A)&&(s.search=this.stringifyQuery(A)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:A,options:r}){}get(e,A){return this.methodRequest("get",e,A)}post(e,A){return this.methodRequest("post",e,A)}patch(e,A){return this.methodRequest("patch",e,A)}put(e,A){return this.methodRequest("put",e,A)}delete(e,A){return this.methodRequest("delete",e,A)}methodRequest(e,A,r){return this.request(Promise.resolve(r).then(n=>({method:e,path:A,...n})))}request(e,A=null){return new xc(this,this.makeRequest(e,A,void 0))}async makeRequest(e,A,r){var p,m;const n=await e,s=n.maxRetries??this.maxRetries;A==null&&(A=s),await this.prepareOptions(n);const{req:a,url:i,timeout:o}=await this.buildRequest(n,{retryCount:s-A});await this.prepareRequest(a,{url:i,options:n});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=r===void 0?"":`, retryOf: ${r}`,c=Date.now();if(at(this).debug(`[${l}] sending request`,_n({retryOfRequestLogID:r,method:n.method,url:i,options:n,headers:a.headers})),(p=n.signal)!=null&&p.aborted)throw new Zt;const d=new AbortController,h=await this.fetchWithTimeout(i,a,o,d).catch(Wh),f=Date.now();if(h instanceof Error){const g=`retrying, ${A} attempts remaining`;if((m=n.signal)!=null&&m.aborted)throw new Zt;const B=zh(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(A)return at(this).info(`[${l}] connection ${B?"timed out":"failed"} - ${g}`),at(this).debug(`[${l}] connection ${B?"timed out":"failed"} (${g})`,_n({retryOfRequestLogID:r,url:i,durationMs:f-c,message:h.message})),this.retryRequest(n,A,r??l);throw at(this).info(`[${l}] connection ${B?"timed out":"failed"} - error; no more retries left`),at(this).debug(`[${l}] connection ${B?"timed out":"failed"} (error; no more retries left)`,_n({retryOfRequestLogID:r,url:i,durationMs:f-c,message:h.message})),B?new Ic:new Fc({cause:h})}const w=[...h.headers.entries()].filter(([g])=>g==="x-request-id").map(([g,B])=>", "+g+": "+JSON.stringify(B)).join(""),y=`[${l}${u}${w}] ${a.method} ${i} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${f-c}ms`;if(!h.ok){const g=await this.shouldRetry(h);if(A&&g){const S=`retrying, ${A} attempts remaining`;return await KO(h.body),at(this).info(`${y} - ${S}`),at(this).debug(`[${l}] response error (${S})`,_n({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-c})),this.retryRequest(n,A,r??l,h.headers)}const B=g?"error; no more retries left":"error; not retryable";at(this).info(`${y} - ${B}`);const _=await h.text().catch(S=>Wh(S).message),v=PO(_),C=v?void 0:_;throw at(this).debug(`[${l}] response error (${B})`,_n({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,message:C,durationMs:Date.now()-c})),this.makeStatusError(h.status,v,C,h.headers)}return at(this).info(y),at(this).debug(`[${l}] response start`,_n({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-c})),{response:h,options:n,controller:d,requestLogID:l,retryOfRequestLogID:r,startTime:c}}getAPIList(e,A,r){return this.requestAPIList(A,{method:"get",path:e,...r})}requestAPIList(e,A){const r=this.makeRequest(A,null,void 0);return new ak(this,r,e)}async fetchWithTimeout(e,A,r,n){const{signal:s,method:a,...i}=A||{};s&&s.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r),l=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||typeof i.body=="object"&&i.body!==null&&Symbol.asyncIterator in i.body,u={signal:n.signal,...l?{duplex:"half"}:{},method:"GET",...i};a&&(u.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(o)}}async shouldRetry(e){const A=e.headers.get("x-should-retry");return A==="true"?!0:A==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,A,r,n){let s;const a=n==null?void 0:n.get("retry-after-ms");if(a){const o=parseFloat(a);Number.isNaN(o)||(s=o)}const i=n==null?void 0:n.get("retry-after");if(i&&!s){const o=parseFloat(i);Number.isNaN(o)?s=Date.parse(i)-Date.now():s=o*1e3}if(!(s&&0<=s&&s<60*1e3)){const o=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(A,o)}return await io(s),this.makeRequest(e,A-1,r)}calculateDefaultRetryTimeoutMillis(e,A){const s=A-e,a=Math.min(.5*Math.pow(2,s),8),i=1-Math.random()*.25;return a*i*1e3}async buildRequest(e,{retryCount:A=0}={}){const r={...e},{method:n,path:s,query:a,defaultBaseURL:i}=r,o=this.buildURL(s,a,i);"timeout"in r&&LO("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:l,body:u}=this.buildBody({options:r}),c=await this.buildHeaders({options:e,method:n,bodyHeaders:l,retryCount:A});return{req:{method:n,headers:c,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:A,bodyHeaders:r,retryCount:n}){let s={};this.idempotencyHeader&&A!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=ee([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...MO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:A}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ee([A]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:YC(e)}:E(this,zl,"f").call(this,{body:e,headers:r})}};Zm=ue,zl=new WeakMap,sp=new WeakSet,lE=function(){return this.baseURL!=="https://api.openai.com/v1"};ue.OpenAI=Zm;ue.DEFAULT_TIMEOUT=6e5;ue.OpenAIError=te;ue.APIError=dt;ue.APIConnectionError=Fc;ue.APIConnectionTimeoutError=Ic;ue.APIUserAbortError=Zt;ue.NotFoundError=KC;ue.ConflictError=GC;ue.RateLimitError=zC;ue.BadRequestError=$C;ue.AuthenticationError=MC;ue.InternalServerError=WC;ue.PermissionDeniedError=jC;ue.UnprocessableEntityError=VC;ue.InvalidWebhookSignatureError=Ga;ue.toFile=dk;ue.Completions=jb;ue.Chat=Pm;ue.Embeddings=Gb;ue.Files=zb;ue.Images=qb;ue.Audio=lo;ue.Moderations=tE;ue.Models=eE;ue.FineTuning=ia;ue.Graders=Vm;ue.VectorStores=Rc;ue.Webhooks=oE;ue.Beta=uo;ue.Batches=Pb;ue.Uploads=Jm;ue.Responses=Wm;ue.Evals=Mm;ue.Containers=Dm;function rB(t,e=Xm){t=t.trim();const A=t.indexOf("```");if(A===-1)return e(t);let r=t.substring(A+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const n=r.indexOf("```");let s=r;return n!==-1&&(s=r.substring(0,n)),e(s.trim())}function Xm(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const A=[];let r=!1,n=!1;for(let s of t){if(r)s==='"'&&!n?r=!1:s===`
`&&!n?s="\\n":s==="\\"?n=!n:n=!1;else if(s==='"')r=!0,n=!1;else if(s==="{")A.push("}");else if(s==="[")A.push("]");else if(s==="}"||s==="]")if(A&&A[A.length-1]===s)A.pop();else return null;e+=s}r&&(e+='"');for(let s=A.length-1;s>=0;s-=1)e+=A[s];try{return JSON.parse(e)}catch{return null}}var Nk=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const Dk=tc(Nk);var uE={exports:{}};const $k=/[\p{Lu}]/u,Mk=/[\p{Ll}]/u,nB=/^[\p{Lu}](?![\p{Lu}])/gu,cE=/([\p{Alpha}\p{N}_]|$)/u,dE=/[_.\- ]+/,jk=new RegExp("^"+dE.source),sB=new RegExp(dE.source+cE.source,"gu"),aB=new RegExp("\\d+"+cE.source,"gu"),Kk=(t,e,A)=>{let r=!1,n=!1,s=!1;for(let a=0;a<t.length;a++){const i=t[a];r&&$k.test(i)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,s=n,n=!0,a++):n&&s&&Mk.test(i)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=n,n=!1,r=!0):(r=e(i)===i&&A(i)!==i,s=n,n=A(i)===i&&e(i)!==i)}return t},Gk=(t,e)=>(nB.lastIndex=0,t.replace(nB,A=>e(A))),Vk=(t,e)=>(sB.lastIndex=0,aB.lastIndex=0,t.replace(sB,(A,r)=>e(r)).replace(aB,A=>e(A))),fE=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const A=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):A(t):(t!==A(t)&&(t=Kk(t,A,r)),t=t.replace(jk,""),e.preserveConsecutiveUppercase?t=Gk(t,A):t=A(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),Vk(t,r))};uE.exports=fE;uE.exports.default=fE;function zk(t,e){return(e==null?void 0:e[t])||Dk(t)}function Wk(t,e,A){const r={};for(const n in t)Object.hasOwn(t,n)&&(r[e(n,A)]=t[n]);return r}function iB(t){return Array.isArray(t)?[...t]:{...t}}function Jk(t,e){const A=iB(t);for(const[r,n]of Object.entries(e)){const[s,...a]=r.split(".").reverse();let i=A;for(const o of a.reverse()){if(i[o]===void 0)break;i[o]=iB(i[o]),i=i[o]}i[s]!==void 0&&(i[s]={lc:1,type:"secret",id:[n]})}return A}function hE(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class jn{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,hE(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...A){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var n;return(n=this.lc_serializable_keys)==null?void 0:n.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof jn||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},A={},r=Object.keys(this.lc_kwargs).reduce((n,s)=>(n[s]=s in this?this[s]:this.lc_kwargs[s],n),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(A,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(A).forEach(n=>{let s=this,a=r;const[i,...o]=n.split(".").reverse();for(const l of o.reverse()){if(!(l in s)||s[l]===void 0)return;(!(l in a)||a[l]===void 0)&&(typeof s[l]=="object"&&s[l]!=null?a[l]={}:Array.isArray(s[l])&&(a[l]=[])),s=s[l],a=a[l]}i in s&&s[i]!==void 0&&(a[i]=a[i]||s[i])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Wk(Object.keys(A).length?Jk(r,A):r,zk,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Kn(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Zk(t){return Kn(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function Xk(t){return Kn(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function Yk(t){if(Kn(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function oB(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const A=e[0].trim(),r=e[1].trim();if(A===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const n={};for(const s of t.split(";").slice(1)){const a=s.split("=");if(a.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const i=a[0].trim(),o=a[1].trim();if(i==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);n[i]=o}return{type:A,subtype:r,parameters:n}}function lB({dataUrl:t,asTypedArray:e=!1}){const A=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(A){r=A[1].toLowerCase();const n=e?Uint8Array.from(atob(A[2]),s=>s.charCodeAt(0)):A[2];return{mime_type:r,data:n}}}function pE(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function oa(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(A=>Kn(A))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Lc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(A=>Kn(A))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function qk(t,e){return t==="error"||e==="error"?"error":"success"}function eR(t,e){function A(r,n){if(typeof r!="object"||r===null||r===void 0)return r;if(n>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>A(a,n+1));const s={};for(const a of Object.keys(r))s[a]=A(r[a],n+1);return s}return JSON.stringify(A(t,0),null,2)}class la extends jn{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,A){typeof e=="string"&&(e={content:e,additional_kwargs:A,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const A=eR(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${A}`}}function Ut(t,e){const A={...t};for(const[r,n]of Object.entries(e))if(A[r]==null)A[r]=n;else{if(n==null)continue;if(typeof A[r]!=typeof n||Array.isArray(A[r])!==Array.isArray(n))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof A[r]=="string"){if(r==="type")continue;A[r]+=n}else if(typeof A[r]=="object"&&!Array.isArray(A[r]))A[r]=Ut(A[r],n);else if(Array.isArray(A[r]))A[r]=Lc(A[r],n);else{if(A[r]===n)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return A}function Lc(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const A=[...t];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const n=A.findIndex(s=>s.index===r.index);n!==-1?A[n]=Ut(A[n],r):A.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;A.push(r)}return A}}}function tR(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return Lc(t,e);if(typeof t=="object"&&typeof e=="object")return Ut(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class ua extends la{}function AR(t){return typeof t.role=="string"}function Pc(t){return typeof(t==null?void 0:t._getType)=="function"}function rR(t){return Pc(t)&&typeof t.concat=="function"}class mE extends la{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,A,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:A}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status,this.metadata=e.metadata}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class Ym extends ua{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new Ym({content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),artifact:tR(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:qk(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function nR(t){const e=[],A=[];for(const r of t)if(r.function){const n=r.function.name;try{const s=JSON.parse(r.function.arguments),a={name:n||"",args:s||{},id:r.id};e.push(a)}catch{A.push({name:n,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,A]}class Js extends la{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,A){var n;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:A??{}};else{r=e;const s=(n=r.additional_kwargs)==null?void 0:n.tool_calls,a=r.tool_calls;s!=null&&s.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(s!=null&&a===void 0){const[i,o]=nR(s);r.tool_calls=i??[],r.invalid_tool_calls=o??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function co(t){return t._getType()==="ai"}function uB(t){return t._getType()==="ai"}class on extends ua{constructor(e){var r,n;let A;if(typeof e=="string")A={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)A={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const s=e.tool_call_chunks.reduce((o,l)=>{const u=l.id||`fallback-${l.index||0}`;return o[u]=o[u]??[],o[u].push(l),o},{}),a=[],i=[];for(const[o,l]of Object.entries(s)){let u={};const c=((r=l[0])==null?void 0:r.name)??"",d=l.map(w=>w.args||"").join(""),h=d.length?d:"{}",f=((n=l[0])==null?void 0:n.id)||o;try{if(u=Xm(h),u===null||typeof u!="object"||Array.isArray(u))throw new Error("Malformed tool call chunk args.");a.push({name:c,args:u,id:f,type:"tool_call"})}catch{i.push({name:c,args:h,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}A={...e,tool_calls:a,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(A),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=A.tool_call_chunks??this.tool_call_chunks,this.tool_calls=A.tool_calls??this.tool_calls,this.invalid_tool_calls=A.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=A.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,n,s,a,i,o,l,u,c,d,h,f,w,y,p,m,g,B,_,v,C,Q,S,R,j,ne,z,T,O,$,N,F,b,I,P,k,H,X,q,be;const A={content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Ee=Lc(this.tool_call_chunks,e.tool_call_chunks);Ee!==void 0&&Ee.length>0&&(A.tool_call_chunks=Ee)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Ee={...(((n=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:n.audio)!==void 0||((a=(s=e.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:a.audio)!==void 0)&&{audio:(((o=(i=this.usage_metadata)==null?void 0:i.input_token_details)==null?void 0:o.audio)??0)+(((u=(l=e.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:u.audio)??0)},...(((d=(c=this.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:d.cache_read)!==void 0||((f=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:f.cache_read)!==void 0)&&{cache_read:(((y=(w=this.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:y.cache_read)??0)+(((m=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:m.cache_read)??0)},...(((B=(g=this.usage_metadata)==null?void 0:g.input_token_details)==null?void 0:B.cache_creation)!==void 0||((v=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:v.cache_creation)!==void 0)&&{cache_creation:(((Q=(C=this.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:Q.cache_creation)??0)+(((R=(S=e.usage_metadata)==null?void 0:S.input_token_details)==null?void 0:R.cache_creation)??0)}},pa={...(((ne=(j=this.usage_metadata)==null?void 0:j.output_token_details)==null?void 0:ne.audio)!==void 0||((T=(z=e.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:T.audio)!==void 0)&&{audio:((($=(O=this.usage_metadata)==null?void 0:O.output_token_details)==null?void 0:$.audio)??0)+(((F=(N=e.usage_metadata)==null?void 0:N.output_token_details)==null?void 0:F.audio)??0)},...(((I=(b=this.usage_metadata)==null?void 0:b.output_token_details)==null?void 0:I.reasoning)!==void 0||((k=(P=e.usage_metadata)==null?void 0:P.output_token_details)==null?void 0:k.reasoning)!==void 0)&&{reasoning:(((X=(H=this.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:X.reasoning)??0)+(((be=(q=e.usage_metadata)==null?void 0:q.output_token_details)==null?void 0:be.reasoning)??0)}},mn=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ma=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},$t={input_tokens:mn.input_tokens+ma.input_tokens,output_tokens:mn.output_tokens+ma.output_tokens,total_tokens:mn.total_tokens+ma.total_tokens,...Object.keys(Ee).length>0&&{input_token_details:Ee},...Object.keys(pa).length>0&&{output_token_details:pa}};A.usage_metadata=$t}return new on(A)}}class fo extends la{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return fo}constructor(e,A){typeof e=="string"&&(e={content:e,role:A}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Hc extends ua{static lc_name(){return"ChatMessageChunk"}constructor(e,A){typeof e=="string"&&(e={content:e,role:A}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Hc({content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Nc extends ua{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Nc({content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Zs extends la{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,A){super(e,A)}}class Dc extends ua{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,A){super(e,A)}concat(e){return new Dc({content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class ap extends la{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,A){super(e,A)}}class zi extends ua{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,A){super(e,A)}concat(e){return new zi({content:oa(this.content,e.content),additional_kwargs:Ut(this.additional_kwargs,e.additional_kwargs),response_metadata:Ut(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function gE(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function wE(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class sR extends Error{constructor(e,A){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=A}}function aR(t){return wE(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function iR(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function nf(t){let e,A;if(iR(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",A=t.kwargs}else{const{type:r,...n}=t;e=r,A=n}if(e==="human"||e==="user")return new Zs(A);if(e==="ai"||e==="assistant"){const{tool_calls:r,...n}=A;if(!Array.isArray(r))return new Js(A);const s=r.map(aR);return new Js({...n,tool_calls:s})}else{if(e==="system")return new ap(A);if(e==="developer")return new ap({...A,additional_kwargs:{...A.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in A)return new mE({...A,content:A.content,tool_call_id:A.tool_call_id,name:A.name});throw gE(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ei(t){if(typeof t=="string")return new Zs(t);if(Pc(t))return t;if(Array.isArray(t)){const[e,A]=t;return nf({type:e,content:A})}else if(AR(t)){const{role:e,...A}=t;return nf({...A,type:e})}else return nf(t)}function yE(t,e="Human",A="AI"){const r=[];for(const n of t){let s;if(n._getType()==="human")s=e;else if(n._getType()==="ai")s=A;else if(n._getType()==="system")s="System";else if(n._getType()==="function")s="Function";else if(n._getType()==="tool")s="Tool";else if(n._getType()==="generic")s=n.role;else throw new Error(`Got unsupported message type: ${n._getType()}`);const a=n.name?`${n.name}, `:"",i=typeof n.content=="string"?n.content:JSON.stringify(n.content,null,2);r.push(`${s}: ${a}${i}`)}return r.join(`
`)}function oR(t){var A;const e=t._getType();if(e==="human")return new Dc({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(A=r.tool_calls)==null?void 0:A.map(n=>({...n,type:"tool_call_chunk",index:void 0,args:JSON.stringify(n.args)}))}),new on({...r})}else{if(e==="system")return new zi({...t});if(e==="function")return new Nc({...t});if(fo.isInstance(t))return new Hc({...t});throw new Error("Unknown message type.")}}var pe;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function A(n){throw new Error}t.assertNever=A,t.arrayToEnum=n=>{const s={};for(const a of n)s[a]=a;return s},t.getValidEnumValues=n=>{const s=t.objectKeys(n).filter(i=>typeof n[n[i]]!="number"),a={};for(const i of s)a[i]=n[i];return t.objectValues(a)},t.objectValues=n=>t.objectKeys(n).map(function(s){return n[s]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const s=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&s.push(a);return s},t.find=(n,s)=>{for(const a of n)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function r(n,s=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(pe||(pe={}));var cB;(function(t){t.mergeShapes=(e,A)=>({...e,...A})})(cB||(cB={}));const J=pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Or=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return Number.isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},D=pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const A=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,A):this.__proto__=A,this.name="ZodError",this.issues=e}format(e){const A=e||function(s){return s.message},r={_errors:[]},n=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)r._errors.push(A(a));else{let i=r,o=0;for(;o<a.path.length;){const l=a.path[o];o===a.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(A(a))):i[l]=i[l]||{_errors:[]},i=i[l],o++}}};return n(this),r}static assert(e){if(!(e instanceof wr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=A=>A.message){const A={},r=[];for(const n of this.issues)if(n.path.length>0){const s=n.path[0];A[s]=A[s]||[],A[s].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:A}}get formErrors(){return this.flatten()}}wr.create=t=>new wr(t);const ip=(t,e)=>{let A;switch(t.code){case D.invalid_type:t.received===J.undefined?A="Required":A=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:A=`Invalid literal value, expected ${JSON.stringify(t.expected,pe.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:A=`Unrecognized key(s) in object: ${pe.joinValues(t.keys,", ")}`;break;case D.invalid_union:A="Invalid input";break;case D.invalid_union_discriminator:A=`Invalid discriminator value. Expected ${pe.joinValues(t.options)}`;break;case D.invalid_enum_value:A=`Invalid enum value. Expected ${pe.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:A="Invalid function arguments";break;case D.invalid_return_type:A="Invalid function return type";break;case D.invalid_date:A="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(A=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(A=`${A} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?A=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?A=`Invalid input: must end with "${t.validation.endsWith}"`:pe.assertNever(t.validation):t.validation!=="regex"?A=`Invalid ${t.validation}`:A="Invalid";break;case D.too_small:t.type==="array"?A=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?A=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?A=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?A=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?A=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:A="Invalid input";break;case D.too_big:t.type==="array"?A=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?A=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?A=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?A=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?A=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:A="Invalid input";break;case D.custom:A="Invalid input";break;case D.invalid_intersection_types:A="Intersection results could not be merged";break;case D.not_multiple_of:A=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:A="Number must be finite";break;default:A=e.defaultError,pe.assertNever(t)}return{message:A}};let lR=ip;function uR(){return lR}const cR=t=>{const{data:e,path:A,errorMaps:r,issueData:n}=t,s=[...A,...n.path||[]],a={...n,path:s};if(n.message!==void 0)return{...n,path:s,message:n.message};let i="";const o=r.filter(l=>!!l).slice().reverse();for(const l of o)i=l(a,{data:e,defaultError:i}).message;return{...n,path:s,message:i}};function G(t,e){const A=uR(),r=cR({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,A,A===ip?void 0:ip].filter(n=>!!n)});t.common.issues.push(r)}class qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,A){const r=[];for(const n of A){if(n.status==="aborted")return se;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,A){const r=[];for(const n of A){const s=await n.key,a=await n.value;r.push({key:s,value:a})}return qt.mergeObjectSync(e,r)}static mergeObjectSync(e,A){const r={};for(const n of A){const{key:s,value:a}=n;if(s.status==="aborted"||a.status==="aborted")return se;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const se=Object.freeze({status:"aborted"}),ti=t=>({status:"dirty",value:t}),gA=t=>({status:"valid",value:t}),dB=t=>t.status==="aborted",fB=t=>t.status==="dirty",Xs=t=>t.status==="valid",Pu=t=>typeof Promise<"u"&&t instanceof Promise;var Z;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Z||(Z={}));class ln{constructor(e,A,r,n){this._cachedPath=[],this.parent=e,this.data=A,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hB=(t,e)=>{if(Xs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const A=new wr(t.common.issues);return this._error=A,this._error}}};function oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:A,required_error:r,description:n}=t;if(e&&(A||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,i)=>{const{message:o}=t;return a.code==="invalid_enum_value"?{message:o??i.defaultError}:typeof i.data>"u"?{message:o??r??i.defaultError}:a.code!=="invalid_type"?{message:i.defaultError}:{message:o??A??i.defaultError}},description:n}}class he{get description(){return this._def.description}_getType(e){return Or(e.data)}_getOrReturnCtx(e,A){return A||{common:e.parent.common,data:e.data,parsedType:Or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:Or(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const A=this._parse(e);if(Pu(A))throw new Error("Synchronous parse encountered promise.");return A}_parseAsync(e){const A=this._parse(e);return Promise.resolve(A)}parse(e,A){const r=this.safeParse(e,A);if(r.success)return r.data;throw r.error}safeParse(e,A){const r={common:{issues:[],async:(A==null?void 0:A.async)??!1,contextualErrorMap:A==null?void 0:A.errorMap},path:(A==null?void 0:A.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Or(e)},n=this._parseSync({data:e,path:r.path,parent:r});return hB(r,n)}"~validate"(e){var r,n;const A={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Or(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:A});return Xs(s)?{value:s.value}:{issues:A.common.issues}}catch(s){(n=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),A.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:A}).then(s=>Xs(s)?{value:s.value}:{issues:A.common.issues})}async parseAsync(e,A){const r=await this.safeParseAsync(e,A);if(r.success)return r.data;throw r.error}async safeParseAsync(e,A){const r={common:{issues:[],contextualErrorMap:A==null?void 0:A.errorMap,async:!0},path:(A==null?void 0:A.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Or(e)},n=this._parse({data:e,path:r.path,parent:r}),s=await(Pu(n)?n:Promise.resolve(n));return hB(r,s)}refine(e,A){const r=n=>typeof A=="string"||typeof A>"u"?{message:A}:typeof A=="function"?A(n):A;return this._refinement((n,s)=>{const a=e(n),i=()=>s.addIssue({code:D.custom,...r(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(e,A){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof A=="function"?A(r,n):A),!1))}_refinement(e){return new qs({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:A=>this["~validate"](A)}}optional(){return An.create(this,this._def)}nullable(){return ea.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZA.create(this)}promise(){return $u.create(this,this._def)}or(e){return Nu.create([this,e],this._def)}and(e){return Du.create(this,e,this._def)}transform(e){return new qs({...oe(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const A=typeof e=="function"?e:()=>e;return new up({...oe(this._def),innerType:this,defaultValue:A,typeName:x.ZodDefault})}brand(){return new kR({typeName:x.ZodBranded,type:this,...oe(this._def)})}catch(e){const A=typeof e=="function"?e:()=>e;return new cp({...oe(this._def),innerType:this,catchValue:A,typeName:x.ZodCatch})}describe(e){const A=this.constructor;return new A({...this._def,description:e})}pipe(e){return qm.create(this,e)}readonly(){return dp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dR=/^c[^\s-]{8,}$/i,fR=/^[0-9a-z]+$/,hR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mR=/^[a-z0-9_-]{21}$/i,gR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,BR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sf;const _R=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ER=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,QR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,BE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",UR=new RegExp(`^${BE}$`);function _E(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const A=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${A}`}function FR(t){return new RegExp(`^${_E(t)}$`)}function IR(t){let e=`${BE}T${_E(t)}`;const A=[];return A.push(t.local?"Z?":"Z"),t.offset&&A.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${A.join("|")})`,new RegExp(`^${e}$`)}function SR(t,e){return!!((e==="v4"||!e)&&_R.test(t)||(e==="v6"||!e)&&CR.test(t))}function xR(t,e){if(!gR.test(t))return!1;try{const[A]=t.split(".");if(!A)return!1;const r=A.replace(/-/g,"+").replace(/_/g,"/").padEnd(A.length+(4-A.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function TR(t,e){return!!((e==="v4"||!e)&&vR.test(t)||(e==="v6"||!e)&&bR.test(t))}class jr extends he{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const s=this._getOrReturnCtx(e);return G(s,{code:D.invalid_type,expected:J.string,received:s.parsedType}),se}const r=new qt;let n;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:D.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:D.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,i=e.data.length<s.value;(a||i)&&(n=this._getOrReturnCtx(e,n),a?G(n,{code:D.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&G(n,{code:D.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")yR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"email",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")sf||(sf=new RegExp(BR,"u")),sf.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"emoji",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")pR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"uuid",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")mR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"nanoid",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")dR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")fR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid2",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")hR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"ulid",code:D.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),G(n,{validation:"url",code:D.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"regex",code:D.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?IR(s).test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?UR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?FR(s).test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:D.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?wR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"duration",code:D.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?SR(e.data,s.version)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"ip",code:D.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?xR(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"jwt",code:D.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?TR(e.data,s.version)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cidr",code:D.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?ER.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"base64",code:D.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?QR.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"base64url",code:D.invalid_string,message:s.message}),r.dirty()):pe.assertNever(s);return{status:r.value,value:e.data}}_regex(e,A,r){return this.refinement(n=>e.test(n),{validation:A,code:D.invalid_string,...Z.errToObj(r)})}_addCheck(e){return new jr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Z.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Z.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Z.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Z.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Z.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Z.errToObj(e)})}regex(e,A){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(A)})}includes(e,A){return this._addCheck({kind:"includes",value:e,position:A==null?void 0:A.position,...Z.errToObj(A==null?void 0:A.message)})}startsWith(e,A){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(A)})}endsWith(e,A){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(A)})}min(e,A){return this._addCheck({kind:"min",value:e,...Z.errToObj(A)})}max(e,A){return this._addCheck({kind:"max",value:e,...Z.errToObj(A)})}length(e,A){return this._addCheck({kind:"length",value:e,...Z.errToObj(A)})}nonempty(e){return this.min(1,Z.errToObj(e))}trim(){return new jr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxLength(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}}jr.create=t=>new jr({checks:[],typeName:x.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...oe(t)});function OR(t,e){const A=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=A>r?A:r,s=Number.parseInt(t.toFixed(n).replace(".","")),a=Number.parseInt(e.toFixed(n).replace(".",""));return s%a/10**n}class Wi extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const s=this._getOrReturnCtx(e);return G(s,{code:D.invalid_type,expected:J.number,received:s.parsedType}),se}let r;const n=new qt;for(const s of this._def.checks)s.kind==="int"?pe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:D.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?OR(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:D.not_finite,message:s.message}),n.dirty()):pe.assertNever(s);return{status:n.value,value:e.data}}gte(e,A){return this.setLimit("min",e,!0,Z.toString(A))}gt(e,A){return this.setLimit("min",e,!1,Z.toString(A))}lte(e,A){return this.setLimit("max",e,!0,Z.toString(A))}lt(e,A){return this.setLimit("max",e,!1,Z.toString(A))}setLimit(e,A,r,n){return new Wi({...this._def,checks:[...this._def.checks,{kind:e,value:A,inclusive:r,message:Z.toString(n)}]})}_addCheck(e){return new Wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,A){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(A)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxValue(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pe.isInteger(e.value))}get isFinite(){let e=null,A=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(A===null||r.value>A)&&(A=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(A)&&Number.isFinite(e)}}Wi.create=t=>new Wi({checks:[],typeName:x.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class Ji extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let r;const n=new qt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),G(r,{code:D.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):pe.assertNever(s);return{status:n.value,value:e.data}}_getInvalidInput(e){const A=this._getOrReturnCtx(e);return G(A,{code:D.invalid_type,expected:J.bigint,received:A.parsedType}),se}gte(e,A){return this.setLimit("min",e,!0,Z.toString(A))}gt(e,A){return this.setLimit("min",e,!1,Z.toString(A))}lte(e,A){return this.setLimit("max",e,!0,Z.toString(A))}lt(e,A){return this.setLimit("max",e,!1,Z.toString(A))}setLimit(e,A,r,n){return new Ji({...this._def,checks:[...this._def.checks,{kind:e,value:A,inclusive:r,message:Z.toString(n)}]})}_addCheck(e){return new Ji({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,A){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(A)})}get minValue(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e}get maxValue(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e}}Ji.create=t=>new Ji({checks:[],typeName:x.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...oe(t)});class pB extends he{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.boolean,received:r.parsedType}),se}return gA(e.data)}}pB.create=t=>new pB({typeName:x.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...oe(t)});class Hu extends he{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const s=this._getOrReturnCtx(e);return G(s,{code:D.invalid_type,expected:J.date,received:s.parsedType}),se}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return G(s,{code:D.invalid_date}),se}const r=new qt;let n;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:D.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:D.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):pe.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hu({...this._def,checks:[...this._def.checks,e]})}min(e,A){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(A)})}max(e,A){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(A)})}get minDate(){let e=null;for(const A of this._def.checks)A.kind==="min"&&(e===null||A.value>e)&&(e=A.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const A of this._def.checks)A.kind==="max"&&(e===null||A.value<e)&&(e=A.value);return e!=null?new Date(e):null}}Hu.create=t=>new Hu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:x.ZodDate,...oe(t)});class mB extends he{_parse(e){if(this._getType(e)!==J.symbol){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.symbol,received:r.parsedType}),se}return gA(e.data)}}mB.create=t=>new mB({typeName:x.ZodSymbol,...oe(t)});class gB extends he{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.undefined,received:r.parsedType}),se}return gA(e.data)}}gB.create=t=>new gB({typeName:x.ZodUndefined,...oe(t)});class wB extends he{_parse(e){if(this._getType(e)!==J.null){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.null,received:r.parsedType}),se}return gA(e.data)}}wB.create=t=>new wB({typeName:x.ZodNull,...oe(t)});class op extends he{constructor(){super(...arguments),this._any=!0}_parse(e){return gA(e.data)}}op.create=t=>new op({typeName:x.ZodAny,...oe(t)});class yB extends he{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gA(e.data)}}yB.create=t=>new yB({typeName:x.ZodUnknown,...oe(t)});class un extends he{_parse(e){const A=this._getOrReturnCtx(e);return G(A,{code:D.invalid_type,expected:J.never,received:A.parsedType}),se}}un.create=t=>new un({typeName:x.ZodNever,...oe(t)});class BB extends he{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.void,received:r.parsedType}),se}return gA(e.data)}}BB.create=t=>new BB({typeName:x.ZodVoid,...oe(t)});class ZA extends he{_parse(e){const{ctx:A,status:r}=this._processInputParams(e),n=this._def;if(A.parsedType!==J.array)return G(A,{code:D.invalid_type,expected:J.array,received:A.parsedType}),se;if(n.exactLength!==null){const a=A.data.length>n.exactLength.value,i=A.data.length<n.exactLength.value;(a||i)&&(G(A,{code:a?D.too_big:D.too_small,minimum:i?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&A.data.length<n.minLength.value&&(G(A,{code:D.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&A.data.length>n.maxLength.value&&(G(A,{code:D.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),A.common.async)return Promise.all([...A.data].map((a,i)=>n.type._parseAsync(new ln(A,a,A.path,i)))).then(a=>qt.mergeArray(r,a));const s=[...A.data].map((a,i)=>n.type._parseSync(new ln(A,a,A.path,i)));return qt.mergeArray(r,s)}get element(){return this._def.type}min(e,A){return new ZA({...this._def,minLength:{value:e,message:Z.toString(A)}})}max(e,A){return new ZA({...this._def,maxLength:{value:e,message:Z.toString(A)}})}length(e,A){return new ZA({...this._def,exactLength:{value:e,message:Z.toString(A)}})}nonempty(e){return this.min(1,e)}}ZA.create=(t,e)=>new ZA({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...oe(e)});function gs(t){if(t instanceof Ne){const e={};for(const A in t.shape){const r=t.shape[A];e[A]=An.create(gs(r))}return new Ne({...t._def,shape:()=>e})}else return t instanceof ZA?new ZA({...t._def,type:gs(t.element)}):t instanceof An?An.create(gs(t.unwrap())):t instanceof ea?ea.create(gs(t.unwrap())):t instanceof Gn?Gn.create(t.items.map(e=>gs(e))):t}class Ne extends he{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),A=pe.objectKeys(e);return this._cached={shape:e,keys:A},this._cached}_parse(e){if(this._getType(e)!==J.object){const l=this._getOrReturnCtx(e);return G(l,{code:D.invalid_type,expected:J.object,received:l.parsedType}),se}const{status:r,ctx:n}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof un&&this._def.unknownKeys==="strip"))for(const l in n.data)a.includes(l)||i.push(l);const o=[];for(const l of a){const u=s[l],c=n.data[l];o.push({key:{status:"valid",value:l},value:u._parse(new ln(n,c,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof un){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of i)o.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")i.length>0&&(G(n,{code:D.unrecognized_keys,keys:i}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of i){const c=n.data[u];o.push({key:{status:"valid",value:u},value:l._parse(new ln(n,c,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of o){const c=await u.key,d=await u.value;l.push({key:c,value:d,alwaysSet:u.alwaysSet})}return l}).then(l=>qt.mergeObjectSync(r,l)):qt.mergeObjectSync(r,o)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new Ne({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(A,r)=>{var s,a;const n=((a=(s=this._def).errorMap)==null?void 0:a.call(s,A,r).message)??r.defaultError;return A.code==="unrecognized_keys"?{message:Z.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new Ne({...this._def,unknownKeys:"strip"})}passthrough(){return new Ne({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ne({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ne({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,A){return this.augment({[e]:A})}catchall(e){return new Ne({...this._def,catchall:e})}pick(e){const A={};for(const r of pe.objectKeys(e))e[r]&&this.shape[r]&&(A[r]=this.shape[r]);return new Ne({...this._def,shape:()=>A})}omit(e){const A={};for(const r of pe.objectKeys(this.shape))e[r]||(A[r]=this.shape[r]);return new Ne({...this._def,shape:()=>A})}deepPartial(){return gs(this)}partial(e){const A={};for(const r of pe.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?A[r]=n:A[r]=n.optional()}return new Ne({...this._def,shape:()=>A})}required(e){const A={};for(const r of pe.objectKeys(this.shape))if(e&&!e[r])A[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof An;)s=s._def.innerType;A[r]=s}return new Ne({...this._def,shape:()=>A})}keyof(){return vE(pe.objectKeys(this.shape))}}Ne.create=(t,e)=>new Ne({shape:()=>t,unknownKeys:"strip",catchall:un.create(),typeName:x.ZodObject,...oe(e)});Ne.strictCreate=(t,e)=>new Ne({shape:()=>t,unknownKeys:"strict",catchall:un.create(),typeName:x.ZodObject,...oe(e)});Ne.lazycreate=(t,e)=>new Ne({shape:t,unknownKeys:"strip",catchall:un.create(),typeName:x.ZodObject,...oe(e)});class Nu extends he{_parse(e){const{ctx:A}=this._processInputParams(e),r=this._def.options;function n(s){for(const i of s)if(i.result.status==="valid")return i.result;for(const i of s)if(i.result.status==="dirty")return A.common.issues.push(...i.ctx.common.issues),i.result;const a=s.map(i=>new wr(i.ctx.common.issues));return G(A,{code:D.invalid_union,unionErrors:a}),se}if(A.common.async)return Promise.all(r.map(async s=>{const a={...A,common:{...A.common,issues:[]},parent:null};return{result:await s._parseAsync({data:A.data,path:A.path,parent:a}),ctx:a}})).then(n);{let s;const a=[];for(const o of r){const l={...A,common:{...A.common,issues:[]},parent:null},u=o._parseSync({data:A.data,path:A.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(s)return A.common.issues.push(...s.ctx.common.issues),s.result;const i=a.map(o=>new wr(o));return G(A,{code:D.invalid_union,unionErrors:i}),se}}get options(){return this._def.options}}Nu.create=(t,e)=>new Nu({options:t,typeName:x.ZodUnion,...oe(e)});function lp(t,e){const A=Or(t),r=Or(e);if(t===e)return{valid:!0,data:t};if(A===J.object&&r===J.object){const n=pe.objectKeys(e),s=pe.objectKeys(t).filter(i=>n.indexOf(i)!==-1),a={...t,...e};for(const i of s){const o=lp(t[i],e[i]);if(!o.valid)return{valid:!1};a[i]=o.data}return{valid:!0,data:a}}else if(A===J.array&&r===J.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let s=0;s<t.length;s++){const a=t[s],i=e[s],o=lp(a,i);if(!o.valid)return{valid:!1};n.push(o.data)}return{valid:!0,data:n}}else return A===J.date&&r===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Du extends he{_parse(e){const{status:A,ctx:r}=this._processInputParams(e),n=(s,a)=>{if(dB(s)||dB(a))return se;const i=lp(s.value,a.value);return i.valid?((fB(s)||fB(a))&&A.dirty(),{status:A.value,value:i.data}):(G(r,{code:D.invalid_intersection_types}),se)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>n(s,a)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Du.create=(t,e,A)=>new Du({left:t,right:e,typeName:x.ZodIntersection,...oe(A)});class Gn extends he{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.array)return G(r,{code:D.invalid_type,expected:J.array,received:r.parsedType}),se;if(r.data.length<this._def.items.length)return G(r,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),se;!this._def.rest&&r.data.length>this._def.items.length&&(G(r,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A.dirty());const s=[...r.data].map((a,i)=>{const o=this._def.items[i]||this._def.rest;return o?o._parse(new ln(r,a,r.path,i)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>qt.mergeArray(A,a)):qt.mergeArray(A,s)}get items(){return this._def.items}rest(e){return new Gn({...this._def,rest:e})}}Gn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Gn({items:t,typeName:x.ZodTuple,rest:null,...oe(e)})};class _B extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.map)return G(r,{code:D.invalid_type,expected:J.map,received:r.parsedType}),se;const n=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([i,o],l)=>({key:n._parse(new ln(r,i,r.path,[l,"key"])),value:s._parse(new ln(r,o,r.path,[l,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const o of a){const l=await o.key,u=await o.value;if(l.status==="aborted"||u.status==="aborted")return se;(l.status==="dirty"||u.status==="dirty")&&A.dirty(),i.set(l.value,u.value)}return{status:A.value,value:i}})}else{const i=new Map;for(const o of a){const l=o.key,u=o.value;if(l.status==="aborted"||u.status==="aborted")return se;(l.status==="dirty"||u.status==="dirty")&&A.dirty(),i.set(l.value,u.value)}return{status:A.value,value:i}}}}_B.create=(t,e,A)=>new _B({valueType:e,keyType:t,typeName:x.ZodMap,...oe(A)});class Zi extends he{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.set)return G(r,{code:D.invalid_type,expected:J.set,received:r.parsedType}),se;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(G(r,{code:D.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),A.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(G(r,{code:D.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),A.dirty());const s=this._def.valueType;function a(o){const l=new Set;for(const u of o){if(u.status==="aborted")return se;u.status==="dirty"&&A.dirty(),l.add(u.value)}return{status:A.value,value:l}}const i=[...r.data.values()].map((o,l)=>s._parse(new ln(r,o,r.path,l)));return r.common.async?Promise.all(i).then(o=>a(o)):a(i)}min(e,A){return new Zi({...this._def,minSize:{value:e,message:Z.toString(A)}})}max(e,A){return new Zi({...this._def,maxSize:{value:e,message:Z.toString(A)}})}size(e,A){return this.min(e,A).max(e,A)}nonempty(e){return this.min(1,e)}}Zi.create=(t,e)=>new Zi({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...oe(e)});class vB extends he{get schema(){return this._def.getter()}_parse(e){const{ctx:A}=this._processInputParams(e);return this._def.getter()._parse({data:A.data,path:A.path,parent:A})}}vB.create=(t,e)=>new vB({getter:t,typeName:x.ZodLazy,...oe(e)});class CB extends he{_parse(e){if(e.data!==this._def.value){const A=this._getOrReturnCtx(e);return G(A,{received:A.data,code:D.invalid_literal,expected:this._def.value}),se}return{status:"valid",value:e.data}}get value(){return this._def.value}}CB.create=(t,e)=>new CB({value:t,typeName:x.ZodLiteral,...oe(e)});function vE(t,e){return new Ys({values:t,typeName:x.ZodEnum,...oe(e)})}class Ys extends he{_parse(e){if(typeof e.data!="string"){const A=this._getOrReturnCtx(e),r=this._def.values;return G(A,{expected:pe.joinValues(r),received:A.parsedType,code:D.invalid_type}),se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const A=this._getOrReturnCtx(e),r=this._def.values;return G(A,{received:A.data,code:D.invalid_enum_value,options:r}),se}return gA(e.data)}get options(){return this._def.values}get enum(){const e={};for(const A of this._def.values)e[A]=A;return e}get Values(){const e={};for(const A of this._def.values)e[A]=A;return e}get Enum(){const e={};for(const A of this._def.values)e[A]=A;return e}extract(e,A=this._def){return Ys.create(e,{...this._def,...A})}exclude(e,A=this._def){return Ys.create(this.options.filter(r=>!e.includes(r)),{...this._def,...A})}}Ys.create=vE;class bB extends he{_parse(e){const A=pe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==J.string&&r.parsedType!==J.number){const n=pe.objectValues(A);return G(r,{expected:pe.joinValues(n),received:r.parsedType,code:D.invalid_type}),se}if(this._cache||(this._cache=new Set(pe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=pe.objectValues(A);return G(r,{received:r.data,code:D.invalid_enum_value,options:n}),se}return gA(e.data)}get enum(){return this._def.values}}bB.create=(t,e)=>new bB({values:t,typeName:x.ZodNativeEnum,...oe(e)});class $u extends he{unwrap(){return this._def.type}_parse(e){const{ctx:A}=this._processInputParams(e);if(A.parsedType!==J.promise&&A.common.async===!1)return G(A,{code:D.invalid_type,expected:J.promise,received:A.parsedType}),se;const r=A.parsedType===J.promise?A.data:Promise.resolve(A.data);return gA(r.then(n=>this._def.type.parseAsync(n,{path:A.path,errorMap:A.common.contextualErrorMap})))}}$u.create=(t,e)=>new $u({type:t,typeName:x.ZodPromise,...oe(e)});class qs extends he{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:A,ctx:r}=this._processInputParams(e),n=this._def.effect||null,s={addIssue:a=>{G(r,a),a.fatal?A.abort():A.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){const a=n.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async i=>{if(A.value==="aborted")return se;const o=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return o.status==="aborted"?se:o.status==="dirty"||A.value==="dirty"?ti(o.value):o});{if(A.value==="aborted")return se;const i=this._def.schema._parseSync({data:a,path:r.path,parent:r});return i.status==="aborted"?se:i.status==="dirty"||A.value==="dirty"?ti(i.value):i}}if(n.type==="refinement"){const a=i=>{const o=n.refinement(i,s);if(r.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?se:(i.status==="dirty"&&A.dirty(),a(i.value),{status:A.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?se:(i.status==="dirty"&&A.dirty(),a(i.value).then(()=>({status:A.value,value:i.value}))))}if(n.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xs(a))return se;const i=n.transform(a.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:A.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Xs(a)?Promise.resolve(n.transform(a.value,s)).then(i=>({status:A.value,value:i})):se);pe.assertNever(n)}}qs.create=(t,e,A)=>new qs({schema:t,typeName:x.ZodEffects,effect:e,...oe(A)});qs.createWithPreprocess=(t,e,A)=>new qs({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...oe(A)});class An extends he{_parse(e){return this._getType(e)===J.undefined?gA(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}An.create=(t,e)=>new An({innerType:t,typeName:x.ZodOptional,...oe(e)});class ea extends he{_parse(e){return this._getType(e)===J.null?gA(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ea.create=(t,e)=>new ea({innerType:t,typeName:x.ZodNullable,...oe(e)});class up extends he{_parse(e){const{ctx:A}=this._processInputParams(e);let r=A.data;return A.parsedType===J.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:A.path,parent:A})}removeDefault(){return this._def.innerType}}up.create=(t,e)=>new up({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...oe(e)});class cp extends he{_parse(e){const{ctx:A}=this._processInputParams(e),r={...A,common:{...A.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Pu(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wr(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new wr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}cp.create=(t,e)=>new cp({innerType:t,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...oe(e)});class EB extends he{_parse(e){if(this._getType(e)!==J.nan){const r=this._getOrReturnCtx(e);return G(r,{code:D.invalid_type,expected:J.nan,received:r.parsedType}),se}return{status:"valid",value:e.data}}}EB.create=t=>new EB({typeName:x.ZodNaN,...oe(t)});class kR extends he{_parse(e){const{ctx:A}=this._processInputParams(e),r=A.data;return this._def.type._parse({data:r,path:A.path,parent:A})}unwrap(){return this._def.type}}class qm extends he{_parse(e){const{status:A,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?se:s.status==="dirty"?(A.dirty(),ti(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?se:n.status==="dirty"?(A.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,A){return new qm({in:e,out:A,typeName:x.ZodPipeline})}}class dp extends he{_parse(e){const A=this._def.innerType._parse(e),r=n=>(Xs(n)&&(n.value=Object.freeze(n.value)),n);return Pu(A)?A.then(n=>r(n)):r(A)}unwrap(){return this._def.innerType}}dp.create=(t,e)=>new dp({innerType:t,typeName:x.ZodReadonly,...oe(e)});var x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(x||(x={}));const CE=jr.create,QB=op.create;un.create;ZA.create;const bE=Ne.create;Nu.create;Du.create;Gn.create;Ys.create;$u.create;An.create;ea.create;var $c={exports:{}},EE={};function mA(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var RR=mA;mA.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};mA.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};mA.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var A=this._timeouts.shift();if(A===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),A=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},A),this._options.unref&&this._timer.unref(),!0};mA.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var A=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){A._operationTimeoutCb()},A._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};mA.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};mA.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};mA.prototype.start=mA.prototype.try;mA.prototype.errors=function(){return this._errors};mA.prototype.attempts=function(){return this._attempts};mA.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,A=0,r=0;r<this._errors.length;r++){var n=this._errors[r],s=n.message,a=(t[s]||0)+1;t[s]=a,a>=A&&(e=n,A=a)}return e};(function(t){var e=RR;t.operation=function(A){var r=t.timeouts(A);return new e(r,{forever:A&&(A.forever||A.retries===1/0),unref:A&&A.unref,maxRetryTime:A&&A.maxRetryTime})},t.timeouts=function(A){if(A instanceof Array)return[].concat(A);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in A)r[n]=A[n];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return A&&A.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(i,o){return i-o}),s},t.createTimeout=function(A,r){var n=r.randomize?Math.random()+1:1,s=Math.round(n*Math.max(r.minTimeout,1)*Math.pow(r.factor,A));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(A,r,n){if(r instanceof Array&&(n=r,r=null),!n){n=[];for(var s in A)typeof A[s]=="function"&&n.push(s)}for(var a=0;a<n.length;a++){var i=n[a],o=A[i];A[i]=(function(u){var c=t.operation(r),d=Array.prototype.slice.call(arguments,1),h=d.pop();d.push(function(f){c.retry(f)||(f&&(arguments[0]=c.mainError()),h.apply(this,arguments))}),c.attempt(function(){u.apply(A,d)})}).bind(A,o),A[i].options=r}}})(EE);var LR=EE;const PR=LR,HR=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class QE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const NR=(t,e,A)=>{const r=A.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},DR=t=>HR.includes(t),UE=(t,e)=>new Promise((A,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const n=PR.operation(e);n.attempt(async s=>{try{A(await t(s))}catch(a){if(!(a instanceof Error)){r(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof QE)n.stop(),r(a.originalError);else if(a instanceof TypeError&&!DR(a.message))n.stop(),r(a);else{NR(a,s,e);try{await e.onFailedAttempt(a)}catch(i){r(i);return}n.retry(a)||r(n.mainError())}}})});$c.exports=UE;$c.exports.default=UE;$c.exports.AbortError=QE;var $R=$c.exports;const Mu=tc($R),MR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Bi(t){return typeof t=="string"&&MR.test(t)}function jR(t){if(!Bi(t))throw TypeError("Invalid UUID");var e,A=new Uint8Array(16);return A[0]=(e=parseInt(t.slice(0,8),16))>>>24,A[1]=e>>>16&255,A[2]=e>>>8&255,A[3]=e&255,A[4]=(e=parseInt(t.slice(9,13),16))>>>8,A[5]=e&255,A[6]=(e=parseInt(t.slice(14,18),16))>>>8,A[7]=e&255,A[8]=(e=parseInt(t.slice(19,23),16))>>>8,A[9]=e&255,A[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,A[11]=e/4294967296&255,A[12]=e>>>24&255,A[13]=e>>>16&255,A[14]=e>>>8&255,A[15]=e&255,A}var nt=[];for(var af=0;af<256;++af)nt.push((af+256).toString(16).slice(1));function FE(t,e=0){return(nt[t[e+0]]+nt[t[e+1]]+nt[t[e+2]]+nt[t[e+3]]+"-"+nt[t[e+4]]+nt[t[e+5]]+"-"+nt[t[e+6]]+nt[t[e+7]]+"-"+nt[t[e+8]]+nt[t[e+9]]+"-"+nt[t[e+10]]+nt[t[e+11]]+nt[t[e+12]]+nt[t[e+13]]+nt[t[e+14]]+nt[t[e+15]]).toLowerCase()}var cl,KR=new Uint8Array(16);function GR(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(KR)}function VR(t){t=unescape(encodeURIComponent(t));for(var e=[],A=0;A<t.length;++A)e.push(t.charCodeAt(A));return e}var zR="6ba7b810-9dad-11d1-80b4-00c04fd430c8",WR="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function JR(t,e,A){function r(n,s,a,i){var o;if(typeof n=="string"&&(n=VR(n)),typeof s=="string"&&(s=jR(s)),((o=s)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+n.length);if(l.set(s),l.set(n,s.length),l=A(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){i=i||0;for(var u=0;u<16;++u)a[i+u]=l[u];return a}return FE(l)}try{r.name=t}catch{}return r.DNS=zR,r.URL=WR,r}var ZR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const UB={randomUUID:ZR};function Et(t,e,A){if(UB.randomUUID&&!t)return UB.randomUUID();t=t||{};var r=t.random||(t.rng||GR)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,FE(r)}function XR(t,e,A,r){switch(t){case 0:return e&A^~e&r;case 1:return e^A^r;case 2:return e&A^e&r^A&r;case 3:return e^A^r}}function of(t,e){return t<<e|t>>>32-e}function YR(t){var e=[1518500249,1859775393,2400959708,3395469782],A=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var n=0;n<r.length;++n)t.push(r.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,a=Math.ceil(s/16),i=new Array(a),o=0;o<a;++o){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[o*64+u*4]<<24|t[o*64+u*4+1]<<16|t[o*64+u*4+2]<<8|t[o*64+u*4+3];i[o]=l}i[a-1][14]=(t.length-1)*8/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=(t.length-1)*8&4294967295;for(var c=0;c<a;++c){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=i[c][h];for(var f=16;f<80;++f)d[f]=of(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var w=A[0],y=A[1],p=A[2],m=A[3],g=A[4],B=0;B<80;++B){var _=Math.floor(B/20),v=of(w,5)+XR(_,y,p,m)+g+e[_]+d[B]>>>0;g=m,m=p,p=of(y,30)>>>0,y=w,w=v}A[0]=A[0]+w>>>0,A[1]=A[1]+y>>>0,A[2]=A[2]+p>>>0,A[3]=A[3]+m>>>0,A[4]=A[4]+g>>>0}return[A[0]>>24&255,A[0]>>16&255,A[0]>>8&255,A[0]&255,A[1]>>24&255,A[1]>>16&255,A[1]>>8&255,A[1]&255,A[2]>>24&255,A[2]>>16&255,A[2]>>8&255,A[2]&255,A[3]>>24&255,A[3]>>16&255,A[3]>>8&255,A[3]&255,A[4]>>24&255,A[4]>>16&255,A[4]>>8&255,A[4]&255]}var FB=JR("v5",80,YR);let qR=class{getStore(){}run(e,A){return A()}};const lf=Symbol.for("ls:tracing_async_local_storage"),eL=new qR;let tL=class{getInstance(){return globalThis[lf]??eL}initializeGlobalInstance(e){globalThis[lf]===void 0&&(globalThis[lf]=e)}};const AL=new tL;function rL(t=!1){const e=AL.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function eg(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const nL=Object.prototype.hasOwnProperty;function fp(t,e){return nL.call(t,e)}function hp(t){if(Array.isArray(t)){const A=new Array(t.length);for(let r=0;r<A.length;r++)A[r]=""+r;return A}if(Object.keys)return Object.keys(t);let e=[];for(let A in t)fp(t,A)&&e.push(A);return e}function zA(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function pp(t){let e=0;const A=t.length;let r;for(;e<A;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function os(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function sL(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function mp(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let A=0,r=t.length;A<r;A++)if(mp(t[A]))return!0}else if(typeof t=="object"){const A=hp(t),r=A.length;for(var e=0;e<r;e++)if(mp(t[A[e]]))return!0}}return!1}function IB(t,e){const A=[t];for(const r in e){const n=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof n<"u"&&A.push(`${r}: ${n}`)}return A.join(`
`)}class aL extends Error{constructor(e,A,r,n,s){super(IB(e,{name:A,index:r,operation:n,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=IB(e,{name:A,index:r,operation:n,tree:s})}}const De=aL,Ts={add:function(t,e,A){return t[e]=this.value,{newDocument:A}},remove:function(t,e,A){var r=t[e];return delete t[e],{newDocument:A,removed:r}},replace:function(t,e,A){var r=t[e];return t[e]=this.value,{newDocument:A,removed:r}},move:function(t,e,A){let r=gp(A,this.path);r&&(r=zA(r));const n=_i(A,{op:"remove",path:this.from}).removed;return _i(A,{op:"add",path:this.path,value:n}),{newDocument:A,removed:r}},copy:function(t,e,A){const r=gp(A,this.from);return _i(A,{op:"add",path:this.path,value:zA(r)}),{newDocument:A}},test:function(t,e,A){return{newDocument:A,test:Ku(t[e],this.value)}},_get:function(t,e,A){return this.value=t[e],{newDocument:A}}};var iL={add:function(t,e,A){return pp(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:A,index:e}},remove:function(t,e,A){var r=t.splice(e,1);return{newDocument:A,removed:r[0]}},replace:function(t,e,A){var r=t[e];return t[e]=this.value,{newDocument:A,removed:r}},move:Ts.move,copy:Ts.copy,test:Ts.test,_get:Ts._get};function gp(t,e){if(e=="")return t;var A={op:"_get",path:e};return _i(t,A),A.value}function _i(t,e,A=!1,r=!0,n=!0,s=0){if(A&&(typeof A=="function"?A(e,0,t,e.path):wp(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=gp(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Ku(t,e.value),a.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(A)throw new De("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{r||(t=zA(t));const i=(e.path||"").split("/");let o=t,l=1,u=i.length,c,d,h;for(typeof A=="function"?h=A:h=wp;;){if(d=i[l],d&&d.indexOf("~")!=-1&&(d=sL(d)),n&&(d=="__proto__"||d=="prototype"&&l>0&&i[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(A&&c===void 0&&(o[d]===void 0?c=i.slice(0,l).join("/"):l==u-1&&(c=e.path),c!==void 0&&h(e,0,t,c)),l++,Array.isArray(o)){if(d==="-")d=o.length;else{if(A&&!pp(d))throw new De("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);pp(d)&&(d=~~d)}if(l>=u){if(A&&e.op==="add"&&d>o.length)throw new De("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const f=iL[e.op].call(e,o,d,t);if(f.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}}else if(l>=u){const f=Ts[e.op].call(e,o,d,t);if(f.test===!1)throw new De("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}if(o=o[d],A&&l<u&&(!o||typeof o!="object"))throw new De("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function ju(t,e,A,r=!0,n=!0){if(A&&!Array.isArray(e))throw new De("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=zA(t));const s=new Array(e.length);for(let a=0,i=e.length;a<i;a++)s[a]=_i(t,e[a],A,!0,n,a),t=s[a].newDocument;return s.newDocument=t,s}function wp(t,e,A,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new De("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,A);if(Ts[t.op]){if(typeof t.path!="string")throw new De("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,A);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new De('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,A);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new De("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new De("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&mp(t.value))throw new De("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,A);if(A){if(t.op=="add"){var n=t.path.split("/").length,s=r.split("/").length;if(n!==s+1&&n!==s)throw new De("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,A)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new De("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,A)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},i=oL([a],A);if(i&&i.name==="OPERATION_PATH_UNRESOLVABLE")throw new De("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,A)}}}else throw new De("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,A)}function oL(t,e,A){try{if(!Array.isArray(t))throw new De("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)ju(zA(e),zA(t),A||!0);else{A=A||wp;for(var r=0;r<t.length;r++)A(t[r],r,e,void 0)}}catch(n){if(n instanceof De)return n;throw n}}function Ku(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var A=Array.isArray(t),r=Array.isArray(e),n,s,a;if(A&&r){if(s=t.length,s!=e.length)return!1;for(n=s;n--!==0;)if(!Ku(t[n],e[n]))return!1;return!0}if(A!=r)return!1;var i=Object.keys(t);if(s=i.length,s!==Object.keys(e).length)return!1;for(n=s;n--!==0;)if(!e.hasOwnProperty(i[n]))return!1;for(n=s;n--!==0;)if(a=i[n],!Ku(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function IE(t,e,A,r,n){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=hp(e),a=hp(t),i=!1,o=a.length-1;o>=0;o--){var l=a[o],u=t[l];if(fp(e,l)&&!(e[l]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var c=e[l];typeof u=="object"&&u!=null&&typeof c=="object"&&c!=null&&Array.isArray(u)===Array.isArray(c)?IE(u,c,A,r+"/"+os(l),n):u!==c&&(n&&A.push({op:"test",path:r+"/"+os(l),value:zA(u)}),A.push({op:"replace",path:r+"/"+os(l),value:zA(c)}))}else Array.isArray(t)===Array.isArray(e)?(n&&A.push({op:"test",path:r+"/"+os(l),value:zA(u)}),A.push({op:"remove",path:r+"/"+os(l)}),i=!0):(n&&A.push({op:"test",path:r,value:t}),A.push({op:"replace",path:r,value:e}))}if(!(!i&&s.length==a.length))for(var o=0;o<s.length;o++){var l=s[o];!fp(t,l)&&e[l]!==void 0&&A.push({op:"add",path:r+"/"+os(l),value:zA(e[l])})}}}function lL(t,e,A=!1){var r=[];return IE(t,e,r,"",A),r}const uL="gen_ai.operation.name",cL="gen_ai.system",SB="gen_ai.request.model",dL="gen_ai.response.model",xB="gen_ai.usage.input_tokens",TB="gen_ai.usage.output_tokens",OB="gen_ai.usage.total_tokens",fL="gen_ai.request.max_tokens",hL="gen_ai.request.temperature",pL="gen_ai.request.top_p",mL="gen_ai.request.frequency_penalty",gL="gen_ai.request.presence_penalty",wL="gen_ai.response.finish_reasons",yL="gen_ai.prompt",BL="gen_ai.completion",_L="gen_ai.request.extra_query",vL="gen_ai.request.extra_body",CL="gen_ai.serialized.name",bL="gen_ai.serialized.signature",EL="gen_ai.serialized.doc",QL="gen_ai.response.id",UL="gen_ai.response.service_tier",FL="gen_ai.response.system_fingerprint",IL="gen_ai.usage.input_token_details",SL="gen_ai.usage.output_token_details",xL="langsmith.trace.session_id",TL="langsmith.trace.session_name",OL="langsmith.span.kind",kL="langsmith.trace.name",RL="langsmith.metadata",kB="langsmith.span.tags",LL="langsmith.request.streaming",PL="langsmith.request.headers",HL=(...t)=>fetch(...t),SE=Symbol.for("ls:fetch_implementation"),NL=()=>{const t=globalThis[SE];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},DL=t=>async(...e)=>{if(t||Rt("DEBUG")==="true"){const[r,n]=e;console.log(`→ ${(n==null?void 0:n.method)||"GET"} ${r}`)}const A=await(globalThis[SE]??HL)(...e);return(t||Rt("DEBUG")==="true")&&console.log(`← ${A.status} ${A.statusText} ${A.url}`),A},xE=()=>Rt("PROJECT")??XA("LANGCHAIN_SESSION")??"default",TE="0.3.67";var vi={};let DA;const $L=()=>typeof window<"u"&&typeof window.document<"u",ML=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",jL=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),OE=()=>typeof Deno<"u",KL=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!OE(),kE=()=>DA||(typeof Bun<"u"?DA="bun":$L()?DA="browser":KL()?DA="node":ML()?DA="webworker":jL()?DA="jsdom":OE()?DA="deno":DA="other",DA);let uf;function RE(){if(uf===void 0){const t=kE(),e=zL();uf={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:TE,...e}}return uf}function GL(){const t=VL()||{},e={},A=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,n]of Object.entries(t))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof n=="string"&&!A.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=n:e[r]=n);return e}function VL(){try{return typeof process<"u"&&vi?Object.entries(vi).reduce((t,[e,A])=>(t[e]=String(A),t),{}):void 0}catch{return}}function XA(t){try{return typeof process<"u"?vi==null?void 0:vi[t]:void 0}catch{return}}function Rt(t){return XA(`LANGSMITH_${t}`)||XA(`LANGCHAIN_${t}`)}let cf;function zL(){if(cf!==void 0)return cf;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const A of t){const r=XA(A);r!==void 0&&(e[A]=r)}return cf=e,e}function LE(){return XA("OTEL_ENABLED")==="true"||Rt("OTEL_ENABLED")==="true"}class WL{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...A){!this.hasWarned&&LE()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(A.length===1&&typeof A[0]=="function"?r=A[0]:A.length===2&&typeof A[1]=="function"?r=A[1]:A.length===3&&typeof A[2]=="function"&&(r=A[2]),typeof r=="function")return r()}}class JL{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new WL})}getTracer(e,A){return this.mockTracer}getActiveSpan(){}setSpan(e,A){return e}getSpan(e){}setSpanContext(e,A){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class ZL{active(){return{}}with(e,A){return A()}}const df=Symbol.for("ls:otel_trace"),ff=Symbol.for("ls:otel_context"),RB=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),XL=new JL,YL=new ZL;class qL{getTraceInstance(){return globalThis[df]??XL}getContextInstance(){return globalThis[ff]??YL}initializeGlobalInstances(e){globalThis[df]===void 0&&(globalThis[df]=e.trace),globalThis[ff]===void 0&&(globalThis[ff]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[RB]=e}getDefaultOTLPTracerComponents(){return globalThis[RB]??void 0}}const tg=new qL;function PE(){return tg.getTraceInstance()}function eP(){return tg.getContextInstance()}function tP(){return tg.getDefaultOTLPTracerComponents()}const AP={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function rP(t){return AP[t]||t}class nP{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,A){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const n=this.createSpanForRun(r,r.run,A.get(r.id));n&&!r.run.end_time&&this.spans.set(r.id,n)}else this.updateSpanForRun(r,r.run)}catch(n){console.error(`Error processing operation ${r.id}:`,n)}}createSpanForRun(e,A,r){const n=r&&PE().getSpan(r);if(n)try{return this.finishSpanSetup(n,A,e)}catch(s){console.error(`Failed to create span for run ${e.id}:`,s);return}}finishSpanSetup(e,A,r){return this.setSpanAttributes(e,A,r),A.error?(e.setStatus({code:2}),e.recordException(new Error(A.error))):e.setStatus({code:1}),A.end_time&&e.end(new Date(A.end_time)),e}updateSpanForRun(e,A){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,A,e),A.error?(r.setStatus({code:2}),r.recordException(new Error(A.error))):r.setStatus({code:1});const n=A.end_time;n&&(r.end(new Date(n)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var A;if((A=e.extra)!=null&&A.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const n=r.invocation_params;if(n.model)return n.model;if(n.model_name)return n.model_name}}}setSpanAttributes(e,A,r){var i;if("run_type"in A&&A.run_type){e.setAttribute(OL,A.run_type);const o=rP(A.run_type||"chain");e.setAttribute(uL,o)}"name"in A&&A.name&&e.setAttribute(kL,A.name),"session_id"in A&&A.session_id&&e.setAttribute(xL,A.session_id),"session_name"in A&&A.session_name&&e.setAttribute(TL,A.session_name),this.setGenAiSystem(e,A);const n=this.extractModelName(A);n&&e.setAttribute(SB,n),"prompt_tokens"in A&&typeof A.prompt_tokens=="number"&&e.setAttribute(xB,A.prompt_tokens),"completion_tokens"in A&&typeof A.completion_tokens=="number"&&e.setAttribute(TB,A.completion_tokens),"total_tokens"in A&&typeof A.total_tokens=="number"&&e.setAttribute(OB,A.total_tokens),this.setInvocationParameters(e,A);const s=((i=A.extra)==null?void 0:i.metadata)||{};for(const[o,l]of Object.entries(s))l!=null&&e.setAttribute(`${RL}.${o}`,String(l));const a=A.tags;if(a&&Array.isArray(a)?e.setAttribute(kB,a.join(", ")):a&&e.setAttribute(kB,String(a)),"serialized"in A&&typeof A.serialized=="object"){const o=A.serialized;o.name&&e.setAttribute(CL,String(o.name)),o.signature&&e.setAttribute(bL,String(o.signature)),o.doc&&e.setAttribute(EL,String(o.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,A){let r="langchain";const n=this.extractModelName(A);if(n){const s=n.toLowerCase();s.includes("anthropic")||s.startsWith("claude")?r="anthropic":s.includes("bedrock")?r="aws.bedrock":s.includes("azure")&&s.includes("openai")?r="az.ai.openai":s.includes("azure")&&s.includes("inference")?r="az.ai.inference":s.includes("cohere")?r="cohere":s.includes("deepseek")?r="deepseek":s.includes("gemini")?r="gemini":s.includes("groq")?r="groq":s.includes("watson")||s.includes("ibm")?r="ibm.watsonx.ai":s.includes("mistral")?r="mistral_ai":s.includes("gpt")||s.includes("openai")?r="openai":s.includes("perplexity")||s.includes("sonar")?r="perplexity":s.includes("vertex")?r="vertex_ai":(s.includes("xai")||s.includes("grok"))&&(r="xai")}e.setAttribute(cL,r)}setInvocationParameters(e,A){var n,s;if(!((s=(n=A.extra)==null?void 0:n.metadata)!=null&&s.invocation_params))return;const r=A.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(fL,r.max_tokens),r.temperature!==void 0&&e.setAttribute(hL,r.temperature),r.top_p!==void 0&&e.setAttribute(pL,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(mL,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(gL,r.presence_penalty)}setIOAttributes(e,A){if(A.run.inputs)try{const r=A.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(SB,r.model),r.stream!==void 0&&e.setAttribute(LL,r.stream),r.extra_headers&&e.setAttribute(PL,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(_L,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(vL,JSON.stringify(r.extra_body))),e.setAttribute(yL,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${A.id}`,r)}if(A.run.outputs)try{const r=A.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(xB,n[0]),e.setAttribute(TB,n[1]),e.setAttribute(OB,n[0]+n[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(dL,String(r.model)),r.id&&e.setAttribute(QL,r.id),r.choices&&Array.isArray(r.choices)){const s=r.choices.map(a=>a.finish_reason).filter(a=>a).map(String);s.length>0&&e.setAttribute(wL,s.join(", "))}if(r.service_tier&&e.setAttribute(UL,r.service_tier),r.system_fingerprint&&e.setAttribute(FL,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const s=r.usage_metadata;s.input_token_details&&e.setAttribute(IL,JSON.stringify(s.input_token_details)),s.output_token_details&&e.setAttribute(SL,JSON.stringify(s.output_token_details))}}e.setAttribute(BL,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${A.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let A=this.extractUnifiedRunTokens(e.usage_metadata);if(A)return A;const r=Object.keys(e);for(const a of r){const i=e[a];if(!(!i||typeof i!="object")&&(A=this.extractUnifiedRunTokens(i.usage_metadata),A||i.lc===1&&i.kwargs&&typeof i.kwargs=="object"&&(A=this.extractUnifiedRunTokens(i.kwargs.usage_metadata),A)))return A}const n=e.generations||[];if(!Array.isArray(n))return null;const s=Array.isArray(n[0])?n.flat():n;for(const a of s)if(typeof a=="object"&&a.message&&typeof a.message=="object"&&a.message.kwargs&&typeof a.message.kwargs=="object"&&(A=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),A))return A;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}var HE={},NE={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,A="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(A=!1));function n(o,l,u){this.fn=o,this.context=l,this.once=u||!1}function s(o,l,u,c,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new n(u,c||o,d),f=A?A+l:l;return o._events[f]?o._events[f].fn?o._events[f]=[o._events[f],h]:o._events[f].push(h):(o._events[f]=h,o._eventsCount++),o}function a(o,l){--o._eventsCount===0?o._events=new r:delete o._events[l]}function i(){this._events=new r,this._eventsCount=0}i.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)e.call(u,c)&&l.push(A?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},i.prototype.listeners=function(l){var u=A?A+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,h=c.length,f=new Array(h);d<h;d++)f[d]=c[d].fn;return f},i.prototype.listenerCount=function(l){var u=A?A+l:l,c=this._events[u];return c?c.fn?1:c.length:0},i.prototype.emit=function(l,u,c,d,h,f){var w=A?A+l:l;if(!this._events[w])return!1;var y=this._events[w],p=arguments.length,m,g;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),p){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,c),!0;case 4:return y.fn.call(y.context,u,c,d),!0;case 5:return y.fn.call(y.context,u,c,d,h),!0;case 6:return y.fn.call(y.context,u,c,d,h,f),!0}for(g=1,m=new Array(p-1);g<p;g++)m[g-1]=arguments[g];y.fn.apply(y.context,m)}else{var B=y.length,_;for(g=0;g<B;g++)switch(y[g].once&&this.removeListener(l,y[g].fn,void 0,!0),p){case 1:y[g].fn.call(y[g].context);break;case 2:y[g].fn.call(y[g].context,u);break;case 3:y[g].fn.call(y[g].context,u,c);break;case 4:y[g].fn.call(y[g].context,u,c,d);break;default:if(!m)for(_=1,m=new Array(p-1);_<p;_++)m[_-1]=arguments[_];y[g].fn.apply(y[g].context,m)}}return!0},i.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},i.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},i.prototype.removeListener=function(l,u,c,d){var h=A?A+l:l;if(!this._events[h])return this;if(!u)return a(this,h),this;var f=this._events[h];if(f.fn)f.fn===u&&(!d||f.once)&&(!c||f.context===c)&&a(this,h);else{for(var w=0,y=[],p=f.length;w<p;w++)(f[w].fn!==u||d&&!f[w].once||c&&f[w].context!==c)&&y.push(f[w]);y.length?this._events[h]=y.length===1?y[0]:y:a(this,h)}return this},i.prototype.removeAllListeners=function(l){var u;return l?(u=A?A+l:l,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=A,i.EventEmitter=i,t.exports=i})(NE);var sP=NE.exports,Mc={exports:{}},aP=(t,e)=>(e=e||(()=>{}),t.then(A=>new Promise(r=>{r(e())}).then(()=>A),A=>new Promise(r=>{r(e())}).then(()=>{throw A})));const iP=aP;class DE extends Error{constructor(e){super(e),this.name="TimeoutError"}}const $E=(t,e,A)=>new Promise((r,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const s=setTimeout(()=>{if(typeof A=="function"){try{r(A())}catch(o){n(o)}return}const a=typeof A=="string"?A:`Promise timed out after ${e} milliseconds`,i=A instanceof Error?A:new DE(a);typeof t.cancel=="function"&&t.cancel(),n(i)},e);iP(t.then(r,n),()=>{clearTimeout(s)})});Mc.exports=$E;Mc.exports.default=$E;Mc.exports.TimeoutError=DE;var oP=Mc.exports,Ag={},rg={};Object.defineProperty(rg,"__esModule",{value:!0});function lP(t,e,A){let r=0,n=t.length;for(;n>0;){const s=n/2|0;let a=r+s;A(t[a],e)<=0?(r=++a,n-=s+1):n=s}return r}rg.default=lP;Object.defineProperty(Ag,"__esModule",{value:!0});const uP=rg;class cP{constructor(){this._queue=[]}enqueue(e,A){A=Object.assign({priority:0},A);const r={priority:A.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=A.priority){this._queue.push(r);return}const n=uP.default(this._queue,r,(s,a)=>a.priority-s.priority);this._queue.splice(n,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(A=>A.priority===e.priority).map(A=>A.run)}get size(){return this._queue.length}}Ag.default=cP;Object.defineProperty(HE,"__esModule",{value:!0});const dP=sP,ME=oP,fP=Ag,dl=()=>{},hP=new ME.TimeoutError;class pP extends dP{constructor(e){var A,r,n,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=dl,this._resolveIdle=dl,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:fP.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(A=e.intervalCap)===null||A===void 0?void 0:A.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=dl,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=dl,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const A=this._intervalEnd-e;if(A<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},A)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const A=this._queue.dequeue();return A?(this.emit("active"),A(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,A={}){return new Promise((r,n)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&A.timeout===void 0?e():ME.default(Promise.resolve(e()),A.timeout===void 0?this._timeout:A.timeout,()=>{(A.throwOnTimeout===void 0?this._throwOnTimeout:A.throwOnTimeout)&&n(hP)});r(await a)}catch(a){n(a)}this._next()};this._queue.enqueue(s,A),this._tryToStartAnother(),this.emit("add")})}async addAll(e,A){return Promise.all(e.map(async r=>this.add(r,A)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const A=this._resolveEmpty;this._resolveEmpty=()=>{A(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const A=this._resolveIdle;this._resolveIdle=()=>{A(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var dr=HE.default=pP;const mP=[429,500,502,503,504];let LB=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in dr?this.queue=new dr.default({concurrency:this.maxConcurrency}):this.queue=new dr({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...A){const r=this.onFailedResponseHook;return this.queue.add(()=>Mu(()=>e(...A).catch(n=>{throw n instanceof Error?n:new Error(n)}),{async onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.name==="TimeoutError"||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const s=n==null?void 0:n.response;if(r&&await r(s))return;const a=(s==null?void 0:s.status)??(n==null?void 0:n.status);if(a&&!mP.includes(+a))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,A,...r){return e.signal?Promise.race([this.call(A,...r),new Promise((n,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(A,...r)}};function PB(t){return typeof(t==null?void 0:t._getType)=="function"}function HB(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}const gP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ae(t,e){if(!gP.test(t)){const A=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(A)}return t}const NB={};function jE(t){NB[t]||(console.warn(t),NB[t]=!0)}var yp={exports:{}};const wP="2.0.0",KE=256,yP=Number.MAX_SAFE_INTEGER||9007199254740991,BP=16,_P=KE-6,vP=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var jc={MAX_LENGTH:KE,MAX_SAFE_COMPONENT_LENGTH:BP,MAX_SAFE_BUILD_LENGTH:_P,MAX_SAFE_INTEGER:yP,RELEASE_TYPES:vP,SEMVER_SPEC_VERSION:wP,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},hf={};const CP=typeof process=="object"&&hf&&hf.NODE_DEBUG&&/\bsemver\b/i.test(hf.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Kc=CP;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:A,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=jc,s=Kc;e=t.exports={};const a=e.re=[],i=e.safeRe=[],o=e.src=[],l=e.safeSrc=[],u=e.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",n],[d,r]],f=y=>{for(const[p,m]of h)y=y.split(`${p}*`).join(`${p}{0,${m}}`).split(`${p}+`).join(`${p}{1,${m}}`);return y},w=(y,p,m)=>{const g=f(p),B=c++;s(y,B,p),u[y]=B,o[B]=p,l[B]=g,a[B]=new RegExp(p,m?"g":void 0),i[B]=new RegExp(g,m?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),w("MAINVERSION",`(${o[u.NUMERICIDENTIFIER]})\\.(${o[u.NUMERICIDENTIFIER]})\\.(${o[u.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${o[u.NUMERICIDENTIFIERLOOSE]})\\.(${o[u.NUMERICIDENTIFIERLOOSE]})\\.(${o[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${o[u.NONNUMERICIDENTIFIER]}|${o[u.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${o[u.NONNUMERICIDENTIFIER]}|${o[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${o[u.PRERELEASEIDENTIFIER]}(?:\\.${o[u.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${o[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[u.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${d}+`),w("BUILD",`(?:\\+(${o[u.BUILDIDENTIFIER]}(?:\\.${o[u.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${o[u.MAINVERSION]}${o[u.PRERELEASE]}?${o[u.BUILD]}?`),w("FULL",`^${o[u.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${o[u.MAINVERSIONLOOSE]}${o[u.PRERELEASELOOSE]}?${o[u.BUILD]}?`),w("LOOSE",`^${o[u.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${o[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${o[u.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${o[u.XRANGEIDENTIFIER]})(?:\\.(${o[u.XRANGEIDENTIFIER]})(?:\\.(${o[u.XRANGEIDENTIFIER]})(?:${o[u.PRERELEASE]})?${o[u.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${o[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[u.XRANGEIDENTIFIERLOOSE]})(?:${o[u.PRERELEASELOOSE]})?${o[u.BUILD]}?)?)?`),w("XRANGE",`^${o[u.GTLT]}\\s*${o[u.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${o[u.GTLT]}\\s*${o[u.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${A}})(?:\\.(\\d{1,${A}}))?(?:\\.(\\d{1,${A}}))?`),w("COERCE",`${o[u.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",o[u.COERCEPLAIN]+`(?:${o[u.PRERELEASE]})?(?:${o[u.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",o[u.COERCE],!0),w("COERCERTLFULL",o[u.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${o[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${o[u.LONETILDE]}${o[u.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${o[u.LONETILDE]}${o[u.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${o[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${o[u.LONECARET]}${o[u.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${o[u.LONECARET]}${o[u.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${o[u.GTLT]}\\s*(${o[u.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${o[u.GTLT]}\\s*(${o[u.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${o[u.GTLT]}\\s*(${o[u.LOOSEPLAIN]}|${o[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${o[u.XRANGEPLAIN]})\\s+-\\s+(${o[u.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${o[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[u.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yp,yp.exports);var ho=yp.exports;const bP=Object.freeze({loose:!0}),EP=Object.freeze({}),QP=t=>t?typeof t!="object"?bP:t:EP;var ng=QP;const DB=/^[0-9]+$/,GE=(t,e)=>{const A=DB.test(t),r=DB.test(e);return A&&r&&(t=+t,e=+e),t===e?0:A&&!r?-1:r&&!A?1:t<e?-1:1},UP=(t,e)=>GE(e,t);var VE={compareIdentifiers:GE,rcompareIdentifiers:UP};const fl=Kc,{MAX_LENGTH:$B,MAX_SAFE_INTEGER:hl}=jc,{safeRe:pl,t:ml}=ho,FP=ng,{compareIdentifiers:ls}=VE;let IP=class $A{constructor(e,A){if(A=FP(A),e instanceof $A){if(e.loose===!!A.loose&&e.includePrerelease===!!A.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>$B)throw new TypeError(`version is longer than ${$B} characters`);fl("SemVer",e,A),this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease;const r=e.trim().match(A.loose?pl[ml.LOOSE]:pl[ml.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>hl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hl||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const s=+n;if(s>=0&&s<hl)return s}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(fl("SemVer.compare",this.version,this.options,e),!(e instanceof $A)){if(typeof e=="string"&&e===this.version)return 0;e=new $A(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof $A||(e=new $A(e,this.options)),ls(this.major,e.major)||ls(this.minor,e.minor)||ls(this.patch,e.patch)}comparePre(e){if(e instanceof $A||(e=new $A(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let A=0;do{const r=this.prerelease[A],n=e.prerelease[A];if(fl("prerelease compare",A,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return ls(r,n)}while(++A)}compareBuild(e){e instanceof $A||(e=new $A(e,this.options));let A=0;do{const r=this.build[A],n=e.build[A];if(fl("build compare",A,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return ls(r,n)}while(++A)}inc(e,A,r){if(e.startsWith("pre")){if(!A&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(A){const n=`-${A}`.match(this.options.loose?pl[ml.PRERELEASELOOSE]:pl[ml.PRERELEASE]);if(!n||n[1]!==A)throw new Error(`invalid identifier: ${A}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A,r),this.inc("pre",A,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",A,r),this.inc("pre",A,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(A===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(A){let s=[A,n];r===!1&&(s=[A]),ls(this.prerelease[0],A)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var sg=IP;const MB=sg,SP=(t,e,A)=>new MB(t,A).compare(new MB(e,A));var ca=SP;const xP=ca,TP=(t,e,A)=>xP(t,e,A)>0;var OP=TP;const kP=ca,RP=(t,e,A)=>kP(t,e,A)<0;var LP=RP;const PP=ca,HP=(t,e,A)=>PP(t,e,A)===0;var NP=HP;const DP=ca,$P=(t,e,A)=>DP(t,e,A)!==0;var MP=$P;const jP=ca,KP=(t,e,A)=>jP(t,e,A)>=0;var GP=KP;const VP=ca,zP=(t,e,A)=>VP(t,e,A)<=0;var WP=zP;const JP=NP,ZP=MP,XP=OP,YP=GP,qP=LP,eH=WP,tH=(t,e,A,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof A=="object"&&(A=A.version),t===A;case"!==":return typeof t=="object"&&(t=t.version),typeof A=="object"&&(A=A.version),t!==A;case"":case"=":case"==":return JP(t,A,r);case"!=":return ZP(t,A,r);case">":return XP(t,A,r);case">=":return YP(t,A,r);case"<":return qP(t,A,r);case"<=":return eH(t,A,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var AH=tH;const{safeRe:RD,t:LD}=ho;class rH{constructor(){this.max=1e3,this.map=new Map}get(e){const A=this.map.get(e);if(A!==void 0)return this.map.delete(e),this.map.set(e,A),A}delete(e){return this.map.delete(e)}set(e,A){if(!this.delete(e)&&A!==void 0){if(this.map.size>=this.max){const n=this.map.keys().next().value;this.delete(n)}this.map.set(e,A)}return this}}var nH=rH,pf,jB;function RA(){if(jB)return pf;jB=1;const t=/\s+/g;class e{constructor(O,$){if($=n($),O instanceof e)return O.loose===!!$.loose&&O.includePrerelease===!!$.includePrerelease?O:new e(O.raw,$);if(O instanceof s)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=O.trim().replace(t," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(F=>!w(F[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&y(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const $=this.set[O];for(let N=0;N<$.length;N++)N>0&&(this.formatted+=" "),this.formatted+=$[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const N=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+O,F=r.get(N);if(F)return F;const b=this.options.loose,I=b?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];O=O.replace(I,ne(this.options.includePrerelease)),a("hyphen replace",O),O=O.replace(o[l.COMPARATORTRIM],u),a("comparator trim",O),O=O.replace(o[l.TILDETRIM],c),a("tilde trim",O),O=O.replace(o[l.CARETTRIM],d),a("caret trim",O);let P=O.split(" ").map(q=>m(q,this.options)).join(" ").split(/\s+/).map(q=>j(q,this.options));b&&(P=P.filter(q=>(a("loose invalid filter",q,this.options),!!q.match(o[l.COMPARATORLOOSE])))),a("range list",P);const k=new Map,H=P.map(q=>new s(q,this.options));for(const q of H){if(w(q))return[q];k.set(q.value,q)}k.size>1&&k.has("")&&k.delete("");const X=[...k.values()];return r.set(N,X),X}intersects(O,$){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>p(N,$)&&O.set.some(F=>p(F,$)&&N.every(b=>F.every(I=>b.intersects(I,$)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new i(O,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(z(this.set[$],O,this.options))return!0;return!1}}pf=e;const A=nH,r=new A,n=ng,s=Gc(),a=Kc,i=sg,{safeRe:o,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=ho,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=jc,w=T=>T.value==="<0.0.0-0",y=T=>T.value==="",p=(T,O)=>{let $=!0;const N=T.slice();let F=N.pop();for(;$&&N.length;)$=N.every(b=>F.intersects(b,O)),F=N.pop();return $},m=(T,O)=>(a("comp",T,O),T=v(T,O),a("caret",T),T=B(T,O),a("tildes",T),T=Q(T,O),a("xrange",T),T=R(T,O),a("stars",T),T),g=T=>!T||T.toLowerCase()==="x"||T==="*",B=(T,O)=>T.trim().split(/\s+/).map($=>_($,O)).join(" "),_=(T,O)=>{const $=O.loose?o[l.TILDELOOSE]:o[l.TILDE];return T.replace($,(N,F,b,I,P)=>{a("tilde",T,N,F,b,I,P);let k;return g(F)?k="":g(b)?k=`>=${F}.0.0 <${+F+1}.0.0-0`:g(I)?k=`>=${F}.${b}.0 <${F}.${+b+1}.0-0`:P?(a("replaceTilde pr",P),k=`>=${F}.${b}.${I}-${P} <${F}.${+b+1}.0-0`):k=`>=${F}.${b}.${I} <${F}.${+b+1}.0-0`,a("tilde return",k),k})},v=(T,O)=>T.trim().split(/\s+/).map($=>C($,O)).join(" "),C=(T,O)=>{a("caret",T,O);const $=O.loose?o[l.CARETLOOSE]:o[l.CARET],N=O.includePrerelease?"-0":"";return T.replace($,(F,b,I,P,k)=>{a("caret",T,F,b,I,P,k);let H;return g(b)?H="":g(I)?H=`>=${b}.0.0${N} <${+b+1}.0.0-0`:g(P)?b==="0"?H=`>=${b}.${I}.0${N} <${b}.${+I+1}.0-0`:H=`>=${b}.${I}.0${N} <${+b+1}.0.0-0`:k?(a("replaceCaret pr",k),b==="0"?I==="0"?H=`>=${b}.${I}.${P}-${k} <${b}.${I}.${+P+1}-0`:H=`>=${b}.${I}.${P}-${k} <${b}.${+I+1}.0-0`:H=`>=${b}.${I}.${P}-${k} <${+b+1}.0.0-0`):(a("no pr"),b==="0"?I==="0"?H=`>=${b}.${I}.${P}${N} <${b}.${I}.${+P+1}-0`:H=`>=${b}.${I}.${P}${N} <${b}.${+I+1}.0-0`:H=`>=${b}.${I}.${P} <${+b+1}.0.0-0`),a("caret return",H),H})},Q=(T,O)=>(a("replaceXRanges",T,O),T.split(/\s+/).map($=>S($,O)).join(" ")),S=(T,O)=>{T=T.trim();const $=O.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return T.replace($,(N,F,b,I,P,k)=>{a("xRange",T,N,F,b,I,P,k);const H=g(b),X=H||g(I),q=X||g(P),be=q;return F==="="&&be&&(F=""),k=O.includePrerelease?"-0":"",H?F===">"||F==="<"?N="<0.0.0-0":N="*":F&&be?(X&&(I=0),P=0,F===">"?(F=">=",X?(b=+b+1,I=0,P=0):(I=+I+1,P=0)):F==="<="&&(F="<",X?b=+b+1:I=+I+1),F==="<"&&(k="-0"),N=`${F+b}.${I}.${P}${k}`):X?N=`>=${b}.0.0${k} <${+b+1}.0.0-0`:q&&(N=`>=${b}.${I}.0${k} <${b}.${+I+1}.0-0`),a("xRange return",N),N})},R=(T,O)=>(a("replaceStars",T,O),T.trim().replace(o[l.STAR],"")),j=(T,O)=>(a("replaceGTE0",T,O),T.trim().replace(o[O.includePrerelease?l.GTE0PRE:l.GTE0],"")),ne=T=>(O,$,N,F,b,I,P,k,H,X,q,be)=>(g(N)?$="":g(F)?$=`>=${N}.0.0${T?"-0":""}`:g(b)?$=`>=${N}.${F}.0${T?"-0":""}`:I?$=`>=${$}`:$=`>=${$}${T?"-0":""}`,g(H)?k="":g(X)?k=`<${+H+1}.0.0-0`:g(q)?k=`<${H}.${+X+1}.0-0`:be?k=`<=${H}.${X}.${q}-${be}`:T?k=`<${H}.${X}.${+q+1}-0`:k=`<=${k}`,`${$} ${k}`.trim()),z=(T,O,$)=>{for(let N=0;N<T.length;N++)if(!T[N].test(O))return!1;if(O.prerelease.length&&!$.includePrerelease){for(let N=0;N<T.length;N++)if(a(T[N].semver),T[N].semver!==s.ANY&&T[N].semver.prerelease.length>0){const F=T[N].semver;if(F.major===O.major&&F.minor===O.minor&&F.patch===O.patch)return!0}return!1}return!0};return pf}var mf,KB;function Gc(){if(KB)return mf;KB=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,c){if(c=A(c),u instanceof e){if(u.loose===!!c.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,c),this.options=c,this.loose=!!c.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const c=this.options.loose?r[n.COMPARATORLOOSE]:r[n.COMPARATOR],d=u.match(c);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new i(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new i(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,c){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(u.value,c).test(this.value):u.operator===""?u.value===""?!0:new o(this.value,c).test(u.semver):(c=A(c),c.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,c)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,c)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}mf=e;const A=ng,{safeRe:r,t:n}=ho,s=AH,a=Kc,i=sg,o=RA();return mf}RA();RA();RA();RA();RA();RA();const sH=Gc(),{ANY:PD}=sH;RA();RA();RA();const ag=Gc(),{ANY:HD}=ag;new ag(">=0.0.0-0");new ag(">=0.0.0");const gf=ho,GB=jc,VB=VE;Gc();RA();gf.re,gf.src,gf.t,GB.SEMVER_SPEC_VERSION,GB.RELEASE_TYPES,VB.compareIdentifiers,VB.rcompareIdentifiers;function Er(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,A]=t.split(":"),r=A||"latest";if(e.includes("/")){const[n,s]=e.split("/",2);if(!n||!s)throw new Error(`Invalid identifier format: ${t}`);return[n,s,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class aH extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Y(t,e,A){let r;if(t.ok){A&&(r=await t.text());return}if(t.status===403)try{const a=await t.json();if((a==null?void 0:a.error)==="org_scoped_key_requires_workspace")throw new Error("This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{throw new Error(`${t.status} ${t.statusText}`)}r=await t.text();const n=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${r}`;if(t.status===409)throw new aH(n);const s=new Error(n);throw s.status=t.status,s}const zE="ERR_CONFLICTING_ENDPOINTS";class iH extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:zE}),this.name="ConflictingEndpointsError"}}function oH(t){return typeof t=="object"&&t!==null&&t.code===zE}var zB="[...]",lH={result:"[Circular]"},Gu=[],Os=[];const uH=new TextEncoder;function cH(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function gl(t){return uH.encode(t)}function WE(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function dH(t){return function(e,A){return WE(A)}}function Gt(t,e,A,r,n){var s;try{const a=JSON.stringify(t,dH(A),r);return gl(a)}catch(a){if(!((s=a.message)!=null&&s.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),gl("[Unserializable]");Rt("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof n>"u"&&(n=cH()),Bp(t,"",0,[],void 0,0,n);let i;try{Os.length===0?i=JSON.stringify(t,A,r):i=JSON.stringify(t,fH(A),r)}catch{return gl("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Gu.length!==0;){const o=Gu.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return gl(i)}}function wf(t,e,A,r){var n=Object.getOwnPropertyDescriptor(r,A);n.get!==void 0?n.configurable?(Object.defineProperty(r,A,{value:t}),Gu.push([r,A,e,n])):Os.push([e,A,t]):(r[A]=t,Gu.push([r,A,e]))}function Bp(t,e,A,r,n,s,a){s+=1;var i;if(typeof t=="object"&&t!==null){for(i=0;i<r.length;i++)if(r[i]===t){wf(lH,t,e,n);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){wf(zB,t,e,n);return}if(typeof a.edgesLimit<"u"&&A+1>a.edgesLimit){wf(zB,t,e,n);return}if(r.push(t),Array.isArray(t))for(i=0;i<t.length;i++)Bp(t[i],i,i,r,t,s,a);else{t=WE(t);var o=Object.keys(t);for(i=0;i<o.length;i++){var l=o[i];Bp(t[l],l,i,r,t,s,a)}}r.pop()}}function fH(t){return t=typeof t<"u"?t:function(e,A){return A},function(e,A){if(Os.length>0)for(var r=0;r<Os.length;r++){var n=Os[r];if(n[1]===e&&n[0]===A){A=n[2],Os.splice(r,1);break}}return t.call(this,e,A)}}function WB(t){const e=RE(),A=GL(),r=t.extra??{},n=r.metadata;return t.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...A,...A.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??A.revision_id}:{},...n}},t}const hH=t=>{const e=(t==null?void 0:t.toString())??Rt("TRACING_SAMPLING_RATE");if(e===void 0)return;const A=parseFloat(e);if(A<0||A>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${A}`);return A},pH=t=>{const A=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return A==="localhost"||A==="127.0.0.1"||A==="::1"};async function mH(t){const e=[];for await(const A of t)e.push(A);return e}function wl(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const gH=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(A=>setTimeout(A,e)),!0}return!1};function JB(t){return typeof t=="number"?Number(t.toFixed(4)):t}class wH{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let A;const r=new Promise(s=>{A=s}),n=Gt(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:A,itemPromise:r,size:n}),this.sizeBytes+=n,r}pop(e){var n;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const A=[];let r=0;for(;r+(((n=this.peek())==null?void 0:n.size)??0)<e&&this.items.length>0;){const s=this.items.shift();s&&(A.push(s),r+=s.size,this.sizeBytes-=s.size)}if(A.length===0&&this.items.length>0){const s=this.items.shift();A.push(s),r+=s.size,this.sizeBytes-=s.size}return[A.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl})),()=>A.forEach(s=>s.itemPromiseResolve())]}}const yH=24*1024*1024,BH=1e4,ZB="https://api.smith.langchain.com";class Xi{get _fetch(){return this.fetchImplementation||DL(this.debug)}constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new wH}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:XA("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:XA("LANGSMITH_DEBUG")==="true"});const A=Xi.getDefaultClientConfig();if(this.tracingSampleRate=hH(e.tracingSamplingRate),this.apiUrl=wl(e.apiUrl??A.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=wl(e.apiKey??A.apiKey),this.webUrl=wl(e.webUrl??A.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=wl(e.workspaceId??Rt("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new LB({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation,this.batchIngestCaller=new LB({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:gH,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??A.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??A.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,LE()&&(this.langSmithToOTELTranslator=new nP)}static getDefaultClientConfig(){const e=Rt("API_KEY"),A=Rt("ENDPOINT")??ZB,r=Rt("HIDE_INPUTS")==="true",n=Rt("HIDE_OUTPUTS")==="true";return{apiUrl:A,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:n}}getHostUrl(){return this.webUrl?this.webUrl:pH(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${TE}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const A={...e};return A.inputs!==void 0&&(A.inputs=await this.processInputs(A.inputs)),A.outputs!==void 0&&(A.outputs=await this.processOutputs(A.outputs)),A}async _getResponse(e,A){const r=(A==null?void 0:A.toString())??"",n=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const a=await this._fetch(n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(a,`Failed to fetch ${e}`),a})}async _get(e,A){return(await this._getResponse(e,A)).json()}async*_getPaginated(e,A=new URLSearchParams,r){let n=Number(A.get("offset"))||0;const s=Number(A.get("limit"))||100;for(;;){A.set("offset",String(n)),A.set("limit",String(s));const a=`${this.apiUrl}${e}?${A}`,i=await this.caller.call(async()=>{const l=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(l,`Failed to fetch ${e}`),l}),o=r?r(await i.json()):await i.json();if(o.length===0||(yield o,o.length<s))break;n+=o.length}}async*_getCursorPaginatedList(e,A=null,r="POST",n="runs"){const s=A?{...A}:{};for(;;){const a=JSON.stringify(s),o=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(u,`Failed to fetch ${e}`),u})).json();if(!o||!o[n])break;yield o[n];const l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,A=!1){if(this.tracingSampleRate===void 0)return e;if(A){const r=[];for(const n of e)this.filteredPostUuids.has(n.trace_id)?n.id===n.trace_id&&this.filteredPostUuids.delete(n.trace_id):r.push(n);return r}else{const r=[];for(const n of e){const s=n.trace_id??n.id;this.filteredPostUuids.has(s)||(n.id===s?this._shouldSample()?r.push(n):this.filteredPostUuids.add(s):r.push(n))}return r}}async _getBatchSizeLimitBytes(){var A;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((A=e.batch_ingest_config)==null?void 0:A.size_limit_bytes)??yH}async _getDatasetExamplesMultiPartSupport(){var A;return((A=(await this._ensureServerInfo()).instance_flags)==null?void 0:A.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const A=[];for(;this.autoBatchQueue.items.length>0;){const[r,n]=this.autoBatchQueue.pop(e);if(!r.length){n();break}const s=r.reduce((o,l)=>{const u=l.apiUrl??this.apiUrl,c=l.apiKey??this.apiKey,h=l.apiKey===this.apiKey&&l.apiUrl===this.apiUrl?"default":`${u}|${c}`;return o[h]||(o[h]=[]),o[h].push(l),o},{}),a=[];for(const[o,l]of Object.entries(s)){const u=this._processBatch(l,{apiUrl:o==="default"?void 0:o.split("|")[0],apiKey:o==="default"?void 0:o.split("|")[1]});a.push(u)}const i=Promise.all(a).finally(n);A.push(i)}return Promise.all(A)}async _processBatch(e,A){var r,n;if(e.length)try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const s={runCreates:e.filter(i=>i.action==="create").map(i=>i.item),runUpdates:e.filter(i=>i.action==="update").map(i=>i.item)},a=await this._ensureServerInfo();if((r=a==null?void 0:a.batch_ingest_config)!=null&&r.use_multipart_endpoint){const i=(n=a==null?void 0:a.instance_flags)==null?void 0:n.gzip_body_enabled;await this.multipartIngestRuns(s,{...A,useGzip:i})}else await this.batchIngestRuns(s,A)}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const A=new Map,r=[];for(const n of e)n.item.id&&n.otelContext&&(A.set(n.item.id,n.otelContext),n.action==="create"?r.push({operation:"post",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}):r.push({operation:"patch",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}));this.langSmithToOTELTranslator.exportBatch(r,A)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=WB(e.item);const A=this.autoBatchQueue.push(e);if(this.manualFlushMode)return A;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),A}async _getServerInfo(){const A=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(BH),...this.fetchOptions});return await Y(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(A,null,2)+`
`),A}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}_cloneCurrentOTELContext(){const e=PE(),A=eP();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(A.active(),r)}}async createRun(e,A){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const s=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:s,otelContext:o,apiKey:A==null?void 0:A.apiKey,apiUrl:A==null?void 0:A.apiUrl}).catch(console.error);return}const a=WB(s);(A==null?void 0:A.apiKey)!==void 0&&(r["x-api-key"]=A.apiKey),(A==null?void 0:A.workspaceId)!==void 0&&(r["x-tenant-id"]=A.workspaceId);const i=Gt(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{const o=await this._fetch(`${(A==null?void 0:A.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Y(o,"create run",!0),o})}async batchIngestRuns({runCreates:e,runUpdates:A},r){if(e===void 0&&A===void 0)return;let n=await Promise.all((e==null?void 0:e.map(o=>this.prepareRunCreateOrUpdateInputs(o)))??[]),s=await Promise.all((A==null?void 0:A.map(o=>this.prepareRunCreateOrUpdateInputs(o)))??[]);if(n.length>0&&s.length>0){const o=n.reduce((u,c)=>(c.id&&(u[c.id]=c),u),{}),l=[];for(const u of s)u.id!==void 0&&o[u.id]?o[u.id]={...o[u.id],...u}:l.push(u);n=Object.values(o),s=l}const a={post:n,patch:s};if(!a.post.length&&!a.patch.length)return;const i={post:[],patch:[]};for(const o of["post","patch"]){const l=o,u=a[l].reverse();let c=u.pop();for(;c!==void 0;)i[l].push(c),c=u.pop()}if(i.post.length>0||i.patch.length>0){const o=i.post.map(l=>l.id).concat(i.patch.map(l=>l.id)).join(",");await this._postBatchIngestRuns(Gt(i,`Ingesting runs with ids: ${o}`),r)}}async _postBatchIngestRuns(e,A){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(A==null?void 0:A.apiKey)!==void 0&&(r["x-api-key"]=A.apiKey),await this.batchIngestCaller.call(async()=>{const n=await this._fetch(`${(A==null?void 0:A.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Y(n,"batch create run",!0),n})}async multipartIngestRuns({runCreates:e,runUpdates:A},r){if(e===void 0&&A===void 0)return;const n={};let s=[];for(const c of e??[]){const d=await this.prepareRunCreateOrUpdateInputs(c);d.id!==void 0&&d.attachments!==void 0&&(n[d.id]=d.attachments),delete d.attachments,s.push(d)}let a=[];for(const c of A??[])a.push(await this.prepareRunCreateOrUpdateInputs(c));if(s.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(s.length>0&&a.length>0){const c=s.reduce((h,f)=>(f.id&&(h[f.id]=f),h),{}),d=[];for(const h of a)h.id!==void 0&&c[h.id]?c[h.id]={...c[h.id],...h}:d.push(h);s=Object.values(c),a=d}if(s.length===0&&a.length===0)return;const l=[],u=[];for(const[c,d]of[["post",s],["patch",a]])for(const h of d){const{inputs:f,outputs:w,events:y,extra:p,error:m,serialized:g,attachments:B,..._}=h,v={inputs:f,outputs:w,events:y,extra:p,error:m,serialized:g},C=Gt(_,`Serializing for multipart ingestion of run with id: ${_.id}`);u.push({name:`${c}.${_.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[Q,S]of Object.entries(v)){if(S===void 0)continue;const R=Gt(S,`Serializing ${Q} for multipart ingestion of run with id: ${_.id}`);u.push({name:`${c}.${_.id}.${Q}`,payload:new Blob([R],{type:`application/json; length=${R.length}`})})}if(_.id!==void 0){const Q=n[_.id];if(Q){delete n[_.id];for(const[S,R]of Object.entries(Q)){let j,ne;if(Array.isArray(R)?[j,ne]=R:(j=R.mimeType,ne=R.data),S.includes(".")){console.warn(`Skipping attachment '${S}' for run ${_.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${_.id}.${S}`,payload:new Blob([ne],{type:`${j}; length=${ne.byteLength}`})})}}}l.push(`trace=${_.trace_id},id=${_.id}`)}await this._sendMultipartRequest(u,l.join("; "),r)}async _createNodeFetchBody(e,A){const r=[];for(const a of e)r.push(new Blob([`--${A}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${a.name}"\r
`,`Content-Type: ${a.payload.type}\r
\r
`])),r.push(a.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${A}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,A){const r=new TextEncoder;return new ReadableStream({async start(s){const a=async i=>{typeof i=="string"?s.enqueue(r.encode(i)):s.enqueue(i)};for(const i of e){await a(`--${A}\r
`),await a(`Content-Disposition: form-data; name="${i.name}"\r
`),await a(`Content-Type: ${i.payload.type}\r
\r
`);const l=i.payload.stream().getReader();try{let u;for(;!(u=await l.read()).done;)s.enqueue(u.value)}finally{l.releaseLock()}await a(`\r
`)}await a(`--${A}--\r
`),s.close()}})}async _sendMultipartRequest(e,A,r){const n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),s=NL(),a=()=>this._createNodeFetchBody(e,n),i=()=>this._createMultipartStream(e,n),o=async l=>this.batchIngestCaller.call(async()=>{const u=await l(),c={...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`};(r==null?void 0:r.apiKey)!==void 0&&(c["x-api-key"]=r.apiKey);let d=u;r!=null&&r.useGzip&&typeof u=="object"&&"pipeThrough"in u&&(d=u.pipeThrough(new CompressionStream("gzip")),c["Content-Encoding"]="gzip");const h=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:c,body:d,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(h,"Failed to send multipart request",!0),h});try{let l,u=!1;!s&&!this.multipartStreamingDisabled&&kE()!=="bun"?(u=!0,l=await o(i)):l=await o(a),(!this.multipartStreamingDisabled||u)&&l.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==ZB&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${A}".`),this.multipartStreamingDisabled=!0,l=await o(a))}catch(l){console.warn(`${l.message.trim()}

Context: ${A}`)}}async updateRun(e,A,r){ae(e),A.inputs&&(A.inputs=await this.processInputs(A.inputs)),A.outputs&&(A.outputs=await this.processOutputs(A.outputs));const n={...A,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){const i=this._cloneCurrentOTELContext();if(A.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n,otelContext:i,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:n,otelContext:i,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const s={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(s["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(s["x-tenant-id"]=r.workspaceId);const a=Gt(A,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const i=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:s,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(i,"update run",!0),i})}async readRun(e,{loadChildRuns:A}={loadChildRuns:!1}){ae(e);let r=await this._get(`/runs/${e}`);return A&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:A,projectOpts:r}){if(A!==void 0){let n;A.session_id?n=A.session_id:r!=null&&r.projectName?n=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?n=r==null?void 0:r.projectId:n=(await this.readProject({projectName:Rt("PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${n}/r/${A.id}?poll=true`}else if(e!==void 0){const n=await this.readRun(e);if(!n.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${n.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var s;const A=await mH(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},n={};A.sort((a,i)=>((a==null?void 0:a.dotted_order)??"").localeCompare((i==null?void 0:i.dotted_order)??""));for(const a of A){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);(s=a.dotted_order)!=null&&s.startsWith(e.dotted_order??"")&&a.id!==e.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),n[a.id]=a)}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(n[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:A,projectName:r,parentRunId:n,traceId:s,referenceExampleId:a,startTime:i,executionOrder:o,isRoot:l,runType:u,error:c,id:d,query:h,filter:f,traceFilter:w,treeFilter:y,limit:p,select:m,order:g}=e;let B=[];if(A&&(B=Array.isArray(A)?A:[A]),r){const Q=Array.isArray(r)?r:[r],S=await Promise.all(Q.map(R=>this.readProject({projectName:R}).then(j=>j.id)));B.push(...S)}const _=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],v={session:B.length?B:null,run_type:u,reference_example:a,query:h,filter:f,trace_filter:w,tree_filter:y,execution_order:o,parent_run:n,start_time:i?i.toISOString():null,error:c,id:d,limit:p,trace:s,select:m||_,is_root:l,order:g};let C=0;for await(const Q of this._getCursorPaginatedList("/runs/query",v))if(p){if(C>=p)break;if(Q.length+C>p){yield*Q.slice(0,p-C);break}C+=Q.length,yield*Q}else yield*Q}async*listGroupRuns(e){const{projectId:A,projectName:r,groupBy:n,filter:s,startTime:a,endTime:i,limit:o,offset:l}=e,c={session_id:A||(await this.readProject({projectName:r})).id,group_by:n,filter:s,start_time:a?a.toISOString():null,end_time:i?i.toISOString():null,limit:Number(o)||100};let d=Number(l)||0;const h="/runs/group",f=`${this.apiUrl}${h}`;for(;;){const w={...c,offset:d},y=Object.fromEntries(Object.entries(w).filter(([v,C])=>C!==void 0)),p=JSON.stringify(y),g=await(await this.caller.call(async()=>{const v=await this._fetch(f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:p});return await Y(v,`Failed to fetch ${h}`),v})).json(),{groups:B,total:_}=g;if(B.length===0)break;for(const v of B)yield v;if(d+=B.length,d>=_)break}}async getRunStats({id:e,trace:A,parentRun:r,runType:n,projectNames:s,projectIds:a,referenceExampleIds:i,startTime:o,endTime:l,error:u,query:c,filter:d,traceFilter:h,treeFilter:f,isRoot:w,dataSourceType:y}){let p=a||[];s&&(p=[...a||[],...await Promise.all(s.map(C=>this.readProject({projectName:C}).then(Q=>Q.id)))]);const g=Object.fromEntries(Object.entries({id:e,trace:A,parent_run:r,run_type:n,session:p,reference_example:i,start_time:o,end_time:l,error:u,query:c,filter:d,trace_filter:h,tree_filter:f,is_root:w,data_source_type:y}).filter(([C,Q])=>Q!==void 0)),B=JSON.stringify(g);return await(await this.caller.call(async()=>{const C=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:B});return await Y(C,"get run stats"),C})).json()}async shareRun(e,{shareId:A}={}){const r={run_id:e,share_token:A||Et()};ae(e);const n=JSON.stringify(r),a=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Y(i,"share run"),i})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){ae(e),await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(A,"unshare run",!0),A})}async readRunSharedLink(e){ae(e);const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(n,"read run shared link"),n})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:A}={}){const r=new URLSearchParams({share_token:e});if(A!==void 0)for(const a of A)r.append("id",a);return ae(e),await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(a,"list shared runs"),a})).json()}async readDatasetSharedSchema(e,A){if(!e&&!A)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:A})).id),ae(e);const n=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(s,"read dataset shared schema"),s})).json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,A){if(!e&&!A)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:A})).id);const r={dataset_id:e};ae(e);const n=JSON.stringify(r),a=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Y(i,"share dataset"),i})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){ae(e),await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(A,"unshare dataset",!0),A})}async readSharedDataset(e){return ae(e),await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(n,"read shared dataset"),n})).json()}async listSharedExamples(e,A){const r={};A!=null&&A.exampleIds&&(r.id=A.exampleIds);const n=new URLSearchParams;Object.entries(r).forEach(([i,o])=>{Array.isArray(o)?o.forEach(l=>n.append(i,l)):n.append(i,o)});const s=await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(i,"list shared examples"),i}),a=await s.json();if(!s.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${Array.isArray(a.detail)?a.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return a.map(i=>({...i,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:A=null,metadata:r=null,upsert:n=!1,projectExtra:s=null,referenceDatasetId:a=null}){const i=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${i}`,l=s||{};r&&(l.metadata=r);const u={name:e,extra:l,description:A};a!==null&&(u.reference_dataset_id=a);const c=JSON.stringify(u);return await(await this.caller.call(async()=>{const f=await this._fetch(o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Y(f,"create project"),f})).json()}async updateProject(e,{name:A=null,description:r=null,metadata:n=null,projectExtra:s=null,endTime:a=null}){const i=`${this.apiUrl}/sessions/${e}`;let o=s;n&&(o={...o||{},metadata:n});const l=JSON.stringify({name:A,extra:o,description:r,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{const d=await this._fetch(i,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Y(d,"update project"),d})).json()}async hasProject({projectId:e,projectName:A}){let r="/sessions";const n=new URLSearchParams;if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ae(e),r+=`/${e}`;else if(A!==void 0)n.append("name",A);else throw new Error("Must provide projectName or projectId");const s=await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(a,"has project"),a});try{const a=await s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:A,includeStats:r}){let n="/sessions";const s=new URLSearchParams;if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ae(e),n+=`/${e}`;else if(A!==void 0)s.append("name",A);else throw new Error("Must provide projectName or projectId");r!==void 0&&s.append("include_stats",r.toString());const a=await this._get(n,s);let i;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${A}] not found`);i=a[0]}else i=a;return i}async getProjectUrl({projectId:e,projectName:A}){if(e===void 0&&A===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:A}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:A}){if(e===void 0&&A===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:A}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const A of this._getPaginated("/sessions",e))return this._tenantId=A[0].tenant_id,A[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:A,nameContains:r,referenceDatasetId:n,referenceDatasetName:s,includeStats:a,datasetVersion:i,referenceFree:o,metadata:l}={}){const u=new URLSearchParams;if(e!==void 0)for(const c of e)u.append("id",c);if(A!==void 0&&u.append("name",A),r!==void 0&&u.append("name_contains",r),n!==void 0)u.append("reference_dataset",n);else if(s!==void 0){const c=await this.readDataset({datasetName:s});u.append("reference_dataset",c.id)}a!==void 0&&u.append("include_stats",a.toString()),i!==void 0&&u.append("dataset_version",i),o!==void 0&&u.append("reference_free",o.toString()),l!==void 0&&u.append("metadata",JSON.stringify(l));for await(const c of this._getPaginated("/sessions",u))yield*c}async deleteProject({projectId:e,projectName:A}){let r;if(e===void 0&&A===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&A!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:A})).id:r=e,ae(r),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(n,`delete session ${r} (${A})`,!0),n})}async uploadCsv({csvFile:e,fileName:A,inputKeys:r,outputKeys:n,description:s,dataType:a,name:i}){const o=`${this.apiUrl}/datasets/upload`,l=new FormData;return l.append("file",e,A),r.forEach(d=>{l.append("input_keys",d)}),n.forEach(d=>{l.append("output_keys",d)}),s&&l.append("description",s),a&&l.append("data_type",a),i&&l.append("name",i),await(await this.caller.call(async()=>{const d=await this._fetch(o,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Y(d,"upload CSV"),d})).json()}async createDataset(e,{description:A,dataType:r,inputsSchema:n,outputsSchema:s,metadata:a}={}){const i={name:e,description:A,extra:a?{metadata:a}:void 0};r&&(i.data_type=r),n&&(i.inputs_schema_definition=n),s&&(i.outputs_schema_definition=s);const o=JSON.stringify(i);return await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Y(c,"create dataset"),c})).json()}async readDataset({datasetId:e,datasetName:A}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(e&&A)throw new Error("Must provide either datasetName or datasetId, not both");if(e)ae(e),r+=`/${e}`;else if(A)n.append("name",A);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,n);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${A}] not found`);a=s[0]}else a=s;return a}async hasDataset({datasetId:e,datasetName:A}){try{return await this.readDataset({datasetId:e,datasetName:A}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:A,fromVersion:r,toVersion:n}){let s=e;if(s===void 0&&A===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:A})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof n=="string"?n:n.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:A}){const r="/datasets";if(e===void 0)if(A!==void 0)e=(await this.readDataset({datasetName:A})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(i=>JSON.parse(i))}async*listDatasets({limit:e=100,offset:A=0,datasetIds:r,datasetName:n,datasetNameContains:s,metadata:a}={}){const i="/datasets",o=new URLSearchParams({limit:e.toString(),offset:A.toString()});if(r!==void 0)for(const l of r)o.append("id",l);n!==void 0&&o.append("name",n),s!==void 0&&o.append("name_contains",s),a!==void 0&&o.append("metadata",JSON.stringify(a));for await(const l of this._getPaginated(i,o))yield*l}async updateDataset(e){const{datasetId:A,datasetName:r,...n}=e;if(!A&&!r)throw new Error("Must provide either datasetName or datasetId");const s=A??(await this.readDataset({datasetName:r})).id;ae(s);const a=JSON.stringify(n);return await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(o,"update dataset"),o})).json()}async updateDatasetTag(e){const{datasetId:A,datasetName:r,asOf:n,tag:s}=e;if(!A&&!r)throw new Error("Must provide either datasetName or datasetId");const a=A??(await this.readDataset({datasetName:r})).id;ae(a);const i=JSON.stringify({as_of:typeof n=="string"?n:n.toISOString(),tag:s});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Y(o,"update dataset tags",!0),o})}async deleteDataset({datasetId:e,datasetName:A}){let r="/datasets",n=e;if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(A!==void 0&&(n=(await this.readDataset({datasetName:A})).id),n!==void 0)ae(n),r+=`/${n}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const s=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(s,`delete ${r}`,!0),s})}async indexDataset({datasetId:e,datasetName:A,tag:r}){let n=e;if(!n&&!A)throw new Error("Must provide either datasetName or datasetId");if(n&&A)throw new Error("Must provide either datasetName or datasetId, not both");n||(n=(await this.readDataset({datasetName:A})).id),ae(n);const a=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(o,"index dataset"),o})).json()}async similarExamples(e,A,r,{filter:n}={}){const s={limit:r,inputs:e};n!==void 0&&(s.filter=n),ae(A);const a=JSON.stringify(s);return(await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${A}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await Y(l,"fetch similar examples"),l})).json()).examples}async createExample(e,A,r){var u;if(XB(e)&&(A!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let n=A?r==null?void 0:r.datasetId:e.dataset_id;const s=A?r==null?void 0:r.datasetName:e.dataset_name;if(n===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(n!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");n===void 0&&(n=(await this.readDataset({datasetName:s})).id);const a=(A?r==null?void 0:r.createdAt:e.created_at)||new Date;let i;XB(e)?i=e:i={inputs:e,outputs:A,created_at:a==null?void 0:a.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const o=await this._uploadExamplesMultipart(n,[i]);return await this.readExample(((u=o.example_ids)==null?void 0:u[0])??Et())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const m=e;let g=m[0].dataset_id;const B=m[0].dataset_name;if(g===void 0&&B===void 0)throw new Error("Must provide either datasetName or datasetId");if(g!==void 0&&B!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");g===void 0&&(g=(await this.readDataset({datasetName:B})).id);const _=await this._uploadExamplesMultipart(g,m);return await Promise.all(_.example_ids.map(C=>this.readExample(C)))}const{inputs:A,outputs:r,metadata:n,splits:s,sourceRunIds:a,useSourceRunIOs:i,useSourceRunAttachments:o,attachments:l,exampleIds:u,datasetId:c,datasetName:d}=e;if(A===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=c;const f=d;if(h===void 0&&f===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&f!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:f})).id);const w=A.map((m,g)=>({dataset_id:h,inputs:m,outputs:r==null?void 0:r[g],metadata:n==null?void 0:n[g],split:s==null?void 0:s[g],id:u==null?void 0:u[g],attachments:l==null?void 0:l[g],source_run_id:a==null?void 0:a[g],use_source_run_io:i==null?void 0:i[g],use_source_run_attachments:o==null?void 0:o[g]})),y=await this._uploadExamplesMultipart(h,w);return await Promise.all(y.example_ids.map(m=>this.readExample(m)))}async createLLMExample(e,A,r){return this.createExample({input:e},{output:A},r)}async createChatExample(e,A,r){const n=e.map(a=>PB(a)?HB(a):a),s=PB(A)?HB(A):A;return this.createExample({input:n},{output:s},r)}async readExample(e){ae(e);const A=`/examples/${e}`,r=await this._get(A),{attachment_urls:n,...s}=r,a=s;return n&&(a.attachments=Object.entries(n).reduce((i,[o,l])=>(i[o.slice(11)]={presigned_url:l.presigned_url,mime_type:l.mime_type},i),{})),a}async*listExamples({datasetId:e,datasetName:A,exampleIds:r,asOf:n,splits:s,inlineS3Urls:a,metadata:i,limit:o,offset:l,filter:u,includeAttachments:c}={}){let d;if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(A!==void 0)d=(await this.readDataset({datasetName:A})).id;else throw new Error("Must provide a datasetName or datasetId");const h=new URLSearchParams({dataset:d}),f=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;f&&h.append("as_of",f);const w=a??!0;if(h.append("inline_s3_urls",w.toString()),r!==void 0)for(const p of r)h.append("id",p);if(s!==void 0)for(const p of s)h.append("splits",p);if(i!==void 0){const p=JSON.stringify(i);h.append("metadata",p)}o!==void 0&&h.append("limit",o.toString()),l!==void 0&&h.append("offset",l.toString()),u!==void 0&&h.append("filter",u),c===!0&&["attachment_urls","outputs","metadata"].forEach(p=>h.append("select",p));let y=0;for await(const p of this._getPaginated("/examples",h)){for(const m of p){const{attachment_urls:g,...B}=m,_=B;g&&(_.attachments=Object.entries(g).reduce((v,[C,Q])=>(v[C.slice(11)]={presigned_url:Q.presigned_url,mime_type:Q.mime_type||void 0},v),{})),yield _,y++}if(o!==void 0&&y>=o)break}}async deleteExample(e){ae(e);const A=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+A,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(r,`delete ${A}`,!0),r})}async updateExample(e,A){let r;A?r=e:r=e.id,ae(r);let n;A?n={id:r,...A}:n=e;let s;return n.dataset_id!==void 0?s=n.dataset_id:s=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(s,[n])}async updateExamples(e){let A;return e[0].dataset_id===void 0?A=(await this.readExample(e[0].id)).dataset_id:A=e[0].dataset_id,this._updateExamplesMultipart(A,e)}async readDatasetVersion({datasetId:e,datasetName:A,asOf:r,tag:n}){let s;if(e?s=e:s=(await this.readDataset({datasetName:A})).id,ae(s),r&&n||!r&&!n)throw new Error("Exactly one of asOf and tag must be specified.");const a=new URLSearchParams;return r!==void 0&&a.append("as_of",typeof r=="string"?r:r.toISOString()),n!==void 0&&a.append("tag",n),await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${s}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(o,"read dataset version"),o})).json()}async listDatasetSplits({datasetId:e,datasetName:A,asOf:r}){let n;if(e===void 0&&A===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?n=(await this.readDataset({datasetName:A})).id:n=e,ae(n);const s=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&s.append("as_of",a),await this._get(`/datasets/${n}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:A,splitName:r,exampleIds:n,remove:s=!1}){let a;if(e===void 0&&A===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:A})).id:a=e,ae(a);const i={split_name:r,examples:n.map(l=>(ae(l),l)),remove:s},o=JSON.stringify(i);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Y(l,"update dataset splits",!0),l})}async evaluateRun(e,A,{sourceInfo:r,loadChildRuns:n,referenceExample:s}={loadChildRuns:!1}){jE("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:n});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));const i=await A.evaluateRun(a,s),[o,l]=await this._logEvaluationFeedback(i,a,r);return l[0]}async createFeedback(e,A,{score:r,value:n,correction:s,comment:a,sourceInfo:i,feedbackSourceType:o="api",sourceRunId:l,feedbackId:u,feedbackConfig:c,projectId:d,comparativeExperimentId:h}){var m;if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const f={type:o??"api",metadata:i??{}};l!==void 0&&(f==null?void 0:f.metadata)!==void 0&&!f.metadata.__run&&(f.metadata.__run={run_id:l}),(f==null?void 0:f.metadata)!==void 0&&((m=f.metadata.__run)==null?void 0:m.run_id)!==void 0&&ae(f.metadata.__run.run_id);const w={id:u??Et(),run_id:e,key:A,score:JB(r),value:n,correction:s,comment:a,feedback_source:f,comparative_experiment_id:h,feedbackConfig:c,session_id:d},y=JSON.stringify(w),p=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const g=await this._fetch(p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await Y(g,"create feedback",!0),g}),w}async updateFeedback(e,{score:A,value:r,correction:n,comment:s}){const a={};A!=null&&(a.score=JB(A)),r!=null&&(a.value=r),n!=null&&(a.correction=n),s!=null&&(a.comment=s),ae(e);const i=JSON.stringify(a);await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Y(o,"update feedback",!0),o})}async readFeedback(e){ae(e);const A=`/feedback/${e}`;return await this._get(A)}async deleteFeedback(e){ae(e);const A=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+A,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(r,`delete ${A}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:A,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e)for(const s of e)ae(s),n.append("run",s);if(A)for(const s of A)n.append("key",s);if(r)for(const s of r)n.append("source",s);for await(const s of this._getPaginated("/feedback",n))yield*s}async createPresignedFeedbackToken(e,A,{expiration:r,feedbackConfig:n}={}){const s={run_id:e,feedback_key:A,feedback_config:n};r?typeof r=="string"?s.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(s.expires_in=r):s.expires_in={hours:3};const a=JSON.stringify(s);return await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(o,"create presigned feedback token"),o})).json()}async createComparativeExperiment({name:e,experimentIds:A,referenceDatasetId:r,createdAt:n,description:s,metadata:a,id:i}){var c;if(A.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:A[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const o={id:i,name:e,experiment_ids:A,reference_dataset_id:r,description:s,created_at:(c=n??new Date)==null?void 0:c.toISOString(),extra:{}};a&&(o.extra.metadata=a);const l=JSON.stringify(o);return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Y(d,"create comparative experiment"),d})).json()}async*listPresignedFeedbackTokens(e){ae(e);const A=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",A))yield*r}_selectEvalResults(e){let A;return"results"in e?A=e.results:Array.isArray(e)?A=e:A=[e],A}async _logEvaluationFeedback(e,A,r){const n=this._selectEvalResults(e),s=[];for(const a of n){let i=r||{};a.evaluatorInfo&&(i={...a.evaluatorInfo,...i});let o=null;a.targetRunId?o=a.targetRunId:A&&(o=A.id),s.push(await this.createFeedback(o,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:i,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[n,s]}async logEvaluationFeedback(e,A,r){const[n]=await this._logEvaluationFeedback(e,A,r);return n}async*listAnnotationQueues(e={}){const{queueIds:A,name:r,nameContains:n,limit:s}=e,a=new URLSearchParams;A&&A.forEach((o,l)=>{ae(o,`queueIds[${l}]`),a.append("ids",o)}),r&&a.append("name",r),n&&a.append("name_contains",n),a.append("limit",(s!==void 0?Math.min(s,100):100).toString());let i=0;for await(const o of this._getPaginated("/annotation-queues",a))if(yield*o,i++,s!==void 0&&i>=s)break}async createAnnotationQueue(e){const{name:A,description:r,queueId:n,rubricInstructions:s}=e,a={name:A,description:r,id:n||Et(),rubric_instructions:s},i=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([l,u])=>u!==void 0)));return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Y(l,"create annotation queue"),l})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,A){const{name:r,description:n,rubricInstructions:s}=A,a=JSON.stringify({name:r,description:n,rubric_instructions:s});await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(i,"update annotation queue",!0),i})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const A=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(A,"delete annotation queue",!0),A})}async addRunsToAnnotationQueue(e,A){const r=JSON.stringify(A.map((n,s)=>ae(n,`runIds[${s}]`).toString()));await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Y(n,"add runs to annotation queue",!0),n})}async getRunFromAnnotationQueue(e,A){const r=`/annotation-queues/${ae(e,"queueId")}/run`;return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}/${A}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(s,"get run from annotation queue"),s})).json()}async deleteRunFromAnnotationQueue(e,A){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/runs/${ae(A,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${ae(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const A=await this._getSettings();return e=="-"||A.tenant_handle===e}async _ownerConflictError(e,A){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${A}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(n,"get latest commit hash"),n})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,A){const[r,n,s]=Er(e),a=JSON.stringify({like:A});return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(o,`${A?"like":"unlike"} prompt`),o})).json()}async _getPromptUrl(e){const[A,r,n]=Er(e);if(await this._currentTenantIsOwner(A)){const s=await this._getSettings();return n!=="latest"?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${s.id}`}else return n!=="latest"?`${this.getHostUrl()}/hub/${A}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${A}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const A of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*A}async*listPrompts(e){const A=new URLSearchParams;A.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),A.append("sort_direction","desc"),A.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&A.append("is_public",e.isPublic.toString()),e!=null&&e.query&&A.append("query",e.query);for await(const r of this._getPaginated("/repos",A,n=>n.repos))yield*r}async getPrompt(e){const[A,r,n]=Er(e),s=await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/repos/${A}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(i==null?void 0:i.status)===404?null:(await Y(i,"get prompt"),i)}),a=await(s==null?void 0:s.json());return a!=null&&a.repo?a.repo:null}async createPrompt(e,A){const r=await this._getSettings();if(A!=null&&A.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[n,s,a]=Er(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("create a prompt",n);const i={repo_handle:s,...(A==null?void 0:A.description)&&{description:A.description},...(A==null?void 0:A.readme)&&{readme:A.readme},...(A==null?void 0:A.tags)&&{tags:A.tags},is_public:!!(A!=null&&A.isPublic)},o=JSON.stringify(i),l=await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Y(c,"create prompt"),c}),{repo:u}=await l.json();return u}async createCommit(e,A,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,s,a]=Er(e),i=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${n}/${s}`):r==null?void 0:r.parentCommitHash,o={manifest:JSON.parse(JSON.stringify(A)),parent_commit:i},l=JSON.stringify(o),c=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/commits/${n}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Y(d,"create commit"),d})).json();return this._getPromptUrl(`${n}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,A=[]){return this._updateExamplesMultipart(e,A)}async _updateExamplesMultipart(e,A=[]){var a;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of A){const o=i.id,l={...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split}},u=Gt(l,`Serializing body for example with id: ${o}`),c=new Blob([u],{type:"application/json"});if(r.append(o,c),i.inputs){const d=Gt(i.inputs,`Serializing inputs for example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.inputs`,h)}if(i.outputs){const d=Gt(i.outputs,`Serializing outputs whle updating example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.outputs`,h)}if(i.attachments)for(const[d,h]of Object.entries(i.attachments)){let f,w;Array.isArray(h)?[f,w]=h:(f=h.mimeType,w=h.data);const y=new Blob([w],{type:`${f}; length=${w.byteLength}`});r.append(`${o}.attachment.${d}`,y)}if(i.attachments_operations){const d=Gt(i.attachments_operations,`Serializing attachments while updating example with id: ${o}`),h=new Blob([d],{type:"application/json"});r.append(`${o}.attachments_operations`,h)}}const n=e??((a=A[0])==null?void 0:a.dataset_id);return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${n}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Y(i,"update examples"),i})).json()}async uploadExamplesMultipart(e,A=[]){return this._uploadExamplesMultipart(e,A)}async _uploadExamplesMultipart(e,A=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const s of A){const a=(s.id??Et()).toString(),i={created_at:s.created_at,...s.metadata&&{metadata:s.metadata},...s.split&&{split:s.split},...s.source_run_id&&{source_run_id:s.source_run_id},...s.use_source_run_io&&{use_source_run_io:s.use_source_run_io},...s.use_source_run_attachments&&{use_source_run_attachments:s.use_source_run_attachments}},o=Gt(i,`Serializing body for uploaded example with id: ${a}`),l=new Blob([o],{type:"application/json"});if(r.append(a,l),s.inputs){const u=Gt(s.inputs,`Serializing inputs for uploaded example with id: ${a}`),c=new Blob([u],{type:"application/json"});r.append(`${a}.inputs`,c)}if(s.outputs){const u=Gt(s.outputs,`Serializing outputs for uploaded example with id: ${a}`),c=new Blob([u],{type:"application/json"});r.append(`${a}.outputs`,c)}if(s.attachments)for(const[u,c]of Object.entries(s.attachments)){let d,h;Array.isArray(c)?[d,h]=c:(d=c.mimeType,h=c.data);const f=new Blob([h],{type:`${d}; length=${h.byteLength}`});r.append(`${a}.attachment.${u}`,f)}}return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Y(s,"upload examples"),s})).json()}async updatePrompt(e,A){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n]=Er(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const s={};if((A==null?void 0:A.description)!==void 0&&(s.description=A.description),(A==null?void 0:A.readme)!==void 0&&(s.readme=A.readme),(A==null?void 0:A.tags)!==void 0&&(s.tags=A.tags),(A==null?void 0:A.isPublic)!==void 0&&(s.is_public=A.isPublic),(A==null?void 0:A.isArchived)!==void 0&&(s.is_archived=A.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");const a=JSON.stringify(s);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await Y(o,"update prompt"),o})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[A,r,n]=Er(e);if(!await this._currentTenantIsOwner(A))throw await this._ownerConflictError("delete a prompt",A);return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/repos/${A}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(a,"delete prompt"),a})).json()}async pullPromptCommit(e,A){const[r,n,s]=Er(e),i=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/commits/${r}/${n}/${s}${A!=null&&A.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Y(o,"pull prompt commit"),o})).json();return{owner:r,repo:n,commit_hash:i.commit_hash,manifest:i.manifest,examples:i.examples}}async _pullPrompt(e,A){const r=await this.pullPromptCommit(e,{includeModel:A==null?void 0:A.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,A){return await this.promptExists(e)?A&&Object.keys(A).some(n=>n!=="object")&&await this.updatePrompt(e,{description:A==null?void 0:A.description,readme:A==null?void 0:A.readme,tags:A==null?void 0:A.tags,isPublic:A==null?void 0:A.isPublic}):await this.createPrompt(e,{description:A==null?void 0:A.description,readme:A==null?void 0:A.readme,tags:A==null?void 0:A.tags,isPublic:A==null?void 0:A.isPublic}),A!=null&&A.object?await this.createCommit(e,A==null?void 0:A.object,{parentCommitHash:A==null?void 0:A.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,A={}){const{sourceApiUrl:r=this.apiUrl,datasetName:n}=A,[s,a]=this.parseTokenOrUrl(e,r),i=new Xi({apiUrl:s,apiKey:"placeholder"}),o=await i.readSharedDataset(a),l=n||o.name;try{if(await this.hasDataset({datasetId:l})){console.log(`Dataset ${l} already exists in your tenant. Skipping.`);return}}catch{}const u=await i.listSharedExamples(a),c=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(d=>d.inputs),outputs:u.flatMap(d=>d.outputs?[d.outputs]:[]),datasetId:c.id})}catch(d){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),d}}parseTokenOrUrl(e,A,r=2,n="dataset"){try{return ae(e),[A,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(i=>i!=="");if(a.length>=r){const i=a[a.length-r];return[A,i]}else throw new Error(`Invalid public ${n} URL: ${e}`)}catch{throw new Error(`Invalid public ${n} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,A;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((A=(e=tP())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:A.forceFlush())}}function XB(t){return"dataset_id"in t||"dataset_name"in t}const _H=t=>!!["TRACING_V2","TRACING"].find(A=>Rt(A)==="true"),yf=Symbol.for("lc:context_variables");function vH(t){return t.replace(/[-:.]/g,"")}function JE(t,e,A=1){const r=A.toFixed(0).slice(0,3).padStart(3,"0"),n=`${new Date(t).toISOString().slice(0,-1)}${r}Z`;return{dottedOrder:vH(n)+e,microsecondPrecisionDatestring:n}}class Vu{constructor(e,A,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=A,this.project_name=r,this.replicas=n}static fromHeader(e){const A=e.split(",");let r={},n=[],s,a;for(const i of A){const[o,l]=i.split("="),u=decodeURIComponent(l);o==="langsmith-metadata"?r=JSON.parse(u):o==="langsmith-tags"?n=u.split(","):o==="langsmith-project"?s=u:o==="langsmith-replicas"&&(a=JSON.parse(u))}return new Vu(r,n,s,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class xt{constructor(e){var i;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),CH(e)){Object.assign(this,{...e});return}const A=xt.getDefaultConfig(),{metadata:r,...n}=e,s=n.client??xt.getSharedClient(),a={...r,...(i=n==null?void 0:n.extra)==null?void 0:i.metadata};if(n.extra={...n.extra,metadata:a},Object.assign(this,{...A,...n,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=FH(this.replicas),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const{dottedOrder:o,microsecondPrecisionDatestring:l}=JE(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+o:this.dotted_order=o,this._serialized_start_time=l}}set metadata(e){var A;this.extra={...this.extra,metadata:{...(A=this.extra)==null?void 0:A.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:Et(),run_type:"chain",project_name:xE(),child_runs:[],api_url:XA("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:XA("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return xt.sharedClient||(xt.sharedClient=new Xi),xt.sharedClient}createChild(e){var o,l,u,c,d,h;const A=this.child_execution_order+1,r=new xt({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:A,child_execution_order:A});yf in this&&(r[yf]=this[yf]);const n=Symbol.for("lc:child_config"),s=((o=e.extra)==null?void 0:o[n])??this.extra[n];if(EH(s)){const f={...s},w=bH(f.callbacks)?(u=(l=f.callbacks).copy)==null?void 0:u.call(l):void 0;w&&(Object.assign(w,{_parentRunId:r.id}),(h=(d=(c=w.handlers)==null?void 0:c.find(ZE))==null?void 0:d.updateFromRunTree)==null||h.call(d,r),f.callbacks=w),r.extra[n]=f}const a=new Set;let i=this;for(;i!=null&&!a.has(i.id);)a.add(i.id),i.child_execution_order=Math.max(i.child_execution_order,A),i=i.parent_run;return this.child_runs.push(r),r}async end(e,A,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??A,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,A,r=!0){var i,o;const n=e.extra??{};if(((i=n==null?void 0:n.runtime)==null?void 0:i.library)===void 0&&(n.runtime||(n.runtime={}),A))for(const[l,u]of Object.entries(A))n.runtime[l]||(n.runtime[l]=u);let s,a;return r?(a=((o=e.parent_run)==null?void 0:o.id)??e.parent_run_id,s=[]):(s=e.child_runs.map(l=>this._convertToCreate(l,A,r)),a=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:n,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,A,r=!0){const n=this._convertToCreate(this,A,r);if(e===this.project_name)return n;const s=c=>FB(`${c}:${e}`,FB.DNS),a=s(n.id),i=n.trace_id?s(n.trace_id):void 0,o=n.parent_run_id?s(n.parent_run_id):void 0;let l;if(n.dotted_order){const c=QH(n.dotted_order),d=[];for(let f=0;f<c.length-1;f++){const[w,y]=c[f],p=s(y);d.push(w.toISOString().replace(/[-:]/g,"").replace(".","")+p)}const[h]=c[c.length-1];d.push(h.toISOString().replace(/[-:]/g,"").replace(".","")+a),l=d.join(".")}else l=void 0;return{...n,id:a,trace_id:i,parent_run_id:o,dotted_order:l,session_name:e}}async postRun(e=!0){try{const A=RE();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:n,apiUrl:s,workspaceId:a}of this.replicas){const i=this._remapForProject(r??this.project_name,A,!0);await this.client.createRun(i,{apiKey:n,apiUrl:s,workspaceId:a})}else{const r=this._convertToCreate(this,A,e);await this.client.createRun(r)}if(!e){jE("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(A){console.error(`Error in postRun for run ${this.id}:`,A)}}async patchRun(e){var A;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:n,apiUrl:s,workspaceId:a,updates:i}of this.replicas){const o=this._remapForProject(r??this.project_name),l={id:o.id,outputs:o.outputs,error:o.error,parent_run_id:o.parent_run_id,session_name:o.session_name,reference_example_id:o.reference_example_id,end_time:o.end_time,dotted_order:o.dotted_order,trace_id:o.trace_id,events:o.events,tags:o.tags,extra:o.extra,attachments:this.attachments,...i};e!=null&&e.excludeInputs||(l.inputs=o.inputs),await this.client.updateRun(o.id,l,{apiKey:n,apiUrl:s,workspaceId:a})}else try{const r={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((A=this.parent_run)==null?void 0:A.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,A){var l,u,c,d;const r=e==null?void 0:e.callbacks;let n,s,a,i=_H();if(r){const h=((l=r==null?void 0:r.getParentRunId)==null?void 0:l.call(r))??"",f=(u=r==null?void 0:r.handlers)==null?void 0:u.find(w=>(w==null?void 0:w.name)=="langchain_tracer");n=(c=f==null?void 0:f.getRun)==null?void 0:c.call(f,h),s=f==null?void 0:f.projectName,a=f==null?void 0:f.client,i=i||!!f}return n?new xt({name:n.name,id:n.id,trace_id:n.trace_id,dotted_order:n.dotted_order,client:a,tracingEnabled:i,project_name:s,tags:[...new Set(((n==null?void 0:n.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(d=n==null?void 0:n.extra)==null?void 0:d.metadata,...e==null?void 0:e.metadata}}}).createChild(A):new xt({...A,client:a,tracingEnabled:i,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,A){var l;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||typeof n!="string")return;const s=n.trim(),a=s.split(".").map(u=>{const[c,d]=u.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:d}}),i=a[0].uuid,o={...A,name:(A==null?void 0:A.name)??"parent",run_type:(A==null?void 0:A.run_type)??"chain",start_time:(A==null?void 0:A.start_time)??Date.now(),id:(l=a.at(-1))==null?void 0:l.uuid,trace_id:i,dotted_order:s};if(r.baggage&&typeof r.baggage=="string"){const u=Vu.fromHeader(r.baggage);o.metadata=u.metadata,o.tags=u.tags,o.project_name=u.project_name,o.replicas=u.replicas}return new xt(o)}toHeaders(e){var r;const A={"langsmith-trace":this.dotted_order,baggage:new Vu((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[n,s]of Object.entries(A))e.set(n,s);return A}}Object.defineProperty(xt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function CH(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function ZE(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function YB(t){return Array.isArray(t)&&t.some(e=>ZE(e))}function bH(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function EH(t){var e;return t!=null&&typeof t.callbacks=="object"&&(YB((e=t.callbacks)==null?void 0:e.handlers)||YB(t.callbacks))}function QH(t){return t.split(".").map(A=>{const r=A.slice(0,-36),n=A.slice(-36),s=parseInt(r.slice(0,4)),a=parseInt(r.slice(4,6))-1,i=parseInt(r.slice(6,8)),o=parseInt(r.slice(9,11)),l=parseInt(r.slice(11,13)),u=parseInt(r.slice(13,15)),c=parseInt(r.slice(15,21));return[new Date(s,a,i,o,l,u,c/1e3),n]})}function UH(){const t=XA("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const A=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}A.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return A}else if(typeof e=="object"&&e!==null){IH(e);const A=[];for(const[r,n]of Object.entries(e)){const s=r.replace(/\/$/,"");if(typeof n=="string")A.push({apiUrl:s,apiKey:n});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof n}`);continue}}return A}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(oH(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function FH(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):UH()}function IH(t){if(Object.keys(t).length>0&&Rt("ENDPOINT"))throw new iH}var Bf={};const SH=()=>typeof window<"u"&&typeof window.document<"u",xH=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",TH=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),ig=()=>typeof Deno<"u",OH=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!ig(),kH=()=>{let t;return SH()?t="browser":OH()?t="node":xH()?t="webworker":TH()?t="jsdom":ig()?t="deno":t="other",t};let _f;function RH(){return _f===void 0&&(_f={library:"langchain-js",runtime:kH()}),_f}function rn(t){try{return typeof process<"u"?Bf==null?void 0:Bf[t]:ig()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}class LH{}function PH(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}class po extends LH{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,hE(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:rn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return jn.prototype.toJSON.call(this)}toJSONNotImplemented(){return jn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class A extends po{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Et()}),Object.assign(this,e)}}return new A}}const HH=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},NH=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function _p(t,e){if(t)return new xt({...t,start_time:t._serialized_start_time??t.start_time,parent_run:_p(e),child_runs:t.child_runs.map(A=>_p(A)).filter(A=>A!==void 0),extra:{...t.extra,runtime:RH()},tracingEnabled:!1})}function vf(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Ta(t){return typeof t._addRunToRunMap=="function"}class mo extends po{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?NH(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,A){e.child_runs.push(A)}_addRunToRunMap(e){const{dottedOrder:A,microsecondPrecisionDatestring:r}=JE(new Date(e.start_time).getTime(),e.id,e.execution_order),n={...e},s=this.getRunById(n.parent_run_id);if(n.parent_run_id!==void 0?s&&(this._addChildRun(s,n),s.child_execution_order=Math.max(s.child_execution_order,n.child_execution_order),n.trace_id=s.trace_id,s.dotted_order!==void 0&&(n.dotted_order=[s.dotted_order,A].join("."),n._serialized_start_time=r)):(n.trace_id=n.id,n.dotted_order=A,n._serialized_start_time=r),this.usesRunTreeMap){const a=_p(n,s);a!==void 0&&this.runTreeMap.set(n.id,a)}else this.runMap.set(n.id,n);return n}async _endTrace(e){var r;const A=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);A?A.child_execution_order=Math.max(A.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const A=e!==void 0&&this.getRunById(e);return A?A.child_execution_order+1:1}_createRunForLLMStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c=i?{...s,metadata:i}:s,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:A},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForLLMStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onLLMStart)==null?void 0:c.call(this,l)),l}_createRunForChatModelStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c=i?{...s,metadata:i}:s,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:A},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForChatModelStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onLLMStart)==null?void 0:c.call(this,l)),l}async handleLLMEnd(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await((i=this.onLLMEnd)==null?void 0:i.call(this,a)),await this._endTrace(a),a}async handleLLMError(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...s},await((i=this.onLLMError)==null?void 0:i.call(this,a)),await this._endTrace(a),a}_createRunForChainStart(e,A,r,n,s,a,i,o){const l=this._getExecutionOrder(n),u=Date.now(),c={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:A,execution_order:l,child_execution_order:l,run_type:i??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleChainStart(e,A,r,n,s,a,i,o){var u,c;const l=this.getRunById(r)??this._createRunForChainStart(e,A,r,n,s,a,i,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onChainStart)==null?void 0:c.call(this,l)),l}async handleChainEnd(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=vf(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=vf(s.inputs,"input")),await((i=this.onChainEnd)==null?void 0:i.call(this,a)),await this._endTrace(a),a}async handleChainError(e,A,r,n,s){var i;const a=this.getRunById(A);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=vf(s.inputs,"input")),await((i=this.onChainError)==null?void 0:i.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,A,r,n,s,a,i){const o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:A},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(u)}async handleToolStart(e,A,r,n,s,a,i){var l,u;const o=this.getRunById(r)??this._createRunForToolStart(e,A,r,n,s,a,i);return await((l=this.onRunCreate)==null?void 0:l.call(this,o)),await((u=this.onToolStart)==null?void 0:u.call(this,o)),o}async handleToolEnd(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((n=this.onToolEnd)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleToolError(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((n=this.onToolError)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,A){var s;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,A){var n;const r=this.getRunById(A);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((n=this.onAgentEnd)==null?void 0:n.call(this,r)))}_createRunForRetrieverStart(e,A,r,n,s,a,i){const o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:i??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:A},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,A,r,n,s,a,i){var l,u;const o=this.getRunById(r)??this._createRunForRetrieverStart(e,A,r,n,s,a,i);return await((l=this.onRunCreate)==null?void 0:l.call(this,o)),await((u=this.onRetrieverStart)==null?void 0:u.call(this,o)),o}async handleRetrieverEnd(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((n=this.onRetrieverEnd)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,A){var n;const r=this.getRunById(A);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((n=this.onRetrieverError)==null?void 0:n.call(this,r)),await this._endTrace(r),r}async handleText(e,A){var n;const r=this.getRunById(A);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((n=this.onText)==null?void 0:n.call(this,r)))}async handleLLMNewToken(e,A,r,n,s,a){var o;const i=this.getRunById(r);if(!i||(i==null?void 0:i.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return i.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:A,chunk:a==null?void 0:a.chunk}}),await((o=this.onLLMNewToken)==null?void 0:o.call(this,i,e,{chunk:a==null?void 0:a.chunk})),i}}var og={exports:{}};og.exports;(function(t){const A=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,r=(s=0)=>(a,i,o)=>`\x1B[${38+s};2;${a};${i};${o}m`;function n(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[i,o]of Object.entries(a)){for(const[l,u]of Object.entries(o))a[l]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[l]=a[l],s.set(u[0],u[1]);Object.defineProperty(a,i,{value:o,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=A(),a.color.ansi16m=r(),a.bgColor.ansi256=A(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(i,o,l)=>i===o&&o===l?i<8?16:i>248?231:Math.round((i-8)/247*24)+232:16+36*Math.round(i/255*5)+6*Math.round(o/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:i=>{const o=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(i.toString(16));if(!o)return[0,0,0];let{colorString:l}=o.groups;l.length===3&&(l=l.split("").map(c=>c+c).join(""));const u=Number.parseInt(l,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:i=>a.rgbToAnsi256(...a.hexToRgb(i)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:n})})(og);var DH=og.exports;const XE=tc(DH);function Bt(t,e){return`${t.open}${e}${t.close}`}function nA(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function qB(t){return typeof t=="string"?t.trim():t==null?t:nA(t,t.toString())}function Qr(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:St}=XE;class e_ extends mo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const A=[];let r=e;for(;r.parent_run_id;){const n=this.runMap.get(r.parent_run_id);if(n)A.push(n),r=n;else break}return A}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((n,s,a)=>{const i=`${n.execution_order}:${n.run_type}:${n.name}`;return s===a.length-1?Bt(XE.bold,i):i}).join(" > ");return Bt(St.grey,r)}onChainStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[chain/start]")} [${A}] Entering Chain run with input: ${nA(e.inputs,"[inputs]")}`)}onChainEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[chain/end]")} [${A}] [${Qr(e)}] Exiting Chain run with output: ${nA(e.outputs,"[outputs]")}`)}onChainError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[chain/error]")} [${A}] [${Qr(e)}] Chain run errored with error: ${nA(e.error,"[error]")}`)}onLLMStart(e){const A=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(n=>n.trim())}:e.inputs;console.log(`${Bt(St.green,"[llm/start]")} [${A}] Entering LLM run with input: ${nA(r,"[inputs]")}`)}onLLMEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[llm/end]")} [${A}] [${Qr(e)}] Exiting LLM run with output: ${nA(e.outputs,"[response]")}`)}onLLMError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[llm/error]")} [${A}] [${Qr(e)}] LLM run errored with error: ${nA(e.error,"[error]")}`)}onToolStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[tool/start]")} [${A}] Entering Tool run with input: "${qB(e.inputs.input)}"`)}onToolEnd(e){var r;const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[tool/end]")} [${A}] [${Qr(e)}] Exiting Tool run with output: "${qB((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[tool/error]")} [${A}] [${Qr(e)}] Tool run errored with error: ${nA(e.error,"[error]")}`)}onRetrieverStart(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.green,"[retriever/start]")} [${A}] Entering Retriever run with input: ${nA(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.cyan,"[retriever/end]")} [${A}] [${Qr(e)}] Exiting Retriever run with output: ${nA(e.outputs,"[outputs]")}`)}onRetrieverError(e){const A=this.getBreadcrumbs(e);console.log(`${Bt(St.red,"[retriever/error]")} [${A}] [${Qr(e)}] Retriever run errored with error: ${nA(e.error,"[error]")}`)}onAgentAction(e){const A=e,r=this.getBreadcrumbs(e);console.log(`${Bt(St.blue,"[agent/action]")} [${r}] Agent selected action: ${nA(A.actions[A.actions.length-1],"[action]")}`)}}let Cf;const $H=()=>{if(Cf===void 0){const t=rn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Cf=new Xi(t)}return Cf};class Ci extends mo{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:A,projectName:r,client:n,replicas:s}=e;this.projectName=r??xE(),this.replicas=s,this.exampleId=A,this.client=n??$H();const a=Ci.getTraceableRunTree();a&&this.updateFromRunTree(a)}async persistRun(e){}async onRunCreate(e){const A=this.getRunTreeWithTracingConfig(e.id);await(A==null?void 0:A.postRun())}async onRunUpdate(e){const A=this.getRunTreeWithTracingConfig(e.id);await(A==null?void 0:A.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let A=e;const r=new Set;for(;A.parent_run&&!(r.has(A.id)||(r.add(A.id),!A.parent_run));)A=A.parent_run;r.clear();const n=[A];for(;n.length>0;){const s=n.shift();!s||r.has(s.id)||(r.add(s.id),this.runTreeMap.set(s.id,s),s.child_runs&&n.push(...s.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const A=this.runTreeMap.get(e);if(A)return new xt({...A,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return rL(!0)}catch{return}}}const YE=Symbol.for("ls:tracing_async_local_storage"),Wl=Symbol.for("lc:context_variables"),MH=t=>{globalThis[YE]=t},Yi=()=>globalThis[YE];let bi;function jH(){const t="default"in dr?dr.default:dr;return new t({autoStart:!0,concurrency:1})}function KH(){return typeof bi>"u"&&(bi=jH()),bi}async function Je(t,e){if(e===!0){const A=Yi();A!==void 0?await A.run(void 0,async()=>t()):await t()}else bi=KH(),bi.add(async()=>{const A=Yi();A!==void 0?await A.run(void 0,async()=>t()):await t()})}const GH=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(A=>rn(A)==="true");function qE(t){var r;const e=Yi();if(e===void 0)return;const A=e.getStore();return(r=A==null?void 0:A[Wl])==null?void 0:r[t]}const VH=Symbol("lc:configure_hooks"),zH=()=>qE(VH)||[];class WH{setHandler(e){return this.setHandlers([e])}}class Vc{constructor(e,A,r,n,s,a,i,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:A}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;try{await((r=A.handleText)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleText: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleCustomEvent(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;try{await((i=a.handleCustomEvent)==null?void 0:i.call(a,e,A,this.runId,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}}class JH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreRetriever)try{await((r=A.handleRetrieverEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleRetriever`),A.raiseError)throw n}},A.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreRetriever)try{await((r=A.handleRetrieverError)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleRetrieverError: ${n}`),A.raiseError)throw e}},A.awaitHandlers)))}}class t_ extends Vc{async handleLLMNewToken(e,A,r,n,s,a){await Promise.all(this.handlers.map(i=>Je(async()=>{var o;if(!i.ignoreLLM)try{await((o=i.handleLLMNewToken)==null?void 0:o.call(i,e,A??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(l){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMNewToken: ${l}`),i.raiseError)throw l}},i.awaitHandlers)))}async handleLLMError(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreLLM)try{await((i=a.handleLLMError)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleLLMEnd(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreLLM)try{await((i=a.handleLLMEnd)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}}class ZH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleChainError(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreChain)try{await((i=a.handleChainError)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleChainEnd(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreChain)try{await((i=a.handleChainEnd)==null?void 0:i.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleAgentAction)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleAgentAction: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleAgentEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleAgentEnd: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}}class XH extends Vc{getChild(e){const A=new Pt(this.runId);return A.setHandlers(this.inheritableHandlers),A.addTags(this.inheritableTags),A.addMetadata(this.inheritableMetadata),e&&A.addTags([e],!1),A}async handleToolError(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleToolError)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleToolError: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(A=>Je(async()=>{var r;if(!A.ignoreAgent)try{await((r=A.handleToolEnd)==null?void 0:r.call(A,e,this.runId,this._parentRunId,this.tags))}catch(n){if((A.raiseError?console.error:console.warn)(`Error in handler ${A.constructor.name}, handleToolEnd: ${n}`),A.raiseError)throw n}},A.awaitHandlers)))}}class Pt extends WH{constructor(e,A){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(A==null?void 0:A.handlers)??this.handlers,this.inheritableHandlers=(A==null?void 0:A.inheritableHandlers)??this.inheritableHandlers,this.tags=(A==null?void 0:A.tags)??this.tags,this.inheritableTags=(A==null?void 0:A.inheritableTags)??this.inheritableTags,this.metadata=(A==null?void 0:A.metadata)??this.metadata,this.inheritableMetadata=(A==null?void 0:A.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,A,r=void 0,n=void 0,s=void 0,a=void 0,i=void 0,o=void 0){return Promise.all(A.map(async(l,u)=>{const c=u===0&&r?r:Et();return await Promise.all(this.handlers.map(d=>{if(!d.ignoreLLM)return Ta(d)&&d._createRunForLLMStart(e,[l],c,this._parentRunId,s,this.tags,this.metadata,o),Je(async()=>{var h;try{await((h=d.handleLLMStart)==null?void 0:h.call(d,e,[l],c,this._parentRunId,s,this.tags,this.metadata,o))}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMStart: ${f}`),d.raiseError)throw f}},d.awaitHandlers)})),new t_(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,A,r=void 0,n=void 0,s=void 0,a=void 0,i=void 0,o=void 0){return Promise.all(A.map(async(l,u)=>{const c=u===0&&r?r:Et();return await Promise.all(this.handlers.map(d=>{if(!d.ignoreLLM)return Ta(d)&&d._createRunForChatModelStart(e,[l],c,this._parentRunId,s,this.tags,this.metadata,o),Je(async()=>{var h,f;try{if(d.handleChatModelStart)await((h=d.handleChatModelStart)==null?void 0:h.call(d,e,[l],c,this._parentRunId,s,this.tags,this.metadata,o));else if(d.handleLLMStart){const w=yE(l);await((f=d.handleLLMStart)==null?void 0:f.call(d,e,[w],c,this._parentRunId,s,this.tags,this.metadata,o))}}catch(w){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMStart: ${w}`),d.raiseError)throw w}},d.awaitHandlers)})),new t_(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreChain)return Ta(o)&&o._createRunForChainStart(e,A,r,this._parentRunId,this.tags,this.metadata,n,i),Je(async()=>{var l;try{await((l=o.handleChainStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,n,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new ZH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreAgent)return Ta(o)&&o._createRunForToolStart(e,A,r,this._parentRunId,this.tags,this.metadata,i),Je(async()=>{var l;try{await((l=o.handleToolStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleToolStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new XH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,A,r=Et(),n=void 0,s=void 0,a=void 0,i=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreRetriever)return Ta(o)&&o._createRunForRetrieverStart(e,A,r,this._parentRunId,this.tags,this.metadata,i),Je(async()=>{var l;try{await((l=o.handleRetrieverStart)==null?void 0:l.call(o,e,A,r,this._parentRunId,this.tags,this.metadata,i))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleRetrieverStart: ${u}`),o.raiseError)throw u}},o.awaitHandlers)})),new JH(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,A,r,n,s){await Promise.all(this.handlers.map(a=>Je(async()=>{var i;if(!a.ignoreCustomEvent)try{await((i=a.handleCustomEvent)==null?void 0:i.call(a,e,A,r,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}addHandler(e,A=!0){this.handlers.push(e),A&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(A=>A!==e),this.inheritableHandlers=this.inheritableHandlers.filter(A=>A!==e)}setHandlers(e,A=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,A)}addTags(e,A=!0){this.removeTags(e),this.tags.push(...e),A&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(A=>!e.includes(A)),this.inheritableTags=this.inheritableTags.filter(A=>!e.includes(A))}addMetadata(e,A=!0){this.metadata={...this.metadata,...e},A&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const A of Object.keys(e))delete this.metadata[A],delete this.inheritableMetadata[A]}copy(e=[],A=!0){const r=new Pt(this._parentRunId);for(const n of this.handlers){const s=this.inheritableHandlers.includes(n);r.addHandler(n,s)}for(const n of this.tags){const s=this.inheritableTags.includes(n);r.addTags([n],s)}for(const n of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(n);r.addMetadata({[n]:this.metadata[n]},s)}for(const n of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===n.name)||r.addHandler(n,A);return r}static fromHandlers(e){class A extends po{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Et()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new A),r}static configure(e,A,r,n,s,a,i){return this._configureSync(e,A,r,n,s,a,i)}static _configureSync(e,A,r,n,s,a,i){var d;let o;(e||A)&&(Array.isArray(e)||!e?(o=new Pt,o.setHandlers((e==null?void 0:e.map(zu))??[],!0)):o=e,o=o.copy(Array.isArray(A)?A.map(zu):A==null?void 0:A.handlers,!1));const l=rn("LANGCHAIN_VERBOSE")==="true"||(i==null?void 0:i.verbose),u=((d=Ci.getTraceableRunTree())==null?void 0:d.tracingEnabled)||GH(),c=u||(rn("LANGCHAIN_TRACING")??!1);if(l||c){if(o||(o=new Pt),l&&!o.handlers.some(h=>h.name===e_.prototype.name)){const h=new e_;o.addHandler(h,!0)}if(c&&!o.handlers.some(h=>h.name==="langchain_tracer")&&u){const h=new Ci;o.addHandler(h,!0)}if(u){const h=Ci.getTraceableRunTree();if(h&&o._parentRunId===void 0){o._parentRunId=h.id;const f=o.handlers.find(w=>w.name==="langchain_tracer");f==null||f.updateFromRunTree(h)}}}for(const{contextVar:h,inheritable:f=!0,handlerClass:w,envVar:y}of zH()){const p=y&&rn(y)==="true"&&w;let m;const g=h!==void 0?qE(h):void 0;g&&HH(g)?m=g:p&&(m=new w({})),m!==void 0&&(o||(o=new Pt),o.handlers.some(B=>B.name===m.name)||o.addHandler(m,f))}return(r||n)&&o&&(o.addTags(r??[]),o.addTags(n??[],!1)),(s||a)&&o&&(o.addMetadata(s??{}),o.addMetadata(a??{},!1)),o}}function zu(t){return"name"in t?t:po.fromMethods(t)}class YH{getStore(){}run(e,A){return A()}enterWith(e){}}const qH=new YH,A_=Symbol.for("lc:child_config");class eN{getInstance(){return Yi()??qH}getRunnableConfig(){var A,r;return(r=(A=this.getInstance().getStore())==null?void 0:A.extra)==null?void 0:r[A_]}runWithConfig(e,A,r){var u;const n=Pt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),s=this.getInstance(),a=s.getStore(),i=n==null?void 0:n.getParentRunId(),o=(u=n==null?void 0:n.handlers)==null?void 0:u.find(c=>(c==null?void 0:c.name)==="langchain_tracer");let l;return o&&i?l=o.getRunTreeWithTracingConfig(i):r||(l=new xt({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[A_]:e}),a!==void 0&&a[Wl]!==void 0&&(l===void 0&&(l={}),l[Wl]=a[Wl]),s.run(l,A)}initializeGlobalInstance(e){Yi()===void 0&&MH(e)}}const cn=new eN,bf=25;async function xA(t){return Pt._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function r_(...t){const e={};for(const A of t.filter(r=>!!r))for(const r of Object.keys(A))if(r==="metadata")e[r]={...e[r],...A[r]};else if(r==="tags"){const n=e[r]??[];e[r]=[...new Set(n.concat(A[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...A[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=A.timeout:A.timeout!==void 0&&(e.timeout=Math.min(e.timeout,A.timeout));else if(r==="signal")e.signal===void 0?e.signal=A.signal:A.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,A.signal]):e.signal=A.signal);else if(r==="callbacks"){const n=e.callbacks,s=A.callbacks;if(Array.isArray(s))if(!n)e.callbacks=s;else if(Array.isArray(n))e.callbacks=n.concat(s);else{const a=n.copy();for(const i of s)a.addHandler(zu(i),!0);e.callbacks=a}else if(s)if(!n)e.callbacks=s;else if(Array.isArray(n)){const a=s.copy();for(const i of n)a.addHandler(zu(i),!0);e.callbacks=a}else e.callbacks=new Pt(s._parentRunId,{handlers:n.handlers.concat(s.handlers),inheritableHandlers:n.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(n.tags.concat(s.tags))),inheritableTags:Array.from(new Set(n.inheritableTags.concat(s.inheritableTags))),metadata:{...n.metadata,...s.metadata}})}else{const n=r;e[n]=A[n]??e[n]}return e}const tN=new Set(["string","number","boolean"]);function we(t){var r;const e=cn.getRunnableConfig();let A={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:n,runName:s,...a}=e;A=Object.entries(a).reduce((i,[o,l])=>(l!==void 0&&(i[o]=l),i),A)}if(t&&(A=Object.entries(t).reduce((n,[s,a])=>(a!==void 0&&(n[s]=a),n),A)),A!=null&&A.configurable)for(const n of Object.keys(A.configurable))tN.has(typeof A.configurable[n])&&!((r=A.metadata)!=null&&r[n])&&(A.metadata||(A.metadata={}),A.metadata[n]=A.configurable[n]);if(A.timeout!==void 0){if(A.timeout<=0)throw new Error("Timeout must be a positive number");const n=AbortSignal.timeout(A.timeout);A.signal!==void 0?"any"in AbortSignal&&(A.signal=AbortSignal.any([A.signal,n])):A.signal=n,delete A.timeout}return A}function wt(t={},{callbacks:e,maxConcurrency:A,recursionLimit:r,runName:n,configurable:s,runId:a}={}){const i=we(t);return e!==void 0&&(delete i.runName,i.callbacks=e),r!==void 0&&(i.recursionLimit=r),A!==void 0&&(i.maxConcurrency=A),n!==void 0&&(i.runName=n),s!==void 0&&(i.configurable={...i.configurable,...s}),a!==void 0&&delete i.runId,i}function ta(t){return t?{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal}:void 0}async function dn(t,e){if(e===void 0)return t;let A;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,n)=>{A=()=>{n(new Error("Aborted"))},e.addEventListener("abort",A),e.aborted&&n(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",A))}class eA extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const A=this.reader.cancel();this.reader.releaseLock(),await A}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const A=e.getReader();return new eA({start(r){return n();function n(){return A.read().then(({done:s,value:a})=>{if(s){r.close();return}return r.enqueue(a),n()})}},cancel(){A.releaseLock()}})}static fromAsyncGenerator(e){return new eA({async pull(A){const{value:r,done:n}=await e.next();n&&A.close(),A.enqueue(r)},async cancel(A){await e.return(A)}})}}function eQ(t,e=2){const A=Array.from({length:e},()=>[]);return A.map(async function*(n){for(;;)if(n.length===0){const s=await t.next();for(const a of A)a.push(s)}else{if(n[0].done)return;yield n.shift().value}})}function zc(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const A={...t};for(const[r,n]of Object.entries(e))r in A&&!Array.isArray(A[r])?A[r]=zc(A[r],n):A[r]=n;return A}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class da{constructor(e){var A;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((A=this.config)==null?void 0:A.signal),this.setup=new Promise((r,n)=>{cn.runWithConfig(ta(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,n):this.firstResult.then(s=>r(void 0),n)},!0)})}async next(...e){var A;return(A=this.signal)==null||A.throwIfAborted(),this.firstResultUsed?cn.runWithConfig(ta(this.config),this.signal?async()=>dn(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function AN(t,e,A,r,...n){const s=new da({generator:e,startSetup:A,signal:r}),a=await s.setup;return{output:t(s,a,...n),setup:a}}class kr{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const A=this.ops.concat(e.ops),r=ju({},A);return new qi({ops:A,state:r[r.length-1].newDocument})}}class qi extends kr{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const A=this.ops.concat(e.ops),r=ju(this.state,e.ops);return new qi({ops:A,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const A=ju({},e.ops);return new qi({ops:e.ops,state:A[A.length-1].newDocument})}}const rN=t=>t.name==="log_stream_tracer";async function n_(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:A}=t;if(["retriever","llm","prompt"].includes(t.run_type))return A;if(!(Object.keys(A).length===1&&(A==null?void 0:A.input)===""))return A.input}async function s_(t,e){const{outputs:A}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?A:A!==void 0&&Object.keys(A).length===1&&(A==null?void 0:A.output)!==void 0?A.output:A}function nN(t){return t!==void 0&&t.message!==void 0}class a_ extends mo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=eA.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const A=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||A.find(n=>{var s;return(s=this.includeTags)==null?void 0:s.includes(n)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&A.every(n=>{var s;return!((s=this.excludeTags)!=null&&s.includes(n))})),r}async*tapOutputIterable(e,A){for await(const r of A){if(e!==this.rootId){const n=this.keyMapByRunId[e];n&&await this.writer.write(new kr({ops:[{op:"add",path:`/logs/${n}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var n;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new kr({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const A=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=A===1?e.name:`${e.name}:${A}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await n_(e,this._schemaFormat)),await this.writer.write(new kr({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const A=this.keyMapByRunId[e.id];if(A===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${A}/inputs`,value:await n_(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${A}/final_output`,value:await s_(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${A}/end_time`,value:new Date(e.end_time).toISOString()});const n=new kr({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const A=new kr({ops:[{op:"replace",path:"/final_output",value:await s_(e,this._schemaFormat)}]});await this.writer.write(A),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,A,r){const n=this.keyMapByRunId[e.id];if(n===void 0)return;const s=e.inputs.messages!==void 0;let a;s?nN(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new on({id:`run-${e.id}`,content:A}):a=A;const i=new kr({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:A},{op:"add",path:`/logs/${n}/streamed_output/-`,value:a}]});await this.writer.write(i)}}const i_="__run";class Aa{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Aa({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Vn extends Aa{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Vn({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function yl({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const sN=t=>t.name==="event_stream_tracer";class aN extends mo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=eA.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const A=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||A.find(n=>{var s;return(s=this.includeTags)==null?void 0:s.includes(n)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&A.every(n=>{var s;return!((s=this.excludeTags)!=null&&s.includes(n))})),r}async*tapOutputIterable(e,A){const r=await A.next();if(r.done)return;const n=this.runInfoMap.get(e);if(n===void 0){yield r.value;return}function s(i,o){return i==="llm"&&typeof o=="string"?new Aa({text:o}):o}let a=this.tappedPromises.get(e);if(a===void 0){let i;a=new Promise(o=>{i=o}),this.tappedPromises.set(e,a);try{const o={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...o,data:{chunk:s(n.runType,r.value)}},n),yield r.value;for await(const l of A)n.runType!=="tool"&&n.runType!=="retriever"&&await this.send({...o,data:{chunk:s(n.runType,l)}},n),yield l}finally{i()}}else{yield r.value;for await(const i of A)yield i}}async send(e,A){this._includeRun(A)&&await this.writer.write(e)}async sendEndEvent(e,A){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,A)}):await this.send(e,A)}async onLLMStart(e){var a,i;const A=yl(e),r=e.inputs.messages!==void 0?"chat_model":"llm",n={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:A,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const s=`on_${r}_start`;await this.send({event:s,data:{input:e.inputs},name:A,tags:e.tags??[],run_id:e.id,metadata:((i=e.extra)==null?void 0:i.metadata)??{}},n)}async onLLMNewToken(e,A,r){const n=this.runInfoMap.get(e.id);let s,a;if(n===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(n.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?s=new on({content:A,id:`run-${e.id}`}):s=r.chunk.message;else if(n.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?s=new Aa({text:A}):s=r.chunk;else throw new Error(`Unexpected run type ${n.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){var a,i,o;const A=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(A===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=(a=e.outputs)==null?void 0:a.generations;let s;if(A.runType==="chat_model"){for(const l of n??[]){if(s!==void 0)break;s=(i=l[0])==null?void 0:i.message}r="on_chat_model_end"}else if(A.runType==="llm")s={generations:n==null?void 0:n.map(l=>l.map(u=>({text:u.text,generationInfo:u.generationInfo}))),llmOutput:((o=e.outputs)==null?void 0:o.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${A.runType}`);await this.sendEndEvent({event:r,data:{output:s,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async onChainStart(e){var a,i;const A=yl(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:A,runType:e.run_type};let s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},n.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,n.inputs=e.inputs.input):(s.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:s,name:A,tags:e.tags??[],run_id:e.id,metadata:((i=e.extra)==null?void 0:i.metadata)??{}},n)}async onChainEnd(e){var i;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??A.inputs??{},a={output:((i=e.outputs)==null?void 0:i.output)??e.outputs,input:n};n.input&&Object.keys(n).length===1&&(a.input=n.input,A.inputs=n.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata??{}},A)}async onToolStart(e){var n,s;const A=yl(e),r={tags:e.tags??[],metadata:((n=e.extra)==null?void 0:n.metadata)??{},name:A,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:A,run_id:e.id,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{}},r)}async onToolEnd(e){var n;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(A.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((n=e.outputs)==null?void 0:n.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async onRetrieverStart(e){var s,a;const A=yl(e),n={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:A,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,n),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:A,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},n)}async onRetrieverEnd(e){var r;const A=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),A===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:A.inputs},run_id:e.id,name:A.name,tags:A.tags,metadata:A.metadata},A)}async handleCustomEvent(e,A,r){const n=this.runInfoMap.get(r);if(n===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:A},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const iN=[400,401,402,403,404,405,406,407,409],oN=t=>{var A,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((A=t==null?void 0:t.response)==null?void 0:A.status)??(t==null?void 0:t.status);if(e&&iN.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const n=new Error(t==null?void 0:t.message);throw n.name="InsufficientQuotaError",n}};class lg{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??oN;const A="default"in dr?dr.default:dr;this.queue=new A({concurrency:this.maxConcurrency})}call(e,...A){return this.queue.add(()=>Mu(()=>e(...A).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,A,...r){return e.signal?Promise.race([this.call(A,...r),new Promise((n,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(A,...r)}fetch(...e){return this.call(()=>fetch(...e).then(A=>A.ok?A:Promise.reject(A)))}}class tQ extends mo{constructor({config:e,onStart:A,onEnd:r,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=A,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function ug(t){return t?t.lc_runnable:!1}class lN{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,A){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const n=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(A)),this.includeTags!==void 0&&(r=r||n.some(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(A)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}}function Ef(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const uN=["*","_","`"];function cN(t){let e="";for(const[A,r]of Object.entries(t))e+=`	classDef ${A} ${r};
`;return e}function dN(t,e,A){const{firstNode:r,lastNode:n,nodeColors:s,withStyles:a=!0,curveStyle:i="linear",wrapLabelNWords:o=9}=A??{};let l=a?`%%{init: {'flowchart': {'curve': '${i}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const h="default",f={[h]:"{0}({1})"};r!==void 0&&(f[r]="{0}([{1}]):::first"),n!==void 0&&(f[n]="{0}([{1}]):::last");for(const[w,y]of Object.entries(t)){const p=y.name.split(":").pop()??"";let g=uN.some(_=>p.startsWith(_)&&p.endsWith(_))?`<p>${p}</p>`:p;Object.keys(y.metadata??{}).length&&(g+=`<hr/><small><em>${Object.entries(y.metadata??{}).map(([_,v])=>`${_} = ${v}`).join(`
`)}</em></small>`);const B=(f[w]??f[h]).replace("{0}",Ef(w)).replace("{1}",g);l+=`	${B}
`}}const u={};for(const h of e){const f=h.source.split(":"),w=h.target.split(":"),y=f.filter((p,m)=>p===w[m]).join(":");u[y]||(u[y]=[]),u[y].push(h)}const c=new Set;function d(h,f){const w=h.length===1&&h[0].source===h[0].target;if(f&&!w){const y=f.split(":").pop();if(c.has(y))throw new Error(`Found duplicate subgraph '${y}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);c.add(y),l+=`	subgraph ${y}
`}for(const y of h){const{source:p,target:m,data:g,conditional:B}=y;let _="";if(g!==void 0){let v=g;const C=v.split(" ");C.length>o&&(v=Array.from({length:Math.ceil(C.length/o)},(Q,S)=>C.slice(S*o,(S+1)*o).join(" ")).join("&nbsp;<br>&nbsp;")),_=B?` -. &nbsp;${v}&nbsp; .-> `:` -- &nbsp;${v}&nbsp; --> `}else _=B?" -.-> ":" --> ";l+=`	${Ef(p)}${_}${Ef(m)};
`}for(const y in u)y.startsWith(`${f}:`)&&y!==f&&d(u[y],y);f&&!w&&(l+=`	end
`)}d(u[""]??[],"");for(const h in u)!h.includes(":")&&h!==""&&d(u[h],h);return a&&(l+=cN(s??{})),l}async function fN(t,e){let{backgroundColor:A="white"}=e??{};const r=btoa(t);A!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(A)||(A=`!${A}`));const n=`https://mermaid.ink/img/${r}?bgColor=${A}`,s=await fetch(n);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}function Wc(t,e,A){function r(i,o){var l;Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(l=i._zod).traits??(l.traits=new Set),i._zod.traits.add(t),e(i,o);for(const u in a.prototype)u in i||Object.defineProperty(i,u,{value:a.prototype[u].bind(i)});i._zod.constr=a,i._zod.def=o}const n=(A==null?void 0:A.Parent)??Object;class s extends n{}Object.defineProperty(s,"name",{value:t});function a(i){var o;const l=A!=null&&A.Parent?new s:this;r(l,i),(o=l._zod).deferred??(o.deferred=[]);for(const u of l._zod.deferred)u();return l}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>{var o,l;return A!=null&&A.Parent&&i instanceof A.Parent?!0:(l=(o=i==null?void 0:i._zod)==null?void 0:o.traits)==null?void 0:l.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Wu extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const hN={};function Jc(t){return hN}function pN(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,n])=>e.indexOf(+r)===-1).map(([r,n])=>n)}function mN(t,e){return typeof e=="bigint"?e.toString():e}const AQ=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Ju(t,e,A){const r=new t._zod.constr(e??t._zod.def);return(!e||A!=null&&A.parent)&&(r._zod.parent=t),r}function gN(t){return{}}function Qf(t,e=0){var A;for(let r=e;r<t.issues.length;r++)if(((A=t.issues[r])==null?void 0:A.continue)!==!0)return!0;return!1}function Bl(t){return typeof t=="string"?t:t==null?void 0:t.message}function Zc(t,e,A){var n,s,a,i,o,l;const r={...t,path:t.path??[]};if(!t.message){const u=Bl((a=(s=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,t))??Bl((i=e==null?void 0:e.error)==null?void 0:i.call(e,t))??Bl((o=A.customError)==null?void 0:o.call(A,t))??Bl((l=A.localeError)==null?void 0:l.call(A,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const rQ=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,mN,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},wN=Wc("$ZodError",rQ),Xc=Wc("$ZodError",rQ,{Parent:Error}),yN=t=>(e,A,r,n)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:A,issues:[]},s);if(a instanceof Promise)throw new Wu;if(a.issues.length){const i=new((n==null?void 0:n.Err)??t)(a.issues.map(o=>Zc(o,s,Jc())));throw AQ(i,n==null?void 0:n.callee),i}return a.value},nQ=yN(Xc),BN=t=>async(e,A,r,n)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:A,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new((n==null?void 0:n.Err)??t)(a.issues.map(o=>Zc(o,s,Jc())));throw AQ(i,n==null?void 0:n.callee),i}return a.value},_N=BN(Xc),vN=t=>(e,A,r)=>{const n=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:A,issues:[]},n);if(s instanceof Promise)throw new Wu;return s.issues.length?{success:!1,error:new(t??wN)(s.issues.map(a=>Zc(a,n,Jc())))}:{success:!0,data:s.value}},CN=vN(Xc),bN=t=>async(e,A,r)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:A,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(a=>Zc(a,n,Jc())))}:{success:!0,data:s.value}},EN=bN(Xc),QN={major:4,minor:0,patch:0},UN=Wc("$ZodType",(t,e)=>{var n;var A;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=QN;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(A=t._zod).deferred??(A.deferred=[]),(n=t._zod.deferred)==null||n.push(()=>{t._zod.run=t._zod.parse});else{const s=(a,i,o)=>{let l=Qf(a),u;for(const c of i){if(c._zod.def.when){if(!c._zod.def.when(a))continue}else if(l)continue;const d=a.issues.length,h=c._zod.check(a);if(h instanceof Promise&&(o==null?void 0:o.async)===!1)throw new Wu;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,a.issues.length!==d&&(l||(l=Qf(a,d)))});else{if(a.issues.length===d)continue;l||(l=Qf(a,d))}}return u?u.then(()=>a):a};t._zod.run=(a,i)=>{const o=t._zod.parse(a,i);if(o instanceof Promise){if(i.async===!1)throw new Wu;return o.then(l=>s(l,r,i))}return s(o,r,i)}}t["~standard"]={validate:s=>{var a;try{const i=CN(t,s);return i.success?{value:i.data}:{issues:(a=i.error)==null?void 0:a.issues}}catch{return EN(t,s).then(o=>{var l;return o.success?{value:o.data}:{issues:(l=o.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),FN=Wc("$ZodNever",(t,e)=>{UN.init(t,e),t._zod.parse=(A,r)=>(A.issues.push({expected:"never",code:"invalid_type",input:A.value,inst:t}),A)});class sQ{constructor(){this._map=new Map,this._idmap=new Map}add(e,...A){const r=A[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const A=this._map.get(e);return A&&typeof A=="object"&&"id"in A&&this._idmap.delete(A.id),this._map.delete(e),this}get(e){const A=e._zod.parent;if(A){const r={...this.get(A)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function IN(){return new sQ}const Kr=IN();function SN(t,e){return new t({type:"never",...gN()})}class o_{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Kr,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,A={path:[],schemaPath:[]}){var c,d,h;var r;const n=e._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,A.schemaPath.includes(e)&&(a.cycle=A.path),a.schema;const i={schema:{},count:1,cycle:void 0,path:A.path};this.seen.set(e,i);const o=(d=(c=e._zod).toJSONSchema)==null?void 0:d.call(c);if(o)i.schema=o;else{const f={...A,schemaPath:[...A.schemaPath,e],path:A.path},w=e._zod.parent;if(w)i.ref=w,this.process(w,f),this.seen.get(w).isParent=!0;else{const y=i.schema;switch(n.type){case"string":{const p=y;p.type="string";const{minimum:m,maximum:g,format:B,patterns:_,contentEncoding:v}=e._zod.bag;if(typeof m=="number"&&(p.minLength=m),typeof g=="number"&&(p.maxLength=g),B&&(p.format=s[B]??B,p.format===""&&delete p.format),v&&(p.contentEncoding=v),_&&_.size>0){const C=[..._];C.length===1?p.pattern=C[0].source:C.length>1&&(i.schema.allOf=[...C.map(Q=>({...this.target==="draft-7"?{type:"string"}:{},pattern:Q.source}))])}break}case"number":{const p=y,{minimum:m,maximum:g,format:B,multipleOf:_,exclusiveMaximum:v,exclusiveMinimum:C}=e._zod.bag;typeof B=="string"&&B.includes("int")?p.type="integer":p.type="number",typeof C=="number"&&(p.exclusiveMinimum=C),typeof m=="number"&&(p.minimum=m,typeof C=="number"&&(C>=m?delete p.minimum:delete p.exclusiveMinimum)),typeof v=="number"&&(p.exclusiveMaximum=v),typeof g=="number"&&(p.maximum=g,typeof v=="number"&&(v<=g?delete p.maximum:delete p.exclusiveMaximum)),typeof _=="number"&&(p.multipleOf=_);break}case"boolean":{const p=y;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=y,{minimum:m,maximum:g}=e._zod.bag;typeof m=="number"&&(p.minItems=m),typeof g=="number"&&(p.maxItems=g),p.type="array",p.items=this.process(n.element,{...f,path:[...f.path,"items"]});break}case"object":{const p=y;p.type="object",p.properties={};const m=n.shape;for(const _ in m)p.properties[_]=this.process(m[_],{...f,path:[...f.path,"properties",_]});const g=new Set(Object.keys(m)),B=new Set([...g].filter(_=>{const v=n.shape[_]._zod;return this.io==="input"?v.optin===void 0:v.optout===void 0}));B.size>0&&(p.required=Array.from(B)),((h=n.catchall)==null?void 0:h._zod.def.type)==="never"?p.additionalProperties=!1:n.catchall?n.catchall&&(p.additionalProperties=this.process(n.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=y;p.anyOf=n.options.map((m,g)=>this.process(m,{...f,path:[...f.path,"anyOf",g]}));break}case"intersection":{const p=y,m=this.process(n.left,{...f,path:[...f.path,"allOf",0]}),g=this.process(n.right,{...f,path:[...f.path,"allOf",1]}),B=v=>"allOf"in v&&Object.keys(v).length===1,_=[...B(m)?m.allOf:[m],...B(g)?g.allOf:[g]];p.allOf=_;break}case"tuple":{const p=y;p.type="array";const m=n.items.map((_,v)=>this.process(_,{...f,path:[...f.path,"prefixItems",v]}));if(this.target==="draft-2020-12"?p.prefixItems=m:p.items=m,n.rest){const _=this.process(n.rest,{...f,path:[...f.path,"items"]});this.target==="draft-2020-12"?p.items=_:p.additionalItems=_}n.rest&&(p.items=this.process(n.rest,{...f,path:[...f.path,"items"]}));const{minimum:g,maximum:B}=e._zod.bag;typeof g=="number"&&(p.minItems=g),typeof B=="number"&&(p.maxItems=B);break}case"record":{const p=y;p.type="object",p.propertyNames=this.process(n.keyType,{...f,path:[...f.path,"propertyNames"]}),p.additionalProperties=this.process(n.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=y,m=pN(n.entries);m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),p.enum=m;break}case"literal":{const p=y,m=[];for(const g of n.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(g))}else m.push(g);if(m.length!==0)if(m.length===1){const g=m[0];p.type=g===null?"null":typeof g,p.const=g}else m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),m.every(g=>typeof g=="boolean")&&(p.type="string"),m.every(g=>g===null)&&(p.type="null"),p.enum=m;break}case"file":{const p=y,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:B,mime:_}=e._zod.bag;g!==void 0&&(m.minLength=g),B!==void 0&&(m.maxLength=B),_?_.length===1?(m.contentMediaType=_[0],Object.assign(p,m)):p.anyOf=_.map(v=>({...m,contentMediaType:v})):Object.assign(p,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(n.innerType,f);y.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(n.innerType,f),i.ref=n.innerType;break}case"success":{const p=y;p.type="boolean";break}case"default":{this.process(n.innerType,f),i.ref=n.innerType,y.default=JSON.parse(JSON.stringify(n.defaultValue));break}case"prefault":{this.process(n.innerType,f),i.ref=n.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break}case"catch":{this.process(n.innerType,f),i.ref=n.innerType;let p;try{p=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=y,m=e._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=m.source;break}case"pipe":{const p=this.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;this.process(p,f),i.ref=p;break}case"readonly":{this.process(n.innerType,f),i.ref=n.innerType,y.readOnly=!0;break}case"promise":{this.process(n.innerType,f),i.ref=n.innerType;break}case"optional":{this.process(n.innerType,f),i.ref=n.innerType;break}case"lazy":{const p=e._zod.innerType;this.process(p,f),i.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(e);return l&&Object.assign(i.schema,l),this.io==="input"&&Ge(e)&&(delete i.schema.examples,delete i.schema.default),this.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,this.seen.get(e).schema}emit(e,A){var u,c,d,h,f,w;const r={cycles:(A==null?void 0:A.cycles)??"ref",reused:(A==null?void 0:A.reused)??"inline",external:(A==null?void 0:A.external)??void 0},n=this.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=y=>{var _;const p=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const v=(_=r.external.registry.get(y[0]))==null?void 0:_.id,C=r.external.uri??(S=>S);if(v)return{ref:C(v)};const Q=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=Q,{defId:Q,ref:`${C("__shared")}#/${p}/${Q}`}}if(y[1]===n)return{ref:"#"};const g=`#/${p}/`,B=y[1].schema.id??`__schema${this.counter++}`;return{defId:B,ref:g+B}},a=y=>{if(y[1].schema.$ref)return;const p=y[1],{ref:m,defId:g}=s(y);p.def={...p.schema},g&&(p.defId=g);const B=p.schema;for(const _ in B)delete B[_];B.$ref=m};if(r.cycles==="throw")for(const y of this.seen.entries()){const p=y[1];if(p.cycle)throw new Error(`Cycle detected: #/${(u=p.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const p=y[1];if(e===y[0]){a(y);continue}if(r.external){const g=(c=r.external.registry.get(y[0]))==null?void 0:c.id;if(e!==y[0]&&g){a(y);continue}}if((d=this.metadataRegistry.get(y[0]))==null?void 0:d.id){a(y);continue}if(p.cycle){a(y);continue}if(p.count>1&&r.reused==="ref"){a(y);continue}}const i=(y,p)=>{const m=this.seen.get(y),g=m.def??m.schema,B={...g};if(m.ref===null)return;const _=m.ref;if(m.ref=null,_){i(_,p);const v=this.seen.get(_).schema;v.$ref&&p.target==="draft-7"?(g.allOf=g.allOf??[],g.allOf.push(v)):(Object.assign(g,v),Object.assign(g,B))}m.isParent||this.override({zodSchema:y,jsonSchema:g,path:m.path??[]})};for(const y of[...this.seen.entries()].reverse())i(y[0],{target:this.target});const o={};if(this.target==="draft-2020-12"?o.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(h=r.external)!=null&&h.uri){const y=(f=r.external.registry.get(e))==null?void 0:f.id;if(!y)throw new Error("Schema is missing an `id` property");o.$id=r.external.uri(y)}Object.assign(o,n.def);const l=((w=r.external)==null?void 0:w.defs)??{};for(const y of this.seen.entries()){const p=y[1];p.def&&p.defId&&(l[p.defId]=p.def)}r.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch{throw new Error("Error converting schema to JSON.")}}}function vp(t,e){if(t instanceof sQ){const r=new o_(e),n={};for(const i of t._idmap.entries()){const[o,l]=i;r.process(l)}const s={},a={registry:t,uri:e==null?void 0:e.uri,defs:n};for(const i of t._idmap.entries()){const[o,l]=i;s[o]=r.emit(l,{...e,external:a})}if(Object.keys(n).length>0){const i=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[i]:n}}return{schemas:s}}const A=new o_(e);return A.process(t),A.emit(t,e)}function Ge(t,e){const A=e??{seen:new Set};if(A.seen.has(t))return!1;A.seen.add(t);const n=t._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Ge(n.element,A);case"object":{for(const s in n.shape)if(Ge(n.shape[s],A))return!0;return!1}case"union":{for(const s of n.options)if(Ge(s,A))return!0;return!1}case"intersection":return Ge(n.left,A)||Ge(n.right,A);case"tuple":{for(const s of n.items)if(Ge(s,A))return!0;return!!(n.rest&&Ge(n.rest,A))}case"record":return Ge(n.keyType,A)||Ge(n.valueType,A);case"map":return Ge(n.keyType,A)||Ge(n.valueType,A);case"set":return Ge(n.valueType,A);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Ge(n.innerType,A);case"lazy":return Ge(n.getter(),A);case"default":return Ge(n.innerType,A);case"prefault":return Ge(n.innerType,A);case"custom":return!1;case"transform":return!0;case"pipe":return Ge(n.in,A)||Ge(n.out,A);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${n.type}`)}const xN=Symbol("Let zodToJsonSchema decide on which parser to use"),TN={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},ON=t=>({...TN,...t}),kN=t=>{const e=ON(t),A=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:A,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,n])=>[n._def,{def:n._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function aQ(t,e,A,r){r!=null&&r.errorMessages&&A&&(t.errorMessage={...t.errorMessage,[e]:A})}function Be(t,e,A,r,n){t[e]=A,aQ(t,e,r,n)}const iQ=(t,e)=>{let A=0;for(;A<t.length&&A<e.length&&t[A]===e[A];A++);return[(t.length-A).toString(),...e.slice(A)].join("/")};function tA(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?iQ(e,t.currentPath):e.join("/")}}function RN(t,e){var r,n,s;const A={type:"array"};return(r=t.type)!=null&&r._def&&((s=(n=t.type)==null?void 0:n._def)==null?void 0:s.typeName)!==x.ZodAny&&(A.items=ye(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Be(A,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Be(A,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Be(A,"minItems",t.exactLength.value,t.exactLength.message,e),Be(A,"maxItems",t.exactLength.value,t.exactLength.message,e)),A}function LN(t,e){const A={type:"integer",format:"int64"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Be(A,"minimum",r.value,r.message,e):Be(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),Be(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Be(A,"maximum",r.value,r.message,e):Be(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),Be(A,"maximum",r.value,r.message,e));break;case"multipleOf":Be(A,"multipleOf",r.value,r.message,e);break}return A}function PN(){return{type:"boolean"}}function oQ(t,e){return ye(t.type._def,e)}const HN=(t,e)=>ye(t.innerType._def,e);function lQ(t,e,A){const r=A??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,s)=>lQ(t,e,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return NN(t,e)}}const NN=(t,e)=>{const A={type:"integer",format:"unix-time"};if(e.target==="openApi3")return A;for(const r of t.checks)switch(r.kind){case"min":Be(A,"minimum",r.value,r.message,e);break;case"max":Be(A,"maximum",r.value,r.message,e);break}return A};function DN(t,e){return{...ye(t.innerType._def,e),default:t.defaultValue()}}function $N(t,e){return e.effectStrategy==="input"?ye(t.schema._def,e):tA(e)}function MN(t){return{type:"string",enum:Array.from(t.values)}}const jN=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function KN(t,e){const A=[ye(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ye(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const n=[];return A.forEach(s=>{if(jN(s))n.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...o}=s;a=o}else r=void 0;n.push(a)}}),n.length?{allOf:n,...r}:void 0}function GN(t,e){const A=typeof t.value;return A!=="bigint"&&A!=="number"&&A!=="boolean"&&A!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:A==="bigint"?"integer":A,enum:[t.value]}:{type:A==="bigint"?"integer":A,const:t.value}}let Uf;const yA={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Uf===void 0&&(Uf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Uf),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function uQ(t,e){const A={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Be(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,r.value):r.value,r.message,e);break;case"max":Be(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":BA(A,"email",r.message,e);break;case"format:idn-email":BA(A,"idn-email",r.message,e);break;case"pattern:zod":_t(A,yA.email,r.message,e);break}break;case"url":BA(A,"uri",r.message,e);break;case"uuid":BA(A,"uuid",r.message,e);break;case"regex":_t(A,r.regex,r.message,e);break;case"cuid":_t(A,yA.cuid,r.message,e);break;case"cuid2":_t(A,yA.cuid2,r.message,e);break;case"startsWith":_t(A,RegExp(`^${Ff(r.value,e)}`),r.message,e);break;case"endsWith":_t(A,RegExp(`${Ff(r.value,e)}$`),r.message,e);break;case"datetime":BA(A,"date-time",r.message,e);break;case"date":BA(A,"date",r.message,e);break;case"time":BA(A,"time",r.message,e);break;case"duration":BA(A,"duration",r.message,e);break;case"length":Be(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,r.value):r.value,r.message,e),Be(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,r.value):r.value,r.message,e);break;case"includes":{_t(A,RegExp(Ff(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&BA(A,"ipv4",r.message,e),r.version!=="v4"&&BA(A,"ipv6",r.message,e);break}case"base64url":_t(A,yA.base64url,r.message,e);break;case"jwt":_t(A,yA.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&_t(A,yA.ipv4Cidr,r.message,e),r.version!=="v4"&&_t(A,yA.ipv6Cidr,r.message,e);break}case"emoji":_t(A,yA.emoji(),r.message,e);break;case"ulid":{_t(A,yA.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{BA(A,"binary",r.message,e);break}case"contentEncoding:base64":{Be(A,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{_t(A,yA.base64,r.message,e);break}}break}case"nanoid":_t(A,yA.nanoid,r.message,e)}return A}function Ff(t,e){return e.patternStrategy==="escape"?zN(t):t}const VN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function zN(t){let e="";for(let A=0;A<t.length;A++)VN.has(t[A])||(e+="\\"),e+=t[A];return e}function BA(t,e,A,r){var n;t.format||(n=t.anyOf)!=null&&n.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...A&&r.errorMessages&&{errorMessage:{format:A}}})):Be(t,"format",e,A,r)}function _t(t,e,A,r){var n;t.pattern||(n=t.allOf)!=null&&n.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:l_(e,r),...A&&r.errorMessages&&{errorMessage:{pattern:A}}})):Be(t,"pattern",l_(e,r),A,r)}function l_(t,e){var o;if(!e.applyRegexFlags||!t.flags)return t.source;const A={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=A.i?t.source.toLowerCase():t.source;let n="",s=!1,a=!1,i=!1;for(let l=0;l<r.length;l++){if(s){n+=r[l],s=!1;continue}if(A.i){if(a){if(r[l].match(/[a-z]/)){i?(n+=r[l],n+=`${r[l-2]}-${r[l]}`.toUpperCase(),i=!1):r[l+1]==="-"&&((o=r[l+2])!=null&&o.match(/[a-z]/))?(n+=r[l],i=!0):n+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){n+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(A.m){if(r[l]==="^"){n+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){n+=`($|(?=[\r
]))`;continue}}if(A.s&&r[l]==="."){n+=a?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}n+=r[l],r[l]==="\\"?s=!0:a&&r[l]==="]"?a=!1:!a&&r[l]==="["&&(a=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return n}function cQ(t,e){var r,n,s,a,i,o;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===x.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,u)=>({...l,[u]:ye(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??tA(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const A={type:"object",additionalProperties:ye(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return A;if(((n=t.keyType)==null?void 0:n._def.typeName)===x.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:l,...u}=uQ(t.keyType._def,e);return{...A,propertyNames:u}}else{if(((a=t.keyType)==null?void 0:a._def.typeName)===x.ZodEnum)return{...A,propertyNames:{enum:t.keyType._def.values}};if(((i=t.keyType)==null?void 0:i._def.typeName)===x.ZodBranded&&t.keyType._def.type._def.typeName===x.ZodString&&((o=t.keyType._def.type._def.checks)!=null&&o.length)){const{type:l,...u}=oQ(t.keyType._def,e);return{...A,propertyNames:u}}}return A}function WN(t,e){if(e.mapStrategy==="record")return cQ(t,e);const A=ye(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||tA(e),r=ye(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||tA(e);return{type:"array",maxItems:125,items:{type:"array",items:[A,r],minItems:2,maxItems:2}}}function JN(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),n=Array.from(new Set(r.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:r}}function ZN(t){return t.target==="openAi"?void 0:{not:tA({...t,currentPath:[...t.currentPath,"not"]})}}function XN(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Zu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function YN(t,e){if(e.target==="openApi3")return u_(t,e);const A=t.options instanceof Map?Array.from(t.options.values()):t.options;if(A.every(r=>r._def.typeName in Zu&&(!r._def.checks||!r._def.checks.length))){const r=A.reduce((n,s)=>{const a=Zu[s._def.typeName];return a&&!n.includes(a)?[...n,a]:n},[]);return{type:r.length>1?r:r[0]}}else if(A.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=A.reduce((n,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...n,a];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(r.length===A.length){const n=r.filter((s,a,i)=>i.indexOf(s)===a);return{type:n.length>1?n:n[0],enum:A.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(A.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:A.reduce((r,n)=>[...r,...n._def.values.filter(s=>!r.includes(s))],[])};return u_(t,e)}const u_=(t,e)=>{const A=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,n)=>ye(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return A.length?{anyOf:A}:void 0};function qN(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Zu[t.innerType._def.typeName],nullable:!0}:{type:[Zu[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=ye(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const A=ye(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return A&&{anyOf:[A,{type:"null"}]}}function e4(t,e){const A={type:"number"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"int":A.type="integer",aQ(A,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Be(A,"minimum",r.value,r.message,e):Be(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),Be(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Be(A,"maximum",r.value,r.message,e):Be(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),Be(A,"maximum",r.value,r.message,e));break;case"multipleOf":Be(A,"multipleOf",r.value,r.message,e);break}return A}function t4(t,e){const A=e.target==="openAi",r={type:"object",properties:{}},n=[],s=t.shape();for(const i in s){let o=s[i];if(o===void 0||o._def===void 0)continue;let l=r4(o);l&&A&&(o._def.typeName==="ZodOptional"&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),l=!1);const u=ye(o._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,l||n.push(i))}n.length&&(r.required=n);const a=A4(t,e);return a!==void 0&&(r.additionalProperties=a),r}function A4(t,e){if(t.catchall._def.typeName!=="ZodNever")return ye(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function r4(t){try{return t.isOptional()}catch{return!0}}const n4=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return ye(t.innerType._def,e);const A=ye(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return A?{anyOf:[{not:tA(e)},A]}:tA(e)},s4=(t,e)=>{if(e.pipeStrategy==="input")return ye(t.in._def,e);if(e.pipeStrategy==="output")return ye(t.out._def,e);const A=ye(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=ye(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",A?"1":"0"]});return{allOf:[A,r].filter(n=>n!==void 0)}};function a4(t,e){return ye(t.type._def,e)}function i4(t,e){const r={type:"array",uniqueItems:!0,items:ye(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Be(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Be(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function o4(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((A,r)=>ye(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[]),additionalItems:ye(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((A,r)=>ye(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[])}}function l4(t){return{not:tA(t)}}function u4(t){return tA(t)}const c4=(t,e)=>ye(t.innerType._def,e),d4=(t,e,A)=>{switch(e){case x.ZodString:return uQ(t,A);case x.ZodNumber:return e4(t,A);case x.ZodObject:return t4(t,A);case x.ZodBigInt:return LN(t,A);case x.ZodBoolean:return PN();case x.ZodDate:return lQ(t,A);case x.ZodUndefined:return l4(A);case x.ZodNull:return XN(A);case x.ZodArray:return RN(t,A);case x.ZodUnion:case x.ZodDiscriminatedUnion:return YN(t,A);case x.ZodIntersection:return KN(t,A);case x.ZodTuple:return o4(t,A);case x.ZodRecord:return cQ(t,A);case x.ZodLiteral:return GN(t,A);case x.ZodEnum:return MN(t);case x.ZodNativeEnum:return JN(t);case x.ZodNullable:return qN(t,A);case x.ZodOptional:return n4(t,A);case x.ZodMap:return WN(t,A);case x.ZodSet:return i4(t,A);case x.ZodLazy:return()=>t.getter()._def;case x.ZodPromise:return a4(t,A);case x.ZodNaN:case x.ZodNever:return ZN(A);case x.ZodEffects:return $N(t,A);case x.ZodAny:return tA(A);case x.ZodUnknown:return u4(A);case x.ZodDefault:return DN(t,A);case x.ZodBranded:return oQ(t,A);case x.ZodReadonly:return c4(t,A);case x.ZodCatch:return HN(t,A);case x.ZodPipeline:return s4(t,A);case x.ZodFunction:case x.ZodVoid:case x.ZodSymbol:return;default:return(r=>{})()}};function ye(t,e,A=!1){var i;const r=e.seen.get(t);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,t,e,r,A);if(o!==xN)return o}if(r&&!A){const o=f4(r,e);if(o!==void 0)return o}const n={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,n);const s=d4(t,t.typeName,e),a=typeof s=="function"?ye(s(),e):s;if(a&&h4(t,e,a),e.postProcess){const o=e.postProcess(a,t,e);return n.jsonSchema=a,o}return n.jsonSchema=a,a}const f4=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:iQ(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((A,r)=>e.currentPath[r]===A)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),tA(e)):e.$refStrategy==="seen"?tA(e):void 0}},h4=(t,e,A)=>(t.description&&(A.description=t.description,e.markdownDescription&&(A.markdownDescription=t.description)),A),p4=(t,e)=>{const A=kN(e);let r;const n=e==null?void 0:e.name,s=ye(t._def,A,!1)??tA(A);A.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[A.openAiAnyTypeName]||(r[A.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:A.$refStrategy==="relative"?"1":[...A.basePath,A.definitionPath,A.openAiAnyTypeName].join("/")}}));const a=n===void 0?r?{...s,[A.definitionPath]:r}:s:{$ref:[...A.$refStrategy==="relative"?[]:A.basePath,A.definitionPath,n].join("/"),[A.definitionPath]:{...r,[n]:s}};return A.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(A.target==="jsonSchema2019-09"||A.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),A.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function Cp(t,e){const A=typeof t;if(A!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(!Cp(t[n],e[n]))return!1;return!0}if(A==="object"){if(!t||!e)return t===e;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const a of r)if(!Cp(t[a],e[a]))return!1;return!0}return t===e}function LA(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const A=e._zod;return typeof A=="object"&&A!==null&&"def"in A}function er(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const A=e._def;return typeof A=="object"&&A!=null&&"typeName"in A}function Sn(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(LA(t)||er(t))}async function m4(t,e){if(LA(t))try{return{success:!0,data:await _N(t,e)}}catch(A){return{success:!1,error:A}}if(er(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function dQ(t,e){if(LA(t))return nQ(t,e);if(er(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function cg(t){var e;if(LA(t))return(e=Kr.get(t))==null?void 0:e.description;if(er(t)||"description"in t&&typeof t.description=="string")return t.description}function g4(t){return Sn(t)?er(t)?t._def.typeName==="ZodString":LA(t)?t._zod.def.type==="string":!1:!1}function Ei(t){return LA(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function fQ(t){return LA(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function bp(t,e=!1){if(er(t))return t.strict();if(Ei(t)){const A=t._zod.def.shape;if(e)for(const[s,a]of Object.entries(t._zod.def.shape)){if(Ei(a)){const o=bp(a,e);A[s]=o}else if(fQ(a)){let o=a._zod.def.element;Ei(o)&&(o=bp(o,e)),A[s]=Ju(a,{...a._zod.def,element:o})}else A[s]=a;const i=Kr.get(a);i&&Kr.add(A[s],i)}const r=Ju(t,{...t._zod.def,shape:A,catchall:SN(FN)}),n=Kr.get(t);return n&&Kr.add(r,n),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function w4(t){return er(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function y4(t){return LA(t)&&t._zod.def.type==="pipe"}function Ai(t,e=!1){if(er(t))return w4(t)?Ai(t._def.schema,e):t;if(LA(t)){let A=t;if(y4(t)&&(A=Ai(t._zod.def.in,e)),e){if(Ei(A)){const n=A._zod.def.shape;for(const[s,a]of Object.entries(A._zod.def.shape))n[s]=Ai(a,e);A=Ju(A,{...A._zod.def,shape:n})}else if(fQ(A)){const n=Ai(A._zod.def.element,e);A=Ju(A,{...A._zod.def,element:n})}}const r=Kr.get(t);return r&&Kr.add(A,r),A}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Gr(t){if(LA(t)){const e=Ai(t,!0);if(Ei(e)){const A=bp(e,!0);return vp(A)}else return vp(t)}return er(t)?p4(t):t}function B4(t,e){if(t!==void 0&&!Bi(t))return t;if(ug(e))try{let A=e.getName();return A=A.startsWith("Runnable")?A.slice(8):A,A}catch{return e.getName()}else return e.name??"UnknownSchema"}function _4(t){return ug(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Gr(t.data.schema),title:t.data.name}}}class Yc{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((A,r)=>{e[A.id]=Bi(A.id)?r:A.id}),{nodes:Object.values(this.nodes).map(A=>({id:e[A.id],..._4(A)})),edges:this.edges.map(A=>{const r={source:e[A.source],target:e[A.target]};return typeof A.data<"u"&&(r.data=A.data),typeof A.conditional<"u"&&(r.conditional=A.conditional),r})}}addNode(e,A,r){if(A!==void 0&&this.nodes[A]!==void 0)throw new Error(`Node with id ${A} already exists`);const n=A??Et(),s={id:n,data:e,name:B4(A,e),metadata:r};return this.nodes[n]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(A=>A.source!==e.id&&A.target!==e.id)}addEdge(e,A,r,n){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[A.id]===void 0)throw new Error(`Target node ${A.id} not in graph`);const s={source:e.id,target:A.id,data:r,conditional:n};return this.edges.push(s),s}firstNode(){return c_(this)}lastNode(){return d_(this)}extend(e,A=""){let r=A;Object.values(e.nodes).map(l=>l.id).every(Bi)&&(r="");const s=l=>r?`${r}:${l}`:l;Object.entries(e.nodes).forEach(([l,u])=>{this.nodes[s(l)]={...u,id:s(l)}});const a=e.edges.map(l=>({...l,source:s(l.source),target:s(l.target)}));this.edges=[...this.edges,...a];const i=e.firstNode(),o=e.lastNode();return[i?{id:s(i.id),data:i.data}:void 0,o?{id:s(o.id),data:o.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&c_(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&d_(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(n=>[n.id,n.name])),A=new Map;Object.values(e).forEach(n=>{A.set(n,(A.get(n)||0)+1)});const r=n=>{const s=e[n];return Bi(n)&&A.get(s)===1?s:n};return new Yc({nodes:Object.fromEntries(Object.entries(this.nodes).map(([n,s])=>[r(n),{...s,id:r(n)}])),edges:this.edges.map(n=>({...n,source:r(n.source),target:r(n.target)}))})}drawMermaid(e){const{withStyles:A,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},a=this.reid(),i=a.firstNode(),o=a.lastNode();return dN(a.nodes,a.edges,{firstNode:i==null?void 0:i.id,lastNode:o==null?void 0:o.id,withStyles:A,curveStyle:r,nodeColors:n,wrapLabelNWords:s})}async drawMermaidPng(e){const A=this.drawMermaid(e);return fN(A,{backgroundColor:e==null?void 0:e.backgroundColor})}}function c_(t,e=[]){const A=new Set(t.edges.filter(n=>!e.includes(n.source)).map(n=>n.target)),r=[];for(const n of Object.values(t.nodes))!e.includes(n.id)&&!A.has(n.id)&&r.push(n);return r.length===1?r[0]:void 0}function d_(t,e=[]){const A=new Set(t.edges.filter(n=>!e.includes(n.target)).map(n=>n.source)),r=[];for(const n of Object.values(t.nodes))!e.includes(n.id)&&!A.has(n.id)&&r.push(n);return r.length===1?r[0]:void 0}function v4(t){const e=new TextEncoder,A=new ReadableStream({async start(r){for await(const n of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(n)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return eA.fromReadableStream(A)}function f_(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const C4=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function Ep(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*h_(t,e){for(;;){const{value:A,done:r}=cn.runWithConfig(ta(t),e.next.bind(e),!0);if(r)break;yield A}}async function*Qp(t,e){const A=e[Symbol.asyncIterator]();for(;;){const{value:r,done:n}=await cn.runWithConfig(ta(t),A.next.bind(e),!0);if(n)break;yield r}}function tt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class rt extends jn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const A=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${A}${e}`:A}bind(e){return new Ln({bound:this,kwargs:e,config:{}})}map(){return new Xu({bound:this})}withRetry(e){return new hQ({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Ln({bound:this,config:e,kwargs:{}})}withFallbacks(e){const A=Array.isArray(e)?e:e.fallbacks;return new E4({runnable:this,fallbacks:A})}_getOptionsList(e,A=0){if(Array.isArray(e)&&e.length!==A)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${A} inputs`);if(Array.isArray(e))return e.map(we);if(A>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([n])=>n!=="runId"));return Array.from({length:A},(n,s)=>we(s===0?e:r))}return Array.from({length:A},()=>we(e))}async batch(e,A,r){var o;const n=this._getOptionsList(A??{},e.length),s=((o=n[0])==null?void 0:o.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new lg({maxConcurrency:s,onFailedAttempt:l=>{throw l}}),i=e.map((l,u)=>a.call(async()=>{try{return await this.invoke(l,n[u])}catch(c){if(r!=null&&r.returnExceptions)return c;throw c}}));return Promise.all(i)}async*_streamIterator(e,A){yield this.invoke(e,A)}async stream(e,A){const r=we(A),n=new da({generator:this._streamIterator(e,r),config:r});return await n.setup,eA.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let A;e===void 0?A=we(e):A=we({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[A,r]}async _callWithConfig(e,A,r){const n=we(r),s=await xA(n),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),tt(A,"input"),n.runId,n==null?void 0:n.runType,void 0,void 0,(n==null?void 0:n.runName)??this.getName()));delete n.runId;let i;try{const o=e.call(this,A,n,a);i=await dn(o,r==null?void 0:r.signal)}catch(o){throw await(a==null?void 0:a.handleChainError(o)),o}return await(a==null?void 0:a.handleChainEnd(tt(i,"output"))),i}async _batchWithConfig(e,A,r,n){var l;const s=this._getOptionsList(r??{},A.length),a=await Promise.all(s.map(xA)),i=await Promise.all(a.map(async(u,c)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),tt(A[c],"input"),s[c].runId,s[c].runType,void 0,void 0,s[c].runName??this.getName()));return delete s[c].runId,d}));let o;try{const u=e.call(this,A,s,i,n);o=await dn(u,(l=s==null?void 0:s[0])==null?void 0:l.signal)}catch(u){throw await Promise.all(i.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(i.map(u=>u==null?void 0:u.handleChainEnd(tt(o,"output")))),o}_concatOutputChunks(e,A){return zc(e,A)}async*_transformStreamWithConfig(e,A,r){let n,s=!0,a,i=!0;const o=we(r),l=await xA(o),u=this;async function*c(){for await(const h of e){if(s)if(n===void 0)n=h;else try{n=u._concatOutputChunks(n,h)}catch{n=void 0,s=!1}yield h}}let d;try{const h=await AN(A.bind(this),c(),async()=>l==null?void 0:l.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName()),r==null?void 0:r.signal,o);delete o.runId,d=h.setup;const f=d==null?void 0:d.handlers.find(sN);let w=h.output;f!==void 0&&d!==void 0&&(w=f.tapOutputIterable(d.runId,w));const y=d==null?void 0:d.handlers.find(rN);y!==void 0&&d!==void 0&&(w=y.tapOutputIterable(d.runId,w));for await(const p of w)if(yield p,i)if(a===void 0)a=p;else try{a=this._concatOutputChunks(a,p)}catch{a=void 0,i=!1}}catch(h){throw await(d==null?void 0:d.handleChainError(h,void 0,void 0,void 0,{inputs:tt(n,"input")})),h}await(d==null?void 0:d.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:tt(n,"input")}))}getGraph(e){const A=new Yc,r=A.addNode({name:`${this.getName()}Input`,schema:QB()}),n=A.addNode(this),s=A.addNode({name:`${this.getName()}Output`,schema:QB()});return A.addEdge(r,n),A.addEdge(n,s),A}pipe(e){return new lr({first:this,last:xn(e)})}pick(e){return this.pipe(new Q4(e))}assign(e){return this.pipe(new pQ(new fa({steps:e})))}async*transform(e,A){let r;for await(const n of e)r===void 0?r=n:r=this._concatOutputChunks(r,n);yield*this._streamIterator(r,we(A))}async*streamLog(e,A,r){const n=new a_({...r,autoClose:!1,_schemaFormat:"original"}),s=we(A);yield*this._streamLog(e,n,s)}async*_streamLog(e,A,r){const{callbacks:n}=r;if(n===void 0)r.callbacks=[A];else if(Array.isArray(n))r.callbacks=n.concat([A]);else{const o=n.copy();o.addHandler(A,!0),r.callbacks=o}const s=this.stream(e,r);async function a(){try{const o=await s;for await(const l of o){const u=new kr({ops:[{op:"add",path:"/streamed_output/-",value:l}]});await A.writer.write(u)}}finally{await A.writer.close()}}const i=a();try{for await(const o of A)yield o}finally{await i}}streamEvents(e,A,r){let n;if(A.version==="v1")n=this._streamEventsV1(e,A,r);else if(A.version==="v2")n=this._streamEventsV2(e,A,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return A.encoding==="text/event-stream"?v4(n):eA.fromAsyncGenerator(n)}async*_streamEventsV2(e,A,r){var f;const n=new aN({...r,autoClose:!1}),s=we(A),a=s.runId??Et();s.runId=a;const i=s.callbacks;if(i===void 0)s.callbacks=[n];else if(Array.isArray(i))s.callbacks=i.concat(n);else{const w=i.copy();w.addHandler(n,!0),s.callbacks=w}const o=new AbortController,l=this;async function u(){let w,y=null;try{A!=null&&A.signal?"any"in AbortSignal?w=AbortSignal.any([o.signal,A.signal]):(w=A.signal,y=()=>{o.abort()},A.signal.addEventListener("abort",y,{once:!0})):w=o.signal;const p=await l.stream(e,{...s,signal:w}),m=n.tapOutputIterable(a,p);for await(const g of m)if(o.signal.aborted)break}finally{await n.finish(),w&&y&&w.removeEventListener("abort",y)}}const c=u();let d=!1,h;try{for await(const w of n){if(!d){w.data.input=e,d=!0,h=w.run_id,yield w;continue}w.run_id===h&&w.event.endsWith("_end")&&(f=w.data)!=null&&f.input&&delete w.data.input,yield w}}finally{o.abort(),await c}}async*_streamEventsV1(e,A,r){let n,s=!1;const a=we(A),i=a.tags??[],o=a.metadata??{},l=a.runName??this.getName(),u=new a_({...r,autoClose:!1,_schemaFormat:"streaming_events"}),c=new lN({...r}),d=this._streamLog(e,u,a);for await(const f of d){if(n?n=n.concat(f):n=qi.fromRunLogPatch(f),n.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;const m={...n.state},g={run_id:m.id,event:`on_${m.type}_start`,name:l,tags:i,metadata:o,data:{input:e}};c.includeEvent(g,m.type)&&(yield g)}const w=f.ops.filter(m=>m.path.startsWith("/logs/")).map(m=>m.path.split("/")[2]),y=[...new Set(w)];for(const m of y){let g,B={};const _=n.state.logs[m];if(_.end_time===void 0?_.streamed_output.length>0?g="stream":g="start":g="end",g==="start")_.inputs!==void 0&&(B.input=_.inputs);else if(g==="end")_.inputs!==void 0&&(B.input=_.inputs),B.output=_.final_output;else if(g==="stream"){const v=_.streamed_output.length;if(v!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${v} instead. Encountered in: "${_.name}"`);B={chunk:_.streamed_output[0]},_.streamed_output=[]}yield{event:`on_${_.type}_${g}`,name:_.name,run_id:_.id,tags:_.tags,metadata:_.metadata,data:B}}const{state:p}=n;if(p.streamed_output.length>0){const m=p.streamed_output.length;if(m!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${m} instead. Encountered in: "${p.name}"`);const g={chunk:p.streamed_output[0]};p.streamed_output=[];const B={event:`on_${p.type}_stream`,run_id:p.id,tags:i,metadata:o,name:l,data:g};c.includeEvent(B,p.type)&&(yield B)}}const h=n==null?void 0:n.state;if(h!==void 0){const f={event:`on_${h.type}_end`,name:l,run_id:h.id,tags:i,metadata:o,data:{output:h.final_output}};c.includeEvent(f,h.type)&&(yield f)}}static isRunnable(e){return ug(e)}withListeners({onStart:e,onEnd:A,onError:r}){return new Ln({bound:this,config:{},configFactories:[n=>({callbacks:[new tQ({config:n,onStart:e,onEnd:A,onError:r})]})]})}asTool(e){return U4(this,e)}}class Ln extends rt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const A=r_(this.config,...e);return r_(A,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(A))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new hQ({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,A){return this.bound.invoke(e,await this._mergeConfig(we(A),this.kwargs))}async batch(e,A,r){const n=Array.isArray(A)?await Promise.all(A.map(async s=>this._mergeConfig(we(s),this.kwargs))):await this._mergeConfig(we(A),this.kwargs);return this.bound.batch(e,n,r)}_concatOutputChunks(e,A){return this.bound._concatOutputChunks(e,A)}async*_streamIterator(e,A){yield*this.bound._streamIterator(e,await this._mergeConfig(we(A),this.kwargs))}async stream(e,A){return this.bound.stream(e,await this._mergeConfig(we(A),this.kwargs))}async*transform(e,A){yield*this.bound.transform(e,await this._mergeConfig(we(A),this.kwargs))}streamEvents(e,A,r){const n=this,s=async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig(we(A),n.kwargs),version:A.version},r)};return eA.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&rt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:A,onError:r}){return new Ln({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new tQ({config:n,onStart:e,onEnd:A,onError:r})]})]})}}class Xu extends rt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Xu({bound:this.bound.bind(e)})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async _invoke(e,A,r){return this.bound.batch(e,wt(A,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:A,onError:r}){return new Xu({bound:this.bound.withListeners({onStart:e,onEnd:A,onError:r})})}}class hQ extends Ln{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,A,r){const n=e>1?`retry:attempt:${e}`:void 0;return wt(A,{callbacks:r==null?void 0:r.getChild(n)})}async _invoke(e,A,r){return Mu(n=>super.invoke(e,this._patchConfigForRetry(n,A,r)),{onFailedAttempt:n=>this.onFailedAttempt(n,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async _batch(e,A,r,n){const s={};try{await Mu(async a=>{const i=e.map((d,h)=>h).filter(d=>s[d.toString()]===void 0||s[d.toString()]instanceof Error),o=i.map(d=>e[d]),l=i.map(d=>this._patchConfigForRetry(a,A==null?void 0:A[d],r==null?void 0:r[d])),u=await super.batch(o,l,{...n,returnExceptions:!0});let c;for(let d=0;d<u.length;d+=1){const h=u[d],f=i[d];h instanceof Error&&c===void 0&&(c=h,c.input=o[d]),s[f.toString()]=h}if(c)throw c;return u},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((n==null?void 0:n.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,i)=>parseInt(a,10)-parseInt(i,10)).map(a=>s[parseInt(a,10)])}async batch(e,A,r){return this._batchWithConfig(this._batch.bind(this),e,A,r)}}class lr extends rt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,A){var o;const r=we(A),n=await xA(r),s=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let a=e,i;try{const l=[this.first,...this.middle];for(let u=0;u<l.length;u+=1){const d=l[u].invoke(a,wt(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`)}));a=await dn(d,A==null?void 0:A.signal)}if((o=A==null?void 0:A.signal)!=null&&o.aborted)throw new Error("Aborted");i=await this.last.invoke(a,wt(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(tt(i,"output"))),i}async batch(e,A,r){var o;const n=this._getOptionsList(A??{},e.length),s=await Promise.all(n.map(xA)),a=await Promise.all(s.map(async(l,u)=>{const c=await(l==null?void 0:l.handleChainStart(this.toJSON(),tt(e[u],"input"),n[u].runId,void 0,void 0,void 0,n[u].runName));return delete n[u].runId,c}));let i=e;try{for(let l=0;l<this.steps.length;l+=1){const c=this.steps[l].batch(i,a.map((d,h)=>{const f=d==null?void 0:d.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return wt(n[h],{callbacks:f})}),r);i=await dn(c,(o=n[0])==null?void 0:o.signal)}}catch(l){throw await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(l))),l}return await Promise.all(a.map(l=>l==null?void 0:l.handleChainEnd(tt(i,"output")))),i}_concatOutputChunks(e,A){return this.last._concatOutputChunks(e,A)}async*_streamIterator(e,A){var c;const r=await xA(A),{runId:n,...s}=A??{},a=await(r==null?void 0:r.handleChainStart(this.toJSON(),tt(e,"input"),n,void 0,void 0,void 0,s==null?void 0:s.runName)),i=[this.first,...this.middle,this.last];let o=!0,l;async function*u(){yield e}try{let d=i[0].transform(u(),wt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let h=1;h<i.length;h+=1)d=await i[h].transform(d,wt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));for await(const h of d)if((c=A==null?void 0:A.signal)==null||c.throwIfAborted(),yield h,o)if(l===void 0)l=h;else try{l=this._concatOutputChunks(l,h)}catch{l=void 0,o=!1}}catch(d){throw await(a==null?void 0:a.handleChainError(d)),d}await(a==null?void 0:a.handleChainEnd(tt(l,"output")))}getGraph(e){const A=new Yc;let r=null;return this.steps.forEach((n,s)=>{const a=n.getGraph(e);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),A.extend(a);const i=a.firstNode();if(!i)throw new Error(`Runnable ${n} has no first node`);r&&A.addEdge(r,i),r=a.lastNode()}),A}pipe(e){return lr.isRunnableSequence(e)?new lr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new lr({first:this.first,middle:[...this.middle,this.last],last:xn(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&rt.isRunnable(e)}static from([e,...A],r){let n={};return typeof r=="string"?n.name=r:r!==void 0&&(n=r),new lr({...n,first:xn(e),middle:A.slice(0,-1).map(xn),last:xn(A[A.length-1])})}}class fa extends rt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[A,r]of Object.entries(e.steps))this.steps[A]=xn(r)}static from(e){return new fa({steps:e})}async invoke(e,A){const r=we(A),n=await xA(r),s=await(n==null?void 0:n.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const a={};try{const i=Object.entries(this.steps).map(async([o,l])=>{a[o]=await l.invoke(e,wt(r,{callbacks:s==null?void 0:s.getChild(`map:key:${o}`)}))});await dn(Promise.all(i),A==null?void 0:A.signal)}catch(i){throw await(s==null?void 0:s.handleChainError(i)),i}return await(s==null?void 0:s.handleChainEnd(a)),a}async*_transform(e,A,r){const n={...this.steps},s=eQ(e,Object.keys(n).length),a=new Map(Object.entries(n).map(([i,o],l)=>{const u=o.transform(s[l],wt(r,{callbacks:A==null?void 0:A.getChild(`map:key:${i}`)}));return[i,u.next().then(c=>({key:i,gen:u,result:c}))]}));for(;a.size;){const i=Promise.race(a.values()),{key:o,result:l,gen:u}=await dn(i,r==null?void 0:r.signal);a.delete(o),l.done||(yield{[o]:l.value},a.set(o,u.next().then(c=>({key:o,gen:u,result:c}))))}}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=we(A),s=new da({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class dg extends rt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!eg(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,A){const[r]=this._getOptionsList(A??{},1),n=await xA(r),s=this.func(wt(r,{callbacks:n}),e);return dn(s,r==null?void 0:r.signal)}async*_streamIterator(e,A){var s,a;const[r]=this._getOptionsList(A??{},1),n=await this.invoke(e,A);if(Ep(n)){for await(const i of n)(s=r==null?void 0:r.signal)==null||s.throwIfAborted(),yield i;return}if(C4(n)){for(;;){(a=r==null?void 0:r.signal)==null||a.throwIfAborted();const i=n.next();if(i.done)break;yield i.value}return}yield n}static from(e){return new dg({func:e})}}function b4(t){if(eg(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class ha extends rt{static lc_name(){return"RunnableLambda"}constructor(e){if(eg(e.func))return dg.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),b4(e.func),this.func=e.func}static from(e){return new ha({func:e})}async _invoke(e,A,r){return new Promise((n,s)=>{const a=wt(A,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((A==null?void 0:A.recursionLimit)??bf)-1});cn.runWithConfig(ta(a),async()=>{var i,o;try{let l=await this.func(e,{...a});if(l&&rt.isRunnable(l)){if((A==null?void 0:A.recursionLimit)===0)throw new Error("Recursion limit reached.");l=await l.invoke(e,{...a,recursionLimit:(a.recursionLimit??bf)-1})}else if(Ep(l)){let u;for await(const c of Qp(a,l))if((i=A==null?void 0:A.signal)==null||i.throwIfAborted(),u===void 0)u=c;else try{u=this._concatOutputChunks(u,c)}catch{u=c}l=u}else if(f_(l)){let u;for(const c of h_(a,l))if((o=A==null?void 0:A.signal)==null||o.throwIfAborted(),u===void 0)u=c;else try{u=this._concatOutputChunks(u,c)}catch{u=c}l=u}n(l)}catch(l){s(l)}})})}async invoke(e,A){return this._callWithConfig(this._invoke.bind(this),e,A)}async*_transform(e,A,r){var i,o;let n;for await(const l of e)if(n===void 0)n=l;else try{n=this._concatOutputChunks(n,l)}catch{n=l}const s=wt(r,{callbacks:A==null?void 0:A.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??bf)-1}),a=await new Promise((l,u)=>{cn.runWithConfig(ta(s),async()=>{try{const c=await this.func(n,{...s,config:s});l(c)}catch(c){u(c)}})});if(a&&rt.isRunnable(a)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const l=await a.stream(n,s);for await(const u of l)yield u}else if(Ep(a))for await(const l of Qp(s,a))(i=r==null?void 0:r.signal)==null||i.throwIfAborted(),yield l;else if(f_(a))for(const l of h_(s,a))(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield l;else yield a}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=we(A),s=new da({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class E4 extends rt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,A){const r=we(A),n=await xA(r),{runId:s,...a}=r,i=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),o=wt(a,{callbacks:i==null?void 0:i.getChild()});return await cn.runWithConfig(o,async()=>{var c;let u;for(const d of this.runnables()){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();try{const h=await d.invoke(e,o);return await(i==null?void 0:i.handleChainEnd(tt(h,"output"))),h}catch(h){u===void 0&&(u=h)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(i==null?void 0:i.handleChainError(u)),u)})}async*_streamIterator(e,A){var c;const r=we(A),n=await xA(r),{runId:s,...a}=r,i=await(n==null?void 0:n.handleChainStart(this.toJSON(),tt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let o,l;for(const d of this.runnables()){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const h=wt(a,{callbacks:i==null?void 0:i.getChild()});try{const f=await d.stream(e,h);l=Qp(h,f);break}catch(f){o===void 0&&(o=f)}}if(l===void 0){const d=o??new Error("No error stored at end of fallback.");throw await(i==null?void 0:i.handleChainError(d)),d}let u;try{for await(const d of l){yield d;try{u=u===void 0?u:this._concatOutputChunks(u,d)}catch{u=void 0}}}catch(d){throw await(i==null?void 0:i.handleChainError(d)),d}await(i==null?void 0:i.handleChainEnd(tt(u,"output")))}async batch(e,A,r){var o;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(A??{},e.length),s=await Promise.all(n.map(l=>xA(l))),a=await Promise.all(s.map(async(l,u)=>{const c=await(l==null?void 0:l.handleChainStart(this.toJSON(),tt(e[u],"input"),n[u].runId,void 0,void 0,void 0,n[u].runName));return delete n[u].runId,c}));let i;for(const l of this.runnables()){(o=n[0].signal)==null||o.throwIfAborted();try{const u=await l.batch(e,a.map((c,d)=>wt(n[d],{callbacks:c==null?void 0:c.getChild()})),r);return await Promise.all(a.map((c,d)=>c==null?void 0:c.handleChainEnd(tt(u[d],"output")))),u}catch(u){i===void 0&&(i=u)}}throw i?(await Promise.all(a.map(l=>l==null?void 0:l.handleChainError(i))),i):new Error("No error stored at end of fallbacks.")}}function xn(t){if(typeof t=="function")return new ha({func:t});if(rt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[A,r]of Object.entries(t))e[A]=xn(r);return new fa({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class pQ extends rt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof fa&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,A){const r=await this.mapper.invoke(e,A);return{...e,...r}}async*_transform(e,A,r){const n=this.mapper.getStepsKeys(),[s,a]=eQ(e),i=this.mapper.transform(a,wt(r,{callbacks:A==null?void 0:A.getChild()})),o=i.next();for await(const l of s){if(typeof l!="object"||Array.isArray(l))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof l}`);const u=Object.fromEntries(Object.entries(l).filter(([c])=>!n.includes(c)));Object.keys(u).length>0&&(yield u)}yield(await o).value;for await(const l of i)yield l}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=we(A),s=new da({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class Q4 extends rt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const A=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return A.length===0?void 0:Object.fromEntries(A)}}async invoke(e,A){return this._callWithConfig(this._pick.bind(this),e,A)}async*_transform(e){for await(const A of e){const r=await this._pick(A);r!==void 0&&(yield r)}}transform(e,A){return this._transformStreamWithConfig(e,this._transform.bind(this),A)}async stream(e,A){async function*r(){yield e}const n=we(A),s=new da({generator:this.transform(r(),n),config:n});return await s.setup,eA.fromAsyncGenerator(s)}}class p_ extends Ln{constructor(e){const A=lr.from([ha.from(async r=>{let n;if(wE(r))try{n=await dQ(this.schema,r.args)}catch{throw new sR("Received tool input did not match expected schema",JSON.stringify(r.args))}else n=r;return n}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:A,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function U4(t,e){const A=e.name??t.getName(),r=e.description??cg(e.schema);return g4(e.schema)?new p_({name:A,description:r,schema:bE({input:CE()}).transform(n=>n.input),bound:t}):new p_({name:A,description:r,schema:e.schema,bound:t})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var F4=typeof window=="object"?window:{},ie="0123456789abcdef".split(""),I4=[-2147483648,8388608,32768,128],_A=[24,16,8,0],Xe=[];function OA(t){t?(Xe[0]=Xe[16]=Xe[1]=Xe[2]=Xe[3]=Xe[4]=Xe[5]=Xe[6]=Xe[7]=Xe[8]=Xe[9]=Xe[10]=Xe[11]=Xe[12]=Xe[13]=Xe[14]=Xe[15]=0,this.blocks=Xe):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}OA.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===F4.ArrayBuffer&&(t=new Uint8Array(t));for(var A,r=0,n,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(n=this.start;r<s&&n<64;++r)a[n>>2]|=t[r]<<_A[n++&3];else for(n=this.start;r<s&&n<64;++r)A=t.charCodeAt(r),A<128?a[n>>2]|=A<<_A[n++&3]:A<2048?(a[n>>2]|=(192|A>>6)<<_A[n++&3],a[n>>2]|=(128|A&63)<<_A[n++&3]):A<55296||A>=57344?(a[n>>2]|=(224|A>>12)<<_A[n++&3],a[n>>2]|=(128|A>>6&63)<<_A[n++&3],a[n>>2]|=(128|A&63)<<_A[n++&3]):(A=65536+((A&1023)<<10|t.charCodeAt(++r)&1023),a[n>>2]|=(240|A>>18)<<_A[n++&3],a[n>>2]|=(128|A>>12&63)<<_A[n++&3],a[n>>2]|=(128|A>>6&63)<<_A[n++&3],a[n>>2]|=(128|A&63)<<_A[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};OA.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=I4[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};OA.prototype.hash=function(){var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4,s,a,i,o=this.blocks;for(a=16;a<80;++a)i=o[a-3]^o[a-8]^o[a-14]^o[a-16],o[a]=i<<1|i>>>31;for(a=0;a<20;a+=5)s=e&A|~e&r,i=t<<5|t>>>27,n=i+s+n+1518500249+o[a]<<0,e=e<<30|e>>>2,s=t&e|~t&A,i=n<<5|n>>>27,r=i+s+r+1518500249+o[a+1]<<0,t=t<<30|t>>>2,s=n&t|~n&e,i=r<<5|r>>>27,A=i+s+A+1518500249+o[a+2]<<0,n=n<<30|n>>>2,s=r&n|~r&t,i=A<<5|A>>>27,e=i+s+e+1518500249+o[a+3]<<0,r=r<<30|r>>>2,s=A&r|~A&n,i=e<<5|e>>>27,t=i+s+t+1518500249+o[a+4]<<0,A=A<<30|A>>>2;for(;a<40;a+=5)s=e^A^r,i=t<<5|t>>>27,n=i+s+n+1859775393+o[a]<<0,e=e<<30|e>>>2,s=t^e^A,i=n<<5|n>>>27,r=i+s+r+1859775393+o[a+1]<<0,t=t<<30|t>>>2,s=n^t^e,i=r<<5|r>>>27,A=i+s+A+1859775393+o[a+2]<<0,n=n<<30|n>>>2,s=r^n^t,i=A<<5|A>>>27,e=i+s+e+1859775393+o[a+3]<<0,r=r<<30|r>>>2,s=A^r^n,i=e<<5|e>>>27,t=i+s+t+1859775393+o[a+4]<<0,A=A<<30|A>>>2;for(;a<60;a+=5)s=e&A|e&r|A&r,i=t<<5|t>>>27,n=i+s+n-1894007588+o[a]<<0,e=e<<30|e>>>2,s=t&e|t&A|e&A,i=n<<5|n>>>27,r=i+s+r-1894007588+o[a+1]<<0,t=t<<30|t>>>2,s=n&t|n&e|t&e,i=r<<5|r>>>27,A=i+s+A-1894007588+o[a+2]<<0,n=n<<30|n>>>2,s=r&n|r&t|n&t,i=A<<5|A>>>27,e=i+s+e-1894007588+o[a+3]<<0,r=r<<30|r>>>2,s=A&r|A&n|r&n,i=e<<5|e>>>27,t=i+s+t-1894007588+o[a+4]<<0,A=A<<30|A>>>2;for(;a<80;a+=5)s=e^A^r,i=t<<5|t>>>27,n=i+s+n-899497514+o[a]<<0,e=e<<30|e>>>2,s=t^e^A,i=n<<5|n>>>27,r=i+s+r-899497514+o[a+1]<<0,t=t<<30|t>>>2,s=n^t^e,i=r<<5|r>>>27,A=i+s+A-899497514+o[a+2]<<0,n=n<<30|n>>>2,s=r^n^t,i=A<<5|A>>>27,e=i+s+e-899497514+o[a+3]<<0,r=r<<30|r>>>2,s=A^r^n,i=e<<5|e>>>27,t=i+s+t-899497514+o[a+4]<<0,A=A<<30|A>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+A<<0,this.h3=this.h3+r<<0,this.h4=this.h4+n<<0};OA.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4;return ie[t>>28&15]+ie[t>>24&15]+ie[t>>20&15]+ie[t>>16&15]+ie[t>>12&15]+ie[t>>8&15]+ie[t>>4&15]+ie[t&15]+ie[e>>28&15]+ie[e>>24&15]+ie[e>>20&15]+ie[e>>16&15]+ie[e>>12&15]+ie[e>>8&15]+ie[e>>4&15]+ie[e&15]+ie[A>>28&15]+ie[A>>24&15]+ie[A>>20&15]+ie[A>>16&15]+ie[A>>12&15]+ie[A>>8&15]+ie[A>>4&15]+ie[A&15]+ie[r>>28&15]+ie[r>>24&15]+ie[r>>20&15]+ie[r>>16&15]+ie[r>>12&15]+ie[r>>8&15]+ie[r>>4&15]+ie[r&15]+ie[n>>28&15]+ie[n>>24&15]+ie[n>>20&15]+ie[n>>16&15]+ie[n>>12&15]+ie[n>>8&15]+ie[n>>4&15]+ie[n&15]};OA.prototype.toString=OA.prototype.hex;OA.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,A=this.h2,r=this.h3,n=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,A>>24&255,A>>16&255,A>>8&255,A&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255]};OA.prototype.array=OA.prototype.digest;OA.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};let m_=!1;const S4=t=>(m_||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),m_=!0),new OA(!0).update(t).hex()),x4=(...t)=>S4(t.join("_"));class T4{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:x4})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const O4=new Map;class fg extends T4{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,A){return Promise.resolve(this.cache.get(this.keyEncoder(e,A))??null)}async update(e,A,r){this.cache.set(this.keyEncoder(e,A),r)}static global(){return new fg(O4)}}class mQ extends jn{}class k4 extends mQ{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Zs(this.value)]}}class R4 extends mQ{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return yE(this.messages)}toChatMessages(){return this.messages}}var qc={};qc.byteLength=H4;qc.toByteArray=D4;qc.fromByteArray=j4;var GA=[],aA=[],L4=typeof Uint8Array<"u"?Uint8Array:Array,If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var us=0,P4=If.length;us<P4;++us)GA[us]=If[us],aA[If.charCodeAt(us)]=us;aA[45]=62;aA[95]=63;function gQ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=t.indexOf("=");A===-1&&(A=e);var r=A===e?0:4-A%4;return[A,r]}function H4(t){var e=gQ(t),A=e[0],r=e[1];return(A+r)*3/4-r}function N4(t,e,A){return(e+A)*3/4-A}function D4(t){var e,A=gQ(t),r=A[0],n=A[1],s=new L4(N4(t,r,n)),a=0,i=n>0?r-4:r,o;for(o=0;o<i;o+=4)e=aA[t.charCodeAt(o)]<<18|aA[t.charCodeAt(o+1)]<<12|aA[t.charCodeAt(o+2)]<<6|aA[t.charCodeAt(o+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=aA[t.charCodeAt(o)]<<2|aA[t.charCodeAt(o+1)]>>4,s[a++]=e&255),n===1&&(e=aA[t.charCodeAt(o)]<<10|aA[t.charCodeAt(o+1)]<<4|aA[t.charCodeAt(o+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function $4(t){return GA[t>>18&63]+GA[t>>12&63]+GA[t>>6&63]+GA[t&63]}function M4(t,e,A){for(var r,n=[],s=e;s<A;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push($4(r));return n.join("")}function j4(t){for(var e,A=t.length,r=A%3,n=[],s=16383,a=0,i=A-r;a<i;a+=s)n.push(M4(t,a,a+s>i?i:a+s));return r===1?(e=t[A-1],n.push(GA[e>>2]+GA[e<<4&63]+"==")):r===2&&(e=(t[A-2]<<8)+t[A-1],n.push(GA[e>>10]+GA[e>>4&63]+GA[e<<2&63]+"=")),n.join("")}var K4=Object.defineProperty,G4=(t,e,A)=>e in t?K4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A,V4=(t,e,A)=>(G4(t,e+"",A),A);function z4(t,e){let A=Array.from({length:t.length},(r,n)=>({start:n,end:n+1}));for(;A.length>1;){let r=null;for(let n=0;n<A.length-1;n++){const s=t.slice(A[n].start,A[n+1].end),a=e.get(s.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,n])}if(r!=null){const n=r[1];A[n]={start:A[n].start,end:A[n+1].end},A.splice(n+1,1)}else break}return A}function W4(t,e){return t.length===1?[e.get(t.join(","))]:z4(t,e).map(A=>e.get(t.slice(A.start,A.end).join(","))).filter(A=>A!=null)}function J4(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Up=class{constructor(t,e){_r(this,"specialTokens");_r(this,"inverseSpecialTokens");_r(this,"patStr");_r(this,"textEncoder",new TextEncoder);_r(this,"textDecoder",new TextDecoder("utf-8"));_r(this,"rankMap",new Map);_r(this,"textMap",new Map);this.patStr=t.pat_str;const A=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,n)=>{const[s,a,...i]=n.split(" "),o=Number.parseInt(a,10);return i.forEach((l,u)=>r[l]=o+u),r},{});for(const[r,n]of Object.entries(A)){const s=qc.toByteArray(r);this.rankMap.set(s.join(","),n),this.textMap.set(n,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[n,s])=>(r[s]=this.textEncoder.encode(n),r),{})}encode(t,e=[],A="all"){const r=new RegExp(this.patStr,"ug"),n=Up.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),i=new Set(A==="all"?Object.keys(this.specialTokens).filter(l=>!a.has(l)):A);if(i.size>0){const l=Up.specialTokenRegex([...i]),u=t.match(l);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let o=0;for(;;){let l=null,u=o;for(;n.lastIndex=u,l=n.exec(t),!(l==null||a.has(l[0]));)u=l.index+1;const c=(l==null?void 0:l.index)??t.length;for(const h of t.substring(o,c).matchAll(r)){const f=this.textEncoder.encode(h[0]),w=this.rankMap.get(f.join(","));if(w!=null){s.push(w);continue}s.push(...W4(f,this.rankMap))}if(l==null)break;let d=this.specialTokens[l[0]];s.push(d),o=l.index+l[0].length}return s}decode(t){const e=[];let A=0;for(let s=0;s<t.length;++s){const a=t[s],i=this.textMap.get(a)??this.inverseSpecialTokens[a];i!=null&&(e.push(i),A+=i.length)}const r=new Uint8Array(A);let n=0;for(const s of e)r.set(s,n),n+=s.length;return this.textDecoder.decode(r)}},wQ=Up;V4(wQ,"specialTokenRegex",t=>new RegExp(t.map(e=>J4(e)).join("|"),"g"));function Z4(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const _l={},X4=new lg({});async function Y4(t){return t in _l||(_l[t]=X4.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new wQ(e)).catch(e=>{throw delete _l[t],e})),await _l[t]}async function q4(t){return Y4(Z4(t))}const e2=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function yQ(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const t2=()=>!1;class A2 extends rt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??t2(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class r2 extends A2{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:A,...r}){const{cache:n,...s}=r;super({callbacks:e??A,...s}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n=="object"?this.cache=n:n?this.cache=fg.global():this.cache=void 0,this.caller=new lg(r??{})}async getNumTokens(e){let A;typeof e=="string"?A=e:A=e.map(n=>typeof n=="string"?n:n.type==="text"&&"text"in n?n.text:"").join("");let r=Math.ceil(A.length/4);if(!this._encoding)try{this._encoding=await q4("modelName"in this?e2(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(A).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new k4(e):Array.isArray(e)?new R4(e.map(ei)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...A}){const r={...this._identifyingParams(),...A,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,i])=>i!==void 0).map(([a,i])=>`${a}:${JSON.stringify(i)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Yu extends rt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,A){const r=we(A);return this.func&&await this.func(e,r),this._callWithConfig(n=>Promise.resolve(n),e,r)}async*transform(e,A){const r=we(A);let n,s=!0;for await(const a of this._transformStreamWithConfig(e,i=>i,r))if(yield a,s)if(n===void 0)n=a;else try{n=zc(n,a)}catch{n=void 0,s=!1}this.func&&n!==void 0&&await this.func(n,r)}static assign(e){return new pQ(new fa({steps:e}))}}function Sf(t){const e=[];for(const A of t){let r=A;if(Array.isArray(A.content))for(let n=0;n<A.content.length;n++){const s=A.content[n];(Zk(s)||Xk(s))&&r===A&&(r=new A.constructor({...r,content:[...A.content.slice(0,n),Yk(s),...A.content.slice(n+1)]}))}e.push(r)}return e}class Rr extends r2{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[A,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=A.signal,[A,r]}async invoke(e,A){const r=Rr._convertInputToPromptValue(e);return(await this.generatePrompt([r],A,A==null?void 0:A.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,A,r){throw new Error("Not implemented.")}async*_streamIterator(e,A){var r;if(this._streamResponseChunks===Rr.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,A);else{const s=Rr._convertInputToPromptValue(e).toChatMessages(),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(A),o={...a.metadata,...this.getLsParams(i)},l=await Pt.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},c=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),[Sf(s)],a.runId,void 0,u,void 0,void 0,a.runName));let d,h;try{for await(const f of this._streamResponseChunks(s,i,c==null?void 0:c[0])){if(f.message.id==null){const w=(r=c==null?void 0:c.at(0))==null?void 0:r.runId;w!=null&&f.message._updateId(`run-${w}`)}f.message.response_metadata={...f.generationInfo,...f.message.response_metadata},yield f.message,d?d=d.concat(f):d=f,uB(f.message)&&f.message.usage_metadata!==void 0&&(h={tokenUsage:{promptTokens:f.message.usage_metadata.input_tokens,completionTokens:f.message.usage_metadata.output_tokens,totalTokens:f.message.usage_metadata.total_tokens}})}}catch(f){throw await Promise.all((c??[]).map(w=>w==null?void 0:w.handleLLMError(f))),f}await Promise.all((c??[]).map(f=>f==null?void 0:f.handleLLMEnd({generations:[[d]],llmOutput:h})))}}getLsParams(e){const A=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:A}}async _generateUncached(e,A,r,n){var c,d;const s=e.map(h=>h.map(ei));let a;if(n!==void 0&&n.length===s.length)a=n;else{const h={...r.metadata,...this.getLsParams(A)},f=await Pt.configure(r.callbacks,this.callbacks,r.tags,this.tags,h,this.metadata,{verbose:this.verbose}),w={options:A,invocation_params:this==null?void 0:this.invocationParams(A),batch_size:1};a=await(f==null?void 0:f.handleChatModelStart(this.toJSON(),s.map(Sf),r.runId,void 0,w,void 0,void 0,r.runName))}const i=[],o=[];if(!!(a!=null&&a[0].handlers.find(PH))&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==Rr.prototype._streamResponseChunks)try{const h=await this._streamResponseChunks(s[0],A,a==null?void 0:a[0]);let f,w;for await(const y of h){if(y.message.id==null){const p=(c=a==null?void 0:a.at(0))==null?void 0:c.runId;p!=null&&y.message._updateId(`run-${p}`)}f===void 0?f=y:f=zc(f,y),uB(y.message)&&y.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:y.message.usage_metadata.input_tokens,completionTokens:y.message.usage_metadata.output_tokens,totalTokens:y.message.usage_metadata.total_tokens}})}if(f===void 0)throw new Error("Received empty response from chat model call.");i.push([f]),await(a==null?void 0:a[0].handleLLMEnd({generations:i,llmOutput:w}))}catch(h){throw await(a==null?void 0:a[0].handleLLMError(h)),h}else{const h=await Promise.allSettled(s.map((f,w)=>this._generate(f,{...A,promptIndex:w},a==null?void 0:a[w])));await Promise.all(h.map(async(f,w)=>{var y,p,m;if(f.status==="fulfilled"){const g=f.value;for(const B of g.generations){if(B.message.id==null){const _=(y=a==null?void 0:a.at(0))==null?void 0:y.runId;_!=null&&B.message._updateId(`run-${_}`)}B.message.response_metadata={...B.generationInfo,...B.message.response_metadata}}return g.generations.length===1&&(g.generations[0].message.response_metadata={...g.llmOutput,...g.generations[0].message.response_metadata}),i[w]=g.generations,o[w]=g.llmOutput,(p=a==null?void 0:a[w])==null?void 0:p.handleLLMEnd({generations:[g.generations],llmOutput:g.llmOutput})}else return await((m=a==null?void 0:a[w])==null?void 0:m.handleLLMError(f.reason)),Promise.reject(f.reason)}))}const u={generations:i,llmOutput:o.length?(d=this._combineLLMOutput)==null?void 0:d.call(this,...o):void 0};return Object.defineProperty(u,i_,{value:a?{runIds:a==null?void 0:a.map(h=>h.runId)}:void 0,configurable:!0}),u}async _generateCached({messages:e,cache:A,llmStringKey:r,parsedOptions:n,handledOptions:s}){const a=e.map(y=>y.map(ei)),i={...s.metadata,...this.getLsParams(n)},o=await Pt.configure(s.callbacks,this.callbacks,s.tags,this.tags,i,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1},u=await(o==null?void 0:o.handleChatModelStart(this.toJSON(),a.map(Sf),s.runId,void 0,l,void 0,void 0,s.runName)),c=[],h=(await Promise.allSettled(a.map(async(y,p)=>{const m=Rr._convertInputToPromptValue(y).toString(),g=await A.lookup(m,r);return g==null&&c.push(p),g}))).map((y,p)=>({result:y,runManager:u==null?void 0:u[p]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),f=[];await Promise.all(h.map(async({result:y,runManager:p},m)=>{if(y.status==="fulfilled"){const g=y.value;return f[m]=g.map(B=>("message"in B&&Pc(B.message)&&co(B.message)&&(B.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),B.generationInfo={...B.generationInfo,tokenUsage:{}},B)),g.length&&await(p==null?void 0:p.handleLLMNewToken(g[0].text)),p==null?void 0:p.handleLLMEnd({generations:[g]},void 0,void 0,void 0,{cached:!0})}else return await(p==null?void 0:p.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(y.reason)}));const w={generations:f,missingPromptIndices:c,startedRunManagers:u};return Object.defineProperty(w,i_,{value:u?{runIds:u==null?void 0:u.map(y=>y.runId)}:void 0,configurable:!0}),w}async generate(e,A,r){let n;Array.isArray(A)?n={stop:A}:n=A;const s=e.map(f=>f.map(ei)),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(n);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(s,i,a);const{cache:o}=this,l=this._getSerializedCacheKeyParametersForCall(i),{generations:u,missingPromptIndices:c,startedRunManagers:d}=await this._generateCached({messages:s,cache:o,llmStringKey:l,parsedOptions:i,handledOptions:a});let h={};if(c.length>0){const f=await this._generateUncached(c.map(w=>s[w]),i,a,d!==void 0?c.map(w=>d==null?void 0:d[w]):void 0);await Promise.all(f.generations.map(async(w,y)=>{const p=c[y];u[p]=w;const m=Rr._convertInputToPromptValue(s[p]).toString();return o.update(m,l,w)})),h=f.llmOutput??{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,A,r){const n=e.map(s=>s.toChatMessages());return this.generate(n,A,r)}async call(e,A,r){return(await this.generate([e.map(ei)],A,r)).generations[0][0].message}async callPrompt(e,A,r){const n=e.toChatMessages();return this.call(n,A,r)}async predictMessages(e,A,r){return this.call(e,A,r)}async predict(e,A,r){const n=new Zs(e),s=await this.call([n],A,r);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,A){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(A!=null&&A.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,n=A==null?void 0:A.name,s=cg(r)??"A function available to call.",a=A==null?void 0:A.method,i=A==null?void 0:A.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let o=n??"extract",l;Sn(r)?l=[{type:"function",function:{name:o,description:s,parameters:Gr(r)}}]:("name"in r&&(o=r.name),l=[{type:"function",function:{name:o,description:s,parameters:r}}]);const u=this.bindTools(l),c=ha.from(w=>{if(!w.tool_calls||w.tool_calls.length===0)throw new Error("No tool calls found in the response.");const y=w.tool_calls.find(p=>p.name===o);if(!y)throw new Error(`No tool call found with name ${o}.`);return y.args});if(!i)return u.pipe(c).withConfig({runName:"StructuredOutput"});const d=Yu.assign({parsed:(w,y)=>c.invoke(w.raw,y)}),h=Yu.assign({parsed:()=>null}),f=d.withFallbacks({fallbacks:[h]});return lr.from([{raw:u},f]).withConfig({runName:"StructuredOutputRunnable"})}}class n2 extends rt{parseResultWithPrompt(e,A,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,A){return typeof e=="string"?this._callWithConfig(async(r,n)=>this.parseResult([{text:r}],n==null?void 0:n.callbacks),e,{...A,runType:"parser"}):this._callWithConfig(async(r,n)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],n==null?void 0:n.callbacks),e,{...A,runType:"parser"})}}class BQ extends n2{parseResult(e,A){return this.parse(e[0].text,A)}async parseWithPrompt(e,A,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class hg extends Error{constructor(e,A,r,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=A,this.observation=r,this.sendToLLM=n,n&&(r===void 0||A===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");gE(this,"OUTPUT_PARSING_FAILURE")}}class s2 extends BQ{async*_transform(e){for await(const A of e)typeof A=="string"?yield this.parseResult([{text:A}]):yield this.parseResult([{message:A,text:this._baseMessageToString(A)}])}async*transform(e,A){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...A,runType:"parser"})}}class _Q extends s2{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let A,r;for await(const n of e){if(typeof n!="string"&&typeof n.content!="string")throw new Error("Cannot handle non-string output.");let s;if(rR(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");s=new Vn({message:n,text:n.content})}else if(Pc(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");s=new Vn({message:oR(n),text:n.content})}else s=new Aa({text:n});r===void 0?r=s:r=r.concat(s);const a=await this.parsePartialResult([r]);a!=null&&!Cp(a,A)&&(this.diff?yield this._diff(A,a):yield a,A=a)}}getFormatInstructions(){return""}}class g_ extends BQ{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const A=bE(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,CE().describe(n)])));return new this(A)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Gr(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(n,s)=>`"${s.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await dQ(this.schema,JSON.parse(r))}catch(A){throw new hg(`Failed to parse. Text: "${e}". Error: ${A}`,e)}}}class w_ extends _Q{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,A){return this.diff?super._concatOutputChunks(e,A):A}_diff(e,A){if(A)return e?lL(e,A):[{op:"replace",path:"",value:A}]}async parsePartialResult(e){return rB(e[0].text)}async parse(e){return rB(e,JSON.parse)}getFormatInstructions(){return""}}function pg(t,e){if(t.function===void 0)return;let A;if(e!=null&&e.partial)try{A=Xm(t.function.arguments??"{}")}catch{return}else try{A=JSON.parse(t.function.arguments)}catch(n){throw new hg([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${n.message}`].join(`
`))}const r={name:t.function.name,args:A,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function a2(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Fp(t,e){var A,r;return{name:(A=t.function)==null?void 0:A.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class i2 extends _Q{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,A=!0){var a;const r=e[0].message;let n;if(co(r)&&((a=r.tool_calls)!=null&&a.length)?n=r.tool_calls.map(i=>{const{id:o,...l}=i;return this.returnId?{id:o,...l}:l}):r.additional_kwargs.tool_calls!==void 0&&(n=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(o=>pg(o,{returnId:this.returnId,partial:A}))),!n)return[];const s=[];for(const i of n)if(i!==void 0){const o={type:i.name,args:i.args,id:i.id};s.push(o)}return s}}class y_ extends i2{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const A=await m4(this.zodSchema,e);if(A.success)return A.data;throw new hg(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=A.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName);let n=r;if(r.length)return this.returnId||(n=r.map(s=>s.args)),this.returnSingle?n[0]:n}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let n=r;return r.length?(this.returnId||(n=r.map(a=>a.args)),this.returnSingle?this._validateResult(n[0]):await Promise.all(n.map(a=>this._validateResult(a)))):void 0}}function o2(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:A,azureOpenAIApiKey:r,azureOpenAIBasePath:n,baseURL:s,azureADTokenProvider:a,azureOpenAIEndpoint:i}=t;if((r||a)&&n&&e)return`${n}/${e}`;if((r||a)&&i&&e)return`${i}/openai/deployments/${e}`;if(r||a){if(!A)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${A}.openai.azure.com/openai/deployments/${e}`}return s}function l2(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function u2(t){return t!==void 0&&rt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function c2(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(Sn(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function vQ(t){return c2(t)||u2(t)||l2(t)}function d2(t,e){return{name:t.name,description:t.description,parameters:Gr(t.schema)}}function f2(t,e){let A;return vQ(t)?A={type:"function",function:d2(t)}:A=t,A}const h2=Symbol("Let zodToJsonSchema decide on which parser to use"),B_={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},p2=t=>typeof t=="string"?{...B_,basePath:["#"],definitions:{},name:t}:{...B_,basePath:["#"],definitions:{},...t},Ip=t=>"_def"in t?t._def:t;function m2(t){if(!t)return!0;for(const e in t)return!1;return!0}const g2=t=>{const e=p2(t),A=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:A,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,n])=>[Ip(n),{def:Ip(n),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function CQ(t,e,A,r){r!=null&&r.errorMessages&&A&&(t.errorMessage={...t.errorMessage,[e]:A})}function _e(t,e,A,r,n){t[e]=A,CQ(t,e,r,n)}function w2(){return{}}function y2(t,e){var r,n;const A={type:"array"};return((n=(r=t.type)==null?void 0:r._def)==null?void 0:n.typeName)!==x.ZodAny&&(A.items=me(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&_e(A,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&_e(A,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(_e(A,"minItems",t.exactLength.value,t.exactLength.message,e),_e(A,"maxItems",t.exactLength.value,t.exactLength.message,e)),A}function B2(t,e){const A={type:"integer",format:"int64"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?_e(A,"minimum",r.value,r.message,e):_e(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),_e(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?_e(A,"maximum",r.value,r.message,e):_e(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),_e(A,"maximum",r.value,r.message,e));break;case"multipleOf":_e(A,"multipleOf",r.value,r.message,e);break}return A}function _2(){return{type:"boolean"}}function v2(t,e){return me(t.type._def,e)}const C2=(t,e)=>me(t.innerType._def,e);function bQ(t,e,A){const r=A??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,s)=>bQ(t,e,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return b2(t,e)}}const b2=(t,e)=>{const A={type:"integer",format:"unix-time"};if(e.target==="openApi3")return A;for(const r of t.checks)switch(r.kind){case"min":_e(A,"minimum",r.value,r.message,e);break;case"max":_e(A,"maximum",r.value,r.message,e);break}return A};function E2(t,e){return{...me(t.innerType._def,e),default:t.defaultValue()}}function Q2(t,e,A){return e.effectStrategy==="input"?me(t.schema._def,e,A):{}}function U2(t){return{type:"string",enum:[...t.values]}}const F2=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function I2(t,e){const A=[me(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),me(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const n=[];return A.forEach(s=>{if(F2(s))n.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...o}=s;a=o}else r=void 0;n.push(a)}}),n.length?{allOf:n,...r}:void 0}function S2(t,e){const A=typeof t.value;return A!=="bigint"&&A!=="number"&&A!=="boolean"&&A!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:A==="bigint"?"integer":A,enum:[t.value]}:{type:A==="bigint"?"integer":A,const:t.value}}let xf;const wn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(xf===void 0&&(xf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),xf),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function EQ(t,e){const A={type:"string"};function r(n){return e.patternStrategy==="escape"?x2(n):n}if(t.checks)for(const n of t.checks)switch(n.kind){case"min":_e(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,n.value):n.value,n.message,e);break;case"max":_e(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":vA(A,"email",n.message,e);break;case"format:idn-email":vA(A,"idn-email",n.message,e);break;case"pattern:zod":CA(A,wn.email,n.message,e);break}break;case"url":vA(A,"uri",n.message,e);break;case"uuid":vA(A,"uuid",n.message,e);break;case"regex":CA(A,n.regex,n.message,e);break;case"cuid":CA(A,wn.cuid,n.message,e);break;case"cuid2":CA(A,wn.cuid2,n.message,e);break;case"startsWith":CA(A,RegExp(`^${r(n.value)}`),n.message,e);break;case"endsWith":CA(A,RegExp(`${r(n.value)}$`),n.message,e);break;case"datetime":vA(A,"date-time",n.message,e);break;case"date":vA(A,"date",n.message,e);break;case"time":vA(A,"time",n.message,e);break;case"duration":vA(A,"duration",n.message,e);break;case"length":_e(A,"minLength",typeof A.minLength=="number"?Math.max(A.minLength,n.value):n.value,n.message,e),_e(A,"maxLength",typeof A.maxLength=="number"?Math.min(A.maxLength,n.value):n.value,n.message,e);break;case"includes":{CA(A,RegExp(r(n.value)),n.message,e);break}case"ip":{n.version!=="v6"&&vA(A,"ipv4",n.message,e),n.version!=="v4"&&vA(A,"ipv6",n.message,e);break}case"emoji":CA(A,wn.emoji,n.message,e);break;case"ulid":{CA(A,wn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{vA(A,"binary",n.message,e);break}case"contentEncoding:base64":{_e(A,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{CA(A,wn.base64,n.message,e);break}}break}case"nanoid":CA(A,wn.nanoid,n.message,e)}return A}const x2=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),vA=(t,e,A,r)=>{var n;t.format||(n=t.anyOf)!=null&&n.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...A&&r.errorMessages&&{errorMessage:{format:A}}})):_e(t,"format",e,A,r)},CA=(t,e,A,r)=>{var n;t.pattern||(n=t.allOf)!=null&&n.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:__(e,r),...A&&r.errorMessages&&{errorMessage:{pattern:A}}})):_e(t,"pattern",__(e,r),A,r)},__=(t,e)=>{var l;const A=typeof t=="function"?t():t;if(!e.applyRegexFlags||!A.flags)return A.source;const r={i:A.flags.includes("i"),m:A.flags.includes("m"),s:A.flags.includes("s")},n=r.i?A.source.toLowerCase():A.source;let s="",a=!1,i=!1,o=!1;for(let u=0;u<n.length;u++){if(a){s+=n[u],a=!1;continue}if(r.i){if(i){if(n[u].match(/[a-z]/)){o?(s+=n[u],s+=`${n[u-2]}-${n[u]}`.toUpperCase(),o=!1):n[u+1]==="-"&&((l=n[u+2])!=null&&l.match(/[a-z]/))?(s+=n[u],o=!0):s+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){s+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){s+=i?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}s+=n[u],n[u]==="\\"?a=!0:i&&n[u]==="]"?i=!1:!i&&n[u]==="["&&(i=!0)}try{const u=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),A.source}return s};function QQ(t,e){var r,n,s,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===x.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((i,o)=>({...i,[o]:me(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",o]})??{}}),{}),additionalProperties:!1};const A={type:"object",additionalProperties:me(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return A;if(((n=t.keyType)==null?void 0:n._def.typeName)===x.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const i=Object.entries(EQ(t.keyType._def,e)).reduce((o,[l,u])=>l==="type"?o:{...o,[l]:u},{});return{...A,propertyNames:i}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===x.ZodEnum)return{...A,propertyNames:{enum:t.keyType._def.values}};return A}function T2(t,e){if(e.mapStrategy==="record")return QQ(t,e);const A=me(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=me(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[A,r],minItems:2,maxItems:2}}}function O2(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),n=Array.from(new Set(r.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:r}}function k2(){return{not:{}}}function R2(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const qu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function L2(t,e){if(e.target==="openApi3")return v_(t,e);const A=t.options instanceof Map?Array.from(t.options.values()):t.options;if(A.every(r=>r._def.typeName in qu&&(!r._def.checks||!r._def.checks.length))){const r=A.reduce((n,s)=>{const a=qu[s._def.typeName];return a&&!n.includes(a)?[...n,a]:n},[]);return{type:r.length>1?r:r[0]}}else if(A.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=A.reduce((n,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...n,a];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(r.length===A.length){const n=r.filter((s,a,i)=>i.indexOf(s)===a);return{type:n.length>1?n:n[0],enum:A.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(A.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:A.reduce((r,n)=>[...r,...n._def.values.filter(s=>!r.includes(s))],[])};return v_(t,e)}const v_=(t,e)=>{const A=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,n)=>me(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return A.length?{anyOf:A}:void 0};function P2(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:qu[t.innerType._def.typeName],nullable:!0}:{type:[qu[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=me(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const A=me(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return A&&{anyOf:[A,{type:"null"}]}}function H2(t,e){const A={type:"number"};if(!t.checks)return A;for(const r of t.checks)switch(r.kind){case"int":A.type="integer",CQ(A,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?_e(A,"minimum",r.value,r.message,e):_e(A,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(A.exclusiveMinimum=!0),_e(A,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?_e(A,"maximum",r.value,r.message,e):_e(A,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(A.exclusiveMaximum=!0),_e(A,"maximum",r.value,r.message,e));break;case"multipleOf":_e(A,"multipleOf",r.value,r.message,e);break}return A}function N2(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":me(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":me(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function D2(t,e){const A={type:"object",...Object.entries(t.shape()).reduce((r,[n,s])=>{var o;if(s===void 0||s._def===void 0)return r;const a=[...e.currentPath,"properties",n],i=me(s._def,{...e,currentPath:a,propertyPath:a});if(i===void 0)return r;if(e.openaiStrictMode&&s.isOptional()&&!s.isNullable()&&typeof((o=s._def)==null?void 0:o.defaultValue)>"u")throw new Error(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[n]:i},required:s.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,n]}},{properties:{},required:[]}),additionalProperties:N2(t,e)};return A.required.length||delete A.required,A}const $2=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return me(t.innerType._def,{...e,currentPath:e.currentPath});const A=me(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return A?{anyOf:[{not:{}},A]}:{}},M2=(t,e)=>{if(e.pipeStrategy==="input")return me(t.in._def,e);if(e.pipeStrategy==="output")return me(t.out._def,e);const A=me(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=me(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",A?"1":"0"]});return{allOf:[A,r].filter(n=>n!==void 0)}};function j2(t,e){return me(t.type._def,e)}function K2(t,e){const r={type:"array",uniqueItems:!0,items:me(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&_e(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&_e(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function G2(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((A,r)=>me(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[]),additionalItems:me(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((A,r)=>me(A._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((A,r)=>r===void 0?A:[...A,r],[])}}function V2(){return{not:{}}}function z2(){return{}}const W2=(t,e)=>me(t.innerType._def,e);function me(t,e,A=!1){var a;const r=e.seen.get(t);if(e.override){const i=(a=e.override)==null?void 0:a.call(e,t,e,r,A);if(i!==h2)return i}if(r&&!A){const i=J2(r,e);if(i!==void 0)return"$ref"in i&&e.seenRefs.add(i.$ref),i}const n={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,n);const s=X2(t,t.typeName,e,A);return s&&Y2(t,e,s),n.jsonSchema=s,s}const J2=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const A=t.path.slice(e.basePath.length+1).join("_");return A!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[A]=t.def),{$ref:[...e.basePath,e.definitionPath,A].join("/")};case"relative":return{$ref:Z2(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Z2=(t,e)=>{let A=0;for(;A<t.length&&A<e.length&&t[A]===e[A];A++);return[(t.length-A).toString(),...e.slice(A)].join("/")},X2=(t,e,A,r)=>{switch(e){case x.ZodString:return EQ(t,A);case x.ZodNumber:return H2(t,A);case x.ZodObject:return D2(t,A);case x.ZodBigInt:return B2(t,A);case x.ZodBoolean:return _2();case x.ZodDate:return bQ(t,A);case x.ZodUndefined:return V2();case x.ZodNull:return R2(A);case x.ZodArray:return y2(t,A);case x.ZodUnion:case x.ZodDiscriminatedUnion:return L2(t,A);case x.ZodIntersection:return I2(t,A);case x.ZodTuple:return G2(t,A);case x.ZodRecord:return QQ(t,A);case x.ZodLiteral:return S2(t,A);case x.ZodEnum:return U2(t);case x.ZodNativeEnum:return O2(t);case x.ZodNullable:return P2(t,A);case x.ZodOptional:return $2(t,A);case x.ZodMap:return T2(t,A);case x.ZodSet:return K2(t,A);case x.ZodLazy:return me(t.getter()._def,A);case x.ZodPromise:return j2(t,A);case x.ZodNaN:case x.ZodNever:return k2();case x.ZodEffects:return Q2(t,A,r);case x.ZodAny:return w2();case x.ZodUnknown:return z2();case x.ZodDefault:return E2(t,A);case x.ZodBranded:return v2(t,A);case x.ZodReadonly:return W2(t,A);case x.ZodCatch:return C2(t,A);case x.ZodPipeline:return M2(t,A);case x.ZodFunction:case x.ZodVoid:case x.ZodSymbol:return;default:return(n=>{})()}},Y2=(t,e,A)=>(t.description&&(A.description=t.description,e.markdownDescription&&(A.markdownDescription=t.description)),A),q2=(t,e)=>{const A=g2(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,n=me(t._def,r===void 0?A:{...A,currentPath:[...A.basePath,A.definitionPath,r]},!1)??{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(n.title=s);const a=(()=>{if(m2(A.definitions))return;const o={},l=new Set;for(let u=0;u<500;u++){const c=Object.entries(A.definitions).filter(([d])=>!l.has(d));if(c.length===0)break;for(const[d,h]of c)o[d]=me(Ip(h),{...A,currentPath:[...A.basePath,A.definitionPath,d]},!0)??{},l.add(d)}return o})(),i=r===void 0?a?{...n,[A.definitionPath]:a}:n:A.nameStrategy==="duplicate-ref"?{...n,...a||A.seenRefs.size?{[A.definitionPath]:{...a,...A.seenRefs.size?{[r]:n}:void 0}}:void 0}:{$ref:[...A.$refStrategy==="relative"?[]:A.basePath,A.definitionPath,r].join("/"),[A.definitionPath]:{...a,[r]:n}};return A.target==="jsonSchema7"?i.$schema="http://json-schema.org/draft-07/schema#":A.target==="jsonSchema2019-09"&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),i};function eD(t,e){return q2(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function tD(t,e,A){return pk({type:"json_schema",json_schema:{...A,name:e,strict:!0,schema:eD(t,{name:e})}},r=>t.parse(JSON.parse(r)))}function vl(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function UQ(t){let e;return t.constructor.name===Ic.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Zt.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=vl(t,"INVALID_TOOL_RESULTS"):t.status===401?e=vl(t,"MODEL_AUTHENTICATION"):t.status===429?e=vl(t,"MODEL_RATE_LIMIT"):t.status===404?e=vl(t,"MODEL_NOT_FOUND"):e=t,e}function FQ(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function AD(t,e){const A={...t};return Object.defineProperties(A,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),A}function rD(t,e,A){if(er(t))return tD(t,e,A);if(LA(t))return AD({type:"json_schema",json_schema:{...A,name:e,strict:!0,schema:vp(t,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>nQ(t,JSON.parse(r)));throw new Error("Unsupported schema response format")}function nD(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function sD(t){const e=["namespace functions {",""];for(const A of t)A.description&&e.push(`// ${A.description}`),Object.keys(A.parameters.properties??{}).length>0?(e.push(`type ${A.name} = (_: {`),e.push(IQ(A.parameters,0)),e.push("}) => any;")):e.push(`type ${A.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function IQ(t,e){var r;const A=[];for(const[n,s]of Object.entries(t.properties??{}))s.description&&e<2&&A.push(`// ${s.description}`),(r=t.required)!=null&&r.includes(n)?A.push(`${n}: ${ec(s,e)},`):A.push(`${n}?: ${ec(s,e)},`);return A.map(n=>" ".repeat(e)+n).join(`
`)}function ec(t,e){if(nD(t))return t.anyOf.map(A=>ec(A,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(A=>`"${A}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(A=>`${A}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(A=>`${A}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",IQ(t,e+2),"}"].join(`
`);case"array":return t.items?`${ec(t.items,e)}[]`:"any[]";default:return""}}function aD(t,e){let A;return vQ(t)?A=f2(t):A=t,A.type==="function"&&(e==null?void 0:e.strict)!==void 0&&(A.function.strict=e.strict),A}function mg(t){return"type"in t&&t.type!=="function"&&t.type!=="custom"}function iD(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function oD(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function SQ(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function lD(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function uD(t){return t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function cD(t){const e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function dD(t){const e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}const cs="__openai_function_call_ids__";function ed(t){return t?!!(/^o\d/.test(t??"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function fD(t){return t!==void 0&&typeof t.schema=="object"}function hD(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function gg(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!fo.isInstance(t))throw new Error("Invalid generic chat message");return hD(t)}default:throw new Error(`Unknown message type: ${e}`)}}const xQ={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,A;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(A=t.metadata)!=null&&A.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=lB({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const A=e.mime_type||t.mime_type||"";let r;try{r=oB(A)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=oB(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,A,r,n,s,a,i,o,l,u;if(t.source_type==="url"){if(!lB({dataUrl:t.url}))throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(A=t.metadata)!=null&&A.name?{filename:((r=t.metadata)==null?void 0:r.filename)||((n=t.metadata)==null?void 0:n.name)}:{}}}}if(t.source_type==="base64")return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(s=t.metadata)!=null&&s.filename||(a=t.metadata)!=null&&a.name||(i=t.metadata)!=null&&i.title?{filename:((o=t.metadata)==null?void 0:o.filename)||((l=t.metadata)==null?void 0:l.name)||((u=t.metadata)==null?void 0:u.title)}:{}}};if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}};function C_(t,e){return t.flatMap(A=>{var a;let r=gg(A);r==="system"&&ed(e)&&(r="developer");const n=typeof A.content=="string"?A.content:A.content.map(i=>Kn(i)?pE(i,xQ):i),s={role:r,content:n};if(A.name!=null&&(s.name=A.name),A.additional_kwargs.function_call!=null&&(s.function_call=A.additional_kwargs.function_call,s.content=""),co(A)&&((a=A.tool_calls)!=null&&a.length)?(s.tool_calls=A.tool_calls.map(a2),s.content=""):(A.additional_kwargs.tool_calls!=null&&(s.tool_calls=A.additional_kwargs.tool_calls),A.tool_call_id!=null&&(s.tool_call_id=A.tool_call_id)),A.additional_kwargs.audio&&typeof A.additional_kwargs.audio=="object"&&"id"in A.additional_kwargs.audio){const i={role:"assistant",audio:{id:A.additional_kwargs.audio.id}};return[s,i]}return s})}class wg extends Rr{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","reasoningEffort","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model",reasoningEffort:"reasoning_effort"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","reasoningEffort","promptCacheKey","verbosity"]}getLsParams(e){const A=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:A.temperature??void 0,ls_max_tokens:A.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){var A,r;super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"promptCacheKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbosity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=(e==null?void 0:e.apiKey)??((A=e==null?void 0:e.configuration)==null?void 0:A.apiKey)??rn("OPENAI_API_KEY"),this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??rn("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=(e==null?void 0:e.reasoning)??(e==null?void 0:e.reasoningEffort)?{effort:e.reasoningEffort}:void 0,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.streaming=(e==null?void 0:e.streaming)??!1,this.streaming===!1&&(this.disableStreaming=!0),this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_getReasoningParams(e){if(!ed(this.model))return;let A;return this.reasoning!==void 0&&(A={...A,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(A={...A,...e.reasoning}),A}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Sn(e.json_schema.schema)?rD(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},n=o2(r),s={...this.clientConfig,baseURL:n,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new ue(s)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,A){return oD(e)?dD(e.metadata.customTool):yQ(e)?(A==null?void 0:A.strict)!==void 0?{...e,function:{...e.function,strict:A.strict}}:e:aD(e,A)}bindTools(e,A){let r;return(A==null?void 0:A.strict)!==void 0?r=A.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(n=>mg(n)?n:this._convertChatOpenAIToolToCompletionsTool(n,{strict:r})),...A})}async stream(e,A){return super.stream(e,this._combineCallOptions(A))}async invoke(e,A){return super.invoke(e,this._combineCallOptions(A))}_combineLLMOutput(...e){return e.reduce((A,r)=>(r&&r.tokenUsage&&(A.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,A.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,A.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),A),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let A=0,r=0,n=0;this.model==="gpt-3.5-turbo-0301"?(r=4,n=-1):(r=3,n=1);const s=await Promise.all(e.map(async a=>{var d,h,f,w,y,p;const i=await this.getNumTokens(a.content),o=await this.getNumTokens(gg(a)),l=a.name!==void 0?n+await this.getNumTokens(a.name):0;let u=i+r+o+l;const c=a;if(c._getType()==="function"&&(u-=2),(d=c.additional_kwargs)!=null&&d.function_call&&(u+=3),(h=c==null?void 0:c.additional_kwargs.function_call)!=null&&h.name&&(u+=await this.getNumTokens((f=c.additional_kwargs.function_call)==null?void 0:f.name)),(w=c.additional_kwargs.function_call)!=null&&w.arguments)try{u+=await this.getNumTokens(JSON.stringify(JSON.parse((y=c.additional_kwargs.function_call)==null?void 0:y.arguments)))}catch(m){console.error("Error parsing function arguments",m,JSON.stringify(c.additional_kwargs.function_call)),u+=await this.getNumTokens((p=c.additional_kwargs.function_call)==null?void 0:p.arguments)}return A+=u,u}));return A+=3,{totalCount:A,countPerMessage:s}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var n;return(n=r.message.additional_kwargs)!=null&&n.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,n)=>r+n,0)}async _getEstimatedTokenCountFromPrompt(e,A,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(A&&r!=="auto"){const s=sD(A);n+=await this.getNumTokens(s),n+=9}return A&&e.find(s=>s._getType()==="system")&&(n-=4),r==="none"?n+=1:typeof r=="object"&&(n+=await this.getNumTokens(r.name)+4),n}_getStructuredOutputMethod(e){const A={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((A==null?void 0:A.method)===void 0)return"jsonSchema"}else A.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return A.method}withStructuredOutput(e,A){let r,n,s,a;fD(e)?(r=e.schema,n=e.name,s=e.method,a=e.includeRaw):(r=e,n=A==null?void 0:A.name,s=A==null?void 0:A.method,a=A==null?void 0:A.includeRaw);let i,o;if((A==null?void 0:A.strict)!==void 0&&s==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(s=this._getStructuredOutputMethod({...A,method:s}),s==="jsonMode"){Sn(r)?o=g_.fromZodSchema(r):o=new w_;const d=Gr(r);i=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:n??"extract",...d}}})}else if(s==="jsonSchema"){const d={name:n??"extract",description:cg(r),schema:r,strict:A==null?void 0:A.strict},h=Gr(d.schema);if(i=this.withConfig({response_format:{type:"json_schema",json_schema:d},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:d.name,description:d.description,...h}}}),Sn(r)){const f=g_.fromZodSchema(r);o=ha.from(w=>"parsed"in w.additional_kwargs?w.additional_kwargs.parsed:f)}else o=new w_}else{let d=n??"extract";if(Sn(r)){const h=Gr(r);i=this.withConfig({tools:[{type:"function",function:{name:d,description:h.description,parameters:h}}],tool_choice:{type:"function",function:{name:d}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:d,...h}},...(A==null?void 0:A.strict)!==void 0?{strict:A.strict}:{}}),o=new y_({returnSingle:!0,keyName:d,zodSchema:r})}else{let h;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(h=r,d=r.name):(d=r.title??d,h={name:d,description:r.description??"",parameters:r});const f=Gr(r);i=this.withConfig({tools:[{type:"function",function:h}],tool_choice:{type:"function",function:{name:d}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:d,...f}},...(A==null?void 0:A.strict)!==void 0?{strict:A.strict}:{}}),o=new y_({returnSingle:!0,keyName:d})}}if(!a)return i.pipe(o);const l=Yu.assign({parsed:(d,h)=>o.invoke(d.raw,h)}),u=Yu.assign({parsed:()=>null}),c=l.withFallbacks({fallbacks:[u]});return lr.from([{raw:i},c])}}class pD extends wg{invocationParams(e){var s;let A;(e==null?void 0:e.strict)!==void 0?A=e.strict:this.supportsStrictToolCalling!==void 0&&(A=this.supportsStrictToolCalling);const r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(s=e==null?void 0:e.tools)!=null&&s.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:A}):void 0,tool_choice:iD(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const a=FQ(e==null?void 0:e.tool_choice);if(typeof a=="object"&&"type"in a){if(a.type==="function")return{type:"function",name:a.function.name};if(a.type==="allowed_tools")return{type:"allowed_tools",mode:a.allowed_tools.mode,tools:a.allowed_tools.tools};if(a.type==="custom")return{type:"custom",name:a.custom.name}}})(),text:(()=>{if(e!=null&&e.text)return e.text;const a=this._getResponseFormat(e==null?void 0:e.response_format);return(a==null?void 0:a.type)==="json_schema"?a.json_schema.schema!=null?{format:{type:"json_schema",schema:a.json_schema.schema,description:a.json_schema.description,name:a.json_schema.name,strict:a.json_schema.strict},verbosity:e==null?void 0:e.verbosity}:void 0:{format:a,verbosity:e==null?void 0:e.verbosity}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},n=this._getReasoningParams(e);return n!==void 0&&(r.reasoning=n),r}async _generate(e,A){var n;const r=this.invocationParams(A);if(r.stream){const s=this._streamResponseChunks(e,A);let a;for await(const i of s)i.message.response_metadata={...i.generationInfo,...i.message.response_metadata},a=(a==null?void 0:a.concat(i))??i;return{generations:a?[a]:[],llmOutput:{estimatedTokenUsage:(n=a==null?void 0:a.message)==null?void 0:n.usage_metadata}}}else{const s=this._convertMessagesToResponsesParams(e),a=await this.completionWithRetry({input:s,...r,stream:!1},{signal:A==null?void 0:A.signal,...A==null?void 0:A.options});return{generations:[{text:a.output_text,message:this._convertResponsesMessageToBaseMessage(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(e,A,r){const n=await this.completionWithRetry({...this.invocationParams(A),input:this._convertMessagesToResponsesParams(e),stream:!0},A);for await(const s of n){const a=this._convertResponsesDeltaToBaseMessageChunk(s);a!=null&&(yield a,await(r==null?void 0:r.handleLLMNewToken(a.text||"",{prompt:A.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:a})))}}async completionWithRetry(e,A){return this.caller.call(async()=>{var n,s;const r=this._getClientOptions(A);try{return((s=(n=e.text)==null?void 0:n.format)==null?void 0:s.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,r):await this.client.responses.create(e,r)}catch(a){throw UQ(a)}})}_convertResponsesMessageToBaseMessage(e){if(e.error){const o=new Error(e.error.message);throw o.name=e.error.code,o}let A;const r=[],n=[],s=[],a={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},i={};for(const o of e.output)if(o.type==="message")A=o.id,r.push(...o.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(i.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(i.refusal=l.refusal,[]):l));else if(o.type==="function_call"){const l={function:{name:o.name,arguments:o.arguments},id:o.call_id};try{n.push(pg(l,{returnId:!0}))}catch(u){let c;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(c=u.message),s.push(Fp(l,c))}i[cs]??(i[cs]={}),o.id&&(i[cs][o.call_id]=o.id)}else if(o.type==="reasoning")i.reasoning=o;else if(o.type==="custom_tool_call"){const l=lD(o);l?n.push(l):s.push(Fp(o,"Malformed custom tool call"))}else i.tool_outputs??(i.tool_outputs=[]),i.tool_outputs.push(o);return new Js({id:A,content:r,tool_calls:n,invalid_tool_calls:s,usage_metadata:e.usage,additional_kwargs:i,response_metadata:a})}_convertResponsesDeltaToBaseMessageChunk(e){var l,u;const A=[];let r={},n;const s=[],a={},i={};let o;if(e.type==="response.output_text.delta")A.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")A.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")o=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")s.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),i[cs]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))i.tool_outputs=[e.item];else if(e.type==="response.created")a.id=e.response.id,a.model_name=e.response.model,a.model=e.response.model;else if(e.type==="response.completed"){const c=this._convertResponsesMessageToBaseMessage(e.response);n=e.response.usage,((u=(l=e.response.text)==null?void 0:l.format)==null?void 0:u.type)==="json_schema"&&(i.parsed??(i.parsed=JSON.parse(c.text)));for(const[d,h]of Object.entries(e.response))d!=="id"&&(a[d]=h)}else if(e.type==="response.function_call_arguments.delta")s.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")r={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")i.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){const c=e.item.summary?e.item.summary.map((d,h)=>({...d,index:h})):void 0;i.reasoning={id:e.item.id,type:e.item.type,...c?{summary:c}:{}}}else if(e.type==="response.reasoning_summary_part.added")i.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else if(e.type==="response.reasoning_summary_text.delta")i.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new Vn({text:A.map(c=>c.text).join(""),message:new on({id:o,content:A,tool_call_chunks:s,usage_metadata:n,additional_kwargs:i,response_metadata:a}),generationInfo:r})}_convertMessagesToResponsesParams(e){return e.flatMap(A=>{var s,a,i,o;const r=A.additional_kwargs;let n=gg(A);if(n==="system"&&ed(this.model)&&(n="developer"),n==="function")throw new Error("Function messages are not supported in Responses API");if(n==="tool"){const l=A;return(r==null?void 0:r.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof l.content=="string")return{type:"computer_screenshot",image_url:l.content};if(Array.isArray(l.content)){const c=l.content.find(h=>h.type==="computer_screenshot");if(c)return c;const d=l.content.find(h=>h.type==="image_url");if(d)return{type:"computer_screenshot",image_url:typeof d.image_url=="string"?d.image_url:d.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:l.tool_call_id}:(s=l.metadata)!=null&&s.customTool?{type:"custom_tool_call_output",call_id:l.tool_call_id,output:l.content}:{type:"function_call_output",call_id:l.tool_call_id,id:(a=l.id)!=null&&a.startsWith("fc_")?l.id:void 0,output:typeof l.content!="string"?JSON.stringify(l.content):l.content}}if(n==="assistant"){if(!this.zdrEnabled&&A.response_metadata.output!=null&&Array.isArray(A.response_metadata.output)&&A.response_metadata.output.length>0&&A.response_metadata.output.every(f=>"type"in f))return A.response_metadata.output;const l=[];if(r!=null&&r.reasoning&&!this.zdrEnabled){const f=this._convertReasoningSummary(r.reasoning);l.push(f)}let{content:u}=A;r!=null&&r.refusal&&(typeof u=="string"&&(u=[{type:"output_text",text:u,annotations:[]}]),u=[...u,{type:"refusal",refusal:r.refusal}]),(typeof u=="string"||u.length>0)&&l.push({type:"message",role:"assistant",...A.id&&!this.zdrEnabled&&A.id.startsWith("msg_")?{id:A.id}:{},content:typeof u=="string"?u:u.flatMap(f=>f.type==="text"?{type:"output_text",text:f.text,annotations:f.annotations??[]}:f.type==="output_text"||f.type==="refusal"?f:[])});const c=r==null?void 0:r[cs];co(A)&&((i=A.tool_calls)!=null&&i.length)?l.push(...A.tool_calls.map(f=>uD(f)?{type:"custom_tool_call",id:f.call_id,call_id:f.id??"",input:f.args.input,name:f.name}:{type:"function_call",name:f.name,arguments:JSON.stringify(f.args),call_id:f.id,...this.zdrEnabled?{id:c==null?void 0:c[f.id]}:{}})):r!=null&&r.tool_calls&&l.push(...r.tool_calls.map(f=>({type:"function_call",name:f.function.name,call_id:f.id,arguments:f.function.arguments,...this.zdrEnabled?{id:c==null?void 0:c[f.id]}:{}})));const d=(o=A.response_metadata.output)!=null&&o.length?A.response_metadata.output:r.tool_outputs,h=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(d!=null){const f=d,w=f==null?void 0:f.filter(y=>h.includes(y.type));w.length>0&&l.push(...w)}return l}if(n==="user"||n==="system"||n==="developer"){if(typeof A.content=="string")return{type:"message",role:n,content:A.content};const l=[],u=A.content.flatMap(c=>(c.type==="mcp_approval_response"&&l.push({type:"mcp_approval_response",approval_request_id:c.approval_request_id,approve:c.approve}),Kn(c)?pE(c,xQ):c.type==="text"?{type:"input_text",text:c.text}:c.type==="image_url"?{type:"input_image",image_url:typeof c.image_url=="string"?c.image_url:c.image_url.url,detail:typeof c.image_url=="string"?"auto":c.image_url.detail}:c.type==="input_text"||c.type==="input_image"||c.type==="input_file"?c:[]));return u.length>0&&l.push({type:"message",role:n,content:u}),l}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${n}`),[]})}_convertReasoningSummary(e){const A=(e.summary.length>1?e.summary.reduce((r,n)=>{const s=r.at(-1);return s.index===n.index?s.text+=n.text:r.push(n),r},[{...e.summary[0]}]):e.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([n])=>n!=="index")));return{...e,summary:A}}_reduceChatOpenAITools(e,A){const r=[];for(const n of e)mg(n)?(n.type==="image_generation"&&(A!=null&&A.stream)&&(n.partial_images=1),r.push(n)):yQ(n)?r.push({type:"function",name:n.function.name,parameters:n.function.parameters,description:n.function.description,strict:(A==null?void 0:A.strict)??null}):SQ(n)&&r.push(cD(n));return r}}class mD extends wg{invocationParams(e,A){var i;let r;(e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let n={};(e==null?void 0:e.stream_options)!==void 0?n={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||A!=null&&A.streaming)&&(n={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(i=e==null?void 0:e.tools)!=null&&i.length?e.tools.map(o=>this._convertChatOpenAIToolToCompletionsTool(o,{strict:r})):void 0,tool_choice:FQ(e==null?void 0:e.tool_choice),response_format:this._getResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...n,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs,prompt_cache_key:(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,verbosity:(e==null?void 0:e.verbosity)??this.verbosity};(e==null?void 0:e.prediction)!==void 0&&(s.prediction=e.prediction),this.service_tier!==void 0&&(s.service_tier=this.service_tier),(e==null?void 0:e.service_tier)!==void 0&&(s.service_tier=e.service_tier);const a=this._getReasoningParams(e);return a!==void 0&&a.effort!==void 0&&(s.reasoning_effort=a.effort),ed(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}async _generate(e,A,r){var i,o;const n={},s=this.invocationParams(A),a=C_(e,this.model);if(s.stream){const l=this._streamResponseChunks(e,A,r),u={};for await(const y of l){y.message.response_metadata={...y.generationInfo,...y.message.response_metadata};const p=((i=y.generationInfo)==null?void 0:i.completion)??0;u[p]===void 0?u[p]=y:u[p]=u[p].concat(y)}const c=Object.entries(u).sort(([y],[p])=>parseInt(y,10)-parseInt(p,10)).map(([y,p])=>p),{functions:d,function_call:h}=this.invocationParams(A),f=await this._getEstimatedTokenCountFromPrompt(e,d,h),w=await this._getNumTokensFromGenerations(c);return n.input_tokens=f,n.output_tokens=w,n.total_tokens=f+w,{generations:c,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}else{const l=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:A==null?void 0:A.signal,...A==null?void 0:A.options}),{completion_tokens:u,prompt_tokens:c,total_tokens:d,prompt_tokens_details:h,completion_tokens_details:f}=(l==null?void 0:l.usage)??{};u&&(n.output_tokens=(n.output_tokens??0)+u),c&&(n.input_tokens=(n.input_tokens??0)+c),d&&(n.total_tokens=(n.total_tokens??0)+d),((h==null?void 0:h.audio_tokens)!==null||(h==null?void 0:h.cached_tokens)!==null)&&(n.input_token_details={...(h==null?void 0:h.audio_tokens)!==null&&{audio:h==null?void 0:h.audio_tokens},...(h==null?void 0:h.cached_tokens)!==null&&{cache_read:h==null?void 0:h.cached_tokens}}),((f==null?void 0:f.audio_tokens)!==null||(f==null?void 0:f.reasoning_tokens)!==null)&&(n.output_token_details={...(f==null?void 0:f.audio_tokens)!==null&&{audio:f==null?void 0:f.audio_tokens},...(f==null?void 0:f.reasoning_tokens)!==null&&{reasoning:f==null?void 0:f.reasoning_tokens}});const w=[];for(const y of(l==null?void 0:l.choices)??[]){const m={text:((o=y.message)==null?void 0:o.content)??"",message:this._convertCompletionsMessageToBaseMessage(y.message??{role:"assistant"},l)};m.generationInfo={...y.finish_reason?{finish_reason:y.finish_reason}:{},...y.logprobs?{logprobs:y.logprobs}:{}},co(m.message)&&(m.message.usage_metadata=n),m.message=new Js(Object.fromEntries(Object.entries(m.message).filter(([g])=>!g.startsWith("lc_")))),w.push(m)}return{generations:w,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async*_streamResponseChunks(e,A,r){var l,u,c,d,h,f,w,y,p,m;const n=C_(e,this.model),s={...this.invocationParams(A,{streaming:!0}),messages:n,stream:!0};let a;const i=await this.completionWithRetry(s,A);let o;for await(const g of i){const B=(l=g==null?void 0:g.choices)==null?void 0:l[0];if(g.usage&&(o=g.usage),!B)continue;const{delta:_}=B;if(!_)continue;const v=this._convertCompletionsDeltaToBaseMessageChunk(_,g,a);a=_.role??a;const C={prompt:A.promptIndex??0,completion:B.index??0};if(typeof v.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const Q={...C};B.finish_reason!=null&&(Q.finish_reason=B.finish_reason,Q.system_fingerprint=g.system_fingerprint,Q.model_name=g.model,Q.service_tier=g.service_tier),this.logprobs&&(Q.logprobs=B.logprobs);const S=new Vn({message:v,text:v.content,generationInfo:Q});yield S,await(r==null?void 0:r.handleLLMNewToken(S.text??"",C,void 0,void 0,void 0,{chunk:S}))}if(o){const g={...((u=o.prompt_tokens_details)==null?void 0:u.audio_tokens)!==null&&{audio:(c=o.prompt_tokens_details)==null?void 0:c.audio_tokens},...((d=o.prompt_tokens_details)==null?void 0:d.cached_tokens)!==null&&{cache_read:(h=o.prompt_tokens_details)==null?void 0:h.cached_tokens}},B={...((f=o.completion_tokens_details)==null?void 0:f.audio_tokens)!==null&&{audio:(w=o.completion_tokens_details)==null?void 0:w.audio_tokens},...((y=o.completion_tokens_details)==null?void 0:y.reasoning_tokens)!==null&&{reasoning:(p=o.completion_tokens_details)==null?void 0:p.reasoning_tokens}};yield new Vn({message:new on({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(g).length>0&&{input_token_details:g},...Object.keys(B).length>0&&{output_token_details:B}}}),text:""})}if((m=A.signal)!=null&&m.aborted)throw new Error("AbortError")}async completionWithRetry(e,A){const r=this._getClientOptions(A),n=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(async()=>{try{return n&&!e.stream?await this.client.chat.completions.parse(e,r):await this.client.chat.completions.create(e,r)}catch(s){throw UQ(s)}})}_convertCompletionsMessageToBaseMessage(e,A){const r=e.tool_calls;switch(e.role){case"assistant":{const n=[],s=[];for(const o of r??[])try{n.push(pg(o,{returnId:!0}))}catch(l){s.push(Fp(o,l.message))}const a={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(a.__raw_response=A);const i={model_name:A.model,...A.system_fingerprint?{usage:{...A.usage},system_fingerprint:A.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new Js({content:e.content||"",tool_calls:n,invalid_tool_calls:s,additional_kwargs:a,response_metadata:i,id:A.id})}default:return new fo(e.content||"",e.role??"unknown")}}_convertCompletionsDeltaToBaseMessageChunk(e,A,r){var o,l;const n=e.role??r,s=e.content??"";let a;e.function_call?a={function_call:e.function_call}:e.tool_calls?a={tool_calls:e.tool_calls}:a={},this.__includeRawResponse&&(a.__raw_response=A),e.audio&&(a.audio={...e.audio,index:A.choices[0].index});const i={usage:{...A.usage}};if(n==="user")return new Dc({content:s,response_metadata:i});if(n==="assistant"){const u=[];if(Array.isArray(e.tool_calls))for(const c of e.tool_calls)u.push({name:(o=c.function)==null?void 0:o.name,args:(l=c.function)==null?void 0:l.arguments,id:c.id,index:c.index,type:"tool_call_chunk"});return new on({content:s,tool_call_chunks:u,additional_kwargs:a,id:A.id,response_metadata:i})}else return n==="system"?new zi({content:s,response_metadata:i}):n==="developer"?new zi({content:s,response_metadata:i,additional_kwargs:{__openai_role__:"developer"}}):n==="function"?new Nc({content:s,additional_kwargs:a,name:e.name,response_metadata:i}):n==="tool"?new Ym({content:s,additional_kwargs:a,tool_call_id:e.tool_call_id,response_metadata:i}):new Hc({content:s,role:n,response_metadata:i})}}class yg extends wg{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??!1,this.responses=(e==null?void 0:e.responses)??new pD(e),this.completions=(e==null?void 0:e.completions)??new mD(e)}_useResponsesApi(e){var s,a,i,o;const A=(s=e==null?void 0:e.tools)==null?void 0:s.some(mg),r=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((a=e==null?void 0:e.reasoning)==null?void 0:a.summary)!=null||((i=this.reasoning)==null?void 0:i.summary)!=null,n=(o=e==null?void 0:e.tools)==null?void 0:o.some(SQ);return this.useResponsesApi||A||r||n}getLsParams(e){const A=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(A):this.completions.getLsParams(A)}invocationParams(e){const A=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(A):this.completions.invocationParams(A)}async _generate(e,A,r){return this._useResponsesApi(A)?this.responses._generate(e,A):this.completions._generate(e,A,r)}async*_streamResponseChunks(e,A,r){if(this._useResponsesApi(A)){yield*this.responses._streamResponseChunks(e,this._combineCallOptions(A),r);return}yield*this.completions._streamResponseChunks(e,this._combineCallOptions(A),r)}withConfig(e){const A=new yg(this.fields);return A.defaultOptions={...this.defaultOptions,...e},A}}var gD=({children:t,title:e,onClose:A,position:r="bottom-right",width:n=360,height:s=480,minWidth:a=280,minHeight:i=240,offset:o=16,zIndex:l=1e3,className:u,style:c,headerClassName:d,bodyClassName:h,closeButtonAriaLabel:f="Close",closeOnEscape:w=!0,draggable:y=!0,anchorRect:p})=>{let[m,g]=de.useState(!1),B=de.useRef(null),[_,v]=de.useState(!1),C=de.useRef(null),[Q,S]=de.useState(null);de.useEffect(()=>{if(!w)return;let z=T=>{T.key==="Escape"&&(A==null||A())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[w,A]);let R=(()=>{let z=`${o}px`;switch(r){case"top-left":return{top:z,left:z};case"top-right":return{top:z,right:z};case"bottom-left":return{bottom:z,left:z};case"bottom-right":default:return{bottom:z,right:z}}})(),j=(()=>{if(r!=="auto"||!p)return null;let z=window.innerWidth,T=window.innerHeight,O=o,$=p.top<T/2,N=p.left>z/2,F=$?["bottom","top"]:["top","bottom"],b=N?["right","left"]:["left","right"],I=[`${F[0]}-${b[0]}`,`${F[0]}-${b[1]}`,`${F[1]}-${b[0]}`,`${F[1]}-${b[1]}`];for(let H of I){let X=0,q=0;if(H==="bottom-right"?(X=p.bottom+O,q=p.right-n):H==="bottom-left"?(X=p.bottom+O,q=p.left):H==="top-right"?(X=p.top-s-O,q=p.right-n):(X=p.top-s-O,q=p.left),X>=0&&q>=0&&X+s<=T&&q+n<=z)return{top:X,left:q}}let P=Math.min(Math.max(p.bottom+O,0),T-s),k=Math.min(Math.max(p.right-n,0),z-n);return{top:P,left:k}})(),ne=z=>{if(!y)return;let T=B.current;if(!T)return;let O=T.getBoundingClientRect();C.current={x:z.clientX,y:z.clientY,top:O.top,left:O.left},S({top:O.top,left:O.left}),v(!0);let $=F=>{if(!C.current)return;let b=F.clientX-C.current.x,I=F.clientY-C.current.y;S({top:C.current.top+I,left:C.current.left+b})},N=()=>{v(!1),C.current=null,window.removeEventListener("pointermove",$),window.removeEventListener("pointerup",N)};window.addEventListener("pointermove",$),window.addEventListener("pointerup",N,{once:!0})};return U.jsxs("div",{ref:B,role:"dialog","aria-modal":"false",className:u,style:{position:"fixed",...Q?{top:Q.top,left:Q.left}:j?{top:j.top,left:j.left}:R,width:n,height:s,minWidth:a,minHeight:i,zIndex:l,background:"#ffffff",border:"1px solid rgba(0,0,0,0.06)",borderRadius:12,boxShadow:"0 10px 30px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.08)",display:"flex",flexDirection:"column",overflow:"hidden",userSelect:_?"none":void 0,...c},children:[U.jsxs("div",{className:d,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(0,0,0,0.06)",background:"#f9fafb",cursor:y?"move":void 0},onPointerDown:ne,children:[U.jsx("div",{style:{fontWeight:600,color:"#111827"},children:e}),U.jsx("button",{type:"button",onClick:A,"aria-label":f,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{width:28,height:28,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:"white",cursor:"pointer",color:m?"#ef4444":void 0,transition:"color 120ms ease"},children:U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[U.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),U.jsx("div",{className:h,style:{flex:1,overflow:"auto",background:"#ffffff"},children:t})]})},Vt=Ad.forwardRef(({children:t,onClick:e,label:A="Open chat",position:r="top-right",offset:n=8,icon:s,className:a,containerStyle:i,buttonClassName:o,buttonStyle:l,buttonSize:u=36,zIndex:c=10,disabled:d=!1,trigger:h,open:f,onOpenChange:w,renderButton:y,openWindowOnClick:p=!1,windowProps:m,windowContent:g},B)=>{let[_,v]=de.useState(!1),[C,Q]=de.useState(!1),S=de.useRef(null),R=de.useRef(null),j=de.useRef(null),[ne,z]=de.useState(null),T=h??"hover",O=de.useMemo(()=>{let k={position:"absolute"},H=`${n}px`;switch(r){case"top-left":return{...k,top:H,left:H};case"top-right":return{...k,top:H,right:H};case"bottom-left":return{...k,bottom:H,left:H};case"bottom-right":default:return{...k,bottom:H,right:H}}},[r,n]),$=T==="always"?!0:T==="manual"?!!f:_,N=k=>{w&&w(k)},F={onMouseEnter:T==="hover"?()=>{v(!0),N(!0)}:void 0,onMouseLeave:T==="hover"?()=>{v(!1),N(!1)}:void 0,onFocus:T==="focus"?()=>{v(!0),N(!0)}:void 0,onBlur:T==="focus"?()=>{v(!1),N(!1)}:void 0},b=!!(m!=null&&m.sendComponentImageAsContext);de.useEffect(()=>{C&&(async()=>{if(!b)return;let k=j.current;if(k)try{await new Promise(X=>requestAnimationFrame(()=>setTimeout(X,50)));let H=(await FO(k,{useCORS:!0,backgroundColor:null,scale:Math.min(2,Math.max(1,Math.ceil(k.offsetWidth/280)))})).toDataURL("image/png",.92);z(H)}catch{}})()},[C,b]);let I=k=>{S.current=k,typeof B=="function"?B(k):B&&typeof B=="object"&&(B.current=k)},P={type:"button","aria-label":A,onClick:k=>{e==null||e(k),!d&&p&&Q(!0)},className:o,disabled:d,style:{...O,zIndex:c,width:u,height:u,borderRadius:9999,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(0,0,0,0.08)",background:d?"#f3f4f6":"white",color:d?"#9ca3af":void 0,boxShadow:"0 2px 6px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)",cursor:d?"not-allowed":"pointer",transition:"opacity 120ms ease, transform 120ms ease",opacity:$?1:0,transform:$?"scale(1)":"scale(0.95)",pointerEvents:$?"auto":"none",...l},tabIndex:$?0:-1,"aria-hidden":$?void 0:!0,ref:I,visible:$};return U.jsxs("div",{className:a,style:{position:"relative",display:"inline-block",...i},...F,ref:R,children:[U.jsx("div",{ref:j,style:{display:"inline-block"},children:t}),y?y(P):U.jsx("button",{...P,children:s??U.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:Math.max(12,Math.floor(u*.5)),height:Math.max(12,Math.floor(u*.5)),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:U.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})})}),p&&C&&g&&U.jsx(gD,{...m,onClose:()=>{var k;(k=m==null?void 0:m.onClose)==null||k.call(m),Q(!1),z(null)},anchorRect:(m==null?void 0:m.anchorRect)??(S.current?S.current.getBoundingClientRect():null),children:(()=>{var k;if(b){if(!ne)return U.jsx("div",{style:{padding:12,color:"#6b7280",fontSize:14},children:"Loading..."});if(Ad.isValidElement(g)){let H=[...((k=g.props)==null?void 0:k.contextImages)??[],ne];try{return Ad.cloneElement(g,{contextImages:H})}catch{return g}}}return g})()})]})});Vt.displayName="ChatEnabled";var Bg="ai-hud:default-chatbot:history:";function wD(t){return`${Bg}${t}`}function Oa(t){try{typeof window<"u"&&window.localStorage.removeItem(wD(t))}catch{}}function yD(){try{if(typeof window>"u")return;let t=[];for(let e=0;e<window.localStorage.length;e++){let A=window.localStorage.key(e);A&&A.startsWith(Bg)&&t.push(A)}t.forEach(e=>window.localStorage.removeItem(e))}catch{}}async function BD(t){return new Promise((e,A)=>{let r=new FileReader;r.onload=()=>e(r.result),r.onerror=A,r.readAsDataURL(t)})}var Ur=({model:t="gpt-4o-mini",placeholderApiKey:e,systemPrompt:A="You are a helpful assistant.",welcome:r="Hi! How can I help you today?",className:n,style:s,conversationId:a,context:i,contextImages:o,inputPlaceholder:l,inputValue:u,tools:c,toolMaxIterations:d=3})=>{let h=(b=>{if(b&&b!=="REPLACE_WITH_YOUR_OPENAI_API_KEY")return b;try{let I=globalThis||{};if(typeof I.AI_HUD_OPENAI_API_KEY=="string"&&I.AI_HUD_OPENAI_API_KEY)return I.AI_HUD_OPENAI_API_KEY;if(typeof I.__AI_HUD_OPENAI_API_KEY__=="string"&&I.__AI_HUD_OPENAI_API_KEY__)return I.__AI_HUD_OPENAI_API_KEY__}catch{}try{let I=globalThis.process;if(I&&I.env&&typeof I.env.AI_HUD_OPENAI_API_KEY=="string")return I.env.AI_HUD_OPENAI_API_KEY}catch{}return null})(e),f=de.useRef(null);if(!a&&!f.current){let b=(()=>{try{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID()}catch{}return`conv_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`})();f.current=b}let w=a??f.current,y=`${Bg}${w}`,[p,m]=de.useState(()=>{try{let b=typeof window<"u"?window.localStorage.getItem(y):null;if(b){let I=JSON.parse(b);if(Array.isArray(I))return I}}catch{}return[{id:"welcome",role:"assistant",text:r}]}),[g,B]=de.useState(()=>typeof u=="string"?u:""),[_,v]=de.useState([]),[C,Q]=de.useState(!1),S=de.useRef(null),R=de.useCallback(()=>{var b;(b=S.current)==null||b.scrollIntoView({behavior:"smooth"})},[]),j=de.useCallback(b=>b?b.replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\times/g,"×").replace(/\\n/g,`
`):"",[]),{toolSchemas:ne,toolExecutors:z}=de.useMemo(()=>{if(!Array.isArray(c))return{toolSchemas:[],toolExecutors:{}};let b=c.map(P=>({type:"function",function:{name:P.function.name,description:P.function.description??"",parameters:P.function.parameters??{type:"object",properties:{}}}})),I={};for(let P of c)I[P.function.name]=async k=>await P.execute(k);return{toolSchemas:b,toolExecutors:I}},[c]),T=async b=>{let I=Array.from(b.target.files||[]);if(I.length===0)return;let P=await Promise.all(I.map(BD));v(k=>[...k,...P]),b.target.value=""},O=b=>{v(I=>I.filter((P,k)=>k!==b))},$=de.useCallback((b,I)=>{var k;let P=[];if(A&&P.push({role:"system",content:A}),typeof i<"u"){let H="";try{H=JSON.stringify(i)}catch{H=String(i)}P.push({role:"system",content:`Context: ${H}`})}if(Array.isArray(o)&&o.length>0){let H=o.filter(X=>typeof X=="string"&&(X.startsWith("data:image/")||X.startsWith("http")));if(H.length>0){let X=[{type:"text",text:"Context images"},...H.map(q=>({type:"image_url",image_url:{url:q}}))];P.push({role:"user",content:X})}}for(let H of b)if(H.role==="assistant")P.push({role:"assistant",content:H.text||""});else if((((k=H.images)==null?void 0:k.length)||0)>0){let X=[{type:"text",text:H.text||""},...H.images.map(q=>({type:"image_url",image_url:{url:q}}))];P.push({role:"user",content:X})}else P.push({role:"user",content:H.text||""});if(I)if(I.images.length>0){let H=[{type:"text",text:I.text},...I.images.map(X=>({type:"image_url",image_url:{url:X}}))];P.push({role:"user",content:H})}else P.push({role:"user",content:I.text});return console.log("result",P),P},[A,i]),N=de.useCallback(async()=>{var P,k;let b=g.trim();if(!b&&_.length===0)return;let I={id:String(Date.now()),role:"user",text:b||void 0,images:_.length?_:void 0};m(H=>[...H,I]),B(""),v([]),Q(!0);try{let H=[],X=$(p,{text:I.text||"",images:I.images||[]});for(let $t of X)if($t.role==="system")H.push(new ap($t.content));else if($t.role==="assistant")H.push(new Js($t.content));else if($t.role==="user"){let ga=$t.content;Array.isArray(ga)?H.push(new Zs({content:ga})):H.push(new Zs($t.content))}let q=new yg({modelName:t,temperature:.7,apiKey:h??void 0}),be=ne.length>0?q.bind({tools:ne}):q,Ee=await be.invoke(H),pa=0;for(;pa<d&&Array.isArray(Ee.tool_calls)&&Ee.tool_calls.length>0&&ne.length>0;){let $t=Ee.tool_calls,ga=[];for(let wa of $t){let Jn=wa.name??((P=wa.function)==null?void 0:P.name),go=wa.args??((k=wa.function)==null?void 0:k.arguments),Zn=go;if(typeof go=="string")try{Zn=JSON.parse(go)}catch{Zn=go}let _g=Jn?z[Jn]:void 0,Br=`Tool '${Jn}' not found`;try{_g&&(Br=await _g(Zn))}catch(Xn){Br=`Error from tool '${Jn}': ${(Xn==null?void 0:Xn.message)||String(Xn)}`}m(Xn=>[...Xn,{id:`${Date.now()}_${Jn}`,role:"tool",text:`Called ${Jn} with ${typeof Zn=="string"?Zn:JSON.stringify(Zn)}
→ ${typeof Br=="string"?Br:JSON.stringify(Br)}`}]),ga.push(new mE({tool_call_id:wa.id,content:typeof Br=="string"?Br:JSON.stringify(Br)}))}H=[...H,Ee,...ga],Ee=await be.invoke(H),pa+=1}let mn=typeof Ee.content=="string"?Ee.content:JSON.stringify(Ee.content),ma={id:String(Date.now()+1),role:"assistant",text:typeof mn=="string"?mn:String(mn)};m($t=>[...$t,ma]),setTimeout(R,0)}catch(H){let X={id:String(Date.now()+1),role:"assistant",text:`Error: ${(H==null?void 0:H.message)||"Failed to contact OpenAI"}`};m(q=>[...q,X])}finally{Q(!1)}},[$,g,p,_,e,t,R]),F=de.useMemo(()=>(g.trim().length>0||_.length>0)&&!C,[g,_.length,C]);return de.useEffect(()=>{try{typeof window<"u"&&window.localStorage.setItem(y,JSON.stringify(p))}catch{}},[p,y]),de.useEffect(()=>()=>{if(!a)try{typeof window<"u"&&window.localStorage.removeItem(y)}catch{}},[a,y]),U.jsxs("div",{className:n,style:{display:"flex",flexDirection:"column",height:"100%",...s},children:[U.jsxs("div",{style:{flex:1,overflow:"auto",padding:12,background:"#ffffff"},children:[p.map(b=>U.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:b.role==="user"?"flex-end":"flex-start"},children:U.jsxs("div",{style:{maxWidth:"80%",padding:"8px 10px",borderRadius:10,border:b.role==="tool"?"1px dashed rgba(0,0,0,0.2)":"1px solid rgba(0,0,0,0.06)",background:b.role==="user"?"#111827":b.role==="tool"?"#fff7ed":"#f3f4f6",color:b.role==="user"?"#ffffff":"#111827",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[b.role==="assistant"?j(b.text):b.text,b.images&&b.images.length>0&&U.jsx("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:b.images.map((I,P)=>U.jsx("img",{src:I,alt:"upload",style:{width:96,height:72,objectFit:"cover",borderRadius:8,border:"1px solid rgba(0,0,0,0.06)"}},P))})]})},b.id)),U.jsx("div",{ref:S})]}),U.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(0,0,0,0.06)",background:"#fafafa"},children:[U.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[U.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:T,style:{display:"none"},id:"ai-hud-chatbot-file"}),U.jsx("label",{htmlFor:"ai-hud-chatbot-file",children:U.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:36,height:36,border:"1px solid rgba(0,0,0,0.08)",borderRadius:8,background:"white",cursor:"pointer"},children:U.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[U.jsx("path",{d:"M18.5 12.5l-5 5-3-3-5 5"}),U.jsx("path",{d:"M20 7a4 4 0 0 0-8 0v10a4 4 0 0 0 8 0Z"})]})})}),U.jsx("input",{value:g,onChange:b=>B(b.target.value),placeholder:l??"Type a message...",onKeyDown:b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),F&&N())},style:{flex:1,height:36,border:"1px solid rgba(0,0,0,0.15)",borderRadius:8,padding:"0 10px"}}),U.jsx("button",{type:"button",disabled:!F,onClick:()=>void N(),style:{height:36,padding:"0 12px",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:F?"#111827":"#e5e7eb",color:F?"#ffffff":"#9ca3af",cursor:F?"pointer":"not-allowed"},children:"Send"})]}),_.length>0&&U.jsx("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:_.map((b,I)=>U.jsxs("div",{style:{position:"relative"},children:[U.jsx("img",{src:b,alt:"selected",style:{width:64,height:48,objectFit:"cover",borderRadius:6,border:"1px solid rgba(0,0,0,0.06)"}}),U.jsx("button",{type:"button",onClick:()=>O(I),"aria-label":"Remove image",style:{position:"absolute",top:-6,right:-6,width:20,height:20,borderRadius:9999,border:"1px solid rgba(0,0,0,0.08)",background:"white",cursor:"pointer"},children:"×"})]},I))})]})]})};function _D(){const[t,e]=de.useState(()=>{try{return window.AI_HUD_OPENAI_API_KEY||""}catch{return""}});return de.useEffect(()=>{try{window.AI_HUD_OPENAI_API_KEY=t||void 0}catch{}},[t]),U.jsxs("div",{className:"container",children:[U.jsxs("h1",{className:"mb-2",children:[U.jsx("code",{children:"<ChatEnabled>"})," examples"]}),U.jsx("p",{className:"text-muted",children:"Chat with any/all components"}),U.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h3",{children:"Key"})}),U.jsxs("div",{className:"col-12 col-md",children:[U.jsx("label",{htmlFor:"openai-key",style:{fontSize:14,color:"#374151"},children:"OpenAI API key:"}),U.jsx("input",{id:"openai-key",type:"password",value:t,onChange:A=>e(A.target.value),placeholder:"sk-...",className:"form-control d-inline-block",style:{maxWidth:360}}),U.jsx("button",{onClick:()=>e(""),className:"btn btn-outline-secondary ms-2",children:"Clear"})]})]}),U.jsxs("div",{className:"row gy-2 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h3",{children:"Clear Conversations"})}),U.jsx("div",{className:"col-12 col-md",children:U.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[U.jsx("button",{onClick:()=>Oa("example-left"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot"'}),U.jsx("button",{onClick:()=>Oa("example-auto"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot with auto position"'}),U.jsx("button",{onClick:()=>Oa("example-context"),className:"btn btn-outline-secondary",children:'Clear "DefaultChatbot with context"'}),U.jsx("button",{onClick:()=>Oa("example-logo"),className:"btn btn-outline-secondary",children:'Clear "Visual context (as image) - text"'}),U.jsx("button",{onClick:()=>Oa("example-red"),className:"btn btn-outline-secondary",children:'Clear "Visual context (as image) - plot"'}),U.jsx("button",{onClick:()=>yD(),className:"btn btn-danger",children:"Clear all"})]})})]}),U.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h2",{children:"Button"})}),U.jsx("div",{className:"col-12 col-md",children:U.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Hover (default)"}),U.jsx(Vt,{onClick:()=>console.log("Chat clicked (hover)"),position:"top-right",offset:10,children:U.jsx("div",{className:"card",children:"Hover me"})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Always visible"}),U.jsx(Vt,{trigger:"always",buttonSize:44,zIndex:20,onClick:()=>console.log("Chat clicked (always)"),children:U.jsx("div",{className:"card",children:"Always visible"})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Custom button"}),U.jsx(Vt,{renderButton:A=>U.jsx("button",{...A,style:{...A.style,background:"#111827",color:"white"},children:"Chat"}),onClick:()=>console.log("Chat clicked (custom)"),position:"bottom-right",children:U.jsx("div",{className:"card",children:"Custom button"})})]})]})})]}),U.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h2",{children:"Window"})}),U.jsx("div",{className:"col-12 col-md",children:U.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Floating window"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Chat (custom JSX context)",position:"bottom-right",width:360,height:420,draggable:!1},windowContent:U.jsxs("div",{style:{padding:12},children:[U.jsx("p",{style:{margin:0},children:"Hello! This is a floating window."}),U.jsx("p",{style:{marginTop:8,color:"#6b7280"},children:"Replace this with your chat UI."})]}),children:U.jsx("div",{className:"card",children:"Open window"})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Chat (Left and draggable)",position:"bottom-left",width:360,height:420},windowContent:U.jsx(Ur,{conversationId:"example-left",placeholderApiKey:t}),children:U.jsx("div",{className:"card",children:U.jsxs("span",{children:["Open window",U.jsx("br",{}),"(remembers conversation)"]})})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot with auto position"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Chat (Auto)",position:"auto",width:360,height:420},windowContent:U.jsx(Ur,{conversationId:"example-auto",placeholderApiKey:t}),children:U.jsxs("div",{className:"card",children:["Open window",U.jsx("br",{}),"(remembers conversation)"]})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot without conversationId"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Chat (Closing clears conversation)",position:"auto",width:360,height:420},windowContent:U.jsx(Ur,{placeholderApiKey:t}),children:U.jsxs("div",{className:"card",children:["Open window twice",U.jsx("br",{}),"(doesn't remember conversation)"]})})]})]})})]}),U.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h2",{children:"Context"})}),U.jsx("div",{className:"col-12 col-md",children:U.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot with context"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Chat with Context",position:"auto",width:360,height:420},windowContent:U.jsx(Ur,{conversationId:"example-context",context:{userId:123,plan:"pro",features:["analytics","exports"],locale:"en-US"},systemPrompt:"You are a helpful assistant. Use the provided context when relevant.",welcome:"Ask me about what context I have.",placeholderApiKey:t,inputValue:"What context do you have?"}),children:U.jsxs("div",{className:"card",children:["Open window (context)",U.jsx("br",{}),U.jsx("br",{}),U.jsxs("div",{children:["Context passed: ",U.jsx("br",{}),U.jsx("code",{children:'userId: 123, plan: "pro", features: ["analytics", "exports"], locale: "en-US"'})]})]})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot with visual context"}),U.jsx(Vt,{openWindowOnClick:!0,position:"top-left",windowProps:{title:"Visual context (as image)",position:"auto",width:360,height:420,sendComponentImageAsContext:!0},windowContent:U.jsx(Ur,{conversationId:"example-red",welcome:"I can see the component's content, ask me anything about it.",inputValue:"Which number is in red color?",placeholderApiKey:t}),children:U.jsxs("span",{children:["24 and ",U.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"18"})," are my favorite numbers."]})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"DefaultChatbot with visual context"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Visual context (as image)",position:"auto",width:360,height:420,sendComponentImageAsContext:!0},windowContent:U.jsx(Ur,{conversationId:"example-logo",welcome:"I can see the component's content, ask me anything about it.",inputValue:"What is this plot about?",placeholderApiKey:t}),children:U.jsx("img",{height:"220px",width:"275px",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Price-Earnings_Ratios_as_a_Predictor_of_Twenty-Year_Returns_%28Shiller_Data%29.png/760px-Price-Earnings_Ratios_as_a_Predictor_of_Twenty-Year_Returns_%28Shiller_Data%29.png",alt:"placeholder"})})]})]})})]}),U.jsxs("div",{className:"row gy-3 align-items-start mb-3",children:[U.jsx("div",{className:"col-12 col-md-2",children:U.jsx("h2",{children:"Tool(s) calling"})}),U.jsx("div",{className:"col-12 col-md",children:U.jsxs("div",{className:"d-flex flex-row flex-wrap gap-3",children:[U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Calculator tool"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Tools: Calculator",position:"auto",width:360,height:420},windowContent:U.jsx(Ur,{conversationId:"example-tools-calc",placeholderApiKey:t,systemPrompt:"You can use a calculator tool to compute expressions when needed.",inputPlaceholder:"Ask: what is (23*7 + 42)/5?",inputValue:"What is (23*7 + 42)/5?",tools:[{type:"function",function:{name:"calculator",description:"Evaluate a basic arithmetic expression like '2 + 2 * 3'",parameters:{type:"object",properties:{expression:{type:"string",description:"Math expression to evaluate"}},required:["expression"]}},async execute(A){const r=typeof A=="string"?A:(A==null?void 0:A.expression)??"";try{const n=Function(`"use strict"; return (${r})`)();return String(n)}catch(n){return`calc error: ${(n==null?void 0:n.message)||String(n)}`}}}]}),children:U.jsx("div",{className:"card",children:"Open window (tools)"})})]}),U.jsxs("div",{className:"example-container",children:[U.jsx("h3",{children:"Calculator & jokes tool"}),U.jsx(Vt,{openWindowOnClick:!0,windowProps:{title:"Tools: Calculator + Jokes",position:"auto",width:360,height:420},windowContent:U.jsx(Ur,{conversationId:"example-tools-2",placeholderApiKey:t,systemPrompt:"You can use a calculator tool to compute expressions when needed.",inputPlaceholder:"Ask: Repeat a joke 1+2 number of times. Use the calculator tool to find the mathematical answer.",inputValue:"Repeat a joke 1+2 number of times. Use the calculator tool to find the mathematical answer.",tools:[{type:"function",function:{name:"calculator",description:"Evaluate a basic arithmetic expression like '2 + 2 * 3'",parameters:{type:"object",properties:{expression:{type:"string",description:"Math expression to evaluate"}},required:["expression"]}},async execute(A){const r=typeof A=="string"?A:(A==null?void 0:A.expression)??"";try{const n=Function(`"use strict"; return (${r})`)();return String(n)}catch(n){return`calc error: ${(n==null?void 0:n.message)||String(n)}`}}},{type:"function",function:{name:"joke-generator",description:"Tells a joke",parameters:{type:"object",properties:{},required:[]}},async execute(A){try{const r=Function('"use strict"; return ("Why did the chicken cross the road? To get to the other side.")')();return String(r)}catch(r){return`joke error: ${(r==null?void 0:r.message)||String(r)}`}}}]}),children:U.jsx("div",{className:"card",children:"Open window (tools)"})})]})]})})]})]})}const vD=document.getElementById("root");L0(vD).render(U.jsx(_D,{}));
